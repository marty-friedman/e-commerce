!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=79)}([function(e,t){e.exports=angular},function(e,t,n){"use strict";n(16);var i=n(17);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b}),n.d(t,"c",function(){return i.c}),n.d(t,"d",function(){return i.d}),n.d(t,"e",function(){return i.e}),n.d(t,"f",function(){return i.f}),n.d(t,"g",function(){return i.g}),n.d(t,"h",function(){return i.h}),n.d(t,"i",function(){return i.i}),n.d(t,"j",function(){return i.j}),n.d(t,"k",function(){return i.k}),n.d(t,"l",function(){return i.l}),n.d(t,"m",function(){return i.m}),n.d(t,"n",function(){return i.n}),n.d(t,"o",function(){return i.o});n(54),n(58),n(60)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.lodash=e}return e.$inject=["lodash"],e.prototype.makeCloneable=function(e){var t=this,n=this.lodash.cloneDeepWith(e,function(e){return void 0===e||null===e||t.isPrimitive(n)?e:e.then?null:"function"==typeof e?null:t.lodash.isElement(e)?null:"string"!=typeof e&&e.hasOwnProperty("length")&&!e.forEach?null:e});return void 0===n||null===n||this.isPrimitive(n)?n:n.hasOwnProperty("length")||n.forEach?n.map(function(e){return t.makeCloneable(e)}):Object.keys(n).reduce(function(e,i){return 0!==i.indexOf("$")&&(e[i]=t.makeCloneable(n[i])),e},{})},e.prototype.isPrimitive=function(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e},e}()},function(e,t,n){"use strict";var i=n(10);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b});var r=n(13);n.d(t,"f",function(){return r.a}),n.d(t,"g",function(){return r.b});var o=n(62);n.d(t,"c",function(){return o.a});var a=n(63);n.d(t,"d",function(){return a.a});var s=n(64);n.d(t,"e",function(){return s.a});var l=n(65);n.d(t,"h",function(){return l.a});var c=n(66);n.d(t,"k",function(){return c.a});var u=n(67);n.d(t,"l",function(){return u.a});var d=n(68);n.d(t,"j",function(){return d.a});var p=n(69);n.d(t,"m",function(){return p.a});var h=n(70);n.d(t,"n",function(){return h.a});var f=n(71);n.d(t,"o",function(){return f.a});var g=n(72);n.d(t,"p",function(){return g.a});var m=n(73);n.d(t,"i",function(){return m.a});var v=n(74);n.d(t,"q",function(){return v.a});var y=n(75);n.d(t,"r",function(){return y.a});var E=n(76);n.d(t,"s",function(){return E.a})},function(e,t,n){"use strict"},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,i){void 0===i&&(i=""),this.text=e,this.truncatedText=t,this.truncated=n,this.ellipsis=i}return e.prototype.getUntruncatedText=function(){return this.text},e.prototype.getTruncatedText=function(){return this.truncatedText+this.ellipsis},e.prototype.isTruncated=function(){return this.truncated},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.lodash=e,this.cloneableUtils=t}return Object.defineProperty(e.prototype,"gatewayId",{get:function(){return"featureService"},enumerable:!0,configurable:!0}),e.prototype.register=function(e){return this._validate(e),this._featuresToAlias=this._featuresToAlias||{},this._featuresToAlias[e.key]={enablingCallback:e.enablingCallback,disablingCallback:e.disablingCallback},delete e.enablingCallback,delete e.disablingCallback,this._registerAliases(this.cloneableUtils.makeCloneable(e))},e.prototype.enable=function(e){this._featuresToAlias&&this._featuresToAlias[e]?this._featuresToAlias[e].enablingCallback():this._remoteEnablingFromInner(e)},e.prototype.disable=function(e){this._featuresToAlias&&this._featuresToAlias[e]?this._featuresToAlias[e].disablingCallback():this._remoteDisablingFromInner(e)},e.prototype.getFeatureProperty=function(e,t){"proxyFunction";return null},e.prototype.addToolbarItem=function(e){"proxyFunction";return null},e.prototype.addDecorator=function(e){"proxyFunction";return null},e.prototype.addContextualMenuButton=function(e){"proxyFunction";return null},e.prototype._remoteEnablingFromInner=function(e){"proxyFunction";return null},e.prototype._remoteDisablingFromInner=function(e){"proxyFunction";return null},e.prototype._registerAliases=function(e){"proxyFunction";return null},e.prototype._validate=function(e){if(this.lodash.isEmpty(e.key))throw new Error("featureService.configuration.key.error.required");if(this.lodash.isEmpty(e.nameI18nKey))throw new Error("featureService.configuration.nameI18nKey.error.required");if(!this.lodash.isFunction(e.enablingCallback))throw new Error("featureService.configuration.enablingCallback.error.not.function");if(!this.lodash.isFunction(e.disablingCallback))throw new Error("featureService.configuration.disablingCallback.error.not.function")},e}()},function(e,t,n){"use strict";function i(e,t){return r()[e]=t,t}function r(){return window.smarteditcommons=window.smarteditcommons||{},window.smarteditcommons}n.d(t,"a",function(){return o});var o=new(function(){function e(){this.annotationFactoryMap={}}return e.prototype.setMethodAnnotationFactory=function(e,t){return this.annotationFactoryMap[e]=t,t},e.prototype.getMethodAnnotationFactory=function(e){var t=this;return i(e,function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return function(i,r,o){var a=o.value;o.value=function(){var o=t.annotationFactoryMap[e];if(o)return o(n)(i,r,a.bind(this),arguments);throw new Error("annotation '"+e+"' is used but its MethodAnnotationFactory may not have been added to the dependency injection")}}})},e}())},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.prototype.updateUrlParameter=function(e,t,n){var i=e.indexOf("#"),r=-1===i?"":e.substr(i);e=-1===i?e:e.substr(0,i);var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return(e=e.match(o)?e.replace(o,"$1"+t+"="+n+"$2"):e+a+t+"="+n)+r},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(59),r=(n.n(i),function(){function e(){}return e.prototype.sha1Hash=function(e){return i.SHA1(e).toString()},e}())},function(e,t,n){"use strict";var i=n(11);n.d(t,"a",function(){return i.a});var r=n(12);n.d(t,"b",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(0),r=(n.n(i),function(){function e(e,t,n,i,r,o,a,s,l){this.configurationExtractorService=e,this.sharedDataService=t,this.injectJS=n,this.$log=i,this.$http=r,this.$q=o,this.WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY=a,this.smartEditBootstrapGateway=s,this.lodash=l}return e.$inject=["configurationExtractorService","sharedDataService","injectJS","$log","$http","$q","WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY","smartEditBootstrapGateway","lodash"],e.prototype.bootstrapSmartEditContainer=function(){i.bootstrap(document,["smarteditcontainer"])},e.prototype.addDependencyToSmartEditContainer=function(e){try{i.module(e),this.$log.debug('Adding app: "'+e+'" to smarteditcontainer'),i.module("smarteditcontainer").requires.push(e)}catch(t){this.$log.error("Failed to load outer module "+e+"; SmartEdit functionality may be compromised.")}},e.prototype.bootstrapContainerModules=function(e){var t=this,n=this.configurationExtractorService.extractSEContainerModules(e),r=this._orderApplications(n.applications);this.$log.debug("outerAppLocations are:",r),this.sharedDataService.set("authenticationMap",n.authenticationMap),this.sharedDataService.set("credentialsMap",e["authentication.credentials"]),i.module("smarteditcontainer").constant("domain",e.domain).constant("smarteditroot",e.smarteditroot).constant(this.WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY,e[this.WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY]||[]),this.injectJS.execute({srcs:r.map(function(e){return e.location}),callback:function(){r.forEach(function(e){t.addDependencyToSmartEditContainer(e.name)}),t.bootstrapSmartEditContainer()}})},e.prototype.bootstrapSEApp=function(e){var t=this,n=this.configurationExtractorService.extractSEModules(e),i=this._orderApplications(n.applications);this.sharedDataService.set("authenticationMap",n.authenticationMap),this.sharedDataService.set("credentialsMap",e["authentication.credentials"]);var r={properties:{domain:e.domain,smarteditroot:e.smarteditroot},js:[e.smarteditroot+"/static-resources/dist/smartedit/js/prelibraries.js",e.smarteditroot+"/static-resources/thirdparties/ckeditor/ckeditor.js",e.smarteditroot+"/static-resources/dist/smartedit/js/presmartedit.js"],css:[e.smarteditroot+"/static-resources/dist/smartedit/css/inner-styling.css"]};r.properties[this.WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY]=e[this.WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY];var o=[];return this.$q.all(i.map(function(e,n){var i=t.$q.defer();return t.$http.get(e.location).then(function(){o.push(e),i.resolve()},function(n){t.$log.error("Failed to load application '"+e.name+"' from location "+e.location+"; SmartEdit functionality may be compromised."),i.resolve()}),i.promise})).then(function(){r.js=r.js.concat(o.map(function(e){return e.location})),r.js.push(e.smarteditroot+"/static-resources/dist/smartedit/js/postsmartedit.js"),r.properties.applications=o.map(function(e){return e.name}),t.smartEditBootstrapGateway.publish("bundle",{resources:r})})},e.prototype._orderApplications=function(e){var t=this,n=e.filter(function(e){return!e.extends}),i=e.filter(function(e){return!!e.extends}).filter(function(n){var i=t.lodash.findIndex(e,function(e){return e.name===n.extends});return-1===i&&t.$log.error("Application "+n.name+" located at "+n.location+" is ignored because it extends an unknown application '"+n.extends+"'; SmartEdit functionality may be compromised."),i>-1});return this._addExtendingAppsInOrder(n,i)},e.prototype._addExtendingAppsInOrder=function(e,t,n){var i=this;n=n||1;var r=[];return t.forEach(function(t){var o=i.lodash.findIndex(e,function(e){return e.name===t.extends});o>-1?(console.debug("pass "+n+", "+t.name+" requiring "+t.extends+" found it at index "+o+" ("+e.map(function(e){return e.name})+")"),e.splice(o+1,0,t)):(console.debug("pass "+n+", "+t.name+" requiring "+t.extends+" did not find it  ("+e.map(function(e){return e.name})+")"),r.push(t))}),r.length?this._addExtendingAppsInOrder(e,r,++n):e},e}())},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i;!function(e){e[e.SMARTEDITCONTAINER=0]="SMARTEDITCONTAINER",e[e.SMARTEDIT=1]="SMARTEDIT"}(i||(i={}));var r=function(){function e(e){this.lodash=e}return e.$inject=["lodash"],e.prototype.extractSEContainerModules=function(e){return this._getAppsAndLocations(e,i.SMARTEDITCONTAINER)},e.prototype.extractSEModules=function(e){return this._getAppsAndLocations(e,i.SMARTEDIT)},e.prototype._getAppsAndLocations=function(e,t){var n,r=this;switch(t){case i.SMARTEDITCONTAINER:n="smartEditContainerLocation";break;case i.SMARTEDIT:n="smartEditLocation"}var o=this.lodash.map(e,function(e,t){return{key:t,value:e}}).reduce(function(t,i){if(0===i.key.indexOf("applications")&&"string"==typeof i.value[n]){var o={};o.name=i.key.split(".")[1];var a=i.value[n];/^https?\:\/\//.test(a)?o.location=a:o.location=e.domain+a;var s=i.value.extends;s&&(o.extends=s),t.applications.push(o),t.authenticationMap=r.lodash.merge(t.authenticationMap,i.value.authenticationMap)}else"authenticationMap"===i.key&&(t.authenticationMap=r.lodash.merge(t.authenticationMap,i.value));return t},{applications:[],authenticationMap:{}});return t===i.SMARTEDITCONTAINER?o.applications.push({name:"administration",location:[e.smarteditroot,"/static-resources/smarteditcontainer/modules/administrationModule.js"].join("")}):t===i.SMARTEDIT&&o.applications.push({name:"systemModule",location:[e.smarteditroot,"/static-resources/smartedit/modules/systemModule.js"].join("")}),o},e}()},function(e,t,n){"use strict";var i=n(14);n.d(t,"b",function(){return i.a});var r=n(15);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,i,r){this.lodash=t,this.systemEventService=n,this.EVENT_NOTIFICATION_CHANGED=i,this.$q=r,this.notifications=[],e.initForService(this,["pushNotification","removeNotification","removeAllNotifications"],"SE_NOTIFICATION_SERVICE_GATEWAY_ID")}return e.$inject=["gatewayProxy","lodash","systemEventService","EVENT_NOTIFICATION_CHANGED","$q"],e.prototype.pushNotification=function(e){if(this._validate(e),this.getNotification(e.id))throw new Error('notificationService.pushNotification: Notification already exists with ID "'+e.id+'"');return this.notifications.push(this.lodash.clone(e)),this.systemEventService.sendAsynchEvent(this.EVENT_NOTIFICATION_CHANGED),this.$q.when()},e.prototype.removeNotification=function(e){return this.lodash.remove(this.notifications,function(t){return t.id===e}),this.systemEventService.sendAsynchEvent(this.EVENT_NOTIFICATION_CHANGED),this.$q.when()},e.prototype.removeAllNotifications=function(){return this.notifications=[],this.systemEventService.sendAsynchEvent(this.EVENT_NOTIFICATION_CHANGED),this.$q.when()},e.prototype.isNotificationDisplayed=function(e){return!!this.getNotification(e)},e.prototype.getNotification=function(e){return this.lodash.find(this.notifications,["id",e])},e.prototype.getNotifications=function(){var e=this.lodash.clone(this.notifications);return this.lodash.reverse(e)},e.prototype._validate=function(e){if(!e)throw new Error("notificationService.pushNotification: Configuration is required");if(this.lodash.isEmpty(e.id))throw new Error("notificationService.pushNotification: Notification ID cannot be undefined or null or empty");if(!e.hasOwnProperty("template")&&!e.hasOwnProperty("templateUrl"))throw new Error("notificationService.pushNotification: Configuration must contain a template or template URL");if(e.hasOwnProperty("template")&&e.hasOwnProperty("templateUrl"))throw new Error("notificationService.pushNotification: Configuration cannot contain both a template and template URL; use one or the other")},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t,n,i){var r=e.call(this)||this;return r.$document=n,r.$q=i,t.initForService(r,["stopDetection","_remoteStartDetection","_remoteStopDetection","_callCallback"],"SE_NOTIFICATION_MOUSE_LEAVE_DETECTION_SERVICE_GATEWAY_ID"),r.notificationPanelBounds=null,r.mouseLeaveCallback=null,r._onMouseMove=r._onMouseMove.bind(r),r}return r(t,e),t.$inject=["gatewayProxy","$document","$q"],t.prototype.startDetection=function(e,t,n){if(this.validateBounds(e),!n)throw new Error("Callback function is required");return this.notificationPanelBounds=e,this.mouseLeaveCallback=n,this.$document.on("mousemove",this._onMouseMove),t&&(this.validateBounds(t),this._remoteStartDetection(t)),this.$q.when()},t.prototype.stopDetection=function(){return this.$document.off("mousemove",this._onMouseMove),this.notificationPanelBounds=null,this.mouseLeaveCallback=null,this._remoteStopDetection(),this.$q.when()},t.prototype._callCallback=function(){return this._getCallback().then(function(e){e&&e()}),this.$q.when()},t.prototype._getBounds=function(){return this.$q.when(this.notificationPanelBounds)},t.prototype._getCallback=function(){return this.$q.when(this.mouseLeaveCallback)},t.prototype.validateBounds=function(e){if(!e)throw new Error("Bounds are required for mouse leave detection");if(!e.hasOwnProperty("x"))throw new Error("Bounds must contain the x coordinate");if(!e.hasOwnProperty("y"))throw new Error("Bounds must contain the y coordinate");if(!e.hasOwnProperty("width"))throw new Error("Bounds must contain the width dimension");if(!e.hasOwnProperty("height"))throw new Error("Bounds must contain the height dimension")},t}(i.b)},function(e,t,n){"use strict";n(2),n(4),n(5)},function(e,t,n){"use strict";n(18),n(7);var i=n(37);n.d(t,"n",function(){return i.a});var r=n(38);n.d(t,"o",function(){return r.a});var o=n(6);n.d(t,"a",function(){return o.a});var a=n(39);n.d(t,"b",function(){return a.a});n(40);var s=n(41);n.d(t,"c",function(){return s.a});var l=n(42);n.d(t,"d",function(){return l.a});var c=n(43);n.d(t,"e",function(){return c.a});var u=n(44);n.d(t,"f",function(){return u.a});var d=n(45);n.d(t,"g",function(){return d.a});var p=n(46);n.d(t,"h",function(){return p.a});var h=n(47);n.d(t,"j",function(){return h.a});var f=n(48);n.d(t,"k",function(){return f.a});var g=n(49);n.d(t,"l",function(){return g.a});var m=n(50);n.d(t,"m",function(){return m.a});var v=n(51);n.d(t,"i",function(){return v.a})},function(e,t,n){"use strict";var i=n(19),r=(n.n(i),n(20)),o=(n.n(r),n(21)),a=(n.n(o),n(22)),s=(n.n(a),n(23)),l=(n.n(s),n(6),n(24)),c=(n.n(l),n(25)),u=(n.n(c),n(26)),d=(n.n(u),n(27)),p=(n.n(d),n(28)),h=(n.n(p),n(29),n(2),n(32)),f=(n.n(h),n(33)),g=(n.n(f),n(34)),m=(n.n(g),n(4),n(35)),v=(n.n(m),n(36));n.n(v)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var i=n(0),r=(n.n(i),n(30));i.module("translationServiceModule",["pascalprecht.translate","i18nInterceptorModule","operationContextServiceModule"]).factory("$translateStaticFilesLoader",r.a).config(["$translateProvider","I18NAPIROOT","UNDEFINED_LOCALE",function(e,t,n){"ngInject";e.useStaticFilesLoader({prefix:"/"+t+"/",suffix:""}),e.preferredLanguage(n),e.useSanitizeValueStrategy("escapeParameters")}]).run(["operationContextService","I18N_RESOURCE_URI","OPERATION_CONTEXT",function(e,t,n){"ngInject";e.register(t,n.TOOLING)}])},function(e,t,n){"use strict";function i(e,t,n){"ngInject";return r.bind(void 0,e,t,n)}function r(e,t,n,i){if(!(i&&(o.isArray(i.files)||o.isString(i.prefix)&&o.isString(i.suffix))))throw new Error("Couldn't load translation static files, no files and prefix or suffix specified!");i.files=i.files||[new a.a(i.prefix,i.suffix)];var r=function(e){if(!e||!o.isString(e.prefix)||!o.isString(e.suffix))throw new Error("Couldn't load translation static files, no files and prefix or suffix specified!");var t=[e.prefix,i.key,e.suffix].join("");return o.isObject(i.fileMap)&&i.fileMap[t]&&(t=i.fileMap[t]),n.get(t).get(i.$http)},s=i.files.map(function(e){return r(new a.a(e.prefix,e.suffix,i.key))});return e.all(s).then(function(e){var n={};return e.forEach(function(e){delete e.$resolved,delete e.$promise,t.merge(n,e)}),n})}i.$inject=["$q","lodash","restServiceFactory"],t.a=i;var o=n(0),a=(n.n(o),n(31))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){return function(e,t,n){this.prefix=e,this.suffix=t,this.key=n}}()},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(e){"ngInject";return r.a.setMethodAnnotationFactory("cache",function(t){return function(n,i,r){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return e.info("will cache with region '"+t[0]+"' and priority "+t[1]),r.apply(this,o)}})}i.$inject=["$log"],t.a=i;var r=n(7);r.a.getMethodAnnotationFactory("cache")},function(e,t,n){"use strict";function i(e){try{return window.sessionStorage.getItem(e)}catch(e){return null}}n.d(t,"a",function(){return a});var r=n(0),o=(n.n(r),function(){function e(e){this.readObjectStructure=e,this._FUNCTION_EXECUTION_DATA={},this._DECORATED_MODULES=[],this._DEFAULT_LEVEL=10,this.alreadyBrowsed=[]}return e.$inject=["readObjectStructure"],e.prototype.execute=function(e,t,n){var i=this,o=t||this._DEFAULT_LEVEL;if(void 0!==e.modules){this._logFunctionArgumentsAndReturnValue=this._logFunctionArgumentsAndReturnValue.bind(this),this._getServiceConfig=this._getServiceConfig.bind(this),this._getIterableDelegate=this._getIterableDelegate.bind(this),this._getDelegateFunctions=this._getDelegateFunctions.bind(this),this._extractComponentBindings=this._extractComponentBindings.bind(this),this._extractDirectiveBindings=this._extractDirectiveBindings.bind(this);var a=e.$provide;e.modules.forEach(function(t){if(i.alreadyBrowsed.push(t),n||!(i._DECORATED_MODULES.indexOf(t)>-1)&&t.endsWith("Module")){i._DECORATED_MODULES.push(t);var s=i._getServiceConfig(t),l=s.exclude.concat(e.globalExcludedFunctions||[]),c=s.include.concat(e.globalIncludedFunctions||[]),u=r.module(t);if(u._invokeQueue.forEach(function(n){var r=n[1];if(["factory","component","service","directive"].indexOf(r)>-1){var o=n[2],s=o[0];if("component"===r)i._extractComponentBindings(o);else if("directive"===r)i._extractDirectiveBindings(o);else try{i._isEligible(s,e.globalExcludedRecipes,e.globalIncludedRecipes)?a.decorator(s,["$delegate",function(e){var t=i._getIterableDelegate(e);return i._getDelegateFunctions(t,l,c).forEach(function(e){if(!t[e.name].__DECORATED__){var n=i,r=n._isFunctionEmpty(e.fn);t[e.name]=r?function(){"proxyFunction";var t=e.fn.apply(this,arguments);return n._logFunctionArgumentsAndReturnValue(s,e.name,arguments,t),t}:function(){var t=e.fn.apply(this,arguments);return n._logFunctionArgumentsAndReturnValue(s,e.name,arguments,t),t},t[e.name].__DECORATED__=!0}}),e}]):i.warn("not eligible recipe : "+s)}catch(e){i.error(e),i.warn("Warning-No-Service-Exists: "+s+" of type "+r+", moduleName: "+t)}}}),o>0){var d=o-1;u.requires.forEach(function(t){-1===i.alreadyBrowsed.indexOf(t)&&-1===e.defaultExcludeModules.indexOf(t)&&-1===t.indexOf("Mock")&&i.execute({globalExcludedRecipes:e.globalExcludedRecipes,globalIncludedRecipes:e.globalIncludedRecipes,globalExcludedFunctions:e.globalExcludedFunctions,globalIncludedFunctions:e.globalIncludedFunctions,modules:[t],$provide:e.$provide,defaultExcludeModules:e.defaultExcludeModules},d,!1)})}}})}},e.prototype._isFunctionEmpty=function(e){return""===e.toString().match(/\{([\s\S]*)\}/m)[1].trim()||/proxyFunction/g.test(e.toString().replace(/\s/g,""))},e.prototype._getServiceConfig=function(e){return"string"==typeof e?{name:e,exclude:[],include:[]}:e},e.prototype._getIterableDelegate=function(e){return e.prototype?e.prototype:e},e.prototype._matches=function(e,t){return new RegExp(t,"gi").test(e)},e.prototype._getDelegateFunctions=function(e,t,n){var i=[];for(var r in e)"function"==typeof e[r]&&this._isEligible(r,t,n)&&i.push({name:r,fn:e[r]});return i},e.prototype._isEligible=function(e,t,n){return!(n.length&&!n.find(this._matches.bind(this,e))||t.length&&t.find(this._matches.bind(this,e)))},e.prototype._resultIsPromise=function(e){return!!e&&void 0!==e.$$state},e.prototype._keyExists=function(e){return void 0!==this._FUNCTION_EXECUTION_DATA[e]},e.prototype._extractComponentBindings=function(e){var t=e[0],n=e[1].bindings;this._logDirectiveResult(t,n)},e.prototype._extractDirectiveBindings=function(e){var t=e[0];try{var n=e[1],i=null;if("function"==typeof n?i=n():n instanceof Array&&(i=n[n.length-1]()),i){var r=i.scope,o=i.bindToController;this._logDirectiveResult(t,void 0,r,o)}}catch(e){this._logDirectiveResult(t)}},e.prototype._logFunctionArgumentsAndReturnValue=function(e,t,n,i){var o=this,a=this.readObjectStructure(Array.prototype.slice.call(n)),s=null;try{s=e+"~"+t+"~"+r.toJson(a)}catch(e){return this.error("COULD NOT GENERATE KEY"),i}if(this._keyExists(s))return i;if(this._FUNCTION_EXECUTION_DATA[s]={},this._resultIsPromise(i))return i.then(function(n){try{o._FUNCTION_EXECUTION_DATA[s]={serviceName:e,functionName:t,arguments:a,result:{promiseValue:o.readObjectStructure(n)}},o.warn(r.toJson(o._FUNCTION_EXECUTION_DATA[s]))}catch(e){o.error("COULD NOT STRINGIFY")}return Promise.resolve(n)},function(n){return o.error("ERROR WHILE RESOLVING RESULT: "+n),o._FUNCTION_EXECUTION_DATA[s]={serviceName:e,functionName:t,arguments:a,result:{promiseValue:n}},o.warn(r.toJson(o._FUNCTION_EXECUTION_DATA[s])),Promise.reject(n)});this._FUNCTION_EXECUTION_DATA[s]={serviceName:e,functionName:t,arguments:a,result:this.readObjectStructure(i)};try{this.warn(r.toJson(this._FUNCTION_EXECUTION_DATA[s]))}catch(e){this.error("COULD NOT STRINGIFY")}return i},e.prototype._logDirectiveResult=function(e,t,n,i){this.warn(r.toJson({directiveName:e,bindings:t,scope:n,bindToController:i}))},e.prototype.warn=function(e){console.warn(e)},e.prototype.error=function(e){console.error(e)},e}()),a=function(e,t,n){"ngInject";"true"===i("isInstrumented")&&new o(t).execute({globalExcludedRecipes:["assetsService","configurationExtractorService","experienceService"],globalIncludedRecipes:["^.*Interface$","^.*Service$","^.*Helper$","^.*Hanlder$","^.*Editor$","^I.*$","^.*Decorator$","^.*Directive$","^.*Registry$","^.*Listener$","^.*Resource$","^.*Populator$","^.*Constants$","^.*Factory$","^.*Facade$","^.*Interceptor$","^.*Manager$","^.*Class$","^.*Strategy","^.*Predicate","^.*Retry","^.*Gateway"],globalExcludedFunctions:["^_.*$","^\\$","lodash","yjQuery"],globalIncludedFunctions:["^.*$"],defaultExcludeModules:["eventServiceModule","gatewayFactoryModule","gatewayProxyModule","yjqueryModule","functionsModule","ycmssmarteditModule","timerModule","ui.bootstrap","ngResource","ui.select","yjQuery","instrumentModule","sharedDataServiceModule","interceptorHelperModule","i18nInterceptorModule","smartEditBootstrapGateway","loadConfigModule","ui.tree","treeModule"],modules:[n],$provide:e},15,!0)};a.$inject=["$provide","readObjectStructure","TOP_LEVEL_MODULE_NAME"]},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.prototype.startDetection=function(e,t,n){"proxyFunction";return null},e.prototype.stopDetection=function(){"proxyFunction";return null},e.prototype._remoteStartDetection=function(e){"proxyFunction";return null},e.prototype._remoteStopDetection=function(){"proxyFunction";return null},e.prototype._callCallback=function(){"proxyFunction";return null},e.prototype._onMouseMove=function(e){var t=this;this._getBounds().then(function(n){var i=n&&e&&(e.clientX<n.x||e.clientX>n.x+n.width),r=n&&e&&(e.clientY<n.y||e.clientY>n.y+n.height);(i||r)&&t._onMouseLeave()})},e.prototype._getBounds=function(){"proxyFunction";return null},e.prototype._getCallback=function(){"proxyFunction";return null},e.prototype._onMouseLeave=function(){var e=this;this._getCallback().then(function(t){t?(t(),e.stopDetection()):e._callCallback().then(function(){e.stopDetection()})})},e}()},function(e,t,n){"use strict";!function(){function e(){}e.prototype.pushNotification=function(e){"proxyFunction";return null},e.prototype.removeNotification=function(e){"proxyFunction";return null},e.prototype.removeAllNotifications=function(){"proxyFunction";return null}}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return Object.defineProperty(e.prototype,"gatewayId",{get:function(){return"IPageInfoService"},enumerable:!0,configurable:!0}),e.prototype.getPageUID=function(){"proxyFunction";return null},e.prototype.getPageUUID=function(){"proxyFunction";return null},e.prototype.getCatalogVersionUUIDFromPage=function(){"proxyFunction";return null},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return Object.defineProperty(e.prototype,"gatewayId",{get:function(){return"perspectiveService"},enumerable:!0,configurable:!0}),e.prototype.register=function(e){"proxyFunction";return null},e.prototype.switchTo=function(e){"proxyFunction";return null},e.prototype.hasActivePerspective=function(){"proxyFunction";return null},e.prototype.selectDefault=function(){"proxyFunction";return null},e.prototype.isEmptyPerspectiveActive=function(){"proxyFunction";return null},e.prototype.refreshPerspective=function(){"proxyFunction";return null},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.urlUtils=e}return e.$inject=["urlUtils"],Object.defineProperty(e.prototype,"gatewayId",{get:function(){return"IPreviewService"},enumerable:!0,configurable:!0}),e.prototype.createPreview=function(e){"proxyFunction";return null},e.prototype.getResourcePathFromPreviewUrl=function(e){"proxyFunction";return null},e.prototype.updateUrlWithNewPreviewTicketId=function(e,t){var n=this;return this.createPreview(t).then(function(t){return n.urlUtils.updateUrlParameter(e,"cmsTicketId",t.previewTicketId)})},e.PROXY_METHODS=["createPreview","getResourcePathFromPreviewUrl","updateUrlWithNewPreviewTicketId"],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return Object.defineProperty(e.prototype,"gatewayId",{get:function(){return"storage"},enumerable:!0,configurable:!0}),e.prototype.isInitialized=function(){"proxyFunction";return null},e.prototype.storePrincipalIdentifier=function(e){"proxyFunction";return null},e.prototype.removePrincipalIdentifier=function(){"proxyFunction";return null},e.prototype.getPrincipalIdentifier=function(){"proxyFunction";return null},e.prototype.storeAuthToken=function(e,t){"proxyFunction";return null},e.prototype.getAuthToken=function(e){"proxyFunction";return null},e.prototype.removeAuthToken=function(e){"proxyFunction";return null},e.prototype.removeAllAuthTokens=function(){"proxyFunction";return null},e.prototype.getValueFromCookie=function(e,t){"proxyFunction";return null},e.prototype.setItem=function(e,t){"proxyFunction";return null},e.prototype.getItem=function(e){"proxyFunction";return null},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,i,r,o){this.PAGE_CONTEXT_SITE_ID=e,this.PAGE_CONTEXT_CATALOG=t,this.PAGE_CONTEXT_CATALOG_VERSION=n,this.CONTEXT_SITE_ID=i,this.CONTEXT_CATALOG=r,this.CONTEXT_CATALOG_VERSION=o}return e.prototype.openUrlInPopup=function(e){"proxyFunction";return null},e.prototype.path=function(e){"proxyFunction";return null},e.prototype.buildUriContext=function(e,t,n){var i={};return i[this.CONTEXT_SITE_ID]=e,i[this.CONTEXT_CATALOG]=t,i[this.CONTEXT_CATALOG_VERSION]=n,i},e.prototype.buildPageUriContext=function(e,t,n){var i={};return i[this.PAGE_CONTEXT_SITE_ID]=e,i[this.PAGE_CONTEXT_CATALOG]=t,i[this.PAGE_CONTEXT_CATALOG_VERSION]=n,i},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.prototype.showWaitModal=function(e){"proxyFunction";return null},e.prototype.hideWaitModal=function(){"proxyFunction";return null},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.browserService=e,this.testModeService=t}return e.$inject=["browserService","testModeService"],e.prototype.isEligibleForEconomyMode=function(){return this.browserService.isIE()||this.testModeService.isE2EMode()},e.prototype.isEligibleForExtendedView=function(){return this.browserService.isIE()||this.browserService.isFF()||this.testModeService.isE2EMode()},e.prototype.isEligibleForThrottledScrolling=function(){return this.browserService.isIE()},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.encode=e}return e.$inject=["encode"],e.prototype.sort=function(e,t){var n=this;return void 0===t&&(t=!0),e.sort(function(e,t){var i=e.priority-t.priority;return 0===i&&(i=n.encode(e).localCompare(n.encode(t))),i})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){return this.gatewayFactory=e,this.gatewayFactory.createGateway("smartEditBootstrap")}return e.$inject=["gatewayFactory"],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.$injector=e,this.TEST_KEY="e2eMode"}return e.$inject=["$injector"],e.prototype.isE2EMode=function(){return this.$injector.has(this.TEST_KEY)&&this.$injector.get(this.TEST_KEY)},e}()},function(e,t,n){"use strict";n(52);var i=n(53);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict"},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i={root:null,threshold:0},r={ELEMENT:1,ATTRIBUTE:2,TEXT:3},o={attributes:!1,attributeOldValue:!1,childList:!0,characterData:!1,subtree:!0},a=function(){function e(e,t,n,i,r,o,a,s){this.$log=e,this.$document=t,this.compareHTMLElementsPosition=n,this.lodash=i,this.yjQuery=r,this.isBlank=o,this.isPointOverElement=a,this.testModeService=s,this.componentsQueue=[],this.selectors=[]}return e.$inject=["$log","$document","compareHTMLElementsPosition","lodash","yjQuery","isBlank","isPointOverElement","testModeService"],e.prototype.elementFromPoint=function(e){var t=this,n=document.elementFromPoint(e.x,e.y);return!n||this.testModeService.isE2EMode()?this.getInViewElements().find(function(n){return t.isPointOverElement(e,n)}):n},e.prototype.addSelector=function(e){this.isBlank(e)||-1!==this.selectors.indexOf(e)||(this.selectors.push(e),this.restart())},e.prototype.getAllElements=function(){return this.componentsQueue.map(function(e){return e.component})},e.prototype.getInViewElements=function(){return this.componentsQueue.filter(function(e){return e.isIntersecting}).map(function(e){return e.component})},e.prototype.restart=function(){this.stopListener(),this.initListener()},e.prototype.stopListener=function(){this.mutationObserver&&(this.mutationObserver.disconnect(),delete this.mutationObserver),this.intersectionObserver&&(this.intersectionObserver.disconnect(),delete this.intersectionObserver),this.componentsQueue=[]},e.prototype.initListener=function(){var e=this;this.mutationObserver||(this.mutationObserver=this._newMutationObserver(this._mutationObserverCallback.bind(this)),this.intersectionObserver||(this.intersectionObserver=this._newIntersectionObserver(function(t){t.filter(function(t){return e._isEligibleComponent(t.target)}).forEach(function(t){e._updateQueue(t)})})),this._getEligibleElements().forEach(function(t){e.intersectionObserver.observe(t)}))},e.prototype._aggregateAddedOrRemovedNodes=function(e,t){var n=this,i=this.lodash.flatten(e.filter(function(e){return"childList"===e.type&&(!!t&&e.addedNodes&&e.addedNodes.length||!t&&e.removedNodes&&e.removedNodes.length)}).map(function(e){return n.lodash.flatten(Array.prototype.slice.call(t?e.addedNodes:e.removedNodes).filter(function(e){return e.nodeType===r.ELEMENT}).filter(function(e){return n._isEligibleComponent(e)}).map(function(e){return[e].concat(n._getAllEligibleChildren(e))})).sort(n.compareHTMLElementsPosition()).reverse()}));return this.lodash.uniqWith(i,function(e,t){return e.contains(t)||t.contains(e)})},e.prototype._mutationObserverCallback=function(e){var t=this;this.$log.debug(e),this._aggregateAddedOrRemovedNodes(e,!0).forEach(function(e){t.intersectionObserver.observe(e)}),this._aggregateAddedOrRemovedNodes(e,!1).forEach(function(e){var n=t._getComponentIndexInQueue(e);-1!==n&&t.componentsQueue.splice(n,1)})},e.prototype._updateQueue=function(e){var t=this._getComponentIndexInQueue(e.target);-1!==t?e.intersectionRatio||this._isInDOM(e.target)?this.componentsQueue[t].isIntersecting=!!e.intersectionRatio:this.componentsQueue.splice(t,1):this._isInDOM(e.target)&&this.componentsQueue.push({component:e.target,isIntersecting:!!e.intersectionRatio})},e.prototype._newMutationObserver=function(e){var t=new MutationObserver(e);return t.observe(document.body,o),t},e.prototype._newIntersectionObserver=function(e){return new IntersectionObserver(e,i)},e.prototype._getJQuerySelector=function(){return this.selectors.join(",")},e.prototype._isEligibleComponent=function(e){return this.yjQuery(e).is(this._getJQuerySelector())},e.prototype._getEligibleElements=function(){return Array.prototype.slice.call(this.yjQuery(this._getJQuerySelector()))},e.prototype._getAllEligibleChildren=function(e){return Array.prototype.slice.call(this.yjQuery(e).find(this._getJQuerySelector()))},e.prototype._getComponentIndexInQueue=function(e){return this.componentsQueue.findIndex(function(t){return e===t.component})},e.prototype._isInDOM=function(e){return this.yjQuery.contains(this.$document[0],e)},e}()},function(e,t,n){"use strict";n(55)},function(e,t,n){"use strict";var i=n(0),r=(n.n(i),n(56)),o=n(57);i.module("yMoreTextModule",[]).component("yMoreText",r.a).service("textTruncateService",o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={controller:function(){function e(e,t,n){this.textTruncateService=e,this.$translate=t,this.$q=n,this.isTruncated=!1,this.showingMore=!1}return e.$inject=["textTruncateService","$translate","$q"],e.prototype.$onInit=function(){var e=this;this.limit=this.limit||100,this.moreLabelI18nKey=this.moreLabelI18nKey||"se.moretext.more.link",this.lessLabelI18nKey=this.lessLabelI18nKey||"se.moretext.less.link",this.truncatedText=this.textTruncateService.truncateToNearestWord(this.limit,this.text,this.ellipsis),this.isTruncated=this.truncatedText.isTruncated(),this.translateLabels().then(function(){e.showHideMoreText()})},e.prototype.showHideMoreText=function(){this.isTruncated&&(this.text=this.showingMore?this.truncatedText.getUntruncatedText():this.truncatedText.getTruncatedText(),this.linkLabel=this.showingMore?this.lessLabel:this.moreLabel,this.showingMore=!this.showingMore)},e.prototype.translateLabels=function(){var e=this,t=[],n=this.$translate(this.moreLabelI18nKey).then(function(t){e.moreLabel=e.moreLabel||t}),i=this.$translate(this.lessLabelI18nKey).then(function(t){e.lessLabel=e.lessLabel||t});return t.push(n,i),this.$q.all(t)},e}(),templateUrl:"moreTextTemplate.html",bindings:{text:"<",limit:"<?",moreLabelI18nKey:"<?",lessLabelI18nKey:"<?",ellipsis:"<?"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(5),r=function(){function e(){}return e.prototype.truncateToNearestWord=function(e,t,n){if(void 0===n&&(n=""),e>t.length)return new i.a(t,t,!1);for(var r=/(\s)/g,o=t.match(r),a=0,s=0;s<o.length;s++){var l=this.getPositionOfCharacters(t,o[s],s+1);if(l>e)break;a=l}var c=t.substr(0,a);return new i.a(t,c,!0,n)},e.prototype.getPositionOfCharacters=function(e,t,n){return e.split(t,n).join(t).length},e}()},function(e,t,n){"use strict";n(8),n(9)},function(e,t){e.exports=CryptoJS},function(e,t,n){"use strict";var i=n(61),r=(n.n(i),n(0)),o=(n.n(r),n(2)),a=n(9),s=n(8);r.module("functionsModule").service("cloneableUtils",o.a).service("urlUtils",s.a).service("cryptographicUtils",a.a)},function(e,t){angular.module("functionsModule",["yjqueryModule","yLoDashModule","ngSanitize"]).factory("ParseError",function(){return function(e){this.value=e}}).factory("getAbsoluteURL",function(){return function(e,t){return new RegExp("([a-zA-Z0-9]+://)([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})|([0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+)(:[0-9]+)?(/.*)?").exec(t)?t:e+t}}).factory("getOrigin",function(){return function(e){if(e){var t=document.createElement("a");t.setAttribute("href",e);var n=t.protocol+"//"+t.hostname+(t.port?":"+t.port:"");return t=null,n}return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}}).factory("isBlank",function(){return function(e){return void 0===e||null===e||"null"===e||0===e.toString().trim().length}}).factory("extend",function(){return function(e,t){return t||(t=function(){}),t.prototype=Object.create(e.prototype),t}}).factory("hitch",function(){return function(e,t){var n=Array.prototype.slice.call(arguments).slice(2);return function(){var i=Array.prototype.slice.call(arguments);return t.apply(e,n.concat(i))}}}).factory("customTimeout",["$rootScope",function(e){return function(t,n){setTimeout(function(){t(),e.$digest()},n)}}]).factory("copy",function(){return function(e){return JSON.parse(JSON.stringify(e))}}).factory("merge",["yjQuery",function(e){return function(t,n){return e.extend(t,n),t}}]).factory("getQueryString",function(){return function(e){var t="";if(e)for(var n in e)t+="&"+n+"="+e[n];return"?"+t}}).factory("getURI",function(){return function(e){return e&&e.indexOf("?")>-1?e.split("?")[0]:e}}).factory("parseQuery",function(){return function(e){var t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,i,r){t[n]=r}),t}}).factory("trim",function(){return function(e){var t=/^\s+/,n=/\s+$/;return e.replace(t,"").replace(n,"")}}).factory("convertToArray",function(){return function(e){var t=[];for(var n in e)0!==n.indexOf("$")&&0!==n.indexOf("toJSON")&&t.push({key:n,value:e[n]});return t}}).factory("injectJS",function(){return{getInjector:function(){return $script},execute:function(e){var t=e.srcs,n=e.index,i=e.callback;void 0===n&&(n=0),void 0!==t[n]&&this.getInjector()(t[n],function(){n+1<t.length?this.execute({srcs:t,index:n+1,callback:i}):"function"==typeof i&&i()}.bind(this))}}}).factory("uniqueArray",function(){return function(e,t){return t.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),e}}).factory("regExpFactory",function(){return function(e){var t,n=new RegExp(/^[a-zA-Z\d]+$/i),i=new RegExp(/^[a-zA-Z\d\*]+$/i);return t=n.test(e)?["^","$"].join(e):i.test(e)?["^","$"].join(e.replace(/\*/,".*")):e,new RegExp(t,"g")}}).factory("generateIdentifier",function(){return function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}}).factory("escapeHtml",function(){return function(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}}).factory("sanitize",["isBlank",function(e){return function(t){return e(t)?t:t.replace(/(?=[()])/g,"\\")}}]).factory("sanitizeHTML",["isBlank",function(e){return function(t){var n=angular.copy(t);return e(n)||(n=n.replace(/(\r\n|\n|\r)/gm,"").replace(/>\s+</g,"><").replace(/<\/br\>/g,"")),n}}]).factory("toPromise",["$q","$log",function(e,t){return function(n,i){return function(){try{return e.when(n.apply(i,arguments))}catch(n){return t.error("execution of a method that was turned into a promise failed"),t.error(n),e.reject(n)}}}}]).factory("isFunction",function(){return function(e){return"function"==typeof e}}).factory("isObject",function(){var e={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};return function(t){return!(!t||!e[typeof t])}}).factory("debounce",["isFunction","isObject",function(e,t){function n(){}return function(i,r,o){var a,s,l,c,u,d,p,h,f,g=0,m=!1,v=!0;if(!e(i))throw new n;r=Math.max(0,r)||0,!0===o?(h=!0,v=!1):t(o)&&(h=o.leading,m="maxWait"in o&&(Math.max(r,o.maxWait)||0),v="trailing"in o?o.trailing:v);var y=function(){var e=r-(Date.now()-c);e<=0?(s&&clearTimeout(s),f=p,s=d=p=void 0,f&&(g=Date.now(),l=i.apply(u,a),d||s||(a=u=null))):d=setTimeout(y,e)},E=function(){d&&clearTimeout(d),s=d=p=void 0,(v||m!==r)&&(g=Date.now(),l=i.apply(u,a),d||s||(a=u=null))};return function(){a=arguments,c=Date.now(),u=this,p=v&&(d||!h);var e,t;if(!1===m)e=h&&!d;else{s||h||(g=c);var n=m-(c-g);(t=n<=0)?(s&&(s=clearTimeout(s)),g=c,l=i.apply(u,a)):s||(s=setTimeout(E,n))}return t&&d?d=clearTimeout(d):d||r===m||(d=setTimeout(y,r)),e&&(t=!0,l=i.apply(u,a)),!t||d||s||(a=u=null),l}}}]).factory("throttle",["debounce","isFunction","isObject",function(e,t,n){return function(i,r,o){var a=!0,s=!0;if(!t(i))throw new TypeError;return!1===o?a=!1:n(o)&&(a="leading"in o?o.leading:a,s="trailing"in o?o.trailing:s),o={},o.leading=a,o.maxWait=r,o.trailing=s,e(i,r,o)}}]).factory("parseHTML",["yjQuery",function(e){return function(t){return e.parseHTML(t)}}]).factory("unsafeParseHTML",["yjQuery",function(e){return function(t){return e.parseHTML(t,null,!0)}}]).factory("extractFromElement",["yjQuery",function(e){return function(t,n){return(t=e(t)).filter(n).add(t.find(n))}}]).factory("closeOpenModalsOnBrowserBack",["$uibModalStack",function(e){return function(){e.getTop()&&e.dismissAll()}}]).factory("URIBuilder",["lodash",function(e){return function(t){this.uri=t,this.build=function(){return this.uri},this.replaceParams=function(t){var n=e.cloneDeep(this);return t&&Object.keys(t).sort(function(e,t){return t.length-e.length}).forEach(function(e){var i=new RegExp("\\b"+e+"\\b");n.uri=n.uri.replace(":"+e,t[e]).replace(i,t[e])}),n}}}]).factory("getDataFromResponse",function(){return function(e){var t=Object.keys(e).filter(function(t){return e[t]instanceof Array})[0];return e[t]}}).factory("getKeyHoldingDataFromResponse",function(){return function(e){return Object.keys(e).filter(function(t){return e[t]instanceof Array})[0]}}).factory("resetObject",["copy",function(e){return function(t,n){if(t){for(var i in t)delete t[i];angular.extend(t,e(n))}else t=e(n);return t}}]).factory("isFunctionEmpty",function(){return function(e){return""===e.toString().match(/\{([\s\S]*)\}/m)[1].trim()||/proxyFunction/g.test(e.toString().replace(/\s/g,""))}}).factory("isObjectEmptyDeep",["lodash",function(e){return function(t){if(e.isObject(t)){for(var n in t)if(!e.isEmpty(t[n]))return!1;return!0}return e.isString(t)?e.isEmpty(t):e.isNil(t)}}]).factory("isAllTruthy",function(){return function(){var e=Array.prototype.slice.call(arguments);return function(){var t=arguments;return e.every(function(e){return e.apply(e,t)})}}}).factory("isAnyTruthy",function(){return function(){var e=Array.prototype.slice.call(arguments);return function(){var t=arguments;return e.some(function(e){return e.apply(e,t)})}}}).factory("formatDateAsUtc",["DATE_CONSTANTS",function(e){return function(t){return moment(t).utc().format(e.MOMENT_ISO)}}]).factory("getEncodedString",function(){return function(e){if("string"==typeof e)return btoa(e);throw new Error('getEncodedString called with input of type "'+typeof e+'" when only "string" is accepted.')}}).factory("encode",function(){return function(e){return btoa(encodeURIComponent(JSON.stringify(e)).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}}).factory("compareHTMLElementsPosition",function(){return function(e){return function(t,n){return e&&(t=t[e],n=n[e]),t===n?0:t.compareDocumentPosition?2&t.compareDocumentPosition(n)?1:-1:t.sourceIndex-n.sourceIndex}}}).factory("isIframe",["$window",function(e){return function(){return e.top!==e}}]).factory("isPointOverElement",function(){return function(e,t){var n=t.getBoundingClientRect();return e.x>=n.left&&e.x<=n.right&&e.y>=n.top&&e.y<=n.bottom}}).factory("areIntersecting",function(){return function(e,t){return!(t.left>e.left+e.width||t.left+t.width<e.left||t.top>e.top+e.height||t.top+t.height<e.top)}}).constant("EXTENDED_VIEW_PORT_MARGIN",1e3).factory("isInExtendedViewPort",["$document","yjQuery","areIntersecting","EXTENDED_VIEW_PORT_MARGIN",function(e,t,n,i){return function(r){if(!t.contains(e[0],r))return!1;var o=t(r).offset();o.width=t(r).outerWidth(),o.height=t(r).outerHeight();var a=document.scrollingElement||document.documentElement;return n({left:-i+a.scrollLeft,width:window.innerWidth+2*i,top:-i+a.scrollTop,height:window.innerHeight+2*i},o)}}]).factory("deepIterateOverObjectWith",["lodash",function(e){return function t(n,i){return e.reduce(n,function(n,r,o){return e.isPlainObject(r)?n[o]=t(r,i):n[o]=i(r),n}.bind(this),{})}}]).factory("deepObjectPropertyDiff",["lodash","deepIterateOverObjectWith",function(e,t){return function(n,i){function r(){}function o(){}var a=e.mergeWith(e.cloneDeep(n),i,function(t,n){if(!e.isPlainObject(t))return e.isEqual(t,n)?o:r}),s=t(a,function(e){return e!==r&&e!==o?r:e});return t(s,function(e){return e===r})}}]).factory("isInDOM",["$document","yjQuery",function(e,t){return function(n){return t.contains(e[0],n)}}]).constant("readObjectStructureFactory",function(){var e=function(t){if(void 0===t||null===t||t.then)return t;if("function"==typeof t)return"FUNCTION";if("number"==typeof t)return"NUMBER";if("string"==typeof t)return"STRING";if("boolean"==typeof t)return"BOOLEAN";if(window.smarteditLodash.isElement(t))return"ELEMENT";if(t.hasOwnProperty("length")){if(t.forEach){var n=[];return t.forEach(function(t){n.push(e(t))}),n}return"JQUERY"}var i={};return Object.keys(t).forEach(function(n){0!==n.indexOf("$")&&(i[n]=e(t[n]))}),i};return e})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.restServiceFactory=e,this.gatewayProxy=t,this.gatewayId="DelegateRestService",this.gatewayProxy.initForService(this)}return e.$inject=["restServiceFactory","gatewayProxy"],e.prototype.delegateForVoid=function(e,t,n,i){return this.restServiceFactory.get(n,i).getMethodForVoid(e)(t)},e.prototype.delegateForSingleInstance=function(e,t,n,i){return this.restServiceFactory.get(n,i).getMethodForSingleInstance(e)(t)},e.prototype.delegateForArray=function(e,t,n,i){return this.restServiceFactory.get(n,i).getMethodForArray(e)(t)},e.prototype.delegateForPage=function(e,t,n){return this.restServiceFactory.get(t,n).page(e)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,i,r,o,a){var s=this;this.yjQuery=e,this.lodash=t,this.crossFrameEventService=n,this.iFrameManager=i,this.SEND_MOUSE_POSITION_THROTTLE=r,this.SMARTEDIT_DRAG_AND_DROP_EVENTS=o,this.SMARTEDIT_IFRAME_DRAG_AREA=a,this.onDragStart=function(){s.isEnabled()&&(s.crossFrameEventService.publish(s.SMARTEDIT_DRAG_AND_DROP_EVENTS.DRAG_DROP_CROSS_ORIGIN_START),s.syncIframeDragArea().show().off("dragover").on("dragover",function(e){e.preventDefault();var t=s.getPositionRelativeToIframe(e.pageX,e.pageY);return s.throttledSendMousePosition(t),!1}).off("drop").on("drop",function(e){e.preventDefault(),e.stopPropagation();var t=s.getPositionRelativeToIframe(e.pageX,e.pageY);return s.crossFrameEventService.publish(s.SMARTEDIT_DRAG_AND_DROP_EVENTS.DROP_ELEMENT,t),!1}))},this.onDragEnd=function(){s.isEnabled()&&s.getIframeDragArea().off("dragover").off("drop").hide()},this.sendMousePosition=function(e){s.crossFrameEventService.publish(s.SMARTEDIT_DRAG_AND_DROP_EVENTS.TRACK_MOUSE_POSITION,e)}}return e.$inject=["yjQuery","lodash","crossFrameEventService","iFrameManager","SEND_MOUSE_POSITION_THROTTLE","SMARTEDIT_DRAG_AND_DROP_EVENTS","SMARTEDIT_IFRAME_DRAG_AREA"],e.prototype.initialize=function(){this.throttledSendMousePosition=this.lodash.throttle(this.sendMousePosition,this.SEND_MOUSE_POSITION_THROTTLE),this.crossFrameEventService.subscribe(this.SMARTEDIT_DRAG_AND_DROP_EVENTS.DRAG_DROP_START,this.onDragStart),this.crossFrameEventService.subscribe(this.SMARTEDIT_DRAG_AND_DROP_EVENTS.DRAG_DROP_END,this.onDragEnd)},e.prototype.isEnabled=function(){return this.iFrameManager.isCrossOrigin()},e.prototype.getIframeDragArea=function(){return this.yjQuery("#"+this.SMARTEDIT_IFRAME_DRAG_AREA)},e.prototype.getPositionRelativeToIframe=function(e,t){var n=this.getIframeDragArea().offset();return{x:e-n.left,y:t-n.top}},e.prototype.syncIframeDragArea=function(){this.getIframeDragArea().width(this.iFrameManager.getIframe().width()),this.getIframeDragArea().height(this.iFrameManager.getIframe().height());var e=this.iFrameManager.getIframe().offset();return this.getIframeDragArea().css({top:e.top,left:e.left}),this.getIframeDragArea()},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t,n,i,r,o){var a=e.call(this,i,r)||this;return a.toolbarServiceFactory=n,a.$q=o,a.features=[],t.initForService(a,["_registerAliases","addToolbarItem","register","enable","disable","_remoteEnablingFromInner","_remoteDisablingFromInner","addDecorator","getFeatureProperty","addContextualMenuButton"]),a}return r(t,e),t.$inject=["gatewayProxy","toolbarServiceFactory","lodash","cloneableUtils","$q"],t.prototype.getFeatureProperty=function(e,t){var n=this._getFeatureByKey(e);return this.$q.when(n?n[t]:null)},t.prototype.getFeatureKeys=function(){return this.features.map(function(e){return e.key})},t.prototype.addToolbarItem=function(e){var t=this.toolbarServiceFactory.getToolbarService(e.toolbarId);return e.enablingCallback=function(){this.addItems([e])}.bind(t),e.disablingCallback=function(){this.removeItemByKey(e.key)}.bind(t),this.register(e)},t.prototype._registerAliases=function(e){return this._getFeatureByKey(e.key)||(e.id=btoa(e.key),this.features.push(e)),this.$q.when()},t.prototype._getFeatureByKey=function(e){return this.features.find(function(t){return t.key===e})},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t){var n=e.call(this)||this;return n.gatewayProxy=t,n.gatewayProxy.initForService(n,["getPageUID","getPageUUID","getCatalogVersionUUIDFromPage"]),n}return r(t,e),t.$inject=["gatewayProxy"],t}(i.c)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t,n,r,o,a,s,l,c,u){var d=e.call(this,u)||this;return d.$log=t,d.$q=n,d.loadConfigManagerService=r,d.PREVIEW_RESOURCE_URI=o,d.restServiceFactory=a,d.lodash=s,d.getAbsoluteURL=l,c.initForService(d,i.e.PROXY_METHODS),d}return r(t,e),t.$inject=["$log","$q","loadConfigManagerService","PREVIEW_RESOURCE_URI","restServiceFactory","lodash","getAbsoluteURL","gatewayProxy","urlUtils"],t.prototype.createPreview=function(e){var t=this;return this.validatePreviewDataAttributes(e),this.getRestService().then(function(n){return n.save(e).then(function(e){return{previewTicketId:e.ticketId,resourcePath:e.resourcePath}},function(e){return t.$log.error("PreviewService.createPreview() - Error creating preview"),t.$q.reject(e)})},function(e){return t.$log.error("PreviewService.createPreview() - Error loading configuration"),t.$q.reject(e)})},t.prototype.getResourcePathFromPreviewUrl=function(e){var t=this;return this.getRestService().then(function(n){return t.getAbsoluteURL(t.domain,e)},function(e){return t.$log.error("PreviewService.getResourcePathFromPreviewUrl() - Error loading configuration"),t.$q.reject(e)})},t.prototype.getRestService=function(){var e=this;return this.restService?this.$q.when(this.restService):this.loadConfigManagerService.loadAsObject().then(function(t){return e.restService=e.restServiceFactory.get(t.previewTicketURI||e.PREVIEW_RESOURCE_URI),e.domain=t.domain,e.$q.when(e.restService)},function(t){return e.$log.error("PreviewService.getRestService() - Error loading configuration"),e.$q.reject(t)})},t.prototype.validatePreviewDataAttributes=function(e){var t=this;["catalog","catalogVersion","language","resourcePath"].forEach(function(n){if(t.lodash.isEmpty(e[n]))throw new Error("ValidatePreviewDataAttributes - "+n+" is empty")})},t}(i.e)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.restServiceFactory=e,this.productService=this.restServiceFactory.get(t),this.productListService=this.restServiceFactory.get(n)}return e.$inject=["restServiceFactory","PRODUCT_RESOURCE_API","PRODUCT_LIST_RESOURCE_API"],e.prototype.getProductById=function(e,t){return this.productService.get({siteUID:e,productUID:t})},e.prototype.findProducts=function(e,t){return this._validateProductCatalogInfo(e),this.productListService.get({catalogId:e.catalogId,catalogVersion:e.catalogVersion,text:t.mask,pageSize:t.pageSize,currentPage:t.currentPage})},e.prototype.getProducts=function(e,t,n,i){var r={mask:t,pageSize:n,currentPage:i};return this.findProducts(e,r)},e.prototype._validateProductCatalogInfo=function(e){if(!e.catalogId)throw new Error("[productService] - catalog ID missing.");if(!e.catalogVersion)throw new Error("[productService] - catalog version missing.")},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),r=(n.n(i),n(1)),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=function(e){function t(t,n,i,r,o,a,s,l,c,u,d,p,h,f,g,m,v,y){var E=e.call(this)||this;return E.$log=t,E.$q=n,E.isBlank=i,E.uniqueArray=r,E.systemEventService=o,E.featureService=a,E.iFrameManager=l,E.storageService=c,E.crossFrameEventService=u,E.NONE_PERSPECTIVE=d,E.ALL_PERSPECTIVE=p,E.EVENTS=h,E.EVENT_PERSPECTIVE_CHANGED=f,E.EVENT_PERSPECTIVE_UNLOADING=g,E.EVENT_PERSPECTIVE_ADDED=m,E.EVENT_PERSPECTIVE_REFRESHED=v,E.permissionService=y,E.PERSPECTIVE_COOKIE_NAME="smartedit-perspectives",E.INITIAL_SWITCHTO_ARG="INITIAL_SWITCHTO_ARG",E.data={activePerspective:void 0,previousPerspective:void 0,previousSwitchToArg:E.INITIAL_SWITCHTO_ARG},E.immutablePerspectives=[],E.perspectives=[],s.initForService(E,["register","switchTo","hasActivePerspective","isEmptyPerspectiveActive","selectDefault","refreshPerspective"]),E._addDefaultPerspectives(),E._registerEventHandlers(),E}return o(t,e),t.$inject=["$log","$q","isBlank","uniqueArray","systemEventService","featureService","gatewayProxy","iFrameManager","storageService","crossFrameEventService","NONE_PERSPECTIVE","ALL_PERSPECTIVE","EVENTS","EVENT_PERSPECTIVE_CHANGED","EVENT_PERSPECTIVE_UNLOADING","EVENT_PERSPECTIVE_ADDED","EVENT_PERSPECTIVE_REFRESHED","permissionService"],t.prototype.register=function(e){this._validate(e);var t=this._findByKey(e.key);return t||(t=e,this.immutablePerspectives.push(t),this.perspectives.push(t)),t.features=this.uniqueArray(t.features||[],e.features||[]),t.perspectives=this.uniqueArray(t.perspectives||[],e.perspectives||[]),t.permissions=this.uniqueArray(t.permissions||[],e.permissions||[]),this.systemEventService.sendAsynchEvent(this.EVENT_PERSPECTIVE_ADDED),this.$q.when()},t.prototype.getPerspectives=function(){var e=this,t=[];return this.immutablePerspectives.forEach(function(n){var i;i=n.permissions.length>0?e.permissionService.isPermitted([{names:n.permissions}]):e.$q.when(!0),t.push(i)}),this.$q.all(t).then(function(t){return e.immutablePerspectives.filter(function(e,n){return t[n]})})},t.prototype.hasActivePerspective=function(){return this.$q.when(Boolean(this.data.activePerspective))},t.prototype.getActivePerspective=function(){return this.data.activePerspective?i.copy(this._findByKey(this.data.activePerspective.key)):null},t.prototype.isEmptyPerspectiveActive=function(){return this.$q.when(!!this.data.activePerspective&&this.data.activePerspective.key===this.NONE_PERSPECTIVE)},t.prototype.switchTo=function(e){var t=this;if(!this._changeActivePerspective(e))return this.iFrameManager.hideWaitModal(),this.$q.when();this._handleUnloadEvent(e),this.iFrameManager.showWaitModal();var n=[];this.data.previousPerspective&&this._fetchAllFeatures(this.data.previousPerspective,n);var i=[];this._fetchAllFeatures(this.data.activePerspective,i),n.filter(function(e){return!i.some(function(t){return e===t})}).forEach(function(e){t.featureService.disable(e)});var r=[];return i.filter(function(e){return!n.some(function(t){return e===t})}).forEach(function(e){r.push(t._enableFeature(e))}),this.$q.all(r).then(function(){t.data.activePerspective.key===t.NONE_PERSPECTIVE&&t.iFrameManager.hideWaitModal(),t.unregisterPerspectiveChangedEvent=t.crossFrameEventService.publish(t.EVENT_PERSPECTIVE_CHANGED,t.data.activePerspective.key!==t.NONE_PERSPECTIVE)},function(e){t.$log.error(e)}),this.$q.when()},t.prototype.selectDefault=function(){var e=this;return this.getPerspectives().then(function(t){return e.storageService.getValueFromCookie(e.PERSPECTIVE_COOKIE_NAME,!0).then(function(n){var i,r;return t.find(function(e){return e.key===n})?(i=n&&e._findByKey(n)?n:e.NONE_PERSPECTIVE,r=e.data.previousPerspective?e.data.previousPerspective.key:i):(e.$log.warn('Cannot select mode "'+n+'" It might not exist or is restricted.'),i=e.NONE_PERSPECTIVE,r=e.NONE_PERSPECTIVE),i!==e.NONE_PERSPECTIVE&&e._disableAllFeaturesForPerspective(i),e.switchTo(r)})})},t.prototype.refreshPerspective=function(){var e=this;return this.getPerspectives().then(function(t){var n=e.getActivePerspective();if(n)if(e.perspectives=t,e._findByKey(n.key)){var i=[],r=[];e._fetchAllFeatures(n,i),i.forEach(function(t){e.featureService.disable(t),r.push(e._enableFeature(t))}),e.$q.all(r).then(function(){e.iFrameManager.hideWaitModal(),e.unregisterPerspectiveRefreshedEvent=e.crossFrameEventService.publish(e.EVENT_PERSPECTIVE_REFRESHED,n.key!==e.NONE_PERSPECTIVE)},function(t){e.$log.error(t)})}else e.switchTo(e.NONE_PERSPECTIVE);else e.selectDefault()})},t.prototype.clearActivePerspective=function(){this.data.previousPerspective=this.data.activePerspective,delete this.data.activePerspective},t.prototype._addDefaultPerspectives=function(){this.register({key:this.NONE_PERSPECTIVE,nameI18nKey:"se.perspective.none.name",descriptionI18nKey:"se.perspective.none.description"}),this.register({key:this.ALL_PERSPECTIVE,nameI18nKey:"se.perspective.all.name",descriptionI18nKey:"se.perspective.all.description"})},t.prototype._registerEventHandlers=function(){this.systemEventService.registerEventHandler(this.EVENTS.LOGOUT,this._onLogoutPerspectiveCleanup.bind(this)),this.systemEventService.registerEventHandler(this.EVENTS.AUTHORIZATION_SUCCESS,this._clearPerspectiveFeatures.bind(this))},t.prototype._validate=function(e){if(this.isBlank(e.key))throw new Error("perspectiveService.configuration.key.error.required");if(this.isBlank(e.nameI18nKey))throw new Error("perspectiveService.configuration.nameI18nKey.error.required");if(-1===[this.NONE_PERSPECTIVE,this.ALL_PERSPECTIVE].indexOf(e.key)&&(this.isBlank(e.features)||0===e.features.length))throw new Error("perspectiveService.configuration.features.error.required")},t.prototype._findByKey=function(e){return this.perspectives.find(function(t){return t.key===e})},t.prototype._fetchAllFeatures=function(e,t){var n=this;t||(t=[]),e.key===this.ALL_PERSPECTIVE?this.uniqueArray(t,this.featureService.getFeatureKeys()||[]):(this.uniqueArray(t,e.features||[]),(e.perspectives||[]).forEach(function(e){var i=n._findByKey(e);i?n._fetchAllFeatures(i,t):n.$log.debug("nested perspective "+e+" was not found in the registry")}))},t.prototype._enableFeature=function(e){var t=this;return this.featureService.getFeatureProperty(e,"permissions").then(function(n){return Array.isArray(n)||(n=[]),t.permissionService.isPermitted([{names:n}]).then(function(n){n&&t.featureService.enable(e)})})},t.prototype._handleUnloadEvent=function(e){e!==this.data.previousSwitchToArg&&this.data.previousSwitchToArg!==this.INITIAL_SWITCHTO_ARG&&this.crossFrameEventService.publish(this.EVENT_PERSPECTIVE_UNLOADING,this.data.previousSwitchToArg),this.data.previousSwitchToArg=e},t.prototype._retrievePerspective=function(e){if(this.data.activePerspective&&this.data.activePerspective.key===e)return null;var t=this._findByKey(e);if(!t)throw new Error("switchTo() - Couldn't find perspective with key "+e);return t},t.prototype._changeActivePerspective=function(e){var t=this._retrievePerspective(e);return t&&(this.data.previousPerspective=this.data.activePerspective,this.data.activePerspective=t,this.storageService.putValueInCookie(this.PERSPECTIVE_COOKIE_NAME,t.key,!0)),t},t.prototype._disableAllFeaturesForPerspective=function(e){var t=this,n=[];this._fetchAllFeatures(this._findByKey(e),n),n.forEach(function(e){t.featureService.disable(e)})},t.prototype._clearPerspectiveFeatures=function(e,t){var n=this;if(this.isBlank(t)||this.isBlank(t.userHasChanged)||!!t.userHasChanged){var i=[];this.data&&this.data.activePerspective&&this._fetchAllFeatures(this.data.activePerspective,i),i.forEach(function(e){n.featureService.disable(e)})}return this.$q.when()},t.prototype._onLogoutPerspectiveCleanup=function(){var e=this;return this._clearPerspectiveFeatures().then(function(){return e.clearActivePerspective(),e.unregisterPerspectiveChangedEvent&&e.unregisterPerspectiveChangedEvent(),e.unregisterPerspectiveRefreshedEvent&&e.unregisterPerspectiveRefreshedEvent(),e.$q.when()})},t}(r.d)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(0),r=(n.n(i),function(){function e(e,t,n){var r=this;this.$q=e,this.$resource=t,this.lodash=n,this.DOMAIN=null,this.IDENTIFIER="identifier",this.serviceMap={},this.headers={"x-requested-with":"Angular"},this.nocacheheader=n.cloneDeep(this.headers),this.nocacheheader.Pragma="no-cache",this.methodMap={getById:{method:"GET",params:{},isArray:!1,cache:!1,headers:this.nocacheheader},get:{method:"GET",params:{},isArray:!1,cache:!1,headers:this.nocacheheader},query:{method:"GET",params:{},isArray:!0,cache:!1,headers:this.nocacheheader},page:{method:"GET",params:{},isArray:!1,cache:!1,headers:this.nocacheheader,transformResponse:function(e,t){var n=r.lodash.isEmpty(e)?{}:i.fromJson(e);return n.headers=t(),n}},update:{method:"PUT",cache:!1,headers:this.headers},save:{method:"POST",cache:!1,headers:this.headers},remove:{method:"DELETE",cache:!1,headers:this.headers}}}return e.$inject=["$q","$resource","lodash"],e.prototype.setDomain=function(e){this.DOMAIN=e},e.prototype.get=function(e,t){var n=this;t||(t=this.IDENTIFIER);var i=this.serviceMap[e+t];if(void 0!==i)return i;var r="",o=r=/^https?\:\/\//.test(e)||/^\//.test(e)?e:this.lodash.isEmpty(this.DOMAIN)?e:this.DOMAIN+"/"+e;-1===o.indexOf(":"+t)&&(o+="/:"+t);var a=this.$resource(o,{},this.methodMap),s={getMethodForVoid:function(e){return this[e]},getMethodForSingleInstance:function(e){return this[e]},getMethodForArray:function(e){return this[e]}};return this.lodash.forEach(this.methodMap,function(e,i){"getById"===i?s.getById=n.wrapGetByIdMethod.bind(void 0,a,t):s[i]=n.wrapMethodHavingPayload.bind(n,a,i,e,o,t)}),this.serviceMap[e+t]=s,s},e.prototype.wrapGetByIdMethod=function(e,t,n){var i={};i[t]=n;var r={};return e.getById(i,r).$promise},e.prototype.wrapMethodHavingPayload=function(e,t,n,i,r,o){void 0===o&&(o={});var a="object"==typeof o?Object.keys(o).reduce(function(e,t){return(new RegExp(":"+t+"/").test(i)||new RegExp(":"+t+"$").test(i)||new RegExp(":"+t+"&").test(i))&&(e[t]=o[t]),e},{}):{};if("PUT"===n.method||"DELETE"===n.method){if(!o[r])return this.$q.reject("no data was found under the "+r+" field of object "+JSON.stringify(o)+", it is necessary for update and remove operations");a[r]=o[r],"DELETE"===n.method&&(o={})}return"GET"===n.method&&(a=this.lodash.cloneDeep(o),o={}),e[t](a,o).$promise},e}())},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.gatewayId="sharedData",this.storage={},this.$q=e,t.initForService(this)}return e.$inject=["$q","gatewayProxy"],e.prototype.get=function(e){return this.storage[e]},e.prototype.set=function(e,t){this.storage[e]=t},e.prototype.update=function(e,t){var n=this;return this.get(e).then(function(i){return n.$q.when(t(i)).then(function(t){return n.set(e,t)})})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,i,r,o,a){this.$q=a,this.cache=null,this.siteRestService=e.get(r),n.register(r,i.CMS),t.registerEventHandler(o.AUTHORIZATION_SUCCESS,this._clearCache.bind(this))}return e.$inject=["restServiceFactory","systemEventService","operationContextService","OPERATION_CONTEXT","SITES_RESOURCE_URI","EVENTS","$q"],e.prototype.getSites=function(){var e=this;return this.cache?this.$q.when(this.cache):this.siteRestService.get({}).then(function(t){var n=t.sites.reduce(function(e,t){return Array.prototype.push.apply(e,t.contentCatalogs),e},[]);return e.siteRestService.get({catalogIds:n.join(",")}).then(function(t){return e.cache=t.sites,e.cache})})},e.prototype.getSiteById=function(e){return this.getSites().then(function(t){return t.filter(function(t){return t.uid===e})[0]})},e.prototype._clearCache=function(){this.cache=null},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t,n,i,r,o,a,s){var l=e.call(this)||this;return l.lodash=n,l.$q=i,l.$injector=r,l.$cookies=o,l.$window=a,l.$log=s,l.STORAGE_COOKIE_NAME="smartedit-sessions",l.CUSTOM_PROPERTIES="custom_properties",t.initForService(l,["isInitialized","storeAuthToken","getAuthToken","removeAuthToken","removeAllAuthTokens","storePrincipalIdentifier","getPrincipalIdentifier","removePrincipalIdentifier","getValueFromCookie"]),l}return r(t,e),t.$inject=["gatewayProxy","lodash","$q","$injector","$cookies","$window","$log"],t.prototype.getSessionService=function(){return this.$injector.get("sessionService")},t.prototype.isInitialized=function(){var e=this.getAuthTokens();return this.$q.when(this.lodash.values(this.lodash.omit(e,[this.CUSTOM_PROPERTIES])).length>0)},t.prototype.storePrincipalIdentifier=function(e){return this.getSessionService().setCurrentUsername(e),this.$q.when()},t.prototype.removePrincipalIdentifier=function(){return this.getSessionService().resetCurrentUserData(),this.$q.when()},t.prototype.getPrincipalIdentifier=function(){return this.getSessionService().getCurrentUsername()},t.prototype.storeAuthToken=function(e,t){var n=this.getAuthTokens();return n[e]=t,this._setToAuthCookie(n),this.$q.when()},t.prototype.getAuthToken=function(e){var t=this.getAuthTokens();return this.$q.when(t[e])},t.prototype.removeAuthToken=function(e){var t=this.getAuthTokens();return delete t[e],this._setToAuthCookie(t),this.$q.when()},t.prototype.removeAllAuthTokens=function(){return this._removeAllAuthTokens(),this.$q.when()},t.prototype.getValueFromCookie=function(e,t){return this.$q.when(this._getValueFromCookie(e,t))},t.prototype.getAuthTokens=function(){return this._getValueFromCookie(this.STORAGE_COOKIE_NAME,!0)||{}},t.prototype.putValueInCookie=function(e,t,n){this._putValueInCookie(e,t,n)},t.prototype.setItem=function(e,t){var n=this.getAuthTokens();return n[this.CUSTOM_PROPERTIES]=n[this.CUSTOM_PROPERTIES]||{},n[this.CUSTOM_PROPERTIES][e]=t,this._setToAuthCookie(n),this.$q.when()},t.prototype.getItem=function(e){var t=this.getAuthTokens();return t[this.CUSTOM_PROPERTIES]=t[this.CUSTOM_PROPERTIES]||{},this.$q.when(t[this.CUSTOM_PROPERTIES][e])},t.prototype._removeAllAuthTokens=function(){var e=this.getAuthTokens(),t=this.lodash.pick(e,[this.CUSTOM_PROPERTIES]);this._putValueInCookie(this.STORAGE_COOKIE_NAME,t,!0)},t.prototype._getValueFromCookie=function(e,t){var n=this.$cookies.get(e),i=null;if(n)try{i=JSON.parse(t?atob(n):n)}catch(e){this.$log.error("Failed during deserialization ",e)}return i},t.prototype._setToAuthCookie=function(e){this._putValueInCookie(this.STORAGE_COOKIE_NAME,e,!0)},t.prototype._putValueInCookie=function(e,t,n){var i=JSON.stringify(t);i=n?btoa(i):i,this.$cookies.put(e,i,{secure:this.$window.location.protocol.indexOf("https")>=0})},t}(i.f)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e,t){this.permissionService=e,this.sharedDataService=t}return e.$inject=["permissionService","sharedDataService"],e.prototype.registerRulesAndPermissions=function(){var e=this;this.permissionService.registerRule({names:["se.slot.belongs.to.page"],verify:function(t){return e.sharedDataService.get("experience").then(function(e){return e.pageContext&&e.pageContext.catalogVersionUuid===t[0].context.slotCatalogVersionUuid})}}),this.permissionService.registerPermission({aliases:["se.slot.not.external"],rules:["se.slot.belongs.to.page"]})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t,n,i,r,o,a,s,l,c){var u=e.call(this,r,o,a,s,l,c)||this;return u.gatewayProxy=t,u.$location=n,u.$window=i,u.gatewayId="UrlService",u.gatewayProxy.initForService(u,["openUrlInPopup","path"]),u.location=n,u.window=i,u}return r(t,e),t.$inject=["gatewayProxy","$location","$window","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION"],t.prototype.openUrlInPopup=function(e){this.window.open(e,"_blank","toolbar=no, scrollbars=yes, resizable=yes").focus()},t.prototype.path=function(e){this.location.path(e)},t}(i.g)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t,n){var i=e.call(this)||this;return i.gatewayId="WaitDialogService",t.initForService(i),i.modalService=n,i.modalManager=null,i}return r(t,e),t.$inject=["gatewayProxy","modalService"],t.prototype.showWaitModal=function(e){var t=this;if(null==this.modalManager)return this.modalService.open({templateUrl:"waitDialog.html",cssClasses:"ySEWaitDialog",controller:["modalManager",function(n){n.loadingMessage=e||"se.wait.dialog.message",t.modalManager=n}]})},t.prototype.hideWaitModal=function(){null!=this.modalManager&&(this.modalManager.close(),this.modalManager=null)},t}(i.h)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),r=(n.n(i),n(1)),o=n(3),a=i.module("smarteditServicesModule",["seConstantsModule","ngResource","gatewayProxyModule","operationContextServiceModule","crossFrameEventServiceModule","iFrameManagerModule","browserServiceModule","permissionServiceModule","ngCookies","sessionServiceModule","functionsModule","toolbarModule"]).service("smartEditBootstrapGateway",r.l).service("configurationExtractorService",o.b).service("bootstrapService",o.a).service("urlService",o.q).service("sharedDataService",o.n).service("pageInfoService",o.h).service("testModeService",r.m).service("polyfillService",r.j).service("waitDialogService",o.r).service("delegateRestService",o.c).service("featureService",o.e).service("restServiceFactory",o.m).service("perspectiveService",o.j).service("previewService",o.k).service("priorityService",r.k).service("productService",o.l).service("siteService",o.o).service("notificationService",o.g).service("notificationMouseLeaveDetectionService",o.f).service("dragAndDropCrossOrigin",o.d).service("inViewElementObserver",r.i).service("storageService",o.p).service("permissionsRegistrationService",o.i).factory("cacheAnnotation",r.n).run(["cacheAnnotation","previewService",function(e,t){"ngInject"}])},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(80),r=(n.n(i),n(81)),o=n(3);n.d(t,"PermissionsRegistrationService",function(){return o.i}),n.d(t,"DelegateRestService",function(){return o.c}),n.d(t,"DragAndDropCrossOrigin",function(){return o.d}),n.d(t,"FeatureService",function(){return o.e}),n.d(t,"PageInfoService",function(){return o.h}),n.d(t,"PreviewService",function(){return o.k}),n.d(t,"ProductService",function(){return o.l}),n.d(t,"PerspectiveService",function(){return o.j}),n.d(t,"RestServiceFactory",function(){return o.m}),n.d(t,"SharedDataService",function(){return o.n}),n.d(t,"SiteService",function(){return o.o}),n.d(t,"StorageService",function(){return o.p}),n.d(t,"UrlService",function(){return o.q}),n.d(t,"WaitDialogService",function(){return o.r}),n.d(t,"smarteditServicesModule",function(){return o.s}),n.d(t,"BootstrapService",function(){return o.a}),n.d(t,"ConfigurationExtractorService",function(){return o.b}),n.d(t,"NotificationService",function(){return o.g}),n.d(t,"NotificationMouseLeaveDetectionService",function(){return o.f});var a=n(83);n.d(t,"toolbarItemContextModule",function(){return a.a}),n.d(t,"smarteditContainerModule",function(){return r.a})},function(e,t){angular.module("yCollapsibleContainerModule",["yLoDashModule","ui.bootstrap"]).constant("COLLAPSIBLE_CONTAINER_CONSTANTS",{DEFAULT_CONFIGURATION:{expandedByDefault:!1,iconAlignment:"right",iconVisible:!0},ICON_LEFT:"icon-left",ICON_RIGHT:"icon-right"}).controller("yCollapsibleContainerController",["lodash","COLLAPSIBLE_CONTAINER_CONSTANTS",function(e,t){this.getIconRelatedClassname=function(){if(this.configuration.iconVisible)return t["ICON_"+this.configuration.iconAlignment.toUpperCase()]}.bind(this),this.$onInit=function(){this.configuration=e.defaultsDeep(this.configuration,t.DEFAULT_CONFIGURATION)}}]).component("yCollapsibleContainer",{templateUrl:"yCollapsibleContainer.html",controller:"yCollapsibleContainerController",controllerAs:"$yCollapsibleContainerCtrl",transclude:{"collapsible-container-content":"content","collapsible-container-title":"?header"},bindings:{configuration:"<?"}}),angular.module("yDropDownMenuModule",["functionsModule"]).controller("YDropDownMenuController",["$templateCache","getEncodedString",function(e,t){var n=function(e){var t={callback:"function",template:"string",templateUrl:"string"},n=Object.keys(t),i=Object.keys(e).filter(function(e){return-1!==n.indexOf(e)}.bind(this));if(1!==i.length)throw new Error("Please provide only one of callback, template or templateUrl.");if(typeof e[i[0]]!==t[i[0]])throw new Error("Please provide a parameter of a proper type: callback(Function), template(String) or templateUrl(String).");return i[0]}.bind(this),i=function(n){var i="yDropdownItem_"+t(n.template)+"_Template.html";return e.get(i)||e.put(i,n.template),i}.bind(this);this.setTemplateUrl=function(e){switch(n(e)){case"callback":e.templateUrl="yDropdownDefaultItemTemplate.html";break;case"template":e.templateUrl=i(e),delete e.template}},this.$onChanges=function(){this.clonedDropdownItems=angular.copy(this.dropdownItems),this.clonedDropdownItems.forEach(function(e){e.condition=e.condition||function(){return!0},this.setTemplateUrl(e)}.bind(this))}}]).component("yDropDownMenu",{templateUrl:"yDropDownMenuTemplate.html",controller:"YDropDownMenuController",bindings:{dropdownItems:"<",selectedItem:"<"}}),angular.module("yMessageModule",[]).controller("YMessageController",function(){this.$onInit=function(){switch(this.messageId=this.messageId||"y-message-default-id",this.type){case"danger":this.classes="y-message-danger",this.icon="hyicon-msgdanger";break;case"info":this.classes="y-message-info",this.icon="hyicon-msginfo";break;case"success":this.classes="y-message-success",this.icon="hyicon-msgsuccess";break;case"warning":this.classes="y-message-warning",this.icon="hyicon-msgwarning";break;default:this.classes="y-message-info",this.icon="hyicon-msginfo"}this.icon="hyicon "+this.icon}}).component("yMessage",{templateUrl:"yMessage.html",controller:"YMessageController",transclude:{messageTitle:"?messageTitle",messageDescription:"?messageDescription"},bindings:{messageId:"@?",type:"@"}}),angular.module("yPopupOverlayModule",["yPopupOverlayUtilsModule","yjqueryModule","yLoDashModule","compileHtmlModule","functionsModule","seConstantsModule"]).constant("yPopupOverlayUuidPrefix","ypo-uuid-_").service("yPopupEngineService",["$document","$window","$compile","$timeout","lodash",function(e,t,n,i,r){function o(e,t,n,i){this.anchorElement=e,this.template=t,this.scope=n,this.isOpen=!1,this.oldTrigger=null,this.eventListeners=[],this.configure(i)}return o.prototype.configure=function(t){t=t||{},this.onChanges=t.onChanges,this.container=t.container||e[0].body,this.onShow=t.onShow,this.onHide=t.onHide;var n=this;this.config={placement:t.placement||"bottom",modifiers:t.modifiers,trigger:t.trigger||"hover",onClickOutside:t.onClickOutside||"close",onCreate:n._onChanges.bind(n),onUpdate:n._onChanges.bind(n)},this.setTrigger(this.config.trigger)},o.prototype.show=function(){this.isOpen||(this.isOpen=!0,this.popupScope=this.scope.$new(!1),this.popupElement=n(this.template)(this.popupScope)[0],this.popupInstance=new t.Popper(this.anchorElement,this.popupElement,r.merge(this.config,o.popperConfig)),"string"==typeof this.container?angular.element(this.container)[0].appendChild(this.popupElement):this.container.appendChild(this.popupElement),o.erd.listenTo(this.popupElement,function(){this.update()}.bind(this)),this.onShow&&this.onShow(),this.update())},o.prototype.hide=function(){this.isOpen&&(o.erd.uninstall(this.popupElement),this.popupScope.$destroy(),this.popupInstance.destroy(),this.popupElement.parentNode.removeChild(this.popupElement),this.onHide&&this.onHide(),this.isOpen=!1)},o.prototype.update=function(){this.isOpen&&this.popupInstance.scheduleUpdate()},o.prototype.setTrigger=function(t){if(this.oldTrigger!==t){this.config.trigger=t,this.oldTrigger=t,this._removeTriggers();var n=[],r=function(e){e.stopPropagation(),e.preventDefault(),this.show()}.bind(this),o=function(e){e.stopPropagation(),e.preventDefault(),this.hide()}.bind(this);switch(t){case"click":n.push({event:"click",handle:function(){this.isOpen?this.hide():this.show()}.bind(this)});break;case"hover":n.push({event:"mouseenter",handle:r}),n.push({event:"mouseleave",handle:o});break;case"focus":n.push({event:"focus",handle:r}),n.push({event:"blur",handle:o});break;case"show":case"true":case!0:return void this.show();case"hide":case"false":case!1:return void this.hide()}if(n.forEach(function(e){this.anchorElement.addEventListener(e.event,function(t){i(function(){e.handle(t)})}),this.eventListeners.push(function(){this.anchorElement.removeEventListener(e.event,e.handle)}.bind(this))}.bind(this)),"close"===this.config.onClickOutside&&"click"===this.config.trigger){var a=function(e){e.target===this.anchorElement||this.anchorElement.contains(e.target)||this.hide()}.bind(this);e[0].body.addEventListener("click",function(e){i(function(){a(e)})}),this.eventListeners.push(function(){e[0].body.removeEventListener("click",a)})}}},o.prototype.dispose=function(){this.hide(),this._removeTriggers()},o.prototype._removeTriggers=function(){this.eventListeners.forEach(function(e){e()}),this.eventListeners=[]},o.prototype._onChanges=function(e){this.onChanges&&this.onChanges(this.popupElement,e)},o.popperConfig={modifiers:{preventOverflow:{padding:0}}},o.erd=t.elementResizeDetectorMaker({strategy:"scroll"}),o}]).directive("yPopupOverlay",function(){return{restrict:"A",scope:!1,controllerAs:"$yPopupCtrl",controller:"yPopupOverlayController"}}).controller("yPopupOverlayController",["$scope","$element","$document","$compile","$attrs","$timeout","$interpolate","yjQuery","lodash","isIframe","yPopupOverlayUuidPrefix","yPopupOverlayUtilsDOMCalculations","yPopupOverlayUtilsClickOrderService","OVERLAY_ID",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h){function f(e,t){return e[0]===t||s.contains(e[0],t)}var g=new function(){this.checkPopupSizeChanged=function(){if(this.popupElement){var e=this.popupElement.children().first()[0].getBoundingClientRect(),t=e.width!==this.popupSize.width||e.height!==this.popupSize.height;this.popupSize={width:e.width,height:e.height},t&&this.updatePopupElementPositionAndSize()}return!1}.bind(this),this.updatePopupElementPositionAndSize=function(){if(this.popupElement)try{var e=t[0].getBoundingClientRect(),n=d.calculatePreferredPosition(e,this.popupSize.width,this.popupSize.height,this.config.valign,this.config.halign);d.adjustHorizontalToBeInViewport(n),this.popupElement.css(n)}catch(e){}}.bind(this),this.togglePoppup=function(e){e.stopPropagation(),e.preventDefault(),this.popupDisplayed?this.hide():this.show()}.bind(this),this.getTemplateString=function(){var e=s("<div>");e.attr("data-uuid",this.uuid),e.addClass("y-popover-outer");var t;if(this.config.template)(t=s("<div>")).html(this.config.template);else{if(!this.config.templateUrl)throw"yPositiongetTemplateString() - Missing template";(t=s("<data-ng-include>")).attr("src","'"+this.config.templateUrl+"'")}return t.addClass("y-popover-inner"),e.append(t),e[0].outerHTML}.bind(this),this.hide=function(){this.popupDisplayed&&(p.unregister(this),this.popupElementScope&&(this.popupElementScope.$destroy(),this.popupElementScope=null),this.popupElement&&(this.popupElement.remove(),this.popupElement=null),r.yPopupOverlayOnHide&&o(function(){e.$eval(r.yPopupOverlayOnHide)}),this.resetPopupSize()),this.popupDisplayed=!1}.bind(this),this.show=function(){if(!this.popupDisplayed){this.popupElement=this.getTemplateString(),this.popupElementScope=e.$new(!1),this.popupElement=i(this.popupElement)(this.popupElementScope);var t=s(c()?"#"+h:"body");this.updatePopupElementPositionAndSize(),this.popupElement.appendTo(t),angular.element(function(){this.updatePopupElementPositionAndSize(),p.register(this),r.yPopupOverlayOnShow&&o(function(){e.$eval(r.yPopupOverlayOnShow)})}.bind(this))}this.popupDisplayed=!0}.bind(this),this.updateTriggers=function(e){if(void 0===e&&(e="click"),this.oldTrigger!==e){if(this.oldTrigger=e,this.untrigger&&this.untrigger(),"click"===e)return angular.element(t).on("click",this.togglePoppup),void(this.untrigger=function(){angular.element(t).off("click",this.togglePoppup)});"true"===e||!0===e?this.show():this.hide()}}.bind(this),this.onBodyElementClicked=function(e){if(this.popupElement){var n=f(this.popupElement,e.target),i=f(t,e.target);if(!n&&!i)return this.hide(),e.stopPropagation(),e.preventDefault(),!0}return!1}.bind(this),this.resetPopupSize=function(){this.popupSize={width:0,height:0}}.bind(this),this.$doCheck=function(){if(this.active){this.checkPopupSizeChanged();var t=a(r.yPopupOverlayTrigger)(e);t!==this.doCheckTrigger&&(this.doCheckTrigger=t,this.updateTriggers(t))}}.bind(this),this.$onInit=function(){this.uuid=l.uniqueId(u),this.popupDisplayed=!1,this.config=e.$eval(r.yPopupOverlay),this.resetPopupSize(),this.updateTriggers(),this.active="undefined"!==this.config},this.$onDestroy=function(){this.untrigger&&this.untrigger(),this.hide()}.bind(this)};this.$doCheck=function(){g.$doCheck()},this.$onInit=function(){g.$onInit()},this.$onDestroy=function(){g.$onDestroy()},e.closePopupOverlay=function(){g.hide()}.bind(this)}]),angular.module("yPopupOverlayUtilsModule",[]).service("yPopupOverlayUtilsClickOrderService",["$document","$log",function(e,t){function n(e){i.length>0&&i[0].onBodyElementClicked(e)}var i=[];this.register=function(r){-1===i.indexOf(r)?(0===i.length&&angular.element(e[0].body).on("click",n),i.unshift(r)):t.warn("yPopupOverlayUtilsClickOrderService.onHide() - instance already registered")},this.unregister=function(t){var r=i.indexOf(t);-1!==r&&i.splice(r,1),0===i.length&&angular.element(e[0].body).off("click",n)}}]).service("yPopupOverlayUtilsDOMCalculations",["$window","$document",function(e,t){function n(){if(t[0].body.scrollHeight>t[0].body.clientHeight){var e=t[0].createElement("p");e.style.width="100%",e.style.height="200px";var n=t[0].createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(e),t[0].body.appendChild(n);var i=e.offsetWidth;n.style.overflow="scroll";var r=e.offsetWidth;return i===r&&(r=n.clientWidth),t[0].body.removeChild(n),i-r}return 0}this.calculatePreferredPosition=function(t,n,i,r,o){var a=e.pageXOffset,s=e.pageYOffset,l={width:n,height:i};switch(r){case"top":l.top=t.top+s-i;break;case"bottom":default:l.top=t.bottom+s}switch(o){case"left":l.left=t.right+a-n;break;case"right":default:l.left=t.left+a}return l},this.adjustHorizontalToBeInViewport=function(t){if(t.width>=e.innerWidth)t.left=0,t.width=e.innerWidth;else{var i=n();t.left-e.pageXOffset+t.width>=e.innerWidth-i&&(t.left=e.innerWidth-t.width-i),t.left-e.pageXOffset<=0&&(t.left=e.pageXOffset)}}}]),angular.module("alertsBoxModule",[]).directive("alertsBox",function(){return{templateUrl:"alertsTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{alerts:"="},link:function(e){e.dismissAlert=function(t){e.alerts.splice(t,1)}}}}),angular.module("authenticationInterfaceModule",[]).factory("DEFAULT_AUTH_MAP",["I18N_ROOT_RESOURCE_URI","DEFAULT_AUTHENTICATION_ENTRY_POINT",function(e,t){var n={};return n["^(?!"+e+"/.*$).*$"]=t,n}]).factory("DEFAULT_CREDENTIALS_MAP",["DEFAULT_AUTHENTICATION_ENTRY_POINT","DEFAULT_AUTHENTICATION_CLIENT_ID",function(e,t){var n={};return n[e]={client_id:t},n}]).factory("AuthenticationServiceInterface",function(){var e=function(){};return e.prototype.authenticate=function(){},e.prototype.logout=function(){},e.prototype.isReAuthInProgress=function(){},e.prototype.setReAuthInProgress=function(){},e.prototype.filterEntryPoints=function(){},e.prototype.isAuthEntryPoint=function(){},e.prototype.isAuthenticated=function(){},e}),angular.module("hasOperationPermissionModule",["eventServiceModule","permissionServiceModule","yLoDashModule"]).controller("hasOperationPermissionController",["$log","EVENTS","systemEventService","permissionService","lodash",function(e,t,n,i,r){this.refreshIsPermissionGranted=function(){i.isPermitted(this._validateAndPreparePermissions(this.hasOperationPermission)).then(function(e){this.isPermissionGranted=e}.bind(this),function(t){e.error("Failed to retrieve authorization",t),this.isPermissionGranted=!1}.bind(this))},this._validateAndPreparePermissions=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new Error("Permission should be string or an array of objects");var t=r.cloneDeep(e);return"string"==typeof e&&(t=[{names:e.split(",")}]),t},this.$onInit=function(){this._unregisterHandler=n.registerEventHandler(t.AUTHORIZATION_SUCCESS,this.refreshIsPermissionGranted.bind(this))},this.$onChanges=function(e){e.hasOperationPermission&&(this.isPermissionGranted=!1,this.refreshIsPermissionGranted())},this.$onDestroy=function(){this._unregisterHandler()}}]).directive("hasOperationPermission",function(){return{transclude:!0,restrict:"A",templateUrl:"hasOperationPermissionTemplate.html",controller:"hasOperationPermissionController",controllerAs:"ctrl",scope:{},bindToController:{hasOperationPermission:"<"}}}),angular.module("authorizationModule",["smarteditServicesModule","loadConfigModule","sessionServiceModule","resourceLocationsModule"]).service("authorizationService",["$log","restServiceFactory","sessionService","USER_GLOBAL_PERMISSIONS_RESOURCE_URI",function(e,t,n,i){var r=t.get(i),o=function(e,t){var n=e.find(function(e){return e.key.toLowerCase()===t.toLowerCase()});return!!n&&"true"===n.value},a=function(e,t){for(var n=!!t&&t.length>0,i=0;n&&i<t.length;)n=n&&o(e,t[i++]);return n},s=function(e){return n.getCurrentUsername().then(function(t){return t?r.get({user:t,permissionNames:e.join(",")}).then(function(e){return e.permissions}):[]})};this.canPerformOperation=function(e){var t=e?e.split(","):[];return this.hasGlobalPermissions(t)},this.hasGlobalPermissions=function(t){if(!(t instanceof Array))throw"permissionNames must be an array";if(t.length<1)throw"permissionNames cannot be empty";return s(t).then(function(e){return a(e,t)},function(){return e.error("AuthorizationService - Failed to determine authorization for the following permissions: "+t.toString()),!1})}}]),angular.module("browserServiceModule",[]).constant("SUPPORTED_BROWSERS",{IE:"IE",CHROME:"Chrome",FIREFOX:"Firefox",EDGE:"Edge",SAFARI:"Safari",UNKNOWN:"Uknown"}).service("browserService",["$window","SUPPORTED_BROWSERS",function(e,t){this.getCurrentBrowser=function(){var e=t.UNKNOWN;return"undefined"!=typeof InstallTrigger?e=t.FIREFOX:document.documentMode?e=t.IE:window.StyleMedia?e=t.EDGE:window.chrome&&window.chrome.webstore?e=t.CHROME:this._isSafari()&&(e=t.SAFARI),e}.bind(this),this._isSafari=function(){var t=e.navigator.userAgent,n=e.navigator.vendor,i=/constructor/i.test(function(){}),r=n&&n.indexOf("Apple")>-1&&t&&!t.match("CriOS");return i||r},this.isIE=function(){return this.getCurrentBrowser()===t.IE},this.isFF=function(){return this.getCurrentBrowser()===t.FIREFOX},this.isSafari=function(){return this.getCurrentBrowser()===t.SAFARI}}]),angular.module("catalogAwareRouteResolverModule",[]).constant("catalogAwareRouteResolverFunctions",{setExperience:["$log","$q","$route","$location","experienceService","sharedDataService","systemEventService","EVENTS","LANDING_PAGE_PATH","catalogVersionPermissionService",function(e,t,n,i,r,o,a,s,l,c){var u=function(e,t){return void 0===e||t.catalogDescriptor.catalogId!==e.catalogDescriptor.catalogId||t.catalogDescriptor.catalogVersion!==e.catalogDescriptor.catalogVersion},d=function(){return c.hasReadPermissionOnCurrent().then(function(e){e||i.url(l)},function(){i.url(l)})};return r.buildDefaultExperience(n.current.params).then(function(e){return o.get("experience").then(function(n){return o.set("experience",e).then(function(){return t.when({previousExperience:n,nextExperience:e})})})},function(t){e.error("the provided path could not be parsed: "+i.url()),e.error(t),i.url(l)}).then(function(e){return d().then(function(){if(u(e.previousExperience,e.nextExperience))return a.sendAsynchEvent(s.EXPERIENCE_UPDATE)})})}]}),angular.module("catalogServiceInterfaceModule",[]).factory("CatalogServiceInterface",function(){var e=function(){};return e.prototype.getCatalogsForSite=function(){},e.prototype.getAllCatalogsGroupedById=function(){},e.prototype.retrieveUriContext=function(){},e.prototype.getContentCatalogsForSite=function(){},e.prototype.getAllContentCatalogsGroupedById=function(){},e.prototype.getCatalogByVersion=function(){},e.prototype.isContentCatalogVersionNonActive=function(){},e.prototype.getContentCatalogActiveVersion=function(){},e.prototype.getActiveContentCatalogVersionByCatalogId=function(){},e.prototype.getDefaultSiteForContentCatalog=function(){},e.prototype.getCatalogVersionByUuid=function(){},e.prototype.getCatalogVersionUUid=function(){},e.prototype.getProductCatalogsForSite=function(){},e.prototype.getActiveProductCatalogVersionByCatalogId=function(){},e.prototype.clearCache=function(){},e.prototype.returnActiveCatalogVersionUIDs=function(){},e.prototype.getCatalogVersionUUid=function(){},e}),angular.module("catalogVersionPermissionServiceInterfaceModule",[]).service("CatalogVersionPermissionServiceInterface",function(){var e=function(){};return e.prototype.hasWritePermission=function(){},e.prototype.hasReadPermission=function(){},e.prototype.hasWritePermissionOnCurrent=function(){},e.prototype.hasReadPermissionOnCurrent=function(){},e}),angular.module("compileHtmlModule",[]).directive("compileHtml",["$compile",function(e){return{restrict:"A",link:function(t,n,i){t.$watch(function(e){return e.$eval(i.compileHtml)},function(i){n.html(i),e(n.contents())(t)})}}}]),angular.module("configModule",[]).config(["$locationProvider","$qProvider",function(e,t){t.errorOnUnhandledRejections(!1)}]),angular.module("seConstantsModule",[]).constant("OVERLAY_ID","smarteditoverlay").constant("COMPONENT_CLASS","smartEditComponent").constant("OVERLAY_COMPONENT_CLASS","smartEditComponentX").constant("SMARTEDIT_ATTRIBUTE_PREFIX","data-smartedit-").constant("ID_ATTRIBUTE","data-smartedit-component-id").constant("UUID_ATTRIBUTE","data-smartedit-component-uuid").constant("ELEMENT_UUID_ATTRIBUTE","data-smartedit-element-uuid").constant("CATALOG_VERSION_UUID_ATTRIBUTE","data-smartedit-catalog-version-uuid").constant("TYPE_ATTRIBUTE","data-smartedit-component-type").constant("CONTAINER_ID_ATTRIBUTE","data-smartedit-container-id").constant("CONTAINER_TYPE_ATTRIBUTE","data-smartedit-container-type").constant("CONTENT_SLOT_TYPE","ContentSlot").constant("SMARTEDIT_IFRAME_ID","ySmartEditFrame").constant("SMARTEDIT_IFRAME_WRAPPER_ID","#js_iFrameWrapper").constant("SMARTEDIT_IFRAME_DRAG_AREA","ySmartEditFrameDragArea").constant("EVENT_TOGGLE_SMARTEDIT_IFRAME_DRAG_AREA","EVENT_TOGGLE_SMARTEDIT_IFRAME_DRAG_AREA").constant("SCROLL_AREA_CLASS","ySECmsScrollArea").constant("SMARTEDIT_ELEMENT_HOVERED","smartedit-element-hovered").constant("SMARTEDIT_DRAG_AND_DROP_EVENTS",{DRAG_DROP_CROSS_ORIGIN_START:"DRAG_DROP_CROSS_ORIGIN_START",DRAG_DROP_START:"EVENT_DRAG_DROP_START",DRAG_DROP_END:"EVENT_DRAG_DROP_END",TRACK_MOUSE_POSITION:"EVENT_TRACK_MOUSE_POSITION",DROP_ELEMENT:"EVENT_DROP_ELEMENT"}).constant("DATE_CONSTANTS",{ANGULAR_FORMAT:"short",MOMENT_FORMAT:"M/D/YY h:mm A",MOMENT_ISO:"YYYY-MM-DDTHH:mm:00ZZ",ISO:"yyyy-MM-ddTHH:mm:00Z"}).constant("EVENT_CONTENT_CATALOG_UPDATE","EVENT_CONTENT_CATALOG_UPDATE").constant("EVENT_PERSPECTIVE_CHANGED","EVENT_PERSPECTIVE_CHANGED").constant("EVENT_PERSPECTIVE_ADDED","EVENT_PERSPECTIVE_ADDED").constant("EVENT_PERSPECTIVE_UNLOADING","EVENT_PERSPECTIVE_UNLOADING").constant("EVENT_PERSPECTIVE_REFRESHED","EVENT_PERSPECTIVE_REFRESHED").constant("ALL_PERSPECTIVE","se.all").constant("NONE_PERSPECTIVE","se.none").constant("VALIDATION_MESSAGE_TYPES",{VALIDATION_ERROR:"ValidationError",WARNING:"Warning"}).constant("CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS",{PROCESS_COMPONENTS:"contractChangeListenerProcessComponents",RESTART_PROCESS:"contractChangeListenerRestartProcess"}).constant("SMARTEDIT_COMPONENT_PROCESS_STATUS","smartEditComponentProcessStatus").constant("CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS",{PROCESS:"processComponent",REMOVE:"removeComponent",KEEP_VISIBLE:"keepComponentVisible"}).constant("SORT_DIRECTIONS",{ASC:"asc",DESC:"desc"}).constant("EVENT_OUTER_FRAME_CLICKED","EVENT_OUTER_FRAME_CLICKED").constant("REFRESH_CONTEXTUAL_MENU_ITEMS_EVENT","REFRESH_CONTEXTUAL_MENU_ITEMS_EVENT").constant("SHOW_TOOLBAR_ITEM_CONTEXT","SHOW_TOOLBAR_ITEM_CONTEXT").constant("HIDE_TOOLBAR_ITEM_CONTEXT","HIDE_TOOLBAR_ITEM_CONTEXT").constant("EVENT_NOTIFICATION_CHANGED","EVENT_NOTIFICATION_CHANGED").constant("OVERLAY_RERENDERED_EVENT","overlayRerendered"),angular.module("crossFrameEventServiceModule",["gatewayFactoryModule","eventServiceModule"]).constant("CROSS_FRAME_EVENT","CROSS_FRAME_EVENT").factory("crossFrameEventServiceGateway",["CROSS_FRAME_EVENT","gatewayFactory",function(e,t){return t.createGateway(e)}]).factory("crossFrameEventService",["$q","systemEventService","crossFrameEventServiceGateway",function(e,t,n){return new function(){this.publish=function(i,r){return e.all([t.sendAsynchEvent(i,r),n.publish(i,r)])},this.subscribe=function(e,i){var r=t.registerEventHandler(e,i),o=n.subscribe(e,i);return function(){r(),o()}}}}]),angular.module("_dragAndDropScrollingModule",["yjqueryModule","seConstantsModule","functionsModule"]).constant("THROTTLE_SCROLLING_DELAY",75).service("_dragAndDropScrollingService",["$window","$translate","yjQuery","lodash","isPointOverElement","inViewElementObserver","SCROLL_AREA_CLASS","THROTTLE_SCROLLING_DELAY",function(e,t,n,i,r,o,a,s){this._SCROLLING_AREA_HEIGHT=50,this._FAST_SCROLLING_AREA_HEIGHT=25,this._SCROLLING_STEP=5,this._FAST_SCROLLING_STEP=15;o.addSelector("#top_scroll_page"),o.addSelector("#bottom_scroll_page"),this._topScrollArea=null,this._bottomScrollArea=null,this._throttleScrollingEnabled=!1,this._initialize=function(){this._scrollable=this._getSelector(document.scrollingElement||document.documentElement),this._addScrollAreas(),this._addEventListeners(),this._scrollDelta=0,this._initialized=!0},this._deactivate=function(){this._removeEventListeners(),this._scrollDelta=0,this._initialized=!1},this._enable=function(){this._initialized&&(this._scrollLimitY=this._scrollable.get(0).scrollHeight-e.innerHeight,this._showScrollAreas())},this._disable=function(){if(this._initialized){var e=this._getScrollAreas();e.trigger("dragleave"),e.hide()}},this._addScrollAreas=function(){this._topScrollArea=this._getSelector('<div id="top_scroll_page" class="'+a+'"></div>').appendTo("body"),this._bottomScrollArea=this._getSelector('<div id="bottom_scroll_page" class="'+a+'"></div>').appendTo("body");var e=this._getScrollAreas();e.height(this._SCROLLING_AREA_HEIGHT),this._topScrollArea.css({top:0}),this._bottomScrollArea.css({bottom:0}),e.hide();var n,i;t("se.draganddrop.uihint.top").then(function(e){return n=e,t("se.draganddrop.uihint.bottom")}).then(function(e){i=e,this._topScrollArea.text(n),this._bottomScrollArea.text(i)}.bind(this))},this._addEventListeners=function(){var e=this._getScrollAreas();e.on("dragenter",this._onDragEnter.bind(this)),e.on("dragover",this._onDragOver.bind(this)),e.on("dragleave",this._onDragLeave.bind(this))},this._removeEventListeners=function(){var e=this._getScrollAreas();e.off("dragenter"),e.off("dragover"),e.off("dragleave"),e.remove()},this._onDragEnter=function(t){var n=this._SCROLLING_STEP;"top_scroll_page"===this._getSelector(t.target).attr("id")&&(n*=-1),this._scrollDelta=n,this._animationFrameId=e.requestAnimationFrame(this._scrollPage.bind(this))},this._onDragOver=function(t){var n=t.originalEvent;if("top_scroll_page"===this._getSelector(n.target).attr("id"))n.clientY<=this._FAST_SCROLLING_AREA_HEIGHT?this._scrollDelta=-this._FAST_SCROLLING_STEP:this._scrollDelta=-this._SCROLLING_STEP;else{var i=this._getSelector(e).height();n.clientY>=i-this._FAST_SCROLLING_AREA_HEIGHT?this._scrollDelta=this._FAST_SCROLLING_STEP:this._scrollDelta=this._SCROLLING_STEP}},this._onDragLeave=function(){this._scrollDelta=0,e.cancelAnimationFrame(this._animationFrameId)},this._scrollPage=function(){if(this._scrollDelta){var t=this._scrollable.scrollTop(),n=!1;if(this._scrollDelta>0&&t<this._scrollLimitY?n=!0:this._scrollDelta<0&&t>0&&(n=!0),n){var i=this._scrollable.scrollTop()+this._scrollDelta;this._scrollable.scrollTop(i),this._animationFrameId=e.requestAnimationFrame(this._throttleScrollingEnabled?this._throttledScrollPage:this._scrollPage.bind(this))}this._showScrollAreas()}},this._throttledScrollPage=i.throttle(this._scrollPage.bind(this),s),this._getSelector=function(e){return n(e)},this._getScrollAreas=function(){return n(["#top_scroll_page","#bottom_scroll_page"].join(","))},this._showScrollAreas=function(){var e=this._scrollable.scrollTop();0===e?this._topScrollArea.hide():this._topScrollArea.show(),e>=this._scrollLimitY?this._bottomScrollArea.hide():this._bottomScrollArea.show()},this.toggleThrottling=function(e){this._throttleScrollingEnabled=e}}]),angular.module("dragAndDropServiceModule",["yjqueryModule","yLoDashModule","_dragAndDropScrollingModule","eventServiceModule","seConstantsModule","smarteditServicesModule"]).constant("SEND_MOUSE_POSITION_THROTTLE",100).service("dragAndDropService",["$injector","$timeout","isBlank","yjQuery","lodash","_dragAndDropScrollingService","OVERLAY_COMPONENT_CLASS","inViewElementObserver","systemEventService","SMARTEDIT_DRAG_AND_DROP_EVENTS","dragAndDropCrossOrigin",function(e,t,n,i,r,o,a,s,l,c,u){this.configurations={},this._isDragAndDropExecuting=!1,u.initialize(),this.register=function(e){if(!e||!e.id)throw new Error("dragAndDropService - register(): Configuration needs an ID.");this.configurations[e.id]=e,n(e.targetSelector)||s.addSelector(e.targetSelector)},this.unregister=function(e){e.forEach(function(e){var t=this.configurations[e];t&&(this._deactivateConfiguration(t),this._deactivateScrolling(t),delete this.configurations[e])}.bind(this))},this.applyAll=function(){r.forEach(this.configurations,function(e){this.apply(e.id)}.bind(this))},this.apply=function(e){var t=this.configurations[e];t&&(this.update(t),this._cacheDragImages(t),this._initializeScrolling(t))},this.update=function(e){var t=this.configurations[e];t&&(this._deactivateConfiguration(t),this._update(t))},this._update=function(e){var t=this;(r.isArray(e.sourceSelector)?e.sourceSelector:[e.sourceSelector]).forEach(function(n){var i=this._getSelector(n).filter(function(){return!t._getSelector(this).attr("draggable")});i.attr("draggable",!0),i.on("dragstart",this._onDragStart.bind(this,e)),i.on("dragend",this._onDragEnd.bind(this,e))}.bind(this));var n=this._getSelector(e.targetSelector).filter(function(){return!t._getSelector(this).attr("data-droppable")});n.attr("data-droppable",!0),n.on("dragenter",this._onDragEnter.bind(this,e)),n.on("dragover",this._onDragOver.bind(this,e)),n.on("drop",this._onDrop.bind(this,e)),n.on("dragleave",this._onDragLeave.bind(this,e))},this._deactivateConfiguration=function(e){var t=this._getSelector(e.sourceSelector),n=this._getSelector(e.targetSelector);t.removeAttr("draggable"),n.removeAttr("data-droppable"),t.off("dragstart"),t.off("dragend"),n.off("dragenter"),n.off("dragover"),n.off("dragleave"),n.off("drop")},this._onDragStart=function(e,n){var r=n.originalEvent;this._setDragTransferData(e,r),t(function(){var t=i(n.target).closest("."+a);this._setDragAndDropExecutionStatus(!0,t),o._enable(),e.startCallback&&e.startCallback(r)}.bind(this),0)},this._onDragEnd=function(e,t){var n=t.originalEvent;o._disable(),this._isDragAndDropExecuting&&e.stopCallback&&e.stopCallback(n),this._setDragAndDropExecutionStatus(!1)},this._onDragEnter=function(e,t){var n=t.originalEvent;n.preventDefault(),this._isDragAndDropExecuting&&e.dragEnterCallback&&e.dragEnterCallback(n)},this._onDragOver=function(e,t){var n=t.originalEvent;n.preventDefault(),this._isDragAndDropExecuting&&e.dragOverCallback&&e.dragOverCallback(n)},this._onDrop=function(e,t){var n=t.originalEvent;if(n.preventDefault(),n.stopPropagation(),(!n.relatedTarget||3!==n.relatedTarget.nodeType)&&n.target!==n.relatedTarget)return this._isDragAndDropExecuting&&e.dropCallback&&e.dropCallback(n),!1},this._onDragLeave=function(e,t){var n=t.originalEvent;n.preventDefault(),this._isDragAndDropExecuting&&e.outCallback&&e.outCallback(n)},this._cacheDragImages=function(e){var t=null;e.helper&&(t=e.helper()),t&&("string"==typeof t?(e._cachedDragImage=new Image,e._cachedDragImage.src=t):e._cachedDragImage=t)},this._setDragTransferData=function(e,t){t.dataTransfer.setData("Text",e.id),e._cachedDragImage&&t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(e._cachedDragImage,0,0)},this._getSelector=function(e){return i(e)},this.markDragStarted=function(){this._setDragAndDropExecutionStatus(!0),o._enable()},this.markDragStopped=function(){this._setDragAndDropExecutionStatus(!1),o._disable()},this._setDragAndDropExecutionStatus=function(e,t){this._isDragAndDropExecuting=e,l.sendSynchEvent(e?c.DRAG_DROP_START:c.DRAG_DROP_END,t)},this._initializeScrolling=function(e){e.enableScrolling&&this._browserRequiresCustomScrolling()&&o._initialize()},this._deactivateScrolling=function(e){e.enableScrolling&&this._browserRequiresCustomScrolling()&&o._deactivate()},this._browserRequiresCustomScrolling=function(){return!0}}]),angular.module("eventServiceModule",["functionsModule"]).constant("EVENT_SERVICE_MODE_ASYNCH","EVENT_SERVICE_MODE_ASYNCH").constant("EVENT_SERVICE_MODE_SYNCH","EVENT_SERVICE_MODE_SYNCH").constant("EVENTS",{AUTHORIZATION_SUCCESS:"AUTHORIZATION_SUCCESS",LOGOUT:"SE_LOGOUT_EVENT",CLEAR_PERSPECTIVE_FEATURES:"CLEAR_PERSPECTIVE_FEATURES",EXPERIENCE_UPDATE:"experienceUpdate",PAGE_CHANGE:"PAGE_CHANGE",PAGE_CREATED:"PAGE_CREATED_EVENT",PAGE_DELETED:"PAGE_DELETED_EVENT"}).factory("EventService",["$timeout","$q","$log","toPromise","EVENT_SERVICE_MODE_ASYNCH","EVENT_SERVICE_MODE_SYNCH",function(e,t,n,i,r,o){return function(a){this.eventHandlers={},this.mode=r,a!==r&&a!==o||(this.mode=a),this._recursiveCallToEventHandlers=function(e,n){return t.all(this.eventHandlers[e].map(function(t){return i(t)(e,n)})).then(function(e){return e.pop()})},this.sendEvent=function(e,t){if(this.mode===r)this.sendAsynchEvent(e,t);else{if(this.mode!==o)throw"Unknown event service mode: "+this.mode;this.sendSynchEvent(e,t)}},this.sendSynchEvent=function(e,i){var r=t.defer();return e?(this.eventHandlers[e]&&this.eventHandlers[e].length>0?this._recursiveCallToEventHandlers(e,i).then(function(e){r.resolve(e)},function(e){r.reject(e)}):r.resolve(),r.promise):(n.error("Failed to send event. No event ID provided for data: "+i),void r.reject())},this.sendAsynchEvent=function(n,i){var r=t.defer();return e(function(){this.sendSynchEvent(n,i).then(function(e){r.resolve(e)},function(e){r.reject(e)})}.bind(this),0),r.promise},this.registerEventHandler=function(e,t){if(e&&t)return void 0===this.eventHandlers[e]&&(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t),function(){this.unRegisterEventHandler(e,t)}.bind(this);n.error("Failed to register event handler for event: "+e)},this.unRegisterEventHandler=function(e,t){var i=this.eventHandlers[e]?this.eventHandlers[e].indexOf(t):-1;i>=0?this.eventHandlers[e].splice(i,1):n.warn("Attempting to remove event handler for "+e+" but handler not found.")}}}]).factory("systemEventService",["EventService",function(e){return new e}]),angular.module("experienceInterceptorModule",["interceptorHelperModule","functionsModule","smarteditServicesModule","smarteditServicesModule","resourceLocationsModule","yLoDashModule"]).factory("experienceInterceptor",["lodash","sharedDataService","interceptorHelper","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","CMSWEBSERVICES_PATH","CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","PAGE_CONTEXT_SITE_ID",function(e,t,n,i,r,o,a,s,l,c){var u=function(e,t){var n=new RegExp(Object.keys(t).join("|"),"g");return e.replace(n,function(e){return t[e]})},d={};return d.request=function(e){return n.handleRequest(e,function(){return o.test(e.url)?t.get("experience").then(function(t){if(t){var n={};n.CONTEXT_SITE_ID_WITH_COLON=t.siteDescriptor.uid,n.CONTEXT_CATALOG_VERSION_WITH_COLON=t.catalogDescriptor.catalogVersion,n.CONTEXT_CATALOG_WITH_COLON=t.catalogDescriptor.catalogId,n[a]=t.siteDescriptor.uid,n[r]=t.catalogDescriptor.catalogVersion,n[i]=t.catalogDescriptor.catalogId,n[c]=t.pageContext?t.pageContext.siteId:t.siteDescriptor.uid,n[l]=t.pageContext?t.pageContext.catalogVersion:t.catalogDescriptor.catalogVersion,n[s]=t.pageContext?t.pageContext.catalogId:t.catalogDescriptor.catalogId,e.url=u(e.url,n),e.params&&"object"==typeof e.params&&(e.params=JSON.parse(u(JSON.stringify(e.params),n)))}return e}):e})}.bind(d),d}]).config(["$httpProvider",function(e){e.interceptors.push("experienceInterceptor")}]),angular.module("l10nModule",["languageServiceModule","crossFrameEventServiceModule"]).filter("l10n",["languageService","crossFrameEventService","SWITCH_LANGUAGE_EVENT",function(e,t,n){function i(){(r=function(e){return e+" filtered initially"}).$stateful=!1,e.getResolveLocaleIsoCode().then(function(e){(r=function(t){return"string"==typeof t?t:t?t[e]?t[e]:t[Object.keys(t)[0]]:void 0}).$stateful=!1})}var r;return i(),t.subscribe(n,i),function(e){return r(e)}}]),angular.module("functionsModule",["yjqueryModule","yLoDashModule","ngSanitize"]).factory("ParseError",function(){return function(e){this.value=e}}).factory("getAbsoluteURL",function(){return function(e,t){return new RegExp("([a-zA-Z0-9]+://)([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})|([0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+)(:[0-9]+)?(/.*)?").exec(t)?t:e+t}}).factory("getOrigin",function(){return function(e){if(e){var t=document.createElement("a");t.setAttribute("href",e);var n=t.protocol+"//"+t.hostname+(t.port?":"+t.port:"");return t=null,n}return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}}).factory("isBlank",function(){return function(e){return void 0===e||null===e||"null"===e||0===e.toString().trim().length}}).factory("extend",function(){return function(e,t){return t||(t=function(){}),t.prototype=Object.create(e.prototype),t}}).factory("hitch",function(){return function(e,t){var n=Array.prototype.slice.call(arguments).slice(2);return function(){var i=Array.prototype.slice.call(arguments);return t.apply(e,n.concat(i))}}}).factory("customTimeout",["$rootScope",function(e){return function(t,n){setTimeout(function(){t(),e.$digest()},n)}}]).factory("copy",function(){return function(e){return JSON.parse(JSON.stringify(e))}}).factory("merge",["yjQuery",function(e){return function(t,n){return e.extend(t,n),t}}]).factory("getQueryString",function(){return function(e){var t="";if(e)for(var n in e)t+="&"+n+"="+e[n];return"?"+t}}).factory("getURI",function(){return function(e){return e&&e.indexOf("?")>-1?e.split("?")[0]:e}}).factory("parseQuery",function(){return function(e){var t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,i,r){t[n]=r}),t}}).factory("trim",function(){return function(e){var t=/^\s+/,n=/\s+$/;return e.replace(t,"").replace(n,"")}}).factory("convertToArray",function(){return function(e){var t=[];for(var n in e)0!==n.indexOf("$")&&0!==n.indexOf("toJSON")&&t.push({key:n,value:e[n]});return t}}).factory("injectJS",function(){return{getInjector:function(){return $script},execute:function(e){var t=e.srcs,n=e.index,i=e.callback;void 0===n&&(n=0),void 0!==t[n]&&this.getInjector()(t[n],function(){n+1<t.length?this.execute({srcs:t,index:n+1,callback:i}):"function"==typeof i&&i()}.bind(this))}}}).factory("uniqueArray",function(){return function(e,t){return t.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),e}}).factory("regExpFactory",function(){return function(e){var t,n=new RegExp(/^[a-zA-Z\d]+$/i),i=new RegExp(/^[a-zA-Z\d\*]+$/i);return t=n.test(e)?["^","$"].join(e):i.test(e)?["^","$"].join(e.replace(/\*/,".*")):e,new RegExp(t,"g")}}).factory("generateIdentifier",function(){return function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}}).factory("escapeHtml",function(){return function(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}}).factory("sanitize",["isBlank",function(e){return function(t){return e(t)?t:t.replace(/(?=[()])/g,"\\")}}]).factory("sanitizeHTML",["isBlank",function(e){return function(t){var n=angular.copy(t);return e(n)||(n=n.replace(/(\r\n|\n|\r)/gm,"").replace(/>\s+</g,"><").replace(/<\/br\>/g,"")),n}}]).factory("toPromise",["$q","$log",function(e,t){return function(n,i){return function(){try{return e.when(n.apply(i,arguments))}catch(n){return t.error("execution of a method that was turned into a promise failed"),t.error(n),e.reject(n)}}}}]).factory("isFunction",function(){return function(e){return"function"==typeof e}}).factory("isObject",function(){var e={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};return function(t){return!(!t||!e[typeof t])}}).factory("debounce",["isFunction","isObject",function(e,t){function n(){}return function(i,r,o){var a,s,l,c,u,d,p,h,f,g=0,m=!1,v=!0;if(!e(i))throw new n;r=Math.max(0,r)||0,!0===o?(h=!0,v=!1):t(o)&&(h=o.leading,m="maxWait"in o&&(Math.max(r,o.maxWait)||0),v="trailing"in o?o.trailing:v);var y=function(){var e=r-(Date.now()-c);e<=0?(s&&clearTimeout(s),f=p,s=d=p=void 0,f&&(g=Date.now(),l=i.apply(u,a),d||s||(a=u=null))):d=setTimeout(y,e)},E=function(){d&&clearTimeout(d),s=d=p=void 0,(v||m!==r)&&(g=Date.now(),l=i.apply(u,a),d||s||(a=u=null))};return function(){a=arguments,c=Date.now(),u=this,p=v&&(d||!h);var e,t;if(!1===m)e=h&&!d;else{s||h||(g=c);var n=m-(c-g);(t=n<=0)?(s&&(s=clearTimeout(s)),g=c,l=i.apply(u,a)):s||(s=setTimeout(E,n))}return t&&d?d=clearTimeout(d):d||r===m||(d=setTimeout(y,r)),e&&(t=!0,l=i.apply(u,a)),!t||d||s||(a=u=null),l}}}]).factory("throttle",["debounce","isFunction","isObject",function(e,t,n){return function(i,r,o){var a=!0,s=!0;if(!t(i))throw new TypeError;return!1===o?a=!1:n(o)&&(a="leading"in o?o.leading:a,s="trailing"in o?o.trailing:s),o={},o.leading=a,o.maxWait=r,o.trailing=s,e(i,r,o)}}]).factory("parseHTML",["yjQuery",function(e){return function(t){return e.parseHTML(t)}}]).factory("unsafeParseHTML",["yjQuery",function(e){return function(t){return e.parseHTML(t,null,!0)}}]).factory("extractFromElement",["yjQuery",function(e){return function(t,n){return(t=e(t)).filter(n).add(t.find(n))}}]).factory("closeOpenModalsOnBrowserBack",["$uibModalStack",function(e){return function(){e.getTop()&&e.dismissAll()}}]).factory("URIBuilder",["lodash",function(e){return function(t){this.uri=t,this.build=function(){return this.uri},this.replaceParams=function(t){var n=e.cloneDeep(this);return t&&Object.keys(t).sort(function(e,t){return t.length-e.length}).forEach(function(e){var i=new RegExp("\\b"+e+"\\b");n.uri=n.uri.replace(":"+e,t[e]).replace(i,t[e])}),n}}}]).factory("getDataFromResponse",function(){return function(e){var t=Object.keys(e).filter(function(t){return e[t]instanceof Array})[0];return e[t]}}).factory("getKeyHoldingDataFromResponse",function(){return function(e){return Object.keys(e).filter(function(t){return e[t]instanceof Array})[0]}}).factory("resetObject",["copy",function(e){return function(t,n){if(t){for(var i in t)delete t[i];angular.extend(t,e(n))}else t=e(n);return t}}]).factory("isFunctionEmpty",function(){return function(e){return""===e.toString().match(/\{([\s\S]*)\}/m)[1].trim()||/proxyFunction/g.test(e.toString().replace(/\s/g,""))}}).factory("isObjectEmptyDeep",["lodash",function(e){return function(t){if(e.isObject(t)){for(var n in t)if(!e.isEmpty(t[n]))return!1;return!0}return e.isString(t)?e.isEmpty(t):e.isNil(t)}}]).factory("isAllTruthy",function(){return function(){var e=Array.prototype.slice.call(arguments);return function(){var t=arguments;return e.every(function(e){return e.apply(e,t)})}}}).factory("isAnyTruthy",function(){return function(){var e=Array.prototype.slice.call(arguments);return function(){var t=arguments;return e.some(function(e){return e.apply(e,t)})}}}).factory("formatDateAsUtc",["DATE_CONSTANTS",function(e){return function(t){return moment(t).utc().format(e.MOMENT_ISO)}}]).factory("getEncodedString",function(){return function(e){if("string"==typeof e)return btoa(e);throw new Error('getEncodedString called with input of type "'+typeof e+'" when only "string" is accepted.')}}).factory("encode",function(){return function(e){return btoa(encodeURIComponent(JSON.stringify(e)).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}}).factory("compareHTMLElementsPosition",function(){return function(e){return function(t,n){return e&&(t=t[e],n=n[e]),t===n?0:t.compareDocumentPosition?2&t.compareDocumentPosition(n)?1:-1:t.sourceIndex-n.sourceIndex}}}).factory("isIframe",["$window",function(e){return function(){return e.top!==e}}]).factory("isPointOverElement",function(){return function(e,t){var n=t.getBoundingClientRect();return e.x>=n.left&&e.x<=n.right&&e.y>=n.top&&e.y<=n.bottom}}).factory("areIntersecting",function(){return function(e,t){return!(t.left>e.left+e.width||t.left+t.width<e.left||t.top>e.top+e.height||t.top+t.height<e.top)}}).constant("EXTENDED_VIEW_PORT_MARGIN",1e3).factory("isInExtendedViewPort",["$document","yjQuery","areIntersecting","EXTENDED_VIEW_PORT_MARGIN",function(e,t,n,i){return function(r){if(!t.contains(e[0],r))return!1;var o=t(r).offset();o.width=t(r).outerWidth(),o.height=t(r).outerHeight();var a=document.scrollingElement||document.documentElement;return n({left:-i+a.scrollLeft,width:window.innerWidth+2*i,top:-i+a.scrollTop,height:window.innerHeight+2*i},o)}}]).factory("deepIterateOverObjectWith",["lodash",function(e){return function t(n,i){return e.reduce(n,function(n,r,o){return e.isPlainObject(r)?n[o]=t(r,i):n[o]=i(r),n}.bind(this),{})}}]).factory("deepObjectPropertyDiff",["lodash","deepIterateOverObjectWith",function(e,t){return function(n,i){function r(){}function o(){}var a=e.mergeWith(e.cloneDeep(n),i,function(t,n){if(!e.isPlainObject(t))return e.isEqual(t,n)?o:r}),s=t(a,function(e){return e!==r&&e!==o?r:e});return t(s,function(e){return e===r})}}]).factory("isInDOM",["$document","yjQuery",function(e,t){return function(n){return t.contains(e[0],n)}}]).constant("readObjectStructureFactory",function(){var e=function(t){if(void 0===t||null===t||t.then)return t;if("function"==typeof t)return"FUNCTION";if("number"==typeof t)return"NUMBER";if("string"==typeof t)return"STRING";if("boolean"==typeof t)return"BOOLEAN";if(window.smarteditLodash.isElement(t))return"ELEMENT";if(t.hasOwnProperty("length")){if(t.forEach){var n=[];return t.forEach(function(t){n.push(e(t))}),n}return"JQUERY"}var i={};return Object.keys(t).forEach(function(n){0!==n.indexOf("$")&&(i[n]=e(t[n]))}),i};return e}),angular.module("gatewayFactoryModule",["eventServiceModule","functionsModule","seConstantsModule"]).constant("WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY","whiteListedStorefronts").constant("TIMEOUT_TO_RETRY_PUBLISHING",500).service("gatewayFactory",["$rootScope","$q","getOrigin","systemEventService","regExpFactory","cloneableUtils","$timeout","$log","$window","$injector","isIframe","WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY","TIMEOUT_TO_RETRY_PUBLISHING","SMARTEDIT_IFRAME_ID",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h){var f=[],g={},m=function(e){this.gatewayId=e,this._getTargetFrame=function(){if(u())return l.parent;if(l.document.getElementById(h))return l.document.getElementById(h).contentWindow;throw new Error("It is standalone. There is no iframe")},this._generateIdentifier=function(){return(new Date).getTime()+Math.random().toString()},this._getSystemEventId=function(e){return this.gatewayId+":"+e},this.publish=function(e,n,i,r){var l=o.makeCloneable(n);angular.equals(l,n)||s.warn("gatewayFactory.publish - Non cloneable payload has been sanitized for gateway "+this.gatewayId+", event "+e+":",l),i||(i=0);var c,u=t.defer();try{c=this._getTargetFrame(),r=r||this._generateIdentifier();try{c.postMessage({pk:r,gatewayId:this.gatewayId,eventId:e,data:l},"*")}catch(t){s.error(t),s.error("gatewayFactory.publish - postMessage has failed for gateway "+this.gatewayId+", event "+e+" and data ",l)}f[r]=u,a(function(t,n){t.acknowledged||"promiseReturn"===e||"promiseAcknowledgement"===e||(n<5?(n++,s.debug(document.location.href,"is retrying to publish event",e),c.postMessage({pk:r,gatewayId:this.gatewayId,eventId:e,data:l},"*")):(s.error(document.location.href,"failed to publish event",e),t.reject()))}.bind(this,u,i),p)}catch(e){return u.reject(),u.promise}return u.promise},this.subscribe=function(e,t){var n=this._getSystemEventId(e);return i.registerEventHandler(n,t)},this._processEvent=function(e){if("promiseReturn"!==e.eventId&&"promiseAcknowledgement"!==e.eventId){s.debug(document.location.href,"sending acknowledgement for",e),this.publish("promiseAcknowledgement",{pk:e.pk});var t=this._getSystemEventId(e.eventId);i.sendAsynchEvent(t,e.data).then(function(t){s.debug(document.location.href,"sending promise resolve",e),this.publish("promiseReturn",{pk:e.pk,type:"success",resolvedDataOfLastSubscriber:t})}.bind(this),function(){s.debug(document.location.href,"sending promise reject",e),this.publish("promiseReturn",{pk:e.pk,type:"failure"})}.bind(this))}else"promiseReturn"===e.eventId?f[e.data.pk]&&("success"===e.data.type?(s.debug(document.location.href,"received promise resolve",e),f[e.data.pk].resolve(e.data.resolvedDataOfLastSubscriber)):"failure"===e.data.type&&(s.debug(document.location.href,"received promise reject",e),f[e.data.pk].reject())):"promiseAcknowledgement"===e.eventId&&f[e.data.pk]&&(s.debug(document.location.href,"received acknowledgement",e),f[e.data.pk].acknowledged=!0)}};return{initListener:function(){var e=[];l.addEventListener("message",function(t){if(this._isAllowed(t.origin)){var n=t.data;if(e.indexOf(n.pk)>-1)return;e.push(n.pk),s.debug("message event handler called",n.eventId);var i=n.gatewayId,r=g[i];if(!r)return void s.debug("Incoming message on gateway "+i+", but no destination exists.");r._processEvent(n)}else s.error("disallowed storefront is trying to communicate with smarteditcontainer")}.bind(this),!1)},createGateway:function(e){return g[e]?(s.error("Message Gateway for "+e+" already reserved"),null):(g[e]=new m(e),g[e])},_isAllowed:function(e){var t=c.has(d)?c.get(d):[];return u()||n()===e||t.some(function(t){return r(t).test(e)})}}}]),angular.module("gatewayProxyModule",["gatewayFactoryModule"]).factory("gatewayProxy",["$log","$q","toPromise","isFunctionEmpty","isBlank","gatewayFactory",function(e,t,n,i,r,o){function a(e){return c.indexOf(e)>-1}var s=function(n,i,o){delete i[n],i[n]=function(){var i=Array.prototype.slice.call(arguments);return o.publish(n,{arguments:i}).then(function(e){return r(e)||(delete e.$resolved,delete e.$promise),e},function(r){return r&&e.error("gatewayProxy - publish failed for gateway "+o.gatewayId+", method "+n+" and arguments",i),t.reject(r)})}},l=function(e,t,n,i){return t[e].apply(t,i.arguments)},c=["getMethodForVoid","getMethodForSingleInstance","getMethodForArray"];return{initForService:function(t,r,c){var u=c||t.gatewayId;if(!u)return e.error("initForService() - service expected to have an associated gatewayId - methodsSubset:",r&&r.length?r.join(","):[]),null;var d=o.createGateway(u),p=r;if(!p){p=[];for(var h in t)"function"!=typeof t[h]||a(h)||p.push(h)}p.forEach(function(e){"function"==typeof t[e]&&(i(t[e])?s(e,t,d):(t[e]=n(t[e],t),d.subscribe(e,l.bind(null,e,t))))})}}}]),angular.module("FetchDataHandlerInterfaceModule",[]).factory("FetchDataHandlerInterface",function(){var e=function(){};return e.prototype.getById=function(){throw"getById is not implemented"},e.prototype.findBymask=function(){throw"findBymask is not implemented"},e}),angular.module("fetchEnumDataHandlerModule",["FetchDataHandlerInterfaceModule","smarteditServicesModule","resourceLocationsModule"]).factory("fetchEnumDataHandler",["$q","FetchDataHandlerInterface","restServiceFactory","isBlank","extend","ENUM_RESOURCE_URI",function(e,t,n,i,r,o){var a={},s=function(){this.restServiceForEnum=n.get(o)};return s=r(t,s),s.prototype.findByMask=function(t,n){return(a[t.cmsStructureEnumType]?e.when(a[t.cmsStructureEnumType]):this.restServiceForEnum.get({enumClass:t.cmsStructureEnumType})).then(function(e){return a[t.cmsStructureEnumType]=e,a[t.cmsStructureEnumType].enums.filter(function(e){return i(n)||e.label.toUpperCase().indexOf(n.toUpperCase())>-1})})},new s}]),angular.module("seBooleanModule",[]).component("seBoolean",{templateUrl:"booleanTemplate.html",restrict:"E",controller:function(){this.$onInit=function(){if(void 0===this.model[this.qualifier]){var e=void 0!==this.field.defaultValue&&this.field.defaultValue;this.model[this.qualifier]=e,this.editor.pristine[this.qualifier]=e}}},bindings:{field:"<",qualifier:"<",model:"<",editor:"<"}}),angular.module("genericEditorBreadcrumbModule",["genericEditorStackServiceModule"]).controller("genericEditorBreadcrumbController",["$translate","genericEditorStackService",function(e,t){this.getEditorsStack=function(){return this.editorsStack||(this.editorsStack=t.getEditorsStack(this.ge.editorStackId)),this.editorsStack},this.showBreadcrumb=function(){return this.getEditorsStack().length>1},this.getComponentName=function(t){return t.component.name?t.component.name:e.instant("se.breadcrumb.name.empty")}}]).component("genericEditorBreadcrumb",{controller:"genericEditorBreadcrumbController",templateUrl:"genericEditorBreadcrumbTemplate.html",require:{ge:"^^genericEditor"},bindings:{}}),angular.module("dateFormatterModule",["seConstantsModule"]).directive("dateFormatter",["dateFilter","DATE_CONSTANTS",function(e,t){var n=t.ANGULAR_FORMAT;return{require:"ngModel",restrict:"A",scope:{formatType:"@"},link:function(t,i,r,o){o.$parsers.push(function(i){return e(i,t.formatType||n)}),o.$formatters.push(function(i){return e(i,t.formatType||n)})}}}]),angular.module("dateTimePickerModule",["seConstantsModule","languageServiceModule","translationServiceModule","dateFormatterModule","functionsModule"]).directive("dateTimePicker",["$timeout","yjQuery","dateTimePickerLocalizationService","DATE_CONSTANTS","formatDateAsUtc",function(e,t,n,i,r){return{templateUrl:"dateTimePickerTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{name:"=",model:"=",isEditable:"=",field:"="},link:function(t,o){function a(){return o.children().first()}function s(){return a().datetimepicker().data("DateTimePicker")}t.placeholderText="se.componentform.select.date",t.isEditable&&(a().datetimepicker({format:i.MOMENT_FORMAT,keepOpen:!0,minDate:0,showClear:!0,showClose:!0,useCurrent:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"}}).on("dp.change",function(){e(function(){var e=s().date();this.model=e?r(e):void 0}.bind(t))}).on("dp.show",function(){n.localizeDateTimePicker(s())}),t.model&&a().datetimepicker().data("DateTimePicker").date(moment(t.model)))}}}]).constant("resolvedLocaleToMomentLocaleMap",{in:"id",zh:"zh-cn"}).constant("tooltipsMap",{today:"se.datetimepicker.today",clear:"se.datetimepicker.clear",close:"se.datetimepicker.close",selectMonth:"se.datetimepicker.selectmonth",prevMonth:"se.datetimepicker.previousmonth",nextMonth:"se.datetimepicker.nextmonth",selectYear:"se.datetimepicker.selectyear",prevYear:"se.datetimepicker.prevyear",nextYear:"se.datetimepicker.nextyear",selectDecade:"se.datetimepicker.selectdecade",prevDecade:"se.datetimepicker.prevdecade",nextDecade:"se.datetimepicker.nextdecade",prevCentury:"se.datetimepicker.prevcentury",nextCentury:"se.datetimepicker.nextcentury",pickHour:"se.datetimepicker.pickhour",incrementHour:"se.datetimepicker.incrementhour",decrementHour:"se.datetimepicker.decrementhour",pickMinute:"se.datetimepicker.pickminute",incrementMinute:"se.datetimepicker.incrementminute",decrementMinute:"se.datetimepicker.decrementminute",pickSecond:"se.datetimepicker.picksecond",incrementSecond:"se.datetimepicker.incrementsecond",decrementSecond:"se.datetimepicker.decrementsecond",togglePeriod:"se.datetimepicker.toggleperiod",selectTime:"se.datetimepicker.selecttime"}).service("dateTimePickerLocalizationService",["$translate","resolvedLocaleToMomentLocaleMap","tooltipsMap","languageService",function(e,t,n,i){var r=function(e){var n=t[e];return n||e},o=function(){var t={};for(var i in n)t[i]=e.instant(n[i]);return t},a=function(e,t){for(var i in n)if(e[i]!==t[i])return!1;return!0},s=function(e){i.getResolveLocale().then(function(t){var n=r(t);e.locale()!==n&&e.locale(n)})},l=function(e){var t=e.tooltips(),n=o();a(t,n)||e.tooltips(n)};this.localizeDateTimePicker=function(e){s(e),l(e)}}]),angular.module("seDropdownModule",["smarteditServicesModule","eventServiceModule","optionsDropdownPopulatorModule","uriDropdownPopulatorModule","functionsModule","seConstantsModule"]).constant("LINKED_DROPDOWN","LinkedDropdown").constant("CLICK_DROPDOWN","ClickDropdown").constant("DROPDOWN_IMPLEMENTATION_SUFFIX","DropdownPopulator").factory("SEDropdownService",["$q","$injector","isBlank","isFunctionEmpty","LINKED_DROPDOWN","CLICK_DROPDOWN","DROPDOWN_IMPLEMENTATION_SUFFIX","systemEventService","getKeyHoldingDataFromResponse","VALIDATION_MESSAGE_TYPES",function(e,t,n,i,r,o,a,s,l,c){var u=function(e){this.field=e.field,this.qualifier=e.qualifier,this.model=e.model,this.id=e.id,this.onClickOtherDropdown=e.onClickOtherDropdown,this.items=[],this.getApi=e.getApi,this.setYSelectAPI=function(e){this.ySelectAPI=e},this.$api={setResultsHeaderTemplateUrl:function(e){this.resultsHeaderTemplateUrl=e}.bind(this),setResultsHeaderTemplate:function(e){this.resultsHeaderTemplate=e}.bind(this)}};u.prototype._respondToChange=function(e,t){this.field.dependsOn&&this.field.dependsOn.split(",").indexOf(t.qualifier)>-1&&(this.selection=t.optionObject,this.reset&&this.reset())},u.prototype._respondToOtherClicks=function(e,t){this.field.qualifier!==t&&"function"==typeof this.onClickOtherDropdown&&this.onClickOtherDropdown(e,t)},u.prototype.triggerAction=function(){var e=this.items.filter(function(e){return e.id===this.model[this.qualifier]}.bind(this))[0],t={qualifier:this.qualifier,optionObject:e};this.ySelectAPI&&this.ySelectAPI.setValidationState(d(this.field)),s.sendAsynchEvent(this.eventId,t)},u.prototype.onClick=function(){s.sendAsynchEvent(this.clickEventKey,this.field.qualifier)},u.prototype.fetchAll=function(e){return this.populator.populate({field:this.field,model:this.model,selection:this.selection,search:e}).then(function(e){return this.items=e,this.items}.bind(this))},u.prototype.fetchEntity=function(e){return this.populator.getItem({field:this.field,id:e,model:this.model})},u.prototype.fetchPage=function(e,t,n){return this.populator.fetchPage({field:this.field,model:this.model,selection:this.selection,search:e,pageSize:t,currentPage:n}).then(function(e){var t=l(e);return e.results=e[t],delete e[t],this.items=e.results,e}.bind(this))},u.prototype.init=function(){h(this),this.isMultiDropdown=!!this.field.collection&&this.field.collection,this.triggerAction=this.triggerAction.bind(this);var e;if(this.eventId=(this.id||"")+r,this.clickEventKey=(this.id||"")+o,this.field.dependsOn&&s.registerEventHandler(this.eventId,this._respondToChange.bind(this)),s.registerEventHandler(this.clickEventKey,this._respondToOtherClicks.bind(this)),this.field.options&&this.field.uri)throw"se.dropdown.contains.both.uri.and.options";if(this.field.options)e="options"+a,this.isPaged=!1;else if(this.field.uri)e="uri"+a,this.isPaged=!!this.field.paged&&this.field.paged;else if(this.field.propertyType){if(!t.has(this.field.propertyType+a))throw"sedropdown.no.populator.found";e=this.field.propertyType+a,this.isPaged=p(e)}else if(t.has(this.field.cmsStructureType+a))e=this.field.cmsStructureType+a,this.isPaged=!!this.field.paged&&this.field.paged;else{if(t.has(this.field.smarteditComponentType+this.field.qualifier+a))e=this.field.smarteditComponentType+this.field.qualifier+a;else{if(!t.has(this.field.smarteditComponentType+a))throw"se.dropdown.no.populator.found";e=this.field.smarteditComponentType+a}this.isPaged=p(e)}this.populator=t.get(e),this.fetchStrategy={fetchEntity:this.fetchEntity.bind(this)},this.isPaged?this.fetchStrategy.fetchPage=this.fetchPage.bind(this):this.fetchStrategy.fetchAll=this.fetchAll.bind(this),this.initialized=!0};var d=function(e){return e.hasError?c.VALIDATION_ERROR:e.hasWarnings?c.WARNING:void 0},p=function(e){var n=t.get(e);return n.isPaged&&n.isPaged()},h=function(e){"function"==typeof e.getApi&&e.getApi({$api:e.$api})}.bind(this);return u}]).directive("seDropdown",["$rootScope","SEDropdownService","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i){return{templateUrl:"seDropdownTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{field:"=",qualifier:"=",model:"=",id:"=",itemTemplateUrl:"<?",getApi:"&?"},link:function(e){e.field.params=e.field.params||{},e.field.params.catalogId=e.field.params.catalogId||n,e.field.params.catalogVersion=e.field.params.catalogVersion||i,e.onClickOtherDropdown=function(){e.closeSelect()},e.closeSelect=function(){var t=e.getUiSelectCtrl();t&&(t.open=!1)},e.getUiSelectCtrl=function(){var t="#"+e.field.qualifier+"-selector";return angular.element(t).controller("uiSelect")},e.dropdown=new t({field:e.field,qualifier:e.qualifier,model:e.model,id:e.id,onClickOtherDropdown:e.onClickOtherDropdown,getApi:e.getApi}),e.dropdown.init()}}}]),angular.module("dropdownPopulatorInterfaceModule",["yLoDashModule"]).factory("DropdownPopulatorInterface",["lodash",function(e){var t=function(){};return t.prototype.populate=function(e){return this.fetchAll(e)},t.prototype.fetchAll=function(){},t.prototype.fetchPage=function(){},t.prototype.isPaged=function(){return!1},t.prototype.populateAttributes=function(t,n,i){return e.map(t,function(t){if(n&&e.isEmpty(t.id)&&(t.id=t[n]),i&&e.isEmpty(t.label)){var r=e.find(i,function(n){return!e.isEmpty(t[n])});r&&(t.label=t[r])}return t})},t.prototype.search=function(t,n){return e.filter(t,function(e){return e.label&&e.label.toUpperCase().indexOf(n.toUpperCase())>-1})},t}]),angular.module("optionsDropdownPopulatorModule",["dropdownPopulatorInterfaceModule"]).factory("optionsDropdownPopulator",["DropdownPopulatorInterface","$q","extend",function(e,t,n){var i=function(){};return i=n(e,i),i.prototype.populate=function(e){var n=this.populateAttributes(e.field.options,e.field.idAttribute,e.field.labelAttributes);return e.search&&(n=this.search(n,e.search)),t.when(n)},new i}]),angular.module("uriDropdownPopulatorModule",["dropdownPopulatorInterfaceModule","smarteditServicesModule","yLoDashModule","functionsModule"]).factory("UriDropdownPopulatorFactory",["$q","lodash","DropdownPopulatorInterface","extend","restServiceFactory","getDataFromResponse","getKeyHoldingDataFromResponse",function(e,t,n,i,r,o,a){var s=function(){};return s=i(n,s),s.prototype._buildQueryParams=function(e,t){return e.split(",").reduce(function(e,n){return e[n]=t[n],e},{})},s.prototype.fetchAll=function(t){var n;return t.field.dependsOn&&(n=this._buildQueryParams(t.field.dependsOn,t.model)),r.get(t.field.uri).get(n).then(function(n){var i=o(n),r=this.populateAttributes(i,t.field.idAttribute,t.field.labelAttributes);return t.search&&(r=this.search(r,t.search)),e.when(r)}.bind(this))},s.prototype.fetchPage=function(n){var i={};return n.field.dependsOn&&(i=this._buildQueryParams(n.field.dependsOn,n.model)),i.pageSize=n.pageSize,i.currentPage=n.currentPage,i.mask=n.search,n.field.params&&t.extend(i,n.field.params),r.get(n.field.uri).get(i).then(function(t){var i=a(t);return t[i]=this.populateAttributes(t[i],n.field.idAttribute,n.field.labelAttributes),e.when(t)}.bind(this))},s.prototype.getItem=function(t){return r.get(t.field.uri).getById(t.id).then(function(n){return n=this.populateAttributes([n],t.field.idAttribute,t.field.labelAttributes)[0],e.when(n)}.bind(this))},s}]).factory("uriDropdownPopulator",["UriDropdownPopulatorFactory",function(e){return new e}]),angular.module("seGenericEditorFieldErrorsModule",[]).controller("seGenericEditorFieldErrorsController",function(){this.getFilteredErrors=function(){return(this.field.errors||[]).filter(function(e){return e.language===this.qualifier&&!e.format}.bind(this)).map(function(e){return e.message})}}).directive("seGenericEditorFieldErrors",function(){return{templateUrl:"seGenericEditorFieldErrorsTemplate.html",restrict:"E",scope:{},controller:"seGenericEditorFieldErrorsController",controllerAs:"ctrl",bindToController:{field:"=",qualifier:"="}}}),angular.module("genericEditorModule",["yjqueryModule","genericEditorTabModule","smarteditServicesModule","functionsModule","eventServiceModule","coretemplates","translationServiceModule","languageServiceModule","experienceInterceptorModule","dateTimePickerModule","seBooleanModule","fetchEnumDataHandlerModule","seRichTextFieldModule","seValidationMessageParserModule","seDropdownModule","editorFieldMappingServiceModule","genericEditorTabServiceModule","genericEditorStackServiceModule","genericEditorBreadcrumbModule","yLoDashModule","seConstantsModule"]).constant("GENERIC_EDITOR_UNRELATED_VALIDATION_ERRORS_EVENT","UnrelatedValidationErrors").constant("GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","UnrelatedValidationMessagesEvent").constant("GENERIC_EDITOR_LOADED_EVENT","genericEditorLoadedEvent").run(["editorFieldMappingService",function(e){e._registerDefaultFieldMappings()}]).factory("GenericEditor",["yjQuery","encode","GENERIC_EDITOR_UNRELATED_VALIDATION_ERRORS_EVENT","GENERIC_EDITOR_LOADED_EVENT","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","VALIDATION_MESSAGE_TYPES","EDITOR_PUSH_TO_STACK_EVENT","EDITOR_POP_FROM_STACK_EVENT","lodash","restServiceFactory","languageService","sharedDataService","systemEventService","sanitize","sanitizeHTML","copy","isBlank","isObjectEmptyDeep","$q","$log","$translate","$injector","seValidationMessageParser","editorFieldMappingService","genericEditorTabService","genericEditorStackService","resetObject","deepObjectPropertyDiff","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h,f,g,m,v,y,E,S,_,b,T,C,I,A,w,O,M,P){var R=["Boolean","ShortString","LongString","RichText","Date","Dropdown"];T._registerDefaultFieldMappings();var D=function(e){if(m(e.structureApi)&&!e.structure)throw"genericEditor.configuration.error.no.structure";if(!m(e.structureApi)&&e.structure)throw"genericEditor.configuration.error.2.structures"},N=function(e){D(e),this.id=e.id,this.inProgress=!1,this.smarteditComponentType=e.smarteditComponentType,this.smarteditComponentId=e.smarteditComponentId,this.editorStackId=e.editorStackId,this.updateCallback=e.updateCallback,this.structure=e.structure,e.structureApi&&(this.editorStructureService=c.get(e.structureApi)),this.uriContext=e.uriContext,e.contentApi&&(this.editorCRUDService=c.get(e.contentApi)),this.initialContent=l.cloneDeep(e.content),this.component=null,this.fields=[],this.languages=[],this.initialDirty=!1,this.fieldsNonPristineState={},e.customOnSubmit&&(this.onSubmit=e.customOnSubmit),this._unregisterUnrelatedErrorsEvent=p.registerEventHandler(n,this._handleLegacyUnrelatedValidationErrors.bind(this)),this._unregisterUnrelatedMessagesEvent=p.registerEventHandler(r,this._handleUnrelatedValidationMessages.bind(this))};N.prototype._finalize=function(){this._unregisterUnrelatedErrorsEvent(),this._unregisterUnrelatedMessagesEvent(),this.popEditorFromStack()},N.prototype._setApi=function(e){this.api=e},N.prototype._handleLegacyUnrelatedValidationErrors=function(e,t){this._handleUnrelatedValidationMessages(e,{messages:t,sourceGenericEditorId:t.sourceGenericEditorId})},N.prototype._handleUnrelatedValidationMessages=function(e,t){t.targetGenericEditorId&&t.targetGenericEditorId!==this.id||t.sourceGenericEditorId&&t.sourceGenericEditorId===this.id||(this.removeValidationMessages(),this._displayValidationMessages(t.messages,!0))},N.prototype._isPrimitive=function(e){return R.indexOf(e)>-1},N.prototype._getSelector=function(t){return e(t)},N.prototype.pushEditorToStack=function(){this.editorStackId||(this.editorStackId=this.id),p.sendAsynchEvent(a,{editorId:this.id,editorStackId:this.editorStackId,component:this.component,componentType:this.smarteditComponentType})},N.prototype.popEditorFromStack=function(){p.sendAsynchEvent(s,{editorStackId:this.editorStackId})},N.prototype.reset=function(){return this._getSelector(".ui-select-search").val(""),this._getSelector(".ui-select-search").trigger("input"),this.removeValidationMessages(),this.component=A(this.component,this.pristine),this.fields.forEach(function(e){delete e.initiated}),this.tabs=[],this.fieldsMap=this.fields.reduce(function(e,t){var n=T.getFieldTabMapping(t,this.structure);return n||(n=C.getComponentTypeDefaultTab(this.structure)),-1===Object.keys(e).indexOf(n)&&(e[n]=[],this.tabs.push({id:n,title:"se.genericeditor.tab."+n+".title",templateUrl:"genericEditorTabWrapperTemplate.html"})),e[n].push(t),e}.bind(this),{}),this._switchToTabContainingQualifier(),C.sortTabs(this.tabs),this.componentForm&&this.componentForm.$setPristine(),y.when()},N.prototype._switchToTabContainingQualifier=function(){!this.tabSelected&&this.targetedQualifier&&(this.tabs.forEach(function(e){e.active=!!this.fieldsMap[e.id].some(function(e){return e.qualifier===this.targetedQualifier}.bind(this))}.bind(this)),this.tabSelected=!0)},N.prototype._removeFrontEndValidationMessages=function(){this.fields.forEach(function(e){var t=(e.messages||[]).filter(function(e){return void 0===e.fromSubmit||e.fromSubmit});e.messages=t.length?t:void 0,e.hasErrors=this._containsValidationMessageType(e.messages,o.VALIDATION_ERROR),e.hasWarnings=this._containsValidationMessageType(e.messages,o.WARNING)}.bind(this))},N.prototype.removeValidationMessages=function(){(this.tabs||[]).forEach(function(e){e.hasErrors=!1}),this.fields.forEach(function(e){e.messages=void 0,e.hasErrors=!1,e.hasWarnings=!1}.bind(this))},N.prototype.fetch=function(){return this.initialDirty?y.when({}):this.initialContent?y.when(this.initialContent):this.smarteditComponentId?this.editorCRUDService.get({identifier:this.smarteditComponentId}):y.when({})},N.prototype.sanitizeLoad=function(e){return this.fields.forEach(function(t){!0===t.localized&&m(e[t.qualifier])&&(e[t.qualifier]={})}),e},N.prototype.load=function(){var e=y.defer();return this.fetch().then(function(t){this.pristine=this.sanitizeLoad(t),this.reset(),e.resolve()}.bind(this),function(t){E.error("GenericEditor.load failed"),E.error(t),e.reject()}),e.promise},N.prototype.getComponent=function(){return this.component},N.prototype.sanitizePayload=function(e,t){var n={SHORT_STRING:"ShortString",LONG_STRING:"LongString"};return t.filter(function(e){return e.cmsStructureType===n.LONG_STRING||e.cmsStructureType===n.SHORT_STRING||"function"==typeof e.customSanitize}).map(function(e){return{name:e.qualifier,localized:!!e.localized,customSanitize:e.customSanitize}}).forEach(function(t){if(void 0!==e[t.name]&&t.name in e)if(t.customSanitize)t.customSanitize(e[t.name],h);else if(t.localized){var n=e[t.name];Object.keys(n).forEach(function(e){n[e]=h(n[e])})}else e[t.name]=h(e[t.name])}),e},N.prototype._fieldsAreUserChecked=function(){return this.fields.every(function(e){var t=!1;for(var n in e.requiresUserCheck)t=t||e.requiresUserCheck[n];return!t||e.isUserChecked})},N.prototype.preparePayload=function(e){return y.when(e)},N.prototype.onSubmit=function(){var e=g(this.component);return e=this.sanitizePayload(e,this.fields),this.smarteditComponentId&&(e.identifier=this.smarteditComponentId),this.editorCRUDService&&!this.smarteditComponentId&&this.structure&&this.structure.type&&(e.type||(e.type=this.structure.type)),this.preparePayload(e).then(function(t){return(this.editorCRUDService?this.smarteditComponentId?this.editorCRUDService.update(t):this.editorCRUDService.save(t):y.when(t)).then(function(t){return{payload:e,response:t}})}.bind(this))},N.prototype.submit=function(){var e=y.defer(),t=this.getComponent();return this.removeValidationMessages(),this.hasFrontEndValidationErrors=!1,this._fieldsAreUserChecked()?this.isValid(!0)?(this.inProgress=!0,this.onSubmit().then(function(t){t.response?this.pristine=g(t.response):this.pristine=g(t.payload),delete this.pristine.identifier,!this.smarteditComponentId&&t.response&&(this.smarteditComponentId=t.response.uuid),this.removeValidationMessages(),this.reset(),this.inProgress=!1,e.resolve(l.cloneDeep(this.pristine)),this.updateCallback&&this.updateCallback(this.pristine,t.response)}.bind(this),function(t){this.removeValidationMessages(),this._displayValidationMessages(t.data.errors,!0);var i=this._containsValidationMessageType(t.data.errors,o.VALIDATION_ERROR),a=this._collectUnrelatedValidationMessages(t.data.errors);if(a.length>0){var s=l.cloneDeep(a);s.sourceGenericEditorId=this.id,p.sendAsynchEvent(n,s),p.sendAsynchEvent(r,{messages:a,sourceGenericEditorId:this.id}),this.inProgress=!1,e.reject(i)}else this.inProgress=!1,e.reject(!0)}.bind(this))):(E.error("GenericEditor.submit() - unable to submit form. Form is unexpectedly invalid."),e.reject(t)):(e.reject(!0),this.hasFrontEndValidationErrors=!0),e.promise},N.prototype._validationMessageBelongsToCurrentInstance=function(e){return l.some(this.fields,function(t){return t.qualifier===e.subject})},N.prototype._containsValidationMessageType=function(e,t){return l.some(e,function(e){return e.type===t&&this._validationMessageBelongsToCurrentInstance(e)}.bind(this))},N.prototype._isValidationMessageType=function(e){return l.includes(l.values(o),e)},N.prototype._displayValidationMessages=function(e,n){return e.filter(function(e){return this._isValidationMessageType(e.type)&&(n||e.isNonPristine)}.bind(this)).forEach(function(e){e.type=e.type||o.VALIDATION_ERROR;var n=this.fields.filter(function(t){return t.qualifier===e.subject})[0];if(n){void 0===n.messages&&(n.messages=[]);var i=l.merge(e,b.parse(e.message));i.marker=n.localized?i.language:n.qualifier,i.type=e.type,i.uniqId=t(i),-1===n.messages.map(function(e){return e.uniqId}).indexOf(i.uniqId)&&(n.messages.push(i),i.type===o.VALIDATION_ERROR?n.hasErrors=!0:i.type===o.WARNING&&(n.hasWarnings=!0));var r=Object.keys(this.fieldsMap).find(function(e){return this.fieldsMap[e].some(function(e){return n===e})}.bind(this));r&&(this.tabs.find(function(e){return e.id===r}).hasErrors=!0)}}.bind(this)),y.when()},N.prototype._collectUnrelatedValidationMessages=function(e){return e.filter(function(e){return this._isValidationMessageType(e.type)&&!this._validationMessageBelongsToCurrentInstance(e)}.bind(this))},N.prototype.fieldAdaptor=function(e){return e.forEach(function(e){var t=T.getEditorFieldMapping(e,this.structure);if(l.assign(e,t),void 0===e.editable&&(e.editable=!0),!e.postfixText){var n=(this.smarteditComponentType?this.smarteditComponentType.toLowerCase():"")+"."+e.qualifier.toLowerCase()+".postfix.text",i=S.instant(n);e.postfixText=i!==n?i:""}e.smarteditComponentType=this.smarteditComponentType}.bind(this)),e},N.prototype.refreshOptions=function(e,t,n){var i,r,o="fetch"+e.cmsStructureType+"DataHandler";e.localized?(i=this.component[e.qualifier][t],r=t):(i=this.component[e.qualifier],r=e.qualifier);var a=_.get(o);e.initiated=e.initiated||[],e.options=e.options||{},"Enum"===e.cmsStructureType&&e.initiated.push(r),e.initiated.indexOf(r)>-1?(n.length>2||"Enum"===e.cmsStructureType)&&a.findByMask(e,n).then(function(t){e.options[r]=t}):i?a.getById(e,i).then(function(t){e.options[r]=[t],e.initiated.push(r)}.bind(e)):e.initiated.push(r)},N.prototype._buildComparable=function(e){if(!e)return e;var t={};return this.fields.forEach(function(n){var i=e[n.qualifier];if(n.localized){var r={};angular.forEach(i,function(e,t){null!==e&&(r[t]=x(e,n))}),t[n.qualifier]=r}else t[n.qualifier]=x(i,n)}),angular.forEach(e,function(e,n){!this.fields.some(function(e){return e.qualifier===n}.bind(this))&&(t[n]=e)}.bind(this)),t};var x=function(e,t){switch(t.cmsStructureType){case"RichText":return void 0!==e?f(e):null;case"Boolean":return void 0!==e&&e;default:return e}};return N.prototype.isDirty=function(){return this.bcPristine=this._buildComparable(this.pristine),this.bcComp=this._buildComparable(this.component),!angular.equals(this.bcPristine,this.bcComp)},N.prototype._populateFieldsNonPristineStates=function(){this.bcPristine=this._buildComparable(this.pristine),this.bcComp=this._buildComparable(this.component),this.fieldsNonPristineState=this._getFieldsNonPristineState(this.fieldsNonPristineState,this.bcPristine,this.bcComp)},N.prototype._collectFrontEndValidationErrors=function(e){if(e=e||!1,!this.component)return[];var t=this.fields.filter(function(e){var t=this.componentForm[e.qualifier];return!l.isNil(t)&&!0===t.$invalid}.bind(this)).map(function(t){return{type:o.VALIDATION_ERROR,subject:t.qualifier,message:"se.editor.html.validation.error",fromSubmit:e,isNonPristine:this.fieldsNonPristineState[t.qualifier]}}.bind(this)),n=[];return this.fields.filter(function(e){return e.required&&e.editable}).forEach(function(t){t.localized?this.requiredLanguages.forEach(function(i){this.component[t.qualifier][i.isocode]||n.push({type:o.VALIDATION_ERROR,subject:t.qualifier,message:"se.componentform.required.field",language:i.isocode,fromSubmit:e,isNonPristine:this.fieldsNonPristineState[t.qualifier][i.isocode]})}.bind(this)):v(this.component[t.qualifier])&&n.push({type:o.VALIDATION_ERROR,subject:t.qualifier,message:"se.componentform.required.field",fromSubmit:e,isNonPristine:this.fieldsNonPristineState[t.qualifier]})}.bind(this)),t.concat(n)},N.prototype._getFieldsNonPristineState=function(e,t,n){var i=w(t,n);return l.mergeWith(l.cloneDeep(e),i,function(e,t){if(!l.isPlainObject(e))return!0===e||t})},N.prototype.isValid=function(e){e=e||!1;var t=this._collectFrontEndValidationErrors(e);return this._removeFrontEndValidationMessages(),this._displayValidationMessages(t,e),this._validateTabsErrorStates(),0===t.length},N.prototype._validateTabsErrorStates=function(){this._getTabsByFieldsErrorState(!1).forEach(function(e){this._setTabErrorState(e.id,!1)}.bind(this)),this._getTabsByFieldsErrorState(!0).forEach(function(e){this._setTabErrorState(e.id,!0)}.bind(this))},N.prototype._getTabsByFieldsErrorState=function(e){return(this.tabs||[]).filter(function(t){return this.fieldsMap[t.id].some(function(t){return t.hasErrors===e})}.bind(this))},N.prototype._setTabErrorState=function(e,t){this.tabs.find(function(t){return t.id===e}).hasErrors=t},N.prototype.isSubmitDisabled=function(){return this.inProgress||!this.isDirty()||!this.isValid()},N.prototype._getUriContext=function(){return this.uriContext?y.when(this.uriContext):d.get("experience").then(function(e){var t={};return t[O]=e.siteDescriptor.uid,t[M]=e.catalogDescriptor.catalogId,t[P]=e.catalogDescriptor.catalogVersion,t})},N.prototype._convertStructureArray=function(e){var t=e.structures||e.componentTypes;if(l.isArray(t)){if(t.length>1)throw"GenericEditor.prototype.init: Invalid structure, multiple structures returned";e=t[0]}return e},N.prototype.init=function(){this.submitButtonText="se.componentform.actions.submit",this.cancelButtonText="se.componentform.actions.cancel",this._setApi({setSubmitButtonText:function(e){this.submitButtonText=e}.bind(this),setCancelButtonText:function(e){this.cancelButtonText=e}.bind(this),setAlwaysShowSubmit:function(e){this.alwaysShowSubmit=e}.bind(this),setAlwaysShowReset:function(e){this.alwaysShowReset=e}.bind(this),setOnReset:function(e){this.onReset=e}.bind(this),setPreparePayload:function(e){this.preparePayload=e}.bind(this),setUpdateCallback:function(e){this.updateCallback=e}.bind(this),updateContent:function(e){this.component=g(e)}.bind(this),getContent:function(){return g(this.component)}.bind(this),onContentChange:function(){},clearMessages:function(){this.removeValidationMessages()}.bind(this),switchToTabContainingQualifier:function(e){this.targetedQualifier=e}.bind(this),considerFormDirty:function(){this.initialDirty=!0}.bind(this),isSubmitDisabled:function(){return this.isSubmitDisabled()}.bind(this),getLanguages:function(){}});var e=y.defer();return(this.editorStructureService?this.editorStructureService.get({smarteditComponentType:this.smarteditComponentType}):y.when(this.structure)).then(function(t){t=this._convertStructureArray(t),this.structure=t,this._getUriContext().then(function(n){(this.api.getLanguages()||u.getLanguagesForSite(n[O])).then(function(r){this.languages=r,this.requiredLanguages=this.languages.filter(function(e){return e.required}),this.fields=this.fieldAdaptor(t?t.attributes:[]),this.parameters={siteId:n[O],catalogId:n[M],catalogVersion:n[P]},this.load().then(function(){this.initialDirty&&(this.component=this.sanitizeLoad(this.initialContent||{})),this.pushEditorToStack(),p.sendAsynchEvent(i,this.id),e.resolve()}.bind(this),function(){e.reject()})}.bind(this),function(){E.error("GenericEditor failed to fetch storefront languages"),e.reject()})}.bind(this))}.bind(this),function(t){E.error("GenericEditor.init failed"),E.error(t),e.reject()}),e.promise},N}]).controller("GenericEditorController",["$scope","GenericEditor","isBlank","generateIdentifier","yjQuery","$element","$attrs",function(e,t,n,i,r,o,a){this.$onChanges=function(){this.editor&&this.editor._finalize(),this.editor=new t({id:this.id||i(),smarteditComponentType:this.smarteditComponentType,smarteditComponentId:this.smarteditComponentId,editorStackId:this.editorStackId,structureApi:this.structureApi,structure:this.structure,contentApi:this.contentApi,updateCallback:this.updateCallback,content:this.content,uriContext:this.uriContext,customOnSubmit:this.customOnSubmit}),this.editor.init(),this.editor.showReset=n(a.reset),this.editor.showSubmit=n(a.submit),"function"==typeof this.getApi&&this.getApi({$api:this.editor.api});var r=angular.toJson(this.editor.api.getContent());this.$doCheck=function(){var e=angular.toJson(this.editor.api.getContent());r!==e&&(r=e,this.editor.api.onContentChange(),this.editor._populateFieldsNonPristineStates())}.bind(this),this.isDirty=function(){return!!this.editor&&this.editor.isDirty()}.bind(this),this.reset=function(){return this.editor.onReset&&this.editor.onReset(),this.editor.reset()}.bind(this),this.submit=function(){return this.editor.submit()}.bind(this),this.getComponent=function(){return this.editor.getComponent()}.bind(this),this.isValid=function(){return this.editor.isValid()}.bind(this),this.showNoEditSupportDisclaimer=function(){return this.editor&&this.editor.fieldsMap&&0===Object.keys(this.editor.fieldsMap).length},e.componentForm&&(this.editor.componentForm=e.componentForm)},this.$onDestroy=function(){this.editor._finalize()},this.$postLink=function(){r(o.find(".no-enter-submit")[0]).bind("keypress",function(e){if(13===e.keyCode)return!1}),this.editor.componentForm=e.componentForm},this.showCommands=function(){return this.showCancel()||this.showSubmit()},this.showCancel=function(){return this.editor.alwaysShowReset||!0===this.editor.showReset&&this.editor.isDirty()&&this.editor.isValid()},this.showSubmit=function(){return this.editor.alwaysShowSubmit||!0===this.editor.showSubmit&&this.editor.isDirty()&&this.editor.isValid()},this.isSubmitDisabled=function(){return this.editor.isSubmitDisabled()}}]).component("genericEditor",{templateUrl:"genericEditorTemplate.html",controller:"GenericEditorController",controllerAs:"ge",transclude:!0,bindings:{id:"=",smarteditComponentId:"=",smarteditComponentType:"=?",structureApi:"<?",structure:"<?",contentApi:"=",content:"=",uriContext:"<?",submit:"=?",reset:"=?",isDirty:"=?",isValid:"=?",getApi:"&?",getComponent:"=?",updateCallback:"<?",customOnSubmit:"=?",editorStackId:"<?"}}),angular.module("genericEditorFieldModule",["translationServiceModule","ui.bootstrap","ui.select","ngSanitize","seGenericEditorFieldMessagesModule"]).controller("genericEditorFieldController",["$scope",function(e){this.$onInit=function(){e.editor=this.ge.editor,e.model=this.model,e.field=this.field,e.qualifier=this.qualifier,e.id=this.id,e.editorStackId=this.ge.editorStackId}}]).component("genericEditorField",{templateUrl:"genericEditorFieldTemplate.html",transclude:!1,require:{ge:"^^genericEditor"},controller:"genericEditorFieldController",controllerAs:"geField",bindings:{field:"<",model:"=",qualifier:"<",id:"="}}),angular.module("genericEditorTabModule",["translationServiceModule","ui.bootstrap","genericEditorFieldModule","localizedElementModule"]).controller("genericEditorTabController",function(){this.$onInit=function(){this.id=this.ge.editor.id,this.fields=this.ge.editor.fieldsMap[this.tabId],this.component=this.ge.editor.component}}).component("genericEditorTab",{templateUrl:"genericEditorTabTemplate.html",transclude:!1,require:{ge:"^^genericEditor"},controller:"genericEditorTabController",controllerAs:"geTab",bindings:{tabId:"<"}}),angular.module("seRichTextFieldModule",["ngSanitize","languageServiceModule"]).constant("seRichTextConfiguration",{toolbar:"full",toolbar_full:[{name:"basicstyles",items:["Bold","Italic","Strike","Underline"]},{name:"paragraph",items:["BulletedList","NumberedList","Blockquote"]},{name:"editing",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["SpellChecker","Maximize"]},"/",{name:"styles",items:["Format","FontSize","TextColor","PasteText","PasteFromWord","RemoveFormat"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"forms",items:["Outdent","Indent"]},{name:"clipboard",items:["Undo","Redo"]},{name:"document",items:["PageBreak","Source"]}],disableNativeSpellChecker:!1,height:"100px",width:"100%",autoParagraph:!1,enterMode:CKEDITOR.ENTER_BR,shiftEnterMode:CKEDITOR.ENTER_BR,basicEntities:!1,allowedContent:!0,fillEmptyBlocks:!1,contentsCss:"static-resources/dist/smartedit/css/outer-styling.css"}).service("seRichTextLoaderService",["$q","$interval",function(e,t){var n=e.defer(),i=t(function(){"loaded"===CKEDITOR.status&&(n.resolve(),t.cancel(i))},100);return{load:function(){var t=e.defer();return n.promise.then(function(){t.resolve()}),t.promise}}}]).service("genericEditorSanitizationService",["$sanitize",function(e){return{isSanitized:function(t){var n=e(t);return(n=n.replace(/&#10;/g,"\n").replace(/&#160;/g," ").replace(/<br>/g,"<br />"))===(t=t.replace(/&#10;/g,"\n").replace(/&#160;/g," ").replace(/<br>/g,"<br />"))}}}]).controller("seRichTextFieldController",function(){}).directive("seRichTextField",["seRichTextLoaderService","seRichTextConfiguration","genericEditorSanitizationService","seRichTextFieldLocalizationService",function(e,t,n,i){return{restrict:"E",templateUrl:"seRichTextFieldTemplate.html",scope:{},controller:"seRichTextFieldController",controllerAs:"ctrl",bindToController:{field:"=",qualifier:"=",model:"=",editor:"="},link:function(r,o){e.load().then(function(){var e=o.find("textarea")[0],a=CKEDITOR.replace(e,t);i.localizeCKEditor(),o.bind("$destroy",function(){a&&CKEDITOR.instances[a.name]&&CKEDITOR.instances[a.name].destroy()}),r.ctrl.onChange=function(){r.$apply(function(){r.ctrl.model[r.ctrl.qualifier]=a.getData(),r.ctrl.reassignUserCheck()})},r.ctrl.onMode=function(){if("source"===this.mode){var e=a.editable();e.attachListener(e,"input",function(){a.fire("change")})}},r.ctrl.onInstanceReady=function(e){e.editor.dataProcessor.writer.setRules("br",{indent:!1,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1})},r.ctrl.requiresUserCheck=function(){var e=!1;for(var t in this.field.requiresUserCheck)e=e||this.field.requiresUserCheck[t];return e},r.ctrl.reassignUserCheck=function(){if(r.ctrl.model&&r.ctrl.qualifier&&r.ctrl.model[r.ctrl.qualifier]){var e=n.isSanitized(r.ctrl.model[r.ctrl.qualifier]);r.ctrl.field.requiresUserCheck=r.ctrl.field.requiresUserCheck||{},r.ctrl.field.requiresUserCheck[r.ctrl.qualifier]=!e}else r.ctrl.field.requiresUserCheck=r.ctrl.field.requiresUserCheck||{},r.ctrl.field.requiresUserCheck[r.ctrl.qualifier]=!1},a.on("change",r.ctrl.onChange),a.on("mode",r.ctrl.onMode),CKEDITOR.on("instanceReady",r.ctrl.onInstanceReady)})}}}]).constant("resolvedLocaleToCKEDITORLocaleMap",{in:"id",es_CO:"es"}).service("seRichTextFieldLocalizationService",["languageService","resolvedLocaleToCKEDITORLocaleMap",function(e,t){var n=function(e){var n=t[e];return n||e};this.localizeCKEditor=function(){e.getResolveLocale().then(function(e){CKEDITOR.config.language=n(e)})}}]),angular.module("editorFieldMappingServiceModule",["yLoDashModule"]).constant("GENERIC_EDITOR_FLOAT_PRECISION","0.01").service("editorFieldMappingService",["GENERIC_EDITOR_FLOAT_PRECISION","$log","lodash",function(e,t,n){var i={NONE:0,PARTIAL:1,EXACT:4};this._editorsFieldMapping=[],this._fieldsTabsMapping=[],this.getFieldMapping=function(e,t,n,i){var r={cmsStructureType:e,smarteditComponentType:t,qualifier:n};return this.getEditorFieldMapping(r,i)},this.addFieldMapping=function(e,t,n,i){this._addMapping(e,t,n,i,this._editorsFieldMapping)},this.getEditorFieldMapping=function(e,n){var i=this._getMapping(e,n,this._editorsFieldMapping);return i?i.template=this._cleanTemplate(i.template):(t.warn("editorFieldMappingService - Cannot find suitable field mapping for type ",e.cmsStructureType),i=null),i},this.addFieldTabMapping=function(e,t,n,i){this._addMapping(e,t,n,i,this._fieldsTabsMapping)},this.getFieldTabMapping=function(e,t){return this._getMapping(e,t,this._fieldsTabsMapping)},this._addMapping=function(e,t,i,r,o){e=this._validateField(e),t=this._validateField(t),i=this._validateField(i);var a={structureTypeMatcher:e,componentTypeMatcher:t,discriminatorMatcher:i,value:r};n.remove(o,function(n){return n.structureTypeMatcher===e&&n.componentTypeMatcher===t&&n.discriminatorMatcher===i}),o.push(a)},this._validateField=function(e){if(null===e)e="*";else if("string"!=typeof e&&"function"!=typeof e)throw new Error("editorFieldMappingService: Mapping matcher must be of type string or function.");return e},this._getMapping=function(e,t,n){var i=null,r=0;return n.forEach(function(n){var o=this._evaluateMapping(n,e,t);o>r&&(i=n.value,r=o)}.bind(this)),i},this._evaluateMapping=function(e,t,n){var r,o,a,s=i.NONE;return(r=this._evaluateMatcher(e.structureTypeMatcher,t.cmsStructureType,t,n))!==i.NONE&&(o=this._evaluateMatcher(e.componentTypeMatcher,t.smarteditComponentType,t,n))!==i.NONE&&(a=this._evaluateMatcher(e.discriminatorMatcher,t.qualifier,t,n)),r!==i.NONE&&o!==i.NONE&&a!==i.NONE&&(s=r+o+a),s},this._evaluateMatcher=function(e,t,n,r){return"string"==typeof e?"*"===e?i.PARTIAL:this._exactValueMatchPredicate(e,t)?i.EXACT:i.NONE:e(t,n,r)?i.EXACT:i.NONE},this._registerDefaultFieldMappings=function(){n.isEmpty(this._editorsFieldMapping)&&(this.addFieldMapping("Boolean",null,null,{template:"booleanWrapperTemplate.html"}),this.addFieldMapping("ShortString",null,null,{template:"shortStringTemplate.html"}),this.addFieldMapping("LongString",null,null,{template:"longStringTemplate.html"}),this.addFieldMapping("RichText",null,null,{template:"richTextTemplate.html"}),this.addFieldMapping("Number",null,null,{template:"numberTemplate.html"}),this.addFieldMapping("Float",null,null,{template:"floatTemplate.html",precision:e}),this.addFieldMapping("Dropdown",null,null,{template:"dropdownTemplate.html"}),this.addFieldMapping("EditableDropdown",null,null,{template:"dropdownWrapperTemplate.html"}),this.addFieldMapping("DateTime",null,null,{template:"dateTimePickerWrapperTemplate.html"}),this.addFieldMapping("Enum",null,null,{template:"enumTemplate.html"}))},this._cleanTemplate=function(e){var t=e?e.lastIndexOf("/"):-1;return-1!==t&&(e=e.substring(t+1)),e},this._exactValueMatchPredicate=function(e,t){return e===t}}]),angular.module("genericEditorStackServiceModule",["eventServiceModule"]).constant("EDITOR_PUSH_TO_STACK_EVENT","EDITOR_PUSH_TO_STACK_EVENT").constant("EDITOR_POP_FROM_STACK_EVENT","EDITOR_POP_FROM_STACK_EVENT").service("genericEditorStackService",["$log","EDITOR_PUSH_TO_STACK_EVENT","EDITOR_POP_FROM_STACK_EVENT","systemEventService",function(e,t,n,i){this._editorsStacks={},this.getEditorsStack=function(e){return this._editorsStacks[e]||null},this.isTopEditorInStack=function(e,t){var n=!1,i=this._editorsStacks[e];if(i){var r=i[i.length-1];n=r&&r.editorId===t}return n},this.pushEditorEventHandler=function(e,t){r(t);var n=t.editorStackId;this._editorsStacks[n]||(this._editorsStacks[n]=[]),this._editorsStacks[n].push({component:t.component,componentType:t.componentType,editorId:t.editorId})},this.popEditorEventHandler=function(t,n){r(n);var i=n.editorStackId,o=this._editorsStacks[i];o?(o.pop(),0===o.length&&delete this._editorsStacks[i]):e.warn("genericEditorStackService - Stack of editors not found. Cannot pop editor.")};var r=function(e){if(!e.editorStackId)throw new Error("genericEditorStackService - Must provide a stack id.")};i.registerEventHandler(t,this.pushEditorEventHandler.bind(this)),i.registerEventHandler(n,this.popEditorEventHandler.bind(this))}]),angular.module("genericEditorTabServiceModule",[]).service("genericEditorTabService",function(){this._tabsConfiguration={},this._defaultTabPredicates=[],this.configureTab=function(e,t){this._tabsConfiguration[e]=t},this.getTabConfiguration=function(e){var t=this._tabsConfiguration[e];return t||null},this.sortTabs=function(t){return t.sort(function(t,n){var i=e(t),r=e(n);return r-i!=0?r-i:t.id<n.id?-1:t.id>n.id?1:0}.bind(this))},this.getComponentTypeDefaultTab=function(e){var t=null;return this._defaultTabPredicates.some(function(n){return null!==(t=n(e))}),null!==t?t:"default"},this.addComponentTypeDefaultTabPredicate=function(e){if(!e||"function"!=typeof e)throw new Error("genericEditorTabService - provided predicate must be a function.");this._defaultTabPredicates.push(e)};var e=function(e){var t=e.id;if(!t)throw new Error("genericEditorTabService - Every tab must have an id.");var n=0;return this._tabsConfiguration[t]&&this._tabsConfiguration[t].priority&&(n=this._tabsConfiguration[t].priority),n}.bind(this)}),angular.module("seValidationErrorParserModule",["seValidationMessageParserModule"]).service("seValidationErrorParser",["seValidationMessageParser",function(e){this.parse=function(t){return e.parse(t)}}]),angular.module("seValidationMessageParserModule",[]).service("seValidationMessageParser",function(){this.parse=function(e){var t=new RegExp("[a-zA-Z]+: ([|{)([a-zA-Z0-9]+)(]|}).?","g");return(e.match(t)||[]).reduce(function(e,t){e.message=e.message.replace(t,"").trim();var n=t.split(":")[0].trim().toLowerCase(),i=t.split(":")[1].match(/[a-zA-Z0-9]+/g)[0];return e[n]=i,e},{message:e})}}),angular.module("seGenericEditorFieldMessagesModule",["seConstantsModule"]).controller("seGenericEditorFieldMessagesController",["VALIDATION_MESSAGE_TYPES",function(e){var t=null;this.getFilteredMessagesByType=function(e){return(this.field.messages||[]).filter(function(t){return t.marker===this.qualifier&&!t.format&&t.type===e}.bind(this)).map(function(e){return e.message})},this.$doCheck=function(){if(this.field){var n=angular.toJson(this.field.messages);t!==n&&(t=n,this.errors=this.getFilteredMessagesByType(e.VALIDATION_ERROR),this.warnings=this.getFilteredMessagesByType(e.WARNING))}}}]).component("seGenericEditorFieldMessages",{templateUrl:"seGenericEditorFieldMessagesTemplate.html",controller:"seGenericEditorFieldMessagesController",controllerAs:"ctrl",bindings:{field:"<",qualifier:"<"}}),angular.module("yHelpModule",["yPopoverModule"]).component("yHelp",{templateUrl:"yHelpTemplate.html",controller:function(){this.$onInit=function(){this.placement="top",this.trigger="hover"},this.$onChanges=function(e){this.template&&e.template&&(this.template="<div>"+this.template+"</div>")}},controllerAs:"yHelp",bindings:{title:"<?",template:"<?",templateUrl:"<?"}}),angular.module("httpAuthInterceptorModule",["interceptorHelperModule","authenticationModule","smarteditServicesModule"]).factory("httpAuthInterceptor",["$log","$injector","interceptorHelper",function(e,t,n){return{request:function(i){return n.handleRequest(i,function(){return t.get("authenticationService").filterEntryPoints(i.url).then(function(n){return n&&n.length?t.get("storageService").getAuthToken(n[0]).then(function(t){return e.debug(["Intercepting request "+(t?"adding access token":"no access token found"),i.url].join(" ")),t&&(i.headers.Authorization=t.token_type+" "+t.access_token),i}):i},function(){return i})})}}}]).config(["$httpProvider",function(e){e.interceptors.push("httpAuthInterceptor")}]),angular.module("nonvalidationErrorInterceptorModule",["alertServiceModule"]).factory("nonValidationErrorInterceptor",["$q","alertService",function(e,t){return{predicate:function(e){return 400===e.status},responseError:function(n){return n.data&&n.data.errors&&n.data.errors.filter(function(e){return"ValidationError"!==e.type}).forEach(function(e){t.showDanger({message:e.message||"se.unknown.request.error",timeout:1e4})}),e.reject(n)}}}]),angular.module("previewErrorInterceptorModule",["resourceLocationsModule","smarteditServicesModule","functionsModule"]).factory("previewErrorInterceptor",["$injector","$q","PREVIEW_RESOURCE_URI","sharedDataService","isBlank",function(e,t,n,i,r){function o(e){return!!e.filter(function(e){return"UnknownIdentifierError"===e.type}).length}return{predicate:function(e){return 400===e.status&&e.config.url.indexOf(n)>-1&&!r(e.config.data.pageId)&&o(e.data.errors)},responseError:function(n){return delete n.config.data.pageId,i.update("experience",function(e){return delete e.pageId,e}),e.get("iFrameManager").setCurrentLocation(null),t.when(e.get("$http")(n.config))}}}]),angular.module("resourceNotFoundErrorInterceptorModule",["alertServiceModule","resourceLocationsModule","httpRequestUtilModule"]).factory("resourceNotFoundErrorInterceptor",["$q","alertService","httpRequestUtil","LANGUAGE_RESOURCE_URI",function(e,t,n,i){function r(e){return new RegExp(i.replace(/\:.*\//g,".*/")).test(e)}return{predicate:function(e){return 404===e.status&&!n.isHTMLRequest(e)&&!r(e.config.url)},responseError:function(n){return t.showDanger({message:n.message||"se.unknown.request.error",timeout:1e4}),e.reject(n)}}}]),angular.module("retryInterceptorModule",["functionsModule","operationContextServiceModule","httpMethodPredicatesModule","httpErrorPredicatesModule","operationContextPredicatesModule","defaultRetryStrategyModule","exponentialRetryStrategyModule","linearRetryStrategyModule","alertServiceModule"]).factory("retryInterceptor",["$http","$q","$timeout","$translate","operationContextService","alertService","OPERATION_CONTEXT","isAllTruthy","isAnyTruthy","noInternetConnectionErrorPredicate","readPredicate","updatePredicate","clientErrorPredicate","timeoutErrorPredicate","serverErrorPredicate","retriableErrorPredicate","operationContextInteractivePredicate","operationContextNonInteractivePredicate","operationContextCMSPredicate","operationContextToolingPredicate","defaultRetryStrategy","exponentialRetryStrategy","linearRetryStrategy",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h,f,g,m,v,y,E,S,_,b){var T=[],C=function(e){var t=r.findOperationContext(e.config.url)||a.INTERACTIVE,n=T.find(function(n){return n.predicate(e,t)});return n?n.retryStrategy:null},I=function(r){var a=r.config.retryStrategy;if(a.attemptCount++,a.canRetry()){var s=t.defer(),l=a.firstFastRetry?0:a.calculateNextDelay();return a.firstFastRetry=!1,n(function(){s.resolve(e(r.config))},l),s.promise}return o.showDanger({message:i.instant("se.gracefuldegradation.somethingwrong")}),t.reject(r)},A={predicate:function(e){return null!==C(e)},responseError:function(e){if(e.config.retryStrategy)return t.when(I(e));var n=C(e);if(n){o.showWarning({message:i.instant("se.gracefuldegradation.stillworking")});var r=new n;return r.attemptCount=0,e.config.retryStrategy=r,t.when(I(e))}return t.reject(e)},register:function(e,t){if("function"!=typeof e)throw new Error("retryInterceptor.register error: predicate must be a function");if("function"!=typeof t)throw new Error("retryInterceptor.register error: strategyHolder must be a function");return T.unshift({predicate:e,retryStrategy:t}),this}};return A.register(c,_).register(l(p,h),S).register(s(m,g),S).register(s(u,g),S).register(f,_).register(s(v,g),_).register(s(y,h,d),_).register(s(E,h,d),b),A}]),angular.module("operationContextServiceModule",["functionsModule"]).constant("OPERATION_CONTEXT",{BACKGROUND_TASKS:"Background Tasks",INTERACTIVE:"Interactive",NON_INTERACTIVE:"Non-Interactive",BATCH_OPERATIONS:"Batch Operations",TOOLING:"Tooling",CMS:"CMS"}).service("operationContextService",["isBlank",function(e){this._store=[],this.register=function(t,n){if("string"!=typeof t||e(t))throw new Error("operationContextService.register error: url is invalid");if("string"!=typeof n||e(n))throw new Error("operationContextService.register error: operationContext is invalid");if(-1===this._store.findIndex(function(e){return!0===e.urlRegex.test(t)&&e.operationContext===n})){var i=new RegExp(t.replace(/\/:[^\/]*/g,"/.*"));return this._store.push({urlRegex:i,operationContext:n}),this}},this.findOperationContext=function(e){var t=this._store.findIndex(function(t){return!0===t.urlRegex.test(e)});return~t?this._store[t].operationContext:null}}]),angular.module("httpErrorPredicatesModule",["yLoDashModule","functionsModule"]).constant("SERVER_ERROR_PREDICATE_HTTP_STATUSES",[500,502,503,504]).constant("CLIENT_ERROR_PREDICATE_HTTP_STATUSES",[429]).constant("TIMEOUT_ERROR_PREDICATE_HTTP_STATUSES",[408]).service("serverErrorPredicate",["lodash","SERVER_ERROR_PREDICATE_HTTP_STATUSES",function(e,t){return function(n){return e.includes(t,n.status)}}]).service("clientErrorPredicate",["lodash","CLIENT_ERROR_PREDICATE_HTTP_STATUSES",function(e,t){return function(n){return e.includes(t,n.status)}}]).service("timeoutErrorPredicate",["lodash","TIMEOUT_ERROR_PREDICATE_HTTP_STATUSES",function(e,t){return function(n){return e.includes(t,n.status)}}]).service("retriableErrorPredicate",["isAnyTruthy","serverErrorPredicate","clientErrorPredicate","timeoutErrorPredicate",function(e,t,n,i){return function(r){return e(t,n,i)(r)}}]).service("noInternetConnectionErrorPredicate",function(){return function(e){return 0===e.status}}),angular.module("httpMethodPredicatesModule",["yLoDashModule"]).constant("HTTP_METHODS_UPDATE",["PUT","POST","DELETE","PATCH"]).constant("HTTP_METHODS_READ",["GET","OPTIONS","HEAD"]).service("updatePredicate",["lodash","HTTP_METHODS_UPDATE",function(e,t){return function(n){return e.includes(t,n.config.method)}}]).service("readPredicate",["lodash","HTTP_METHODS_READ",function(e,t){return function(n){return e.includes(t,n.config.method)}}]),angular.module("operationContextPredicatesModule",["operationContextServiceModule","yLoDashModule"]).service("operationContextInteractivePredicate",["OPERATION_CONTEXT",function(e){return function(t,n){return n===e.INTERACTIVE}}]).service("operationContextNonInteractivePredicate",["OPERATION_CONTEXT","lodash",function(e,t){return function(n,i){return t.includes([e.BACKGROUND_TASKS,e.NON_INTERACTIVE,e.BATCH_OPERATIONS],i)}}]).service("operationContextCMSPredicate",["OPERATION_CONTEXT",function(e){return function(t,n){return n===e.CMS}}]).service("operationContextToolingPredicate",["OPERATION_CONTEXT",function(e){return function(t,n){return n===e.TOOLING}}]),angular.module("exponentialRetrylModule",[]).constant("EXPONENTIAL_RETRY_DEFAULT_SETTING",{MAX_BACKOFF:64e3,MAX_ATTEMPT:5,MIN_BACKOFF:0}).service("exponentialRetry",["EXPONENTIAL_RETRY_DEFAULT_SETTING",function(e){this.calculateNextDelay=function(t,n,i){n=n||e.MAX_BACKOFF;var r=(i=i||e.MIN_BACKOFF)+Math.random();return Math.min(1e3*Math.pow(2,t)+r,n)},this.canRetry=function(t,n){return n=n||e.MAX_ATTEMPT,t<=n}}]),angular.module("linearRetrylModule",[]).constant("LINEAR_RETRY_DEFAULT_SETTING",{MAX_ATTEMPT:5,MAX_BACKOFF:32e3,MIN_BACKOFF:0,RETRY_INTERVAL:500}).service("linearRetry",["LINEAR_RETRY_DEFAULT_SETTING",function(e){this.calculateNextDelay=function(t,n,i,r){i=i||e.MAX_BACKOFF,r=r||e.MIN_BACKOFF,n=n||e.RETRY_INTERVAL;var o=r+Math.random();return Math.min(t*n+o,i)},this.canRetry=function(t,n){return n=n||e.MAX_ATTEMPT,t<=n}}]),angular.module("simpleRetrylModule",[]).constant("SIMPLE_RETRY_DEFAULT_SETTING",{MAX_ATTEMPT:5,MIN_BACKOFF:0,RETRY_INTERVAL:500}).service("simpleRetry",["SIMPLE_RETRY_DEFAULT_SETTING",function(e){this.calculateNextDelay=function(t,n){return n=n||e.MIN_BACKOFF,(t=t||e.RETRY_INTERVAL)+(n+Math.random())},this.canRetry=function(t,n){return n=n||e.MAX_ATTEMPT,t<=n}}]),angular.module("defaultRetryStrategyModule",["simpleRetrylModule"]).factory("defaultRetryStrategy",["simpleRetry",function(e){var t=function(){this.firstFastRetry=!0};return t.prototype.canRetry=function(){return e.canRetry(this.attemptCount)},t.prototype.calculateNextDelay=function(){return e.calculateNextDelay()},t}]),angular.module("exponentialRetryStrategyModule",["exponentialRetrylModule"]).factory("exponentialRetryStrategy",["exponentialRetry",function(e){var t=function(){this.firstFastRetry=!0};return t.prototype.canRetry=function(){return e.canRetry(this.attemptCount)},t.prototype.calculateNextDelay=function(){return e.calculateNextDelay(this.attemptCount)},t}]),angular.module("linearRetryStrategyModule",["linearRetrylModule"]).factory("linearRetryStrategy",["linearRetry",function(e){var t=function(){this.firstFastRetry=!0};return t.prototype.canRetry=function(){return e.canRetry(this.attemptCount)},t.prototype.calculateNextDelay=function(){return e.calculateNextDelay(this.attemptCount)},t}]),angular.module("retryStrategyInterfaceModule",[]).factory("RetryStrategyInterface",function(){return function(){this.canRetry=function(){},this.calculateNextDelay=function(){}}}),angular.module("unauthorizedErrorInterceptorModule",["authenticationModule","sessionServiceModule"]).factory("unauthorizedErrorInterceptor",["$injector","$q","authenticationService","WHO_AM_I_RESOURCE_URI",function(e,t,n,i){var r={},o=[i],a=function(e){return!o.some(function(t){return 0===e.indexOf(t)})};return{predicate:function(e){return 401===e.status&&(!e.config||!e.config.url||a(e.config.url))},responseError:function(i){var o=t.defer();return n.isAuthEntryPoint(i.config.url).then(function(e){e?o.reject(i):n.filterEntryPoints(i.config.url).then(function(e){var t=e[0];r[t]=r[t]||[],r[t].push(o),n.isReAuthInProgress(t).then(function(e){e||n.setReAuthInProgress(t).then(function(){n.authenticate(i.config.url).then(function(){angular.forEach(r[this],function(e){e.resolve()}),r[this]=[]}.bind(t),function(){angular.forEach(r[this],function(e){e.reject()}),r[this]=[]}.bind(t))})}.bind(this))})}),o.promise.then(function(){return e.get("$http")(i.config)})}}}]),angular.module("httpErrorInterceptorServiceModule",["interceptorHelperModule"]).factory("httpErrorInterceptor",["httpErrorInterceptorService","interceptorHelper",function(e,t){return{responseError:function(n){return t.handleResponseError(n,function(){return e.responseError(n)})}}}]).service("httpErrorInterceptorService",["$injector","$log","$q",function(e,t,n){this._errorInterceptors=[],this._interceptorsDeferred=n.defer(),this.addInterceptor=function(t){if("string"==typeof t){if(!e.has(t))throw"httpErrorInterceptorService.interceptor.undefined";t=e.get(t)}return this._validateInterceptor(t),this._errorInterceptors.unshift(t),function(){this._errorInterceptors.splice(this._errorInterceptors.indexOf(t),1)}.bind(this)},this.responseError=function(e){var t=this._errorInterceptors.filter(function(t){return!0===t.predicate(e)});return this._interceptorsDeferred=n.defer(),t.length?this._iterateErrorInterceptors(angular.copy(e),t):this._interceptorsDeferred.reject(e),this._interceptorsDeferred.promise},this._iterateErrorInterceptors=function(e,t,i){if(i===t.length)this._interceptorsDeferred.reject(e);else{var r=this._interceptorsDeferred,o=this._iterateErrorInterceptors.bind(this);i=i||0,n.when(t[i].responseError(e)).then(function(e){r.resolve(e)},function(e){o(e,t,++i)})}},this._validateInterceptor=function(e){if("function"!=typeof e.predicate)throw new Error("httpErrorInterceptorService.addInterceptor.error.interceptor.has.no.predicate");if("function"!=typeof e.responseError)throw new Error("httpErrorInterceptorService.addInterceptor.error.interceptor.has.no.responseError")}}]).config(["$httpProvider",function(e){e.interceptors.push("httpErrorInterceptor")}]),angular.module("httpRequestUtilModule",[]).service("httpRequestUtil",function(){this.isHTMLRequest=function(e){return"GET"===e.config.method&&e.headers("Content-type").indexOf("text/html")>=0}}),angular.module("i18nInterceptorModule",["interceptorHelperModule","resourceLocationsModule","languageServiceModule"]).constant("temporaryKeys",{}).constant("I18NAPIROOT","i18nAPIRoot").constant("UNDEFINED_LOCALE","UNDEFINED").factory("i18nInterceptor",["$injector","interceptorHelper","I18N_RESOURCE_URI","I18NAPIROOT","UNDEFINED_LOCALE","temporaryKeys",function(e,t,n,i,r,o){return{request:function(r){return t.handleRequest(r,function(){return new RegExp(i+"/([a-zA-Z_-]+)$").test(r.url)?e.get("languageService").getResolveLocale().then(function(e){return r.url=[n,e].join("/"),r}):r})},response:function(i){return t.handleResponse(i,function(){var t=new RegExp(n+"/([a-zA-Z_-]+)$");if(i.config.url){var r=i.config.url;if(t.test(r)&&i.data.value&&(i.data=i.data.value),t.test(r))for(var a in o)i.data[a]||(i.data[a]=o[a])}return e.get("languageService").setInitialized(!0),i})}}}]).config(["$httpProvider",function(e){e.interceptors.push("i18nInterceptor")}]),angular.module("includeReplaceModule",[]).directive("includeReplace",function(){return{require:"ngInclude",restrict:"A",link:function(e,t){t.replaceWith(t.children())}}}),angular.module("yInfiniteScrollingModule",["infinite-scroll","functionsModule","yLoDashModule"]).value("THROTTLE_MILLISECONDS",250).controller("yInfiniteScrollingController",["encode","yjQuery","lodash","throttle","THROTTLE_MILLISECONDS","generateIdentifier","$timeout",function(e,t,n,i,r,o,a){this.initiated=!1,this.containerId=o(),this.containerIdSelector="#"+this.containerId,this.context=this.context||this,this.reset=function(){this.distance=this.distance||0,this.context.items=[],this.currentPage=-1,this.pagingDisabled=!1,this.container?this.container.scrollTop=0:a(function(){this.container=t(this.containerIdSelector).get(0),this.initiated=!0}.bind(this),0)};this.nextPage=function(){this.pagingDisabled||(this.pagingDisabled=!0,this.currentPage++,this.mask=this.mask||"",this.fetchPage(this.mask,this.pageSize,this.currentPage).then(function(t){t.results.forEach(function(t){t.technicalUniqueId=e(t)});var i=n.differenceBy(t.results,this.context.items,"technicalUniqueId");n.size(i)>0&&Array.prototype.push.apply(this.context.items,i),this.pagingDisabled=0===t.results.length||t.pagination&&this.context.items.length===t.pagination.totalCount}.bind(this)))}.bind(this),this.$onChanges=i(function(){var e=this.initiated;this.reset(),e&&this.nextPage()}.bind(this),r)}]).component("yInfiniteScrolling",{templateUrl:"yInfiniteScrollingTemplate.html",transclude:!0,replace:!0,controller:"yInfiniteScrollingController",controllerAs:"scroll",bindings:{pageSize:"<",mask:"<?",fetchPage:"<",distance:"<?",context:"<?",dropDownContainerClass:"@?",dropDownClass:"@?"}}),angular.module("interceptorHelperModule",[]).service("interceptorHelper",["$q","$log",function(e,t){return{_isEligibleForInterceptors:function(e){return e&&e.url&&!/.+\.html$/.test(e.url)},_handle:function(n,i,r,o){try{return this._isEligibleForInterceptors(i)?e.when(r()):o?e.reject(n):n}catch(i){return t.error("caught error in one of the interceptors",i),o?e.reject(n):n}},handleRequest:function(e,t){return this._handle(e,e,t,!1)},handleResponse:function(e,t){return this._handle(e,e.config,t,!1)},handleResponseError:function(e,t){return this._handle(e,e.config,t,!0)}}}]),angular.module("yjqueryModule",[]).run(["yjQuery",function(e){e.fn.extend({getCssPath:function(){for(var e,t=this;t.length;){var n=t[0],i=n.className;if("BODY"===n.tagName)break;t=t.parent(),e=i+(e?">"+e:"")}return e}})}]).factory("yjQuery",function(){var e="smarteditJQuery";return window[e]||(window.$&&window.$.noConflict?window[e]=window.$.noConflict():window[e]=window.$),window[e]}),angular.module("languageSelectorModule",["languageServiceModule","ui.select","ngSanitize","crossFrameEventServiceModule"]).controller("languageSelectorController",["crossFrameEventService","$scope","languageService","SWITCH_LANGUAGE_EVENT",function(e,t,n,i){this.setSelectedLanguage=function(e){n.setSelectedToolingLanguage(e)},this.eventHandler=function(){return n.getResolveLocale().then(function(e){this.selectedLanguage=this.languages.find(function(t){return t.isoCode===e})}.bind(this))},this.$onInit=function(){n.getToolingLanguages().then(function(e){this.languages=e,n.getResolveLocale().then(function(e){this.selectedLanguage=this.languages.find(function(t){return t.isoCode===e})}.bind(this))}.bind(this)),this.unregFn=e.subscribe(i,this.eventHandler.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).directive("languageSelector",function(){return{templateUrl:"languageSelectorTemplate.html",restrict:"E",transclude:!0,scope:{},bindToController:{},controller:"languageSelectorController",controllerAs:"ctrl"}}),angular.module("languageServiceModule",["smarteditServicesModule","resourceLocationsModule","translationServiceModule","gatewayFactoryModule","crossFrameEventServiceModule","operationContextServiceModule","seConstantsModule"]).constant("SELECTED_LANGUAGE","SELECTED_LANGUAGE").constant("SWITCH_LANGUAGE_EVENT","SWITCH_LANGUAGE_EVENT").factory("languageServiceGateway",["gatewayFactory",function(e){return e.createGateway("languageSwitch")}]).factory("languageService",["restServiceFactory","LANGUAGE_RESOURCE_URI","$q","I18N_LANGUAGES_RESOURCE_URI","SELECTED_LANGUAGE","storageService","languageServiceGateway","$translate","SWITCH_LANGUAGE_EVENT","crossFrameEventService","operationContextService","OPERATION_CONTEXT",function(e,t,n,i,r,o,a,s,l,c,u,d){var p={},h=e.get(t);u.register(t,d.TOOLING);var f=e.get(i),g=function(){var e=(navigator.language||navigator.userLanguage).split("-");return e=1===e.length?e[0]:e[0]+"_"+e[1].toUpperCase()},m=function(){var e=g();return o.getValueFromCookie(r,!1).then(function(t){return t?t.isoCode:e},function(){return e})},v=n.defer();return{getBrowserLanguageIsoCode:function(){return(navigator.language||navigator.userLanguage).split("-")[0]},setInitialized:function(e){!0===e?v.resolve():v.reject()},isInitialized:function(){return v.promise},getBrowserLocale:function(){return g()},getResolveLocale:function(){return n.when(m())},getResolveLocaleIsoCode:function(){return this.getResolveLocale().then(function(e){return this.convertBCP47TagToJavaTag(e).split("_")[0]}.bind(this))},getLanguagesForSite:function(e){return p[e]?n.when(p[e]):h.get({siteUID:e}).then(function(t){return p[e]=t.languages,p[e]})},getToolingLanguages:function(){var e=n.defer();return f.get().then(function(t){e.resolve(t.languages)},function(){e.reject()}),e.promise},setSelectedToolingLanguage:function(e){o.putValueInCookie(r,e,!1),s.use(e.isoCode),a.publish(l,{isoCode:e.isoCode}),c.publish(l)},registerSwitchLanguage:function(){a.subscribe(l,function(e,t){return s.use(t.isoCode)})},convertBCP47TagToJavaTag:function(e){return e?e.replace(/-/g,"_"):e},convertJavaTagToBCP47Tag:function(e){return e?e.replace(/_/g,"-"):e}}}]),angular.module("yEditableListModule",["treeModule","yLoDashModule"]).controller("YEditableListController",["$q",function(e){this.$onInit=function(){this._enableDragAndDrop=function(){this.dragOptions.allowDropCallback=function(e){return e.sourceNode.parentUid===this.rootId}.bind(this),this.dragOptions.onDropCallback=function(){this.actions.performUpdate()}.bind(this)};var t=[{key:"se.ydropdownmenu.remove",callback:function(e){this.actions.removeItem(e)}.bind(this)},{key:"se.ydropdownmenu.move.up",condition:function(e){return this.actions.isMoveUpAllowed(e)}.bind(this),callback:function(e){this.actions.moveUp(e)}.bind(this)},{key:"se.ydropdownmenu.move.down",condition:function(e){return this.actions.isMoveDownAllowed(e)}.bind(this),callback:function(e){this.actions.moveDown(e)}.bind(this)}];this.actions={fetchData:function(t,n){return this.items.map(function(e){e.id&&!e.uid&&(e.uid=e.id),e.parentUid=this.rootId}.bind(this)),n.nodes=this.items,e.when(n)}.bind(this),getDropdownItems:function(){return t},removeItem:function(e,t){var n=t.$modelValue,i=this.root.nodes.indexOf(n);this.root.nodes.splice(i,1),this.performUpdate(parent,t)},moveUp:function(e,t){var n=t.$modelValue,i=this.root.nodes.indexOf(n),r=this.root.nodes[i-1];this.root.nodes.splice(i-1,2,n,r),this.performUpdate(parent,t)},moveDown:function(e,t){var n=t.$modelValue,i=this.root.nodes.indexOf(n),r=this.root.nodes[i+1];this.root.nodes.splice(i,2,r,n),this.performUpdate(parent,t)},isMoveUpAllowed:function(e,t){var n=t.$modelValue;return this.root.nodes.indexOf(n)>0},isMoveDownAllowed:function(e,t){var n=t.$modelValue,i=this.root.nodes.length;return this.root.nodes.indexOf(n)!==i-1},performUpdate:function(){this.onChange&&this.onChange()}.bind(this),refreshList:function(){this.fetchData(this.root)}},this.dragOptions={},this.refresh=function(){this.actions.refreshList()}.bind(this),this.itemTemplateUrl||(this.itemTemplateUrl="yEditableListDefaultItemTemplate.html"),this.rootId="root"+this.id,void 0===this.editable&&(this.editable=!0),!0===this.editable&&this._enableDragAndDrop()}}]).component("yEditableList",{templateUrl:"yEditableListTemplate.html",controller:"YEditableListController",controllerAs:"ctrl",bindings:{id:"@",items:"<",refresh:"=?",onChange:"<",itemTemplateUrl:"<?",editable:"<?"}}),angular.module("loadConfigModule",["functionsModule","ngResource","smarteditServicesModule","resourceLocationsModule","operationContextServiceModule"]).factory("LoadConfigManager",["$resource","copy","$q","convertToArray","sharedDataService","operationContextService","$log","SMARTEDIT_ROOT","SMARTEDIT_RESOURCE_URI_REGEXP","CONFIGURATION_URI","OPERATION_CONTEXT",function(e,t,n,i,r,o,a,s,l,c,u){var d=function(){o.register(c,u.TOOLING),this.editorViewService=e(c),this.configuration=[],this._convertToObject=function(e){var t=e.reduce(function(e,t){try{void 0!==e[t.key]&&a.error("LoadConfigManager._convertToObject() - duplicate configuration keys found: "+t.key),e[t.key]=JSON.parse(t.value)}catch(e){a.error("item _key_ from configuration contains unparsable JSON data _value_ and was ignored".replace("_key_",t.key).replace("_value_",t.value))}return e},{});return t.domain=l.exec(this._getLocation())[1],t.smarteditroot=t.domain+"/"+s,t},this._getLocation=function(){return document.location.href}};return d.prototype._parse=function(e){var n=t(e);return Object.keys(n).forEach(function(e){try{n[e]=JSON.parse(n[e])}catch(e){}}),n},d.prototype.loadAsArray=function(){var e=n.defer();return this.editorViewService.query().$promise.then(function(t){e.resolve(this._parse(t))}.bind(this),function(){a.log("Fail to load the configurations."),e.reject()}),e.promise},d.prototype.loadAsObject=function(){var e=n.defer();return this.loadAsArray().then(function(t){try{var n=this._convertToObject(t);r.set("configuration",n),e.resolve(n)}catch(t){a.error("LoadConfigManager.loadAsObject - _convertToObject failed to load configuration"),a.error(t),e.reject()}}.bind(this),function(t){a.error("LoadConfigManager.loadAsObject - loadAsArray failed to load configuration"),a.error(t),e.reject()}),e.promise},d}]).factory("loadConfigManagerService",["LoadConfigManager",function(e){return new e}]),angular.module("localizedElementModule",["tabsetModule","seConstantsModule"]).controller("localizedElementController",["$scope","$attrs","VALIDATION_MESSAGE_TYPES",function(e,t,n){this.$onChanges=function(e){if(e.field&&(this.model={field:this.field,component:this.ge.editor.component[this.field.qualifier]},this.languages=this.ge.editor.languages,this.field)){var n=this.inputTemplate?this.inputTemplate:t.inputTemplate;this.tabs=this.tabs||[],this.tabs.length=0,Array.prototype.push.apply(this.tabs,this.languages.map(function(e){return{id:e.isocode,title:e.isocode.toUpperCase()+(e.required?"*":""),templateUrl:n}}))}};var i;this.$doCheck=function(){if(this.field.messages!==i){i=this.field.messages;var e=this.field.messages?this.field.messages.filter(function(e){return e.type===n.VALIDATION_ERROR}).reduce(function(e,t){return e[t.language]=!0,e},{}):{};this.tabs.forEach(function(t){var n=e[t.id];t.hasErrors=void 0!==n&&n})}}}]).component("localizedElement",{templateUrl:"localizedElementTemplate.html",transclude:!1,require:{ge:"^genericEditor"},controller:"localizedElementController",controllerAs:"le",bindings:{field:"<",inputTemplate:"<"}}),angular.module("yLoDashModule",[]).factory("lodash",function(){if(!window.smarteditLodash){if(!window._||!window._.noConflict)throw"could not find lodash library under window._ namespace";window.smarteditLodash=window._.noConflict()}return window.smarteditLodash}),angular.module("modalServiceModule",["ui.bootstrap","translationServiceModule","functionsModule","coretemplates"]).constant("MODAL_BUTTON_ACTIONS",{NONE:"none",CLOSE:"close",DISMISS:"dismiss"}).constant("MODAL_BUTTON_STYLES",{DEFAULT:"default",PRIMARY:"primary",SECONDARY:"default"}).factory("modalService",["$uibModal","$injector","$controller","$rootScope","$templateCache","$translate","$log","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES","merge","copy","generateIdentifier",function(e,t,n,i,r,o,a,s,l,c,u,d){function p(e){var t,n=!0,i=null,r=[];if(!e.modalInstance)throw"no.modalInstance.injected";if(this.closeFunction=e.modalInstance.close,this.dismissFunction=e.modalInstance.dismiss,this._defaultButtonOptions={id:"button.id",label:"button.label",action:s.NONE,style:l.PRIMARY,disabled:!1,callback:null},this._createButton=function(e){var t=u(this._defaultButtonOptions);c(t,e||{}),o(t.label).then(function(e){t.label=e});var n=!1;for(var i in l)if(l[i]===t.style){n=!0;break}if(!n)throw"modalService.ModalManager._createButton.illegal.button.style";var r=!1;for(var a in s)if(s[a]===t.action){r=!0;break}if(!r)throw"modalService.ModalManager._createButton.illegal.button.action";return t},this.title="","string"==typeof e.title&&(this.title=e.title),"string"==typeof e.titleSuffix&&(this.titleSuffix=e.titleSuffix),e.buttons)for(var a=0;a<e.buttons.length;a++)r.push(this._createButton(e.buttons[a]));this._buttonPressed=function(e){var n=null;if(e.callback?n=e.callback():t&&(n=t(e.id)),e.action!==s.NONE){var i=e.action===s.CLOSE?this.close:this.dismiss;n?n.then(function(e){i.call(this,e)}.bind(this)):i.call(this)}},this._handleDismissButton=function(){i?i().then(function(e){this.dismiss(e)}.bind(this)):this.dismiss()},this._showDismissButton=function(){return n},this._hasButtons=function(){return r.length>0},this.addButton=function(e){var t=this._createButton(e);return r.push(t),t},this.getButtons=function(){return r},this.removeAllButtons=function(){r.splice(0,r.length)},this.removeButton=function(e){for(var t=r.length-1;t>=0;t--)r[t].id===e&&r.splice(t,1)},this.enableButton=function(e){for(var t=0;t<r.length;t++)r[t].id===e&&(r[t].disabled=!1)},this.disableButton=function(e){for(var t=0;t<r.length;t++)r[t].id===e&&(r[t].disabled=!0)},this.getButton=function(e){for(var t=0;t<r.length;t++)if(r[t].id===e)return r[t];return null},this.setShowHeaderDismiss=function(e){if("boolean"!=typeof e)throw"modalService.ModalManager.showDismissX.illegal.param";n=e},this.setDismissCallback=function(e){i=e},this.setButtonHandler=function(e){t=e}}function h(e){var t=this;return["$scope","$uibModalInstance",function(i,o){e.modalInstance=o,this._modalManager=new p(e),t._modalManager=this._modalManager,i.modalController=this,e.controller&&(angular.extend(this,n(e.controller,{$scope:i,modalManager:this._modalManager})),this.init&&this.init()),e.controllerAs&&(i[e.controllerAs]=this),e.templateInline?(this.templateUrl="modalTemplateKey"+btoa(d()),r.put(this.templateUrl,e.templateInline)):this.templateUrl=e.templateUrl,this.close=function(e){this._modalManager.close(e),r.remove(this.templateUrl)}.bind(this),this.dismiss=function(e){this._modalManager.dismiss(e),r.remove(this.templateUrl)}.bind(this)}]}function f(){}return p.prototype.close=function(e){this.closeFunction&&this.closeFunction(e)},p.prototype.dismiss=function(e){this.dismissFunction&&this.dismissFunction(e)},f.prototype.open=function(n){var i=n||{};if(!i.templateUrl&&!i.templateInline)throw"modalService.configuration.errors.no.template.provided";if(i.templateUrl&&i.templateInline)throw"modalService.configuration.errors.2.templates.provided";return e.open({templateUrl:"modalTemplate.html",size:i.size||"lg",backdrop:"static",keyboard:!1,controller:h.call(this,i),controllerAs:"modalController",windowClass:i.cssClasses||null,animation:!(n.animation&&!1===n.animation||t.has("$animate")&&!t.get("$animate").enabled())}).result},new f}]),angular.module("pageSensitiveDirectiveModule",["crossFrameEventServiceModule"]).controller("pageSensitiveController",["$timeout","EVENTS","crossFrameEventService",function(e,t,n){this.$onInit=function(){this.hasContent=!0,this.unRegisterPageChangeListener=n.subscribe(t.PAGE_CHANGE,function(){this.hasContent=!1,e(function(){this.hasContent=!0}.bind(this),0)}.bind(this))},this.$onDestroy=function(){this.unRegisterPageChangeListener()}}]).directive("pageSensitive",function(){return{restrict:"A",replace:!1,transclude:!0,template:"<div class='se-page-sensitive' data-ng-if='ctrl.hasContent' data-ng-transclude></div>",scope:!0,controller:"pageSensitiveController",controllerAs:"ctrl",bindToController:!0}}),angular.module("permissionServiceInterfaceModule",["functionsModule"]).constant("SE_PERMISSION_SERVICE_GATEWAY_ID","SE_PERMISSION_SERVICE_GATEWAY_ID").factory("PermissionServiceInterface",function(){var e=function(){},t=function(e){return this.ruleVerifyFunctions=this.ruleVerifyFunctions||{},this.ruleVerifyFunctions[e.names.join("-")]={verify:e.verify},delete e.verify,e},n=function(e){if(!(e.names instanceof Array))throw"Rule names must be array";if(e.names.length<1)throw"Rule requires at least one name";if(!e.verify)throw"Rule requires a verify function";if("function"!=typeof e.verify)throw"Rule verify must be a function"};return e.prototype.isPermitted=function(){},e.prototype.clearCache=function(){},e.prototype.getPermission=function(){},e.prototype.registerPermission=function(){},e.prototype.registerRule=function(e){n(e),e=t.bind(this)(e),this._registerRule(e)},e.prototype.registerDefaultRule=function(e){e=t.bind(this)(e),this._registerDefaultRule(e)},e.prototype.unregisterDefaultRule=function(){},e.prototype._registerRule=function(){},e.prototype._registerDefaultRule=function(){},e}),angular.module("yPopoverModule",["coretemplates","yPopupOverlayModule","compileHtmlModule","functionsModule","yjqueryModule","seConstantsModule"]).controller("yPopoverController",["$log","$scope","$element","$sce","yjQuery","isBlank","$templateCache","yPopupEngineService","isIframe","OVERLAY_ID",function(e,t,n,i,r,o,a,s,l,c){this.engine=null,this.config=null,this.getTemplate=function(){return'<y-popover-popup class="se-popover-popup" data-placement="ypop.placement" data-template="ypop.template" data-title="ypop.title"></y-popover-popup>'},this.$onInit=function(){var i=n.children().first()[0];n.children().length||e.error("yPopover require child element for anchor.");var a=l()?r("#"+c):null;this.config={placement:this.placement||"top",trigger:this.trigger||"click",container:a&&a.length?a[0]:"body",onShow:function(){this.isOpen=!0}.bind(this),onHide:function(){this.isOpen=!1}.bind(this),onChanges:function(e,n){this.placement!==n.placement&&(this.placement=n.placement,t.$apply())}.bind(this)},this.engine=new s(i,this.getTemplate(),t,this.config),this.isOpen=o(this.isOpen)?this.engine.isOpen:this.isOpen}.bind(this),this.$doCheck=function(){this.previousIsOpen!==this.isOpen&&(this.isOpen?this.engine.show():this.engine.hide(),this.previousIsOpen=this.isOpen)},this.$onChanges=function(){this.templateUrl&&(this.template=a.get(this.templateUrl),delete this.templateUrl),this.engine&&(this.config.placement=this.placement||"top",this.config.trigger=this.trigger||"click",this.engine.configure(this.config))},this.$onDestroy=function(){this.engine.dispose()}}]).directive("yPopover",function(){return{templateUrl:"yPopoverTemplate.html",restrict:"A",transclude:!0,replace:!1,controller:"yPopoverController",controllerAs:"ypop",scope:{},bindToController:{template:"<?",templateUrl:"<?",title:"<?",placement:"<?",trigger:"<?",isOpen:"=?"}}}).component("yPopoverPopup",{templateUrl:"yPopoverPopupTemplate.html",bindings:{placement:"<?",title:"<?",template:"<?"}}),angular.module("recompileDomModule",[]).directive("recompileDom",["$timeout",function(e){return{restrict:"A",replace:!1,transclude:!0,template:"<div data-ng-if='showContent' data-ng-transclude></div>",scope:{trigger:"=recompileDom"},link:function(t){t.showContent=!0,t.trigger=function(){t.showContent=!1,e(function(){t.showContent=!0},0)}}}}]),function(){function e(e,t,n,i,r,o,a,s,l,c,u,d,p,h,f,g){function m(){this._bindEvents()}var v={id:"HOTKEY_NOTIFICATION_ID",templateUrl:"perspectiveSelectorHotkeyNotificationTemplate.html"};return m.prototype.renderSlots=function(){},m.prototype.renderComponent=function(){},m.prototype.renderRemoval=function(){},m.prototype.renderPage=function(){},m.prototype.toggleOverlay=function(){},m.prototype.refreshOverlayDimensions=function(){},m.prototype.blockRendering=function(){},m.prototype.isRenderingBlocked=function(){},m.prototype._bindEvents=function(){e.on(o.KEY_UP,function(e){this._shouldEnableKeyPressEvent(e).then(function(e){e&&this._keyPressEvent()}.bind(this))}.bind(this)),e.on(o.CLICK,function(){this._clickEvent()}.bind(this))},m.prototype._keyPressEvent=function(){this.isRenderingBlocked().then(function(e){this._areAllModalWindowsClosed()&&(e?(this.blockRendering(!1),this.renderPage(!0),d.removeNotification("HOTKEY_NOTIFICATION_ID")):(this.blockRendering(!0),this.renderPage(!1),d.pushNotification(v),u.sendAsynchEvent(a)))}.bind(this))},m.prototype._clickEvent=function(){g()||f.publish(c),this.isRenderingBlocked().then(function(e){e&&!g()&&(this.blockRendering(!1),this.renderPage(!0),d.removeNotification("HOTKEY_NOTIFICATION_ID"))}.bind(this))},m.prototype._areAllModalWindowsClosed=function(){return 0===i('[id="'+s+'"]').length},m.prototype._shouldEnableKeyPressEvent=function(e){try{return p.getPageUUID().then(function(t){if(t)return h.isEmptyPerspectiveActive().then(function(t){return e.which===r.ESC&&!t})})}catch(e){return n.when(!1)}return n.when(!1)},m}e.$inject=["$document","$window","$q","yjQuery","KEY_CODES","MOUSE_AND_KEYBOARD_EVENTS","OVERLAY_DISABLED","MODAL_DIALOG_ID","NONE_PERSPECTIVE","EVENT_OUTER_FRAME_CLICKED","systemEventService","notificationService","pageInfoService","perspectiveService","crossFrameEventService","isIframe"],angular.module("renderServiceInterfaceModule",["eventServiceModule","smarteditServicesModule","seConstantsModule","crossFrameEventServiceModule","functionsModule","yjqueryModule"]).constant("KEY_CODES",{ESC:27}).constant("MOUSE_AND_KEYBOARD_EVENTS",{KEY_DOWN:"keydown",KEY_UP:"keyup",CLICK:"click"}).constant("OVERLAY_DISABLED","OVERLAY_DISABLED").constant("MODAL_DIALOG_ID","y-modal-dialog").factory("RenderServiceInterface",e)}(),angular.module("resourceLocationsModule",[]).constant("CONTEXT_SITE_ID","CURRENT_CONTEXT_SITE_ID").constant("CONTEXT_CATALOG","CURRENT_CONTEXT_CATALOG").constant("CONTEXT_CATALOG_VERSION","CURRENT_CONTEXT_CATALOG_VERSION").constant("PAGE_CONTEXT_SITE_ID","CURRENT_PAGE_CONTEXT_SITE_ID").constant("PAGE_CONTEXT_CATALOG","CURRENT_PAGE_CONTEXT_CATALOG").constant("PAGE_CONTEXT_CATALOG_VERSION","CURRENT_PAGE_CONTEXT_CATALOG_VERSION").constant("SMARTEDIT_ROOT","smartedit").constant("SMARTEDIT_RESOURCE_URI_REGEXP",/^(.*)\/smartedit/).constant("CONFIGURATION_URI","/smartedit/configuration/:key").constant("CONFIGURATION_COLLECTION_URI","/smartedit/configuration").constant("CMSWEBSERVICES_RESOURCE_URI","/cmswebservices").constant("DEFAULT_AUTHENTICATION_ENTRY_POINT","/authorizationserver/oauth/token").constant("DEFAULT_AUTHENTICATION_CLIENT_ID","smartedit").constant("I18N_ROOT_RESOURCE_URI","/smarteditwebservices/v1/i18n").constant("I18N_RESOURCE_URI","/smarteditwebservices/v1/i18n/translations").constant("I18N_LANGUAGES_RESOURCE_URI","/smarteditwebservices/v1/i18n/languages").constant("LANGUAGE_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/languages").constant("PRODUCT_RESOURCE_API","/cmssmarteditwebservices/v1/sites/:siteUID/products/:productUID").constant("PRODUCT_LIST_RESOURCE_API","/cmssmarteditwebservices/v1/productcatalogs/:catalogId/versions/:catalogVersion/products").constant("PRODUCT_CATEGORY_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/:siteUID/categories/:categoryUID").constant("PRODUCT_CATEGORY_SEARCH_RESOURCE_URI","/cmssmarteditwebservices/v1/productcatalogs/:catalogId/versions/:catalogVersion/categories").constant("SITES_RESOURCE_URI","/cmswebservices/v1/sites").constant("LANDING_PAGE_PATH","/").constant("STOREFRONT_PATH","/storefront/:siteId/:catalogId/:catalogVersion/").constant("STOREFRONT_PATH_WITH_PAGE_ID","/storefront/:siteId/:catalogId/:catalogVersion/:pageId").constant("STORE_FRONT_CONTEXT","/storefront").constant("CATALOGS_PATH","/cmswebservices/v1/catalogs/").constant("MEDIA_PATH","/cmswebservices/v1/media").constant("CMSWEBSERVICES_PATH",/\/cmssmarteditwebservices|\/cmswebservices/).constant("PREVIEW_RESOURCE_URI","/previewwebservices/v1/preview").constant("ENUM_RESOURCE_URI","/cmswebservices/v1/enums").constant("USER_GLOBAL_PERMISSIONS_RESOURCE_URI","/permissionswebservices/v1/permissions/principals/:user/global").constant("SYNC_PATH","/cmswebservices/v1/catalogs/:catalog/versions/Staged/synchronizations/versions/Online").constant("MEDIA_RESOURCE_URI","/cmswebservices/v1/catalogs/CURRENT_CONTEXT_CATALOG/versions/CURRENT_CONTEXT_CATALOG_VERSION/media").constant("TYPES_RESOURCE_URI","/cmswebservices/v1/types").constant("STRUCTURES_RESOURCE_URI","/cmssmarteditwebservices/v1/structures").factory("resourceLocationToRegex",function(){return function(e){return new RegExp(e.replace(/\/:[^\/]*/g,"/.*"))}}),angular.module("itemPrinterModule",[]).component("itemPrinter",{transclude:!1,replace:!1,template:'<div class="se-item-printer" ng-include="printer.templateUrl"></div>',require:{ySelect:"^ySelect"},controller:["$scope",function(e){e.selected=!0,this.$onChanges=function(){e.item=this.model,e.ySelect=this.ySelect}}],controllerAs:"printer",bindings:{templateUrl:"<",model:"<"}}),angular.module("ySelectModule",["compileHtmlModule","functionsModule","yInfiniteScrollingModule","itemPrinterModule","ui.select","ngSanitize","coretemplates","yActionableSearchItemModule","l10nModule","seConstantsModule"]).run(["$templateCache",function(e){e.put("select2/select-multiple.tpl.html",e.get("select2/select-multiple.tpl.html").replace("{'select2-display-none': !$select.open || $select.items.length === 0}","{'select2-display-none': !$select.open }")),e.put("pagedSelect2/match-multiple.tpl.html",e.get("select2/match-multiple.tpl.html")),e.put("pagedSelect2/match.tpl.html",e.get("select2/match.tpl.html")),e.put("pagedSelect2/no-choice.tpl.html",e.get("select2/no-choice.tpl.html")),e.put("pagedSelect2/select-multiple.tpl.html",e.get("select2/select-multiple.tpl.html")),e.put("pagedSelect2/select.tpl.html",e.get("select2/select.tpl.html")),e.put("pagedSelect2/choices.tpl.html",e.get("uiSelectPagedChoicesTemplate.html")),e.put("select2/choices.tpl.html",e.get("uiSelectChoicesTemplate.html"))}]).controller("ySelectController",["$q","$log","lodash","$attrs","$templateCache","VALIDATION_MESSAGE_TYPES",function(e,t,n,i,r,o){this.VALIDATION_MESSAGE_TYPES=o,this.api={setValidationState:function(e){this.validationState=e}.bind(this),resetValidationState:function(){this.validationState=void 0}.bind(this)},this.$onInit=function(){this.items=[],this.searchEnabled=!1!==this.searchEnabled,this.exposedModel.$viewChangeListeners.push(this.syncModels),this.exposedModel.$render=this.syncModels,this.reset=function(e){return this.items.length=0,e&&this.resetModel(),this.$onChanges()}.bind(this),"function"==typeof this.getApi&&this.getApi({$api:this.api})},this.clear=function(e,t){t.preventDefault(),t.stopPropagation(),delete this.model,this.internalOnChange()}.bind(this),this.resultsHeaderLabel="se.yselect.options.inactiveoption.label",this.showResultHeader=function(){return this.searchEnabled&&this.items&&this.items.length>0},this.getActionableTemplateUrl=function(){return this.actionableSearchItemTemplateConfig?this.actionableSearchItemTemplateConfig.templateUrl:""}.bind(this),this.refreshOptions=function(e){this.fetchStrategy.fetchAll&&this.fetchStrategy.fetchAll(e).then(function(e){this.items=e}.bind(this))}.bind(this),this.syncModels=function(){this.model=this.exposedModel.$modelValue,this.$onChanges()}.bind(this),this.$onChanges=function(t){this.isValidConfiguration(),this.updateControlTemplate();var n=e.when(null);if(!this.items||0===this.items.length)if(this.isPagedDropdown()){if(!this.fetchStrategy.fetchEntity&&!this.fetchStrategy.fetchEntities)throw"could not initialize dropdown of ySelect, neither fetchEntity, fetchEntities, nor fetchAll were specified";this.isModelEmpty()||(n=this.internalFetchEntities())}else n=this.internalFetchAll();return t&&t.fetchStrategy&&this._updateChild(),n},this.internalOnChange=function(){this.exposedModel.$setViewValue(this.model),this.onChange&&this.onChange()}.bind(this),this.internalFetchAll=function(){return this.fetchStrategy.fetchAll().then(function(e){if(this.items=e,this.model){(this.multiSelect?n.every(this.model,function(e){return n.find(this.items,function(t){return t.id===e})}.bind(this)):e.find(function(e){return e.id===this.model}.bind(this)))||t.debug("[ySelect - "+this.id+"] fetchAll was used to fetch the option identified by "+this.model+" but failed to find a match"),this.updateModelIfNecessary()}this.internalOnChange()}.bind(this))},this.internalFetchEntities=function(){var n;if(this.multiSelect)if(this.fetchStrategy.fetchEntities)n=this.fetchStrategy.fetchEntities(this.model).then(function(e){return e.length!==this.model.length&&t.debug("!fetchEntities was used to fetch the options identified by "+this.model+" but failed to find all matches"),e}.bind(this));else{var i=[];this.model.forEach(function(e){i.push(this.fetchEntity(e))}.bind(this)),n=e.all(i)}else n=this.fetchEntity(this.model).then(function(e){return[e]});return n.then(function(e){this.items=e.filter(function(e){return null!==e}),this.updateModelIfNecessary(),this.internalOnChange()}.bind(this))},this.fetchEntity=function(e){return this.fetchStrategy.fetchEntity(e).then(function(e){return e||t.debug("fetchEntity was used to fetch the option identified by "+e+" but failed to find a match"),e})},this.updateModelIfNecessary=function(){if(!this.keepModelOnReset)if(this.multiSelect)this.model=this.model.filter(function(e){return n.find(this.items,function(t){return t&&t.id===e})}.bind(this));else{var e=this.items.filter(function(e){return e.id===this.model}.bind(this));this.model=e.length>0?this.model:null}},this.isValidConfiguration=function(){if(!this.fetchStrategy.fetchAll&&!this.fetchStrategy.fetchPage)throw"neither fetchAll nor fetchPage have been specified in fetchStrategy";if(this.fetchStrategy.fetchAll&&this.fetchStrategy.fetchPage)throw"only one of either fetchAll or fetchPage must be specified in fetchStrategy";if(this.fetchStrategy.fetchPage&&this.model&&!this.fetchStrategy.fetchEntity&&!this.fetchStrategy.fetchEntities)throw"fetchPage has been specified in fetchStrategy but neither fetchEntity nor fetchEntities are available to load item identified by "+this.model;this.isPagedDropdown()&&!this.keepModelOnReset&&t.debug("current ySelect is paged, so keepModelOnReset flag is ignored (it will always keep the model on reset).")},this.updateControlTemplate=function(){this.theme=this.isPagedDropdown()?"pagedSelect2":"select2",this.itemTemplate=this.itemTemplate||"defaultItemTemplate.html"},this.requiresPaginatedStyling=function(){return this.isPagedDropdown()||this.hasControls()},this.hasError=function(){return this.VALIDATION_MESSAGE_TYPES.VALIDATION_ERROR===this.validationState},this.hasWarning=function(){return this.VALIDATION_MESSAGE_TYPES.WARNING===this.validationState},this.isPagedDropdown=function(){return!!this.fetchStrategy.fetchPage},this.hasControls=function(){return!0===(this.controls||!1)},this.isModelEmpty=function(){return this.multiSelect?!this.model||this.model&&0===this.model.length:!this.model},this.resetModel=function(){this.multiSelect?this.model.length=0:delete this.model},this.disableChoice=function(e){return!!this.disableChoiceFn&&this.disableChoiceFn(e)}.bind(this),this._updateChild=function(){var e=this.fetchStrategy.fetchPage?"pagedSelect2":"select2",t=this.fetchStrategy.fetchPage?'repeat="item.id as item in ySelect.items"':'repeat="item.id as item in ySelect.items | filter: $select.search" refresh="ySelect.refreshOptions($select.search)"',n=r.get(i.multiSelect&&this.multiSelect?"yMultiSelectTemplate.html":"ySelectTemplate.html");this.result=n.replace("<%= theme %>",e).replace('"<%= filtering %>"',t)}}]).directive("ySelect",function(){return{template:"<div data-compile-html='ySelect.result'></div>",transclude:!0,controller:"ySelectController",controllerAs:"ySelect",require:{exposedModel:"ngModel"},scope:{id:"@?",fetchStrategy:"<",onChange:"<?",controls:"<?",multiSelect:"<?",keepModelOnReset:"<?",reset:"=?",isReadOnly:"<?",resultsHeaderTemplate:"<?",resultsHeaderTemplateUrl:"<?",resultsHeaderLabel:"<?",disableChoiceFn:"<?",placeholder:"<?",itemTemplate:"<?",searchEnabled:"<?",getApi:"&?"},bindToController:!0}}),angular.module("yActionableSearchItemModule",["eventServiceModule"]).controller("yActionableSearchItemController",["$scope","systemEventService",function(e,t){this.getActionText=function(){return this.actionText||"se.yationablesearchitem.action.create"}.bind(this),this.showForm=function(){return this.uiSelect&&this.uiSelect.search&&this.uiSelect.search.length>0}.bind(this),this.getInputText=function(){return this.uiSelect.search},this.buttonPressed=function(){var e=this.eventId||"yActionableSearchItem_ACTION_CREATE";t.sendEvent(e,this.uiSelect.search||""),this.uiSelect.close()}.bind(this)}]).component("yActionableSearchItem",{templateUrl:"yActionableSearchItemTemplate.html",require:{ySelect:"^ySelect",uiSelect:"^uiSelect"},controller:"yActionableSearchItemController",bindings:{eventId:"@?",actionText:"@?"}}),angular.module("sessionServiceInterfaceModule",[]).constant("WHO_AM_I_RESOURCE_URI","/authorizationserver/oauth/whoami").factory("SessionServiceInterface",function(){var e=function(){};return e.prototype.getCurrentUsername=function(){},e.prototype.getCurrentUserDisplayName=function(){},e.prototype.hasUserChanged=function(){},e.prototype.resetCurrentUserData=function(){},e.prototype.setCurrentUsername=function(){},e}),angular.module("sliderPanelModule",["ngAnimate","sliderPanelServiceModule","yjqueryModule","yLoDashModule"]).constant("CSS_CLASSNAMES",{SLIDERPANEL_ANIMATED:"sliderpanel--animated",SLIDERPANEL_SLIDEPREFIX:"sliderpanel--slidefrom"}).controller("sliderPanelController",["$animate","$element","$scope","$window","CSS_CLASSNAMES","yjQuery","lodash","sliderPanelServiceFactory",function(e,t,n,i,r,o,a,s){var l=this,c={},u=function(){o(window).on("resize.sliderPanelRedraw_"+l.uniqueId,function(){l.isShown&&n.$apply(function(){c.updateContainerInlineStyling(!0),l.inlineStyling.container=c.inlineStyling.container})})};this.isSaveDisabled=function(){return!!(this.sliderPanelConfiguration.modal&&this.sliderPanelConfiguration.modal.save&&this.sliderPanelConfiguration.modal.save.isDisabledFn)&&this.sliderPanelConfiguration.modal.save.isDisabledFn()}.bind(this),this.$onInit=function(){this.isShown=!1,this.uniqueId=a.uniqueId(),c=s.getNewServiceInstance(t,i,this.sliderPanelConfiguration),this.sliderPanelConfiguration=c.sliderPanelConfiguration,this.slideClassName=r.SLIDERPANEL_SLIDEPREFIX+this.sliderPanelConfiguration.slideFrom,this.inlineStyling={container:c.inlineStyling.container,content:c.inlineStyling.content},this.sliderPanelShow=this.showSlider,this.sliderPanelHide=this.hideSlider,this.sliderPanelDismissAction=this.sliderPanelConfiguration.modal&&this.sliderPanelConfiguration.modal.dismiss&&this.sliderPanelConfiguration.modal.dismiss.onClick?this.sliderPanelConfiguration.modal.dismiss.onClick:this.hideSlider,u(),this.sliderPanelConfiguration.displayedByDefault&&this.showSlider()},this.$onDestroy=function(){o(window).off("resize.doResize")},this.showSlider=function(){c.updateContainerInlineStyling(!1),l.inlineStyling.container=c.inlineStyling.container;var n=!1;return angular.forEach(angular.element("y-slider-panel.sliderpanel--animated .sliderpanel-container"),function(e){e=angular.element(e),n||e.css("height")===l.inlineStyling.container.height&&e.css("width")===l.inlineStyling.container.width&&e.css("left")===l.inlineStyling.container.left&&e.css("top")===l.inlineStyling.container.top&&(n=!0)}),l.sliderPanelConfiguration.noGreyedOutOverlay="boolean"==typeof l.sliderPanelConfiguration.noGreyedOutOverlay?l.sliderPanelConfiguration.noGreyedOutOverlay:n,l.isShown=!0,e.addClass(t,r.SLIDERPANEL_ANIMATED)},this.hideSlider=function(){return e.removeClass(t,r.SLIDERPANEL_ANIMATED).then(function(){l.isShown=!1})}}]).component("ySliderPanel",{templateUrl:"sliderPanelTemplate.html",controller:"sliderPanelController",controllerAs:"$sliderPanelCtrl",transclude:!0,bindings:{sliderPanelConfiguration:"<?",sliderPanelHide:"=?",sliderPanelShow:"="}}),angular.module("sliderPanelServiceModule",["yLoDashModule"]).factory("sliderPanelServiceFactory",["lodash",function(e){function t(t,n,i){var r={slideFrom:"right",overlayDimension:"80%"},o=function(){var e=0,t=0,n=function(e){angular.forEach(angular.element(e).children(),function(e){r(e)})},i=function(n){t=angular.element(n).css("z-index"),!isNaN(t)&&t>e&&(e=t)},r=function(e){-1===["SCRIPT","lINK","BASE"].indexOf(angular.element(e)[0].nodeName)&&(i(e),angular.element(e).children().length>0&&n(e))};return r(angular.element("body")),parseInt(e)};this.updateContainerInlineStyling=function(e){var t=s[0].getBoundingClientRect(),i={left:s.css("border-left-width")?parseInt(s.css("border-left-width").replace("px","")):0,top:s.css("border-top-width")?parseInt(s.css("border-top-width").replace("px","")):0};this.inlineStyling.container.height=s[0].clientHeight+"px",this.inlineStyling.container.width=s[0].clientWidth+"px",this.inlineStyling.container.left=("BODY"===d.nodeName?Math.round(t.left+n.pageXOffset+i.left):0)+"px",this.inlineStyling.container.top=("BODY"===d.nodeName?Math.round(t.top+n.pageYOffset+i.top):0)+"px",e||(this.inlineStyling.container.zIndex=this.sliderPanelConfiguration.zIndex?parseInt(this.sliderPanelConfiguration.zIndex):o()+1)}.bind(this),this.sliderPanelConfiguration=e.defaultsDeep(i,r);var a=this.sliderPanelConfiguration.cssSelector?document.querySelector(this.sliderPanelConfiguration.cssSelector):null;a||(a=t.parent());for(var s=angular.element(a),l=s,c=!1,u=0;"BODY"!==l[0].nodeName;l=angular.element(l.parent()),u++)if("y-modal-dialog"===l[0].getAttribute("id")){c=!0;break}var d=c?l[0]:document.body;this.inlineStyling={container:{},content:{}},this.inlineStyling.content[-1===["top","bottom"].indexOf(this.sliderPanelConfiguration.slideFrom)?"width":"height"]=this.sliderPanelConfiguration.overlayDimension,angular.element(d).append(t[0])}return{getNewServiceInstance:function(e,n,i){return new t(e,n,i)}}}]),angular.module("tabsetModule",["ui.bootstrap","coretemplates","functionsModule","translationServiceModule"]).component("yTabset",{transclude:!1,templateUrl:"yTabsetTemplate.html",controller:"yTabsetController",controllerAs:"yTabset",bindings:{model:"=",tabsList:"<",tabControl:"=",numTabsDisplayed:"@"}}).controller("yTabsetController",function(){this.isActiveInMoreTab=function(){return this.tabsList.indexOf(this.selectedTab)>=this.numTabsDisplayed-1},this.$onChanges=function(){if(this.tabsList&&this.tabsList.length>0){var e=!1;for(var t in this.tabsList)this.tabsList[t].active&&(this.selectedTab=this.tabsList[t],e=!0);if(!e){this.selectedTab=this.tabsList[0];for(t in this.tabsList){var n=this.tabsList[t];n.active="0"===t,n.hasErrors=!1}}}},this.selectTab=function(e){e&&(this.selectedTab.active||this.findSelectedTab(),this.selectedTab.active=!1,this.selectedTab=e,this.selectedTab.active=!0)},this.dropDownHasErrors=function(){return this.tabsList.slice(this.numTabsDisplayed-1).some(function(e){return e.hasErrors})},this.markTabsInError=function(e){this.resetTabErrors();var t;for(var n in e){t=e[n];var i=this.tabsList.filter(function(e){return e.id===t});i[0]&&(i[0].hasErrors=!0)}},this.resetTabErrors=function(){for(var e in this.tabsList)this.tabsList[e].hasErrors=!1},this.findSelectedTab=function(){var e=this.tabsList.filter(function(e){return e.active})[0];e&&(this.selectedTab=e)}}).controller("yTabController",["$templateCache","$compile","$log","$scope","isBlank","$element",function(e,t,n,i,r,o){this.$onInit=function(){var a=e.get(this.content);if(r(a))throw"did not find cached template for file "+this.content+" when building yTab "+this.tabId;if(i.model=this.model,i.tabId=this.tabId,o.append(t(a)(i)),this.tabControl)try{this.tabControl.bind(i)(i)}catch(e){n.error(e)}}}]).component("yTab",{transclude:!0,controller:"yTabController",controllerAs:"yTab",bindings:{content:"=",model:"=",tabControl:"=",tabId:"@"}}),angular.module("templateCacheDecoratorModule",[]).config(["$provide",function(e){var t=/web.+\/(\w+)\.html/,n={};e.decorator("$templateCache",["$delegate",function(e){var i=e.put;return e.put=function(){var r=arguments[0],o=arguments[1];if(t.test(r)){var a=t.exec(r)[1]+".html";if(n[a])throw"[templateCacheDecorator] html templates '"+n[a]+"' and '"+r+"' are conflicting, you must give them different filenames";i.apply(e,[a,o]),n[a]=r}return i.apply(e,arguments)},e}])}]),angular.module("timerModule",[]).factory("Timer",["$timeout",function(e){function t(e,t,n){if(!e)throw"please provide a callback";this._callback=e,this._duration=t||1e3,this._invokeApply=!1!==n,this._timer=null}return t.prototype={isActive:function(){return!!this._timer},restart:function(e){this._duration=e||this._duration,this.stop(),this.start()},start:function(t){this._duration=t||this._duration,this._timer=e(function(){try{this._callback?this._callback.call(null):this.stop()}finally{this.start()}}.bind(this),this._duration,this._invokeApply)},stop:function(){e.cancel(this._timer),this._timer=!1},resetDuration:function(e){this._duration=e||this._duration},teardown:function(){this.stop(),this._callback=null,this._duration=null,this._invokeApply=null,this._timer=null}},t}]).factory("timerService",["Timer",function(e){return{createTimer:function(t,n,i){return new e(t,n,i)}}}]),angular.module("toolbarInterfaceModule",["functionsModule"]).factory("ToolbarServiceInterface",["$q","$log","$templateCache","generateIdentifier",function(e,t,n,i){function r(){}return r.prototype.getItems=function(){return this.actions},r.prototype.getAliases=function(){return this.aliases},r.prototype.addItems=function(e){var r=e.filter(function(e){var n=!0;return e.key?e.key in this.actions&&(t.debug("addItems() - Action already exists in toolbar with key "+e.key),n=!1):(t.error("addItems() - Cannot add action without key."),n=!1),e.contextTemplate&&e.contextTemplateUrl&&(t.error("addItems() - Toolbar item should contain only one of contextTemplate or contextTemplateUrl"),n=!1),n}.bind(this)).map(function(e){var t=e.key;this.actions[t]=e.callback;var r;return e.contextTemplate?(r="toolbarItemContextTemplate"+btoa(i()),n.put(r,e.contextTemplate)):r=e.contextTemplateUrl,{key:t,name:e.nameI18nKey,iconClassName:e.iconClassName,description:e.descriptionI18nKey,icons:e.icons,type:e.type,include:e.include,className:e.className,priority:e.priority||500,section:e.section||"left",isOpen:!1,keepAliveOnClose:e.keepAliveOnClose||!1,contextTemplateUrl:r}},this);r.length>0&&this.addAliases(r)},r.prototype.addAliases=function(){},r.prototype.removeItemByKey=function(){},r.prototype._removeItemOnInner=function(){},r.prototype.removeAliasByKey=function(){},r.prototype.addItemsStyling=function(){},r.prototype.triggerActionOnInner=function(){},r}]),angular.module("treeModule",["ui.tree","includeReplaceModule","functionsModule","smarteditServicesModule","translationServiceModule","confirmationModalServiceModule","yLoDashModule","alertServiceModule"]).constant("treeConfig",{treeClass:"angular-ui-tree",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30,defaultCollapsed:!0,dragDelay:200}).factory("TreeService",["$q","$log","restServiceFactory","getDataFromResponse",function(e,t,n,i){var r=function(e){e&&(this.nodesRestService=n.get(e))};return r.prototype.fetchChildren=function(n){return n.nodes=n.nodes||[],n.initiated?e.when(n.nodes):this.nodesRestService.get({parentUid:n.uid}).then(function(e){n.initiated=!0;var r=i(e);return r?(r.forEach(function(e){e.parent=n}),Array.prototype.push.apply(n.nodes,r),r):(t.error("No children found for node: "+n.uid+" while building yTree."),[])})},r.prototype.saveNode=function(e){return this.nodesRestService.save({parentUid:e.uid,name:(e.name?e.name:e.uid)+e.nodes.length}).then(function(t){return e.hasChildren=!0,t.parent=e,t})},r.prototype.removeNode=function(e){return this.nodesRestService.remove({identifier:e.uid}).then(function(){var t=e.parent;t.hasChildren=t.nodes.length>1})},r}]).controller("YTreeController",["$scope","$q","TreeService","_TreeDndOptions",function(e,t,n,i){this.collapseAll=function(){e.$broadcast("angular-ui-tree:collapse-all")},this.expandAll=function(){e.$broadcast("angular-ui-tree:expand-all")},this.hasChildren=function(e){return e.$modelValue.hasChildren},this.fetchData=function(e){return this.treeService.fetchChildren(e)},this.toggleAndfetch=function(e){this.isDisabled=!0;var n=e.$modelValue;return e.collapsed?this.fetchData(n).then(function(){e.toggle(),this.isDisabled=!1}.bind(this)):(e.toggle(),this.isDisabled=!1,t.when())},this.refresh=function(e){var t=e.$modelValue;t.initiated=!1;var n=e.collapsed;return this.fetchData(t).then(function(){!n&&e.collapsed&&e.toggle()})},this.refreshParent=function(e){e.$modelValue.parent.uid===this.root.uid?this.fetchData(this.root):this.refresh(e.$parentNodeScope)},this.newChild=function(e){var n=e.$modelValue?e.$modelValue:this.root;n.nodes=n.nodes||[],this.treeService.saveNode(n).then(function(i){(e.collapsed?this.toggleAndfetch(e):t.when()).then(function(){n.nodes.find(function(e){return e.uid===i.uid})||n.nodes.push(i)})}.bind(this))},this.newSibling=function(e){var t=e.$modelValue.parent;this.treeService.saveNode(t).then(function(e){t.nodes.push(e)}.bind(this))},this.remove=function(e){var t=e.$modelValue;this.treeService.removeNode(t).then(function(){var e=t.parent;e.nodes.splice(e.nodes.indexOf(t),1),e.initiated=!1,delete e.nodes,this.fetchData(e)}.bind(this))},this.isRoot=function(e){return void 0===e.$modelValue.parent.uid},this.displayDefaultTemplate=function(){return!this.removeDefaultTemplate},this.onNodeMouseEnter=function(e){e.mouseHovered=!0},this.onNodeMouseLeave=function(e){e.mouseHovered=!1},this.getNodeById=function(e,t){if(t||(t=this.root.nodes),e===this.rootNodeUid)return this.root;for(var n in t){if(t[n].uid===e)return t[n];if(t[n].hasChildren){t[n].nodes=t[n].nodes||[];var i=this.getNodeById(e,t[n].nodes);if(i)return i}}},this.$onInit=function(){this.treeOptions=new i(this.dragOptions),this.treeService=new n(this.nodeUri),this.root={uid:this.rootNodeUid},Object.keys(this.nodeActions).forEach(function(e){this[e]=this.nodeActions[e].bind(this,this.treeService),this.nodeActions[e]=this.nodeActions[e].bind(this,this.treeService)}.bind(this)),this.fetchData(this.root)}}]).factory("_TreeDndOptions",["$translate","treeConfig","confirmationModalService","lodash","$q","alertService",function(e,t,n,i,r,o){return function(e){function a(e,t,n,i,r){this.sourceNode=e,this.destinationNodes=t,this.position=n,this.sourceParentHandle=i,this.targetParentHandle=r}if(this.dragEnabled=!1,this.dragDelay=t.dragDelay,this.callbacks={},!i.isNil(e)){var s=typeof e;if("object"!==s)throw"Unexpected type for dragOptions, expected object but got "+s;if(e.hasOwnProperty("onDropCallback")){var l=typeof e.onDropCallback;if("function"!==l)throw"Unexpected type for onDropCallback, expected function but got "+l;this.dragEnabled=!0,this.callbacks.dropped=function(t){if(null!==t.source&&null!==t.dest){var n=new a(t.source.nodeScope.$modelValue,t.dest.nodesScope.$modelValue,t.dest.index,t.source.nodeScope.$parentNodeScope,t.dest.nodesScope.$nodeScope);e.onDropCallback(n)}}}if(e.hasOwnProperty("beforeDropCallback")){var c=typeof e.beforeDropCallback;if("function"!==c)throw"Unexpected type for beforeDropCallback, expected function but got "+c;this.dragEnabled=!0,this.callbacks.beforeDrop=function(t){if(null===t.source||null===t.dest)return!0;var i=new a(t.source.nodeScope.$modelValue,t.dest.nodesScope.$modelValue,t.dest.index),s=e.beforeDropCallback(i);return r.when(s).then(function(e){if("object"==typeof e){if(e.hasOwnProperty("confirmDropI18nKey")){var t={description:e.confirmDropI18nKey};return n.confirm(t)}if(e.hasOwnProperty("rejectDropI18nKey"))return o.showDanger({message:e.rejectDropI18nKey}),!1;throw"Unexpected return value for beforeDropCallback does not contain confirmDropI18nKey nor rejectDropI18nKey: "+e}return e})}}if(e.hasOwnProperty("allowDropCallback")){var u=typeof e.allowDropCallback;if("function"!==u)throw"Unexpected type for allowDropCallback, expected function but got "+u;this.dragEnabled=!0,this.callbacks.accept=function(t,n,i){var r=new a(t.$modelValue,n.$modelValue,i);return e.allowDropCallback(r)}}}}}]).directive("ytree",function(){return{restrict:"E",transclude:!1,replace:!1,templateUrl:"treeTemplate.html",controller:"YTreeController",controllerAs:"ctrl",scope:{},bindToController:{nodeTemplateUrl:"=",nodeUri:"=",nodeActions:"=",rootNodeUid:"=",dragOptions:"=",removeDefaultTemplate:"=?",showAsList:"=?"}}}),angular.module("wizardServiceModule",["ui.bootstrap","translationServiceModule","functionsModule","coretemplates","modalServiceModule"]).factory("wizardActions",function(){function e(e){var n=angular.copy(t);return angular.merge(n,e)}var t={id:"wizard_action_id",i18n:"wizard_action_label",isMainAction:!0,enableIfCondition:function(){return!0},executeIfCondition:function(){return!0},execute:function(){}};return{customAction:function(t){return e(t)},done:function(t){var n={id:"ACTION_DONE",i18n:"se.action.done",execute:function(e){e.close()}};return angular.merge(n,t),e(n)},next:function(t){var n={id:"ACTION_NEXT",i18n:"se.action.next",execute:function(e){this.nextStepId?e.goToStepWithId(this.nextStepId):this.nextStepIndex?e.goToStepWithIndex(this.nextStepIndex):e.goToStepWithIndex(e.getCurrentStepIndex()+1)}};return angular.merge(n,t),e(n)},navBarAction:function(t){if(!t.wizardService||null===t.destinationIndex)throw"Error initializating navBarAction, must provide the wizardService and destinationIndex fields";var n={id:"ACTION_GOTO",i18n:"action.goto",enableIfCondition:function(){return t.wizardService.getCurrentStepIndex()>=t.destinationIndex},execute:function(e){e.goToStepWithIndex(t.destinationIndex)}};return angular.merge(n,t),e(n)},back:function(t){var n={id:"ACTION_BACK",i18n:"se.action.back",isMainAction:!1,execute:function(e){if(this.backStepId)e.goToStepWithId(this.backStepId);else if(this.backStepIndex)e.goToStepWithIndex(this.backStepIndex);else{var t=e.getCurrentStepIndex();if(t<=0)throw"Failure to execute BACK action, no previous index exists!";e.goToStepWithIndex(t-1)}}};return angular.merge(n,t),e(n)},cancel:function(){return e({id:"ACTION_CANCEL",i18n:"se.action.cancel",isMainAction:!1,execute:function(e){e.cancel()}})}}}).service("modalWizard",["modalService","modalWizardControllerFactory",function(e,t){this.validateConfig=function(e){if(!e.controller)throw"WizardService - initialization exception. No controller provided"},this.open=function(n){return this.validateConfig(n),e.open({templateUrl:"modalWizardTemplate.html",controller:t.fromConfig(n),controllerAs:"wizardController"})}}]).service("modalWizardControllerFactory",["$controller","wizardServiceFactory","wizardActions","MODAL_BUTTON_STYLES","$q",function(e,t,n,i,r){this.fromConfig=function(o){return["$scope","$rootScope","modalManager",function(a,s,l){function c(e){h._wizardContext.navActions=e.map(function(e,t){return n.navBarAction({id:"NAV-"+e.id,stepIndex:t,wizardService:d,destinationIndex:t,i18n:e.name,isCurrentStep:function(){return this.stepIndex===d.getCurrentStepIndex()}})})}function u(e){return{id:e.id,style:e.isMainAction?i.PRIMARY:i.SECONDARY,label:e.i18n,callback:function(){d.getActionExecutor().executeAction(e)}}}var d=t.newWizardService();if(d.properties=o.properties,angular.extend(this,e(o.controller,{$scope:a,wizardManager:d})),o.controllerAs&&(a[o.controllerAs]=this),"function"!=typeof this.getWizardConfig)throw"The provided controller must provide a getWizardConfig() function.";var p=this.getWizardConfig(),h=this;this._wizardContext={_steps:p.steps},this.executeAction=function(e){d.getActionExecutor().executeAction(e)},d.onLoadStep=function(e,t){l.title=t.title,h._wizardContext.templateUrl=t.templateUrl,l.removeAllButtons(),(t.actions||[]).forEach(function(e){"function"==typeof e.enableIfCondition&&s.$watch(e.enableIfCondition,function(t){t?l.enableButton(e.id):l.disableButton(e.id)}),l.addButton(u(e))}.bind(this))},d.onClose=function(e){l.close(e)},d.onCancel=function(){l.dismiss()},d.onStepsUpdated=function(e){c(e),h._wizardContext._steps=e},d.initialize(p),function(e){h._wizardContext.templateOverride=e.templateOverride,e.cancelAction&&l.setDismissCallback(function(){return d.getActionExecutor().executeAction(e.cancelAction),r.reject()}),e.cancelAction&&l.setDismissCallback(function(){return d.getActionExecutor().executeAction(e.cancelAction),r.reject()}),c(e.steps)}(p)}]}}]).service("defaultWizardActionStrategy",["wizardActions",function(e){function t(e,t,n,i,r){return n&&(t.i18n=n),i&&(t.executeIfCondition=function(){return i(e.getCurrentStepId())}),r&&(t.enableIfCondition=function(){return r(e.getCurrentStepId())}),t}this.applyStrategy=function(n,i){var r=t(n,e.next(),i.nextLabel,i.onNext,i.isFormValid),o=t(n,e.done(),i.doneLabel,i.onDone,i.isFormValid),a=i.backLabel?{i18n:i.backLabel}:null,s=e.back(a);i.steps.forEach(function(e,t){e.actions=[],t>0&&e.actions.push(s),t===i.steps.length-1?e.actions.push(o):e.actions.push(r)}),i.cancelAction=t(n,e.cancel(),i.cancelLabel,i.onCancel,null),i.templateOverride="modalWizardNavBarTemplate.html"}}]).service("wizardServiceFactory",["WizardService",function(e){"ngInject";this.newWizardService=function(){return new e}}]).factory("WizardService",["$q","defaultWizardActionStrategy","generateIdentifier",function(e,t,n){"ngInject";function i(e){if(!e.steps||e.steps.length<=0)throw"Invalid WizardService configuration - no steps provided";e.steps.forEach(function(e){if(!e.templateUrl)throw"Invalid WizardService configuration - Step missing a url: "+e})}function r(e){var t={};e.forEach(function(e){if(void 0===e.id&&null===e.id)e.id=n();else{if(t[e.id])throw"Invalid (Duplicate) step id: "+e.id;t[e.id]=e.id}})}function o(){this.onLoadStep=function(){},this.onClose=function(){},this.onCancel=function(){},this.onStepsUpdated=function(){}}return o.prototype.initialize=function(e){i(e),this._actionStrategy=e.actionStrategy||t,this._actionStrategy.applyStrategy(this,e),this._currentIndex=0,this._conf=angular.copy(e),this._steps=this._conf.steps,this._getResult=e.resultFn,r(this._steps),this.goToStepWithIndex(0)},o.prototype.getActionExecutor=function(){return this},o.prototype.executeAction=function(t){if(!t.executeIfCondition)return e.when(t.execute(this));e.when(t.executeIfCondition()).then(function(){return e.when(t.execute(this))}.bind(this))},o.prototype.goToStepWithIndex=function(e){var t=this.getStepWithIndex(e);t&&(this.onLoadStep(e,t),this._currentIndex=e)},o.prototype.goToStepWithId=function(e){this.goToStepWithIndex(this.getStepIndexFromId(e))},o.prototype.addStep=function(e,t){0===e.id||e.id||(e.id=n()),t||(t=0),this._currentIndex>=t&&this._currentIndex++,this._steps.splice(t,0,e),r(this._steps),this._actionStrategy.applyStrategy(this,this._conf),this.onStepsUpdated(this._steps)},o.prototype.removeStepById=function(e){this.removeStepByIndex(this.getStepIndexFromId(e))},o.prototype.removeStepByIndex=function(e){e>=0&&e<this.getStepsCount()&&(this._steps.splice(e,1),e===this._currentIndex&&this.goToStepWithIndex(0),this._actionStrategy.applyStrategy(this,this._conf),this.onStepsUpdated(this._steps))},o.prototype.close=function(){var e;"function"==typeof this._getResult&&(e=this._getResult()),this.onClose(e)},o.prototype.cancel=function(){this.onCancel()},o.prototype.getSteps=function(){return this._steps},o.prototype.getStepIndexFromId=function(e){return this._steps.findIndex(function(t){return t.id===e})},o.prototype.containsStep=function(e){return this.getStepIndexFromId(e)>=0},o.prototype.getCurrentStepId=function(){return this.getCurrentStep().id},o.prototype.getCurrentStepIndex=function(){return this._currentIndex},o.prototype.getCurrentStep=function(){return this.getStepWithIndex(this._currentIndex)},o.prototype.getStepsCount=function(){return this._steps.length},o.prototype.getStepWithId=function(e){var t=this.getStepIndexFromId(e);if(t>=0)return this.getStepWithIndex(t)},o.prototype.getStepWithIndex=function(e){if(e>=0&&e<this.getStepsCount())return this._steps[e];throw"wizardService.getStepForIndex - Index out of bounds: "+e},o}]),angular.module("coretemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/app/common/components/yCollapsibleContainer/accordion-group.html",'<div role="tab"\n    id="{{::headingId}}"\n    aria-selected="{{isOpen}}"\n    class="yCollapsibleContainer__header"\n    ng-keypress="toggleOpen($event)">\n\n    <a role="button"\n        data-toggle="collapse"\n        href\n        aria-expanded="{{isOpen}}"\n        aria-controls="{{::panelId}}"\n        tabindex="0"\n        class="accordion-toggle yCollapsibleContainer__title"\n        ng-click="toggleOpen()"\n        uib-accordion-transclude="heading"\n        ng-disabled="isDisabled"\n        uib-tabindex-toggle>\n        <span uib-accordion-header\n            ng-class="{\'text-muted\': isDisabled}">{{heading}}</span>\n    </a>\n\n    <a class="yCollapsibleContainer__icon btn btn-link"\n        data-toggle-id="toggle-1"\n        title="{{isOpen ? \'se.ycollapsible.action.collapse\' : \'se.ycollapsible.action.expand\' | translate}}"\n        aria-expanded="{{isOpen}}"\n        ng-click="toggleOpen()">\n        <span class="hyicon hyicon-chevron y-collapsible-icon"\n            data-ng-class="{\n            \'y-collapsible-icon--collapse\':isOpen, \'y-collapsible-icon--expand\':!isOpen}"></span>\n    </a>\n\n</div>\n\n<div id="{{::panelId}}"\n    aria-labelledby="{{::headingId}}"\n    aria-hidden="{{!isOpen}}"\n    role="tabpanel"\n    class="panel-collapse collapse"\n    uib-collapse="!isOpen">\n    <div ng-transclude></div>\n</div>'),e.put("web/app/common/components/yCollapsibleContainer/yCollapsibleContainer.html",'<uib-accordion class="y-collapsible">\n    <div uib-accordion-group\n        class="yCollapsibleContainer__group y-collapsible__group"\n        data-template-url="web/app/common/components/yCollapsibleContainer/accordion-group.html"\n        data-is-open="$yCollapsibleContainerCtrl.configuration.expandedByDefault"\n        data-ng-class="$yCollapsibleContainerCtrl.getIconRelatedClassname()">\n\n        <uib-accordion-heading class="y-collapsible__heading">\n            <div class="yCollapsibleContainer__title y-collapsible__title"\n                data-ng-transclude="collapsible-container-title"></div>\n        </uib-accordion-heading>\n\n        <div class="y-collapsible__content"\n            data-ng-transclude="collapsible-container-content"></div>\n\n    </div>\n</uib-accordion>'),e.put("web/app/common/components/yDropdown/yDropdownDefaultItemTemplate.html",'<a class="se-dropdown-item"\n    data-ng-click="dropdownItem.callback($ctrl.selectedItem) ">\n    {{dropdownItem.key | translate}}\n</a>'),e.put("web/app/common/components/yDropdown/yDropDownMenu/yDropDownMenuTemplate.html",'<div class="y-dropdown-more-menu"\n    data-uib-dropdown>\n    <button class="btn btn-link dropdown-toggle"\n        type="button"\n        data-uib-dropdown-toggle="dropdown"\n        aria-haspopup="true"\n        aria-expanded="true">\n        <span class="hyicon hyicon-more y-dropdown-more-menu__ddlb__icon"></span>\n    </button>\n    <ul class="dropdown-menu dropdown-menu-right"\n        data-uib-dropdown-menu>\n        <li data-ng-repeat=\'dropdownItem in $ctrl.clonedDropdownItems\'\n            data-ng-if="dropdownItem.condition($ctrl.selectedItem)">\n            <span data-ng-include="dropdownItem.templateUrl"></span>\n        </li>\n    </ul>\n</div>'),e.put("web/app/common/components/yMessage/yMessage.html",'<div message-id="{{$ctrl.messageId}}"\n    class="{{$ctrl.classes}}">\n    <div class="y-message-icon-outer">\n        <span class="{{$ctrl.icon}} y-message-icon"></span>\n    </div>\n    <div class="y-message-text">\n        <div class="y-message-info-title"\n            data-ng-transclude="messageTitle">\n        </div>\n        <div class="y-message-info-description"\n            data-ng-transclude="messageDescription">\n        </div>\n    </div>\n</div>'),e.put("web/app/common/components/yMoreText/moreTextTemplate.html",'<span id="y-more-text-payload">{{$ctrl.text}}</span>\n<span id="y-more-text-toggle"\n    ng-click="$ctrl.showHideMoreText($event)"\n    ng-show="$ctrl.isTruncated">{{$ctrl.linkLabel}}</span>'),e.put("web/app/common/services/alerts/alertsTemplate.html",'<div class="row-fluid"\n    data-ng-if="alerts!=null &amp;&amp; alerts.length>0">\n    <div data-ng-repeat="alert in alerts"\n        class="ng-class: {\'col-xs-12\':true, \'alert\':true, \'alert-danger\':(alert.successful==false),\'alert-success\':(alert.successful==true)};">\n        <button type="button"\n            class="close"\n            data-ng-hide="alert.closeable==false"\n            data-ng-click="dismissAlert($index);">&times;</button>\n        <span id="alertMsg">{{alert.message | translate}}</span>\n    </div>\n</div>'),e.put("web/app/common/services/authorization/hasOperationPermissionTemplate.html",'<div>\n    <div ng-if="ctrl.isPermissionGranted">\n        <div ng-transclude></div>\n    </div>\n</div>'),e.put("web/app/common/services/genericEditor/boolean/booleanTemplate.html",'<div class="ySEBooleanField">\n    <span class="y-toggle y-toggle-lg">\n        <input type="checkbox"\n            id="{{$ctrl.field.qualifier}}-checkbox"\n            class="ySEBooleanField__input"\n            placeholder="{{$ctrl.field.tooltip| translate}}"\n            name="{{$ctrl.field.qualifier}}"\n            data-ng-disabled="!$ctrl.field.editable"\n            data-ng-model="$ctrl.model[$ctrl.qualifier]" />\n        <label class="ySEBooleanField__label"\n            for="{{$ctrl.field.qualifier}}-checkbox"></label>\n        <p data-ng-if="$ctrl.field.labelText && !$ctrl.model[$ctrl.qualifier]"\n            class="ySEBooleanField__text">{{$ctrl.field.labelText| translate}}</p>\n    </span>\n</div>'),e.put("web/app/common/services/genericEditor/components/genericEditorBreadcrumbTemplate.html",'<div class="se-ge-breadcrumb">\n    <div data-ng-if="$ctrl.showBreadcrumb()"\n        data-ng-repeat="breadcrumbItem in $ctrl.getEditorsStack()"\n        class="se-ge-breadcrumb__item">\n        <div class="se-ge-breadcrumb__data">\n            <span class="se-ge-breadcrumb__title">{{$ctrl.getComponentName(breadcrumbItem)}}</span>\n            <span class="se-ge-breadcrumb__info">{{breadcrumbItem.componentType | translate}}</span>\n        </div>\n\n        <div class="se-ge-breadcrumb__divider"\n            data-ng-if="$index < $ctrl.getEditorsStack().length - 1">\n            <img data-ng-src="{{$ctrl.arrowIconUrl}}"\n                alt="">\n        </div>\n    </div>\n</div>'),e.put("web/app/common/services/genericEditor/dateTimePicker/dateTimePickerTemplate.html",'<div class="input-group se-date-field"\n    id="date-time-picker-{{::name}}"\n    data-ng-show="isEditable">\n    <input type="text"\n        class="form-control se-date-field--input"\n        data-ng-class="{ \'se-input--has-error\': field.hasErrors, \'se-input--has-warning\': field.hasWarnings, \'se-input--is-disabled\': !isEditable}"\n        placeholder="{{::placeholderText | translate}}"\n        name="{{::name}}" />\n    <span class="input-group-addon se-date-field--button"\n        data-ng-class="{ \'se-date-field--button-has-error\': field.hasErrors, \'se-date-field--button-has-warning\': field.hasWarnings }">\n        <span class="glyphicon glyphicon-calendar se-date-field--button-icon"></span>\n    </span>\n</div>\n<div class="input-group date se-date-field"\n    data-ng-if="!isEditable">\n    <input type=\'text\'\n        class="form-control se-date-field--input"\n        data-ng-class="{\'se-input--is-disabled\': !isEditable}"\n        data-ng-model="model"\n        data-date-formatter\n        data-ng-disabled="true"\n        data-format-type="short">\n</div>'),e.put("web/app/common/services/genericEditor/dropdown/seDropdownTemplate.html",'<y-select data-ng-if="dropdown.initialized"\n    data-id="{{dropdown.qualifier}}"\n    data-ng-click="dropdown.onClick()"\n    data-placeholder="field.placeholder"\n    data-ng-model="model[qualifier]"\n    data-on-change="dropdown.triggerAction"\n    data-fetch-strategy="dropdown.fetchStrategy"\n    data-reset="dropdown.reset"\n    data-multi-select="dropdown.isMultiDropdown"\n    data-controls="dropdown.isMultiDropdown"\n    data-is-read-only="!field.editable"\n    data-item-template="itemTemplateUrl"\n    data-results-header-template-url="dropdown.resultsHeaderTemplateUrl"\n    data-results-header-template="dropdown.resultsHeaderTemplate"\n    data-get-api="dropdown.setYSelectAPI($api)" />'),e.put("web/app/common/services/genericEditor/errors/seGenericEditorFieldErrorsTemplate.html",'<div data-ng-if="ctrl.getFilteredErrors().length > 0">\n    <span data-ng-repeat="error in ctrl.getFilteredErrors()"\n        class="se-help-block--has-error help-block">\n        {{error | translate}}\n    </span>\n</div>'),e.put("web/app/common/services/genericEditor/genericEditorFieldTemplate.html",'<div validation-id="{{geField.field.qualifier}}"\n    data-ng-cloak\n    class="ySEField">\n\n    <div data-ng-if="geField.field.template"\n        class="ySEGenericEditorField"\n        data-ng-include="geField.field.template"></div>\n\n    <se-generic-editor-field-messages data-field="geField.field"\n        data-qualifier="geField.qualifier"></se-generic-editor-field-messages>\n    <div data-ng-if="geField.field.postfix"\n        class="ySEText ySEFieldPostfix">{{geField.field.postfix | translate}}</div>\n</div>'),e.put("web/app/common/services/genericEditor/genericEditorFieldWrapperTemplate.html",'<generic-editor-field data-field="model.field"\n    data-model="model.component"\n    data-qualifier="tabId"\n    data-id="tabId">\n</generic-editor-field>'),e.put("web/app/common/services/genericEditor/genericEditorTabTemplate.html",'<div class="ySErow"\n    data-ng-repeat="field in geTab.fields">\n    <div class="">\n        <label class="control-label"\n            data-ng-if="!field.hidePrefixLabel"\n            data-ng-class="{\'required\': field.required}"\n            id="{{field.qualifier}}-label">{{field.i18nKey | lowercase | translate}}\n        </label>\n\n    </div>\n    <div class="ySEGenericEditorFieldStructure"\n        id="{{field.qualifier}}"\n        data-cms-field-qualifier="{{field.qualifier}}"\n        data-cms-structure-type="{{field.cmsStructureType}}">\n        <localized-element data-ng-if="field.localized"\n            data-field="field"\n            class="form-group multi-tabs-editor"\n            data-input-template="genericEditorFieldWrapperTemplate.html"></localized-element>\n        <generic-editor-field data-ng-if="!field.localized"\n            data-model="geTab.component"\n            data-field="field"\n            data-qualifier="field.qualifier"\n            data-id="geTab.id" />\n    </div>\n</div>'),e.put("web/app/common/services/genericEditor/genericEditorTabWrapperTemplate.html",'<generic-editor-tab data-tab-id="tabId"></generic-editor-tab>'),e.put("web/app/common/services/genericEditor/genericEditorTemplate.html",'<div data-ng-cloak\n    class="ySEGenericEditor">\n    <generic-editor-breadcrumb></generic-editor-breadcrumb>\n    <form name="componentForm"\n        novalidate\n        data-ng-submit="ge.editor.submit()"\n        class="no-enter-submit">\n        <div class="modal-header"\n            data-ng-show="modalHeaderTitle">\n            <h4 class="modal-title">{{modalHeaderTitle| translate}}</h4>\n        </div>\n\n        <y-tabset class="ySEGenericEditorTabs"\n            tabs-list="ge.editor.tabs"\n            data-num-tabs-displayed="3">\n        </y-tabset>\n\n        <div class="ySErow"\n            data-ng-if="ge.showNoEditSupportDisclaimer()">\n            <y-message data-type="info"\n                id="GenericEditor.NoEditingSupportDisclaimer">\n                <message-description>\n                    <translate>se.editor.notification.editing.not.supported</translate>\n                </message-description>\n            </y-message>\n        </div>\n\n        <div class="ySEBtnRow modal-footer"\n            data-ng-show="ge.showCommands()">\n            <button id="cancel"\n                type="button"\n                class="btn btn-subordinate"\n                data-ng-if="ge.showCancel()"\n                data-ng-click="ge.reset()">{{ge.editor.cancelButtonText | translate}}</button>\n            <button id="submit"\n                name="submit"\n                class="btn btn-primary"\n                data-ng-if="ge.showSubmit()"\n                data-ng-disabled="ge.isSubmitDisabled()">{{ge.editor.submitButtonText | translate}}</button>\n        </div>\n    </form>\n</div>'),e.put("web/app/common/services/genericEditor/richText/seRichTextFieldTemplate.html",'<textarea class="form-control"\n    data-ng-class="{\'has-error\': ctrl.field.hasErrors}"\n    name="{{ctrl.field.qualifier}}-{{ctrl.qualifier}}"\n    data-ng-disabled="!ctrl.field.editable"\n    data-ng-model="ctrl.model[ctrl.qualifier]"\n    data-ng-change="ctrl.reassignUserCheck()"></textarea>\n<div data-ng-if="ctrl.requiresUserCheck()">\n    <input type="checkbox"\n        data-ng-model="ctrl.field.isUserChecked" />\n    <span class="ng-class:{\'warning-check-msg\':true, \'not-checked\':ctrl.editor.hasFrontEndValidationErrors && !ctrl.field.isCheckedByUser}"\n        data-translate="se.editor.richtext.check">{{\'se.editor.richtext.check\' | translate}}</span>\n</div>'),e.put("web/app/common/services/genericEditor/templates/booleanWrapperTemplate.html",'<se-boolean data-model="model"\n    data-qualifier="qualifier"\n    data-field="field"\n    data-editor="editor"></se-boolean>'),e.put("web/app/common/services/genericEditor/templates/dateTimePickerWrapperTemplate.html",'<date-time-picker data-name="field.qualifier"\n    data-model="model[qualifier]"\n    data-is-editable="field.editable"\n    data-field="field"></date-time-picker>'),e.put("web/app/common/services/genericEditor/templates/dropdownTemplate.html",'<ui-select id="{{field.qualifier}}-selector"\n    ng-model="model[qualifier]"\n    theme="select2"\n    title=""\n    style="width:100%"\n    search-enabled="false"\n    data-dropdown-auto-width="false"\n    class="se-generic-editor-dropdown">\n    <ui-select-match placeholder="Select an option"\n        class="se-generic-editor-dropdown__match">\n        <span ng-bind="$select.selected.label"></span>\n    </ui-select-match>\n    <ui-select-choices id="{{field.qualifier}}-list"\n        repeat="option in field.options"\n        position="down"\n        value="{{$selected.selected}}">\n        <span ng-bind="option.label"></span>\n    </ui-select-choices>\n</ui-select>'),e.put("web/app/common/services/genericEditor/templates/dropdownWrapperTemplate.html",'<se-dropdown data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-id="id"></se-dropdown>'),e.put("web/app/common/services/genericEditor/templates/enumTemplate.html",'<ui-select id="{{field.qualifier}}-selector"\n    ng-model="model[qualifier]"\n    theme="select2"\n    data-ng-disabled="!field.editable"\n    reset-search-input="false"\n    title=""\n    style="width:100%">\n    <ui-select-match placeholder="{{\'se.genericeditor.dropdown.placeholder\' | translate}}"\n        allow-clear="true">\n        <span id="enum-{{field.qualifier}}">{{$select.selected.label}}</span>\n        <br/>\n    </ui-select-match>\n    <ui-select-choices id="{{field.qualifier}}-list"\n        repeat="option.code as option in field.options[qualifier]"\n        refresh="editor.refreshOptions(field, qualifier, $select.search)"\n        value="{{$select.selected.code}}"\n        refresh-delay="0"\n        position="down">\n        <small>\n            <span>{{option.label}}</span>\n        </small>\n    </ui-select-choices>\n</ui-select>'),e.put("web/app/common/services/genericEditor/templates/errorMessageTemplate.html",'<span data-ng-if="field.errors"\n    data-ng-repeat="error in field.errors | filter:{language:qualifier}"\n    id=\'validation-error-{{field.qualifier}}-{{qualifier}}-{{$index}}\'\n    class="se-help-block--has-error help-block">\n    {{ error.message | translate }}\n</span>'),e.put("web/app/common/services/genericEditor/templates/floatTemplate.html",'<input type="number"\n    id="{{field.qualifier}}-float"\n    class="form-control"\n    data-ng-class="{ \'se-input--has-error\': field.hasErrors, \'se-input--has-warning\': field.hasWarnings }"\n    placeholder="{{field.tooltip| translate}}"\n    name="{{field.qualifier}}"\n    data-ng-disabled="!field.editable"\n    data-ng-model="model[qualifier]"\n    data-ng-pattern="/^([0-9]+)\\.{1}([0-9]{1,5})?$/"\n    step="{{ field.precision }}" />'),e.put("web/app/common/services/genericEditor/templates/longStringTemplate.html",'<textarea class="form-control"\n    data-ng-class="{ \'se-input--has-error\': field.hasErrors, \'se-input--has-warning\': field.hasWarnings }"\n    placeholder="{{field.tooltip| translate}}"\n    name="{{field.qualifier}}"\n    data-ng-disabled="!field.editable"\n    data-ng-model="model[qualifier]"></textarea>'),e.put("web/app/common/services/genericEditor/templates/numberTemplate.html",'<input type="number"\n    min="1"\n    id="{{field.qualifier}}-number"\n    class="form-control"\n    data-ng-class="{ \'se-input--has-error\': field.hasErrors, \'se-input--has-warning\': field.hasWarnings }"\n    placeholder="{{field.tooltip| translate}}"\n    name="{{field.qualifier}}"\n    data-ng-disabled="!field.editable"\n    data-ng-model="model[qualifier]" />'),e.put("web/app/common/services/genericEditor/templates/richTextTemplate.html",'<se-rich-text-field data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-editor="editor"></se-rich-text-field>'),e.put("web/app/common/services/genericEditor/templates/shortStringTemplate.html",'<input type="text"\n    id="{{field.qualifier}}-shortstring"\n    data-ng-class="{ \'se-input--has-error\': field.hasErrors, \'se-input--has-warning\': field.hasWarnings }"\n    class="form-control"\n    placeholder="{{field.tooltip| translate}}"\n    name="{{field.qualifier}}"\n    data-ng-disabled="!field.editable"\n    data-ng-model="model[qualifier]" />'),e.put("web/app/common/services/genericEditor/validationMessages/seGenericEditorFieldMessagesTemplate.html",'<div>\n    <div data-ng-if="ctrl.errors.length > 0">\n        <span data-ng-repeat="error in ctrl.errors"\n            class="se-help-block--has-error help-block">\n            {{ error | translate}}\n        </span>\n    </div>\n    <div data-ng-if="ctrl.warnings.length > 0">\n        <span data-ng-repeat="warning in ctrl.warnings"\n            class="se-help-block--has-warning help-block">\n            {{ warning | translate }}\n        </span>\n    </div>\n</div>'),e.put("web/app/common/services/help/yHelpTemplate.html",'<span data-y-popover\n    data-title="yHelp.title"\n    data-template="yHelp.template"\n    data-template-url="yHelp.templateUrl"\n    data-placement="yHelp.placement"\n    data-trigger="yHelp.trigger">\n    <span class="hyicon hyicon-help-icon"></span>\n</span>'),e.put("web/app/common/services/infiniteScrolling/yInfiniteScrollingTemplate.html",'<div data-ng-attr-id="{{scroll.containerId}}"\n    class="ySEInfiniteScrolling-container {{scroll.dropDownContainerClass}}">\n    <div class="ySEInfiniteScrolling {{scroll.dropDownClass}}"\n        data-infinite-scroll="scroll.nextPage()"\n        data-infinite-scroll-disabled="scroll.pagingDisabled"\n        data-infinite-scroll-distance="scroll.distance"\n        data-infinite-scroll-immediate-check="true"\n        data-infinite-scroll-container=\'scroll.container\'>\n        <div data-ng-transclude></div>\n    </div>\n    <div data-ng-if="!scroll.pagingDisabled"\n        class="panel panel-default panel__ySEInfiniteScrolling">\n        <div class="panel-body panel-body__ySEInfiniteScrolling">\n            <div class="spinner">\n                <div class="spinner-container spinner-container1">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n                <div class="spinner-container spinner-container2">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n                <div class="spinner-container spinner-container3">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/app/common/services/languageSelector/languageSelectorTemplate.html",'<ui-select id="uiSelectToolingLanguage"\n    ng-model="ctrl.selectedLanguage"\n    on-select="ctrl.setSelectedLanguage($item)"\n    theme="select2"\n    title=""\n    style="width:100%"\n    search-enabled="false"\n    data-dropdown-auto-width="false">\n    <ui-select-match placeholder="{{\'se.languageselector.dropdown.placeholder\' | translate}}">\n        <span ng-bind="ctrl.selectedLanguage.name "></span>\n    </ui-select-match>\n\n    <ui-select-choices repeat="language in ctrl.languages track by language.isoCode"\n        position="down ">\n        <span ng-bind="language.name"></span>\n    </ui-select-choices>\n</ui-select>'),e.put("web/app/common/services/list/yEditableListDefaultItemTemplate.html",'<div>\n    <span>{{node.uid}}</span>\n    <y-drop-down-menu data-ng-if="ctrl.editable"\n        dropdown-items="ctrl.getDropdownItems()"\n        selected-item="this"\n        class="y-dropdown pull-right nav-node-editor-entry-item__more-menu" />\n</div>'),e.put("web/app/common/services/list/yEditableListTemplate.html",'<div data-ng-class="{ \'y-editable-list-disabled\': !ctrl.editable }">\n    <ytree remove-default-template=true\n        data-root-node-uid="ctrl.rootId"\n        data-node-template-url="ctrl.itemTemplateUrl"\n        data-node-actions="ctrl.actions"\n        data-drag-options="ctrl.dragOptions"\n        data-show-as-list="true" />\n</div>'),e.put("web/app/common/services/localizedElement/localizedElementTemplate.html",'<y-tabset data-model="le.model"\n    tabs-list="le.tabs"\n    data-num-tabs-displayed="6">\n</y-tabset>'),e.put("web/app/common/services/loginDialog.html",'<div data-ng-cloak\n    class="se-login"\n    data-ng-class="{\'se-login--full\': !modalController.initialized, \'se-login--modal\': modalController.initialized }">\n    <div class="se-login--wrapper">\n        <div class="se-login--logo-wrapper"\n            data-ng-class="{\'se-login--logo-wrapper_full\': !modalController.initialized}">\n            <img src="static-resources/images/SmartEditLogo.svg"\n                class="se-login--logo">\n        </div>\n        <form autocomplete="off"\n            data-ng-submit="modalController.submit(loginDialogForm)"\n            class="se-login--form"\n            name=\'loginDialogForm\'\n            novalidate>\n            <div class="se-login--auth-message"\n                data-ng-if="modalController.initialized">\n                <div data-translate="se.logindialogform.reauth.message1"></div>\n                <div data-translate="se.logindialogform.reauth.message2"></div>\n            </div>\n            <div class="se-login--form-group"\n                data-ng-if="loginDialogForm.errorMessage && loginDialogForm.posted && (loginDialogForm.$invalid || loginDialogForm.failed)">\n                <div class="alert se-login--alert-error"\n                    id="invalidError"\n                    data-translate="{{ loginDialogForm.errorMessage }}"></div>\n            </div>\n            <div class="se-login--form-group">\n                <input class="se-login--form-control"\n                    type="text"\n                    id="username_{{modalController.authURIKey}}"\n                    name="username"\n                    placeholder="{{ \'se.authentication.form.input.username\' | translate}}"\n                    autofocus\n                    data-ng-model="modalController.auth.username"\n                    required/>\n            </div>\n            <div class="se-login--form-group">\n                <input class="se-login--form-control"\n                    type="password"\n                    id=\'password_{{modalController.authURIKey}}\'\n                    name=\'password\'\n                    placeholder="{{ \'se.authentication.form.input.password\' | translate}}"\n                    data-ng-model="modalController.auth.password"\n                    required/>\n            </div>\n            <div class="se-login--form-group">\n                <language-selector class="se-login-language"></language-selector>\n            </div>\n            <button class="btn btn-lg btn-primary btn-block se-login--btn"\n                id="submit_{{modalController.authURIKey}}"\n                name="submit"\n                type="submit"\n                data-translate="se.authentication.form.button.submit"></button>\n        </form>\n    </div>\n</div>'),e.put("web/app/common/services/modalTemplate.html",'<div id="y-modal-dialog">\n    <div class="modal-header se-modal__header"\n        data-ng-if="modalController._modalManager.title">\n        <button type="button"\n            class="close"\n            data-ng-if="modalController._modalManager._showDismissButton()"\n            data-ng-click="modalController._modalManager._handleDismissButton()">\n            <span class="hyicon hyicon-close"></span>\n        </button>\n        <h4 class="se-nowrap-ellipsis se-modal__header-title"\n            id="smartedit-modal-title-{{ modalController._modalManager.title }}">{{ modalController._modalManager.title | translate }}&nbsp;{{ modalController._modalManager.titleSuffix | translate }}</h4>\n    </div>\n    <div class="modal-body"\n        id="modalBody">\n        <div data-ng-include="modalController.templateUrl" />\n    </div>\n    <div class="modal-footer"\n        data-ng-if="modalController._modalManager._hasButtons()">\n        <span data-ng-repeat="button in modalController._modalManager.getButtons()">\n            <button id=\'{{ button.id }}\'\n                type="button"\n                data-ng-disabled="button.disabled"\n'+"                data-ng-class=\"{ 'btn':true, 'btn-subordinate':button.style=='default', 'btn-primary':button.style=='primary' }\"\n                data-ng-click=\"modalController._modalManager._buttonPressed(button)\">{{ button.label | translate }}</button>\n        </span>\n    </div>\n</div>"),e.put("web/app/common/services/popover/yPopoverPopupTemplate.html",'<div class="popover se-ypopover"\n    data-ng-class="$ctrl.placement">\n    <div class="arrow"\n        x-arrow>\n    </div>\n    <div class="popover-inner">\n        <h3 class="popover-title"\n            data-ng-if="$ctrl.title">{{ $ctrl.title | translate }}</h3>\n        <div class="popover-content"\n            data-compile-html="$ctrl.template"></div>\n    </div>\n</div>'),e.put("web/app/common/services/popover/yPopoverTemplate.html",'<div class="help-control">\n    <div data-ng-transclude\n        class="popoverAnchor"></div>\n</div>'),e.put("web/app/common/services/select/defaultItemTemplate.html",'<span class="y-select-default-item"\n    data-ng-bind-html="item.label | l10n | translate"></span>'),e.put("web/app/common/services/select/uiSelectChoicesTemplate.html",'<ul tabindex="-1"\n    class="ui-select-choices ui-select-choices-content select2-results">\n    <li class="ui-select-choices-group"\n        ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }">\n        <div ng-show="$select.choiceGrouped($group)"\n            class="ui-select-choices-group-label select2-result-label"\n            ng-bind="$group.name"></div>\n        <ul role="listbox"\n            id="ui-select-choices-{{ $select.generatedId }}"\n            ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }">\n            <div data-ng-if="ySelect.resultsHeaderTemplate || ySelect.resultsHeaderTemplateUrl">\n                <div data-ng-if="ySelect.resultsHeaderTemplate"\n                    data-compile-html="ySelect.resultsHeaderTemplate"></div>\n                <div data-ng-if="ySelect.resultsHeaderTemplateUrl"\n                    data-ng-include="ySelect.resultsHeaderTemplateUrl"></div>\n            </div>\n            <li class="y-infinite-scrolling__listbox-header"\n                data-ng-show="ySelect.showResultHeader()">{{ ySelect.resultsHeaderLabel | translate }}</li>\n            <li role="option"\n                ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}"\n                class="ui-select-choices-row"\n                ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}">\n                <div class="select2-result-label ui-select-choices-row-inner"></div>\n            </li>\n        </ul>\n    </li>\n</ul>'),e.put("web/app/common/services/select/uiSelectPagedChoicesTemplate.html",'<ul tabindex="-1"\n    class="ui-select-choices ui-select-choices-content select2-results ui-select-choices__infinite-scrolling">\n    <li class="ui-select-choices-group"\n        data-ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }">\n        <div data-ng-show="$select.choiceGrouped($group)"\n            class="ui-select-choices-group-label select2-result-label"\n            data-ng-bind="$group.name">\n        </div>\n        <y-infinite-scrolling data-ng-if="$select.open"\n            data-drop-down-class=""\n            data-page-size="10"\n            data-mask="$select.search"\n            data-fetch-page="ySelect.fetchStrategy.fetchPage"\n            data-context="ySelect">\n            <ul role="listbox"\n                id="ui-select-choices-{{ $select.generatedId }}"\n                data-ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }">\n                <div data-ng-if="ySelect.resultsHeaderTemplate"\n                    data-compile-html="ySelect.resultsHeaderTemplate"></div>\n                <div data-ng-if="ySelect.resultsHeaderTemplateUrl"\n                    data-ng-include="ySelect.resultsHeaderTemplateUrl"></div>\n                <li class="y-infinite-scrolling__listbox-header"\n                    data-ng-show="ySelect.showResultHeader()">{{ ySelect.resultsHeaderLabel | translate }}</li>\n                <li role="option"\n                    data-ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}"\n                    class="ui-select-choices-row"\n                    data-ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}">\n                    <div class="select2-result-label ui-select-choices-row-inner">\n                    </div>\n                </li>\n            </ul>\n        </y-infinite-scrolling>\n    </li>\n</ul>'),e.put("web/app/common/services/select/yMultiSelectTemplate.html",'<ui-select id="{{ySelect.id}}-selector"\n    multiple\n    sortable="true"\n    theme="<%= theme %>"\n    data-ng-model="ySelect.model"\n    style="width:100%"\n    data-ng-change="ySelect.internalOnChange()"\n    ng-disabled="ySelect.isReadOnly"\n    class="se-generic-editor-dropdown"\n    data-ng-class="{\'se-generic-editor-dropdown__paged\':ySelect.requiresPaginatedStyling(), \'has-error\': ySelect.hasError(), \'has-warning\': ySelect.hasWarning()}">\n    <ui-select-match class="se-generic-editor-dropdown__match se-generic-editor-multiple-dropdown__match"\n        placeholder="{{ySelect.placeholder || \'se.genericeditor.sedropdown.placeholder\' | translate}}">\n        <item-printer id="{{ySelect.id}}-selected"\n            data-model="$item"\n            data-template-url="ySelect.itemTemplate"\n            class=""\n            data-ng-class="{\'se-generic-editor-dropdown__item-printer\':ySelect.hasControls()}"> </item-printer>\n    </ui-select-match>\n    <ui-select-choices id="{{ySelect.id}}-list"\n        "<%= filtering %>"\n        position="down">\n        <div data-ng-include="ySelect.itemTemplate"></div>\n    </ui-select-choices>\n</ui-select>'),e.put("web/app/common/services/select/ySelectExtensions/yActionableSearchItemTemplate.html",'<div class="se-actionable-search-item"\n    data-ng-if="$ctrl.getInputText()">\n\n    <div class="se-actionable-search-item__name">{{ $ctrl.getInputText() }}</div>\n    <button type="button"\n        class="btn se-actionable-search-item__create-btn"\n        data-ng-show="$ctrl.showForm()"\n        data-ng-click="$ctrl.buttonPressed()">\n        {{ $ctrl.getActionText() | translate }}\n    </button>\n</div>'),e.put("web/app/common/services/select/ySelectTemplate.html",'<ui-select id="{{ySelect.id}}-selector"\n    data-ng-model="ySelect.model"\n    style="width:100%"\n    theme="<%= theme %>"\n    search-enabled="ySelect.searchEnabled"\n    data-ng-change="ySelect.internalOnChange()"\n    data-ng-class="{\'se-generic-editor-dropdown__paged\':ySelect.requiresPaginatedStyling(), \'has-error\': ySelect.hasError(), \'has-warning\': ySelect.hasWarning() }"\n    class="se-generic-editor-dropdown"\n    ng-disabled="ySelect.isReadOnly">\n    <ui-select-match placeholder="{{ySelect.placeholder || \'se.genericeditor.sedropdown.placeholder\' | translate}}"\n        class="se-generic-editor-dropdown__match2">\n        <span data-ng-if="ySelect.hasControls()"\n            class="input-group-addon glyphicon glyphicon-search ySESearchIcon__navigation"></span>\n        <item-printer id="{{ySelect.id}}-selected"\n            data-model="$select.selected"\n            data-template-url="ySelect.itemTemplate"\n            class="y-select-item-printer"\n            data-ng-class="{\'se-generic-editor-dropdown__item-printer\':ySelect.hasControls()}"> </item-printer>\n        <span data-ng-if="ySelect.hasControls()"\n            class="input-group-addon glyphicon glyphicon-remove-sign ySESearchIcon__navigation"\n            data-ng-click="ySelect.clear($select, $event)"></span>\n    </ui-select-match>\n    <ui-select-choices id="{{ySelect.id}}-list"\n        "<%= filtering %>"\n        position="down"\n        ui-disable-choice="ySelect.disableChoice(item)">\n        <div data-ng-include="ySelect.itemTemplate"></div>\n    </ui-select-choices>\n    <ui-select-no-choice data-ng-if="ySelect.noResultLabel"\n        class="y-select-no-result-label">\n        {{ySelect.noResultLabel | translate}}\n    </ui-select-no-choice>\n</ui-select>'),e.put("web/app/common/services/sliderPanel/sliderPanelTemplate.html",'<div class="sliderpanel-container"\n    ng-class="::{\'sliderpanel--noGreyedOutOverlay\': $sliderPanelCtrl.sliderPanelConfiguration.noGreyedOutOverlay }"\n    ng-style="{\'height\': $sliderPanelCtrl.inlineStyling.container.height, \'width\': $sliderPanelCtrl.inlineStyling.container.width,  \'left\': $sliderPanelCtrl.inlineStyling.container.left, \'top\': $sliderPanelCtrl.inlineStyling.container.top, \'z-index\': $sliderPanelCtrl.inlineStyling.container.zIndex }"\n    ng-if="$sliderPanelCtrl.isShown">\n\n    <div class="sliderpanel-content {{ ::$sliderPanelCtrl.slideClassName }}"\n        ng-style="{{ ::$sliderPanelCtrl.inlineStyling.content }}">\n\n        <div class="sliderpanel-header"\n            ng-show="{{ ::$sliderPanelCtrl.sliderPanelConfiguration.modal }}">\n\n            <button type="button"\n                class="btn-sliderpanel__close"\n                data-ng-if="$sliderPanelCtrl.sliderPanelConfiguration.modal.showDismissButton"\n                data-ng-click="$sliderPanelCtrl.sliderPanelDismissAction()">\n                <span class="hyicon hyicon-close"></span>\n            </button>\n\n            <h4 class="h4__sliderpanel"\n                data-ng-if="$sliderPanelCtrl.sliderPanelConfiguration.modal.title">{{ $sliderPanelCtrl.sliderPanelConfiguration.modal.title | translate }}</h4>\n\n        </div>\n\n        <div class="sliderpanel-body"\n            ng-transclude></div>\n\n        <div class="sliderpanel-footer"\n            data-ng-if="($sliderPanelCtrl.sliderPanelConfiguration.modal.cancel || $sliderPanelCtrl.sliderPanelConfiguration.modal.save)">\n\n            <button type="button"\n                class="btn btn-lg btn-subordinate sliderpanel-footer__button"\n                data-ng-if="$sliderPanelCtrl.sliderPanelConfiguration.modal.cancel"\n                data-ng-click="$sliderPanelCtrl.sliderPanelConfiguration.modal.cancel.onClick()">\n                {{ $sliderPanelCtrl.sliderPanelConfiguration.modal.cancel.label | translate }}\n            </button>\n\n            <button type="button"\n                class="btn btn-lg btn-default sliderpanel-footer__button"\n                data-ng-if="$sliderPanelCtrl.sliderPanelConfiguration.modal.save"\n                data-ng-click="$sliderPanelCtrl.sliderPanelConfiguration.modal.save.onClick()"\n                data-ng-disabled="$sliderPanelCtrl.isSaveDisabled()">\n                {{ $sliderPanelCtrl.sliderPanelConfiguration.modal.save.label | translate }}\n            </button>\n\n        </div>\n\n    </div>\n\n</div>'),e.put("web/app/common/services/tabset/yTabsetTemplate.html",'<div>\n    <ul class="nav nav-tabs  multi-tabs"\n        data-ng-if="yTabset.tabsList.length > 1">\n        <li ng-if="yTabset.tabsList.length!=yTabset.numTabsDisplayed"\n            data-ng-repeat="tab in yTabset.tabsList.slice( 0, yTabset.numTabsDisplayed-1 ) track by $index"\n            data-ng-class="{\'active\': tab.active }"\n            data-tab-id="{{tab.id}}">\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}"\n                data-ng-click="yTabset.selectTab(tab)"\n                data-ng-if="!tab.message">{{tab.title | translate}}</a>\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}"\n                data-ng-click="yTabset.selectTab(tab)"\n                data-ng-if="tab.message"\n                data-popover="{{tab.message}}"\n                data-popover-trigger="mouseenter">{{tab.title | translate}}</a>\n        </li>\n        <li ng-if="yTabset.tabsList.length==yTabset.numTabsDisplayed"\n            data-ng-repeat="tab in yTabset.tabsList.slice( 0, yTabset.numTabsDisplayed ) track by $index"\n            data-ng-class="{\'active\': tab.active }"\n            data-tab-id="{{tab.id}}">\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}"\n                data-ng-click="yTabset.selectTab(tab)"\n                data-ng-if="!tab.message">{{tab.title | translate}}</a>\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}"\n                data-ng-click="yTabset.selectTab(tab)"\n                data-ng-if="tab.message"\n                data-popover="{{tab.message}}"\n                data-popover-trigger="mouseenter">{{tab.title | translate}}</a>\n        </li>\n        <li data-uib-dropdown\n            data-ng-if="yTabset.tabsList.length > yTabset.numTabsDisplayed"\n            class="more-tab"\n            data-ng-class="{\'active\': yTabset.isActiveInMoreTab()}">\n            <a data-ng-class="{\'sm-tab-error\': yTabset.dropDownHasErrors()}"\n                class="dropdown-toggle"\n                data-uib-dropdown-toggle>\n                <span data-ng-if="!yTabset.isActiveInMoreTab()"\n                    class="multi-tabs__more-span"\n                    data-translate="se.ytabset.tabs.more"></span>\n                <span data-ng-if="yTabset.isActiveInMoreTab()"\n                    class="multi-tabs__more-span">{{yTabset.selectedTab.title | translate}}</span>\n                <span class="caret"></span>\n            </a>\n            <ul class="dropdown-menu"\n                data-uib-dropdown-menu>\n                <li ng-if="yTabset.tabsList.length!=yTabset.numTabsDisplayed"\n                    data-ng-repeat="tab in yTabset.tabsList.slice( yTabset.numTabsDisplayed-1)"\n                    data-tab-id="{{tab.id}}">\n                    <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}"\n                        data-ng-click="yTabset.selectTab(tab)">{{tab.title | translate}}</a>\n                </li>\n            </ul>\n        </li>\n    </ul>\n    <div>\n        <y-tab data-ng-repeat="tab in yTabset.tabsList"\n            ng-show="tab.active"\n            data-tab-id="{{tab.id}}"\n            content="tab.templateUrl"\n            data-model="yTabset.model"\n            tab-control="yTabset.tabControl">\n        </y-tab>\n    </div>\n</div>'),e.put("web/app/common/services/tree/treeNodeRendererTemplate.html",'<div ui-tree-handle\n    class="tree-node tree-node-content ySETreeNodeDesktop clearfix"\n    data-ng-class="{ hovered: node.mouseHovered }"\n    data-ng-mouseenter="ctrl.onNodeMouseEnter(node)"\n    data-ng-mouseleave="ctrl.onNodeMouseLeave(node)">\n\n    <div data-ng-show="!ctrl.showAsList"\n        class="col-xs-1 text-center">\n        <a class="ySETreeNodeDesktop__expander btn btn-link btn-sm"\n            data-ng-if="ctrl.hasChildren(this)"\n            data-ng-disabled="ctrl.isDisabled"\n            data-ng-click="ctrl.toggleAndfetch(this)">\n            <span class="glyphicon"\n                data-ng-class="{\'glyphicon-chevron-down\': collapsed,\'glyphicon-chevron-up\': !collapsed}"></span>\n        </a>\n    </div>\n\n    <div data-ng-show="ctrl.displayDefaultTemplate()"\n        class="ySETreeNodeDesktop__node-name col-xs-5">\n        <span>{{node.name | l10n}}</span>\n        <h6 data-ng-show="node.title">{{node.title | l10n}}\n        </h6>\n    </div>\n    <div data-ng-include="ctrl.nodeTemplateUrl"\n        data-ng-if="ctrl.nodeTemplateUrl"\n        data-include-replace></div>\n\n</div>\n<ol data-ui-tree-nodes=""\n    data-ng-model="node.nodes"\n    data-ng-class="{hidden: collapsed}"\n    class="ySETreeNodeDesktop__ol">\n    <li data-ng-repeat="node in node.nodes"\n        data-ui-tree-node\n        data-ng-include="\'treeNodeRendererTemplate.html\'">\n    </li>\n</ol>'),e.put("web/app/common/services/tree/treeTemplate.html",'<div data-ui-tree="ctrl.treeOptions.callbacks"\n    data-drag-enabled="ctrl.treeOptions.dragEnabled"\n    data-drag-delay="ctrl.treeOptions.dragDelay"\n    class="categoryTable ySENavigationTree">\n\n    <div class="ySENavigationTree-body">\n        <div class="mobileLayout clearfix visible-xs ">\n        </div>\n\n        <div class="desktopLayout clearfix visible-sm visible-md visible-lg ">\n\n            <ol data-ui-tree-nodes=""\n                data-ng-model="ctrl.root.nodes"\n                class="ySENavigationTree-body__nodes">\n\n                <li data-ng-if="ctrl.root.nodes.length === 0"\n                    class="ySENavigationTree__nodata"\n                    data-translate="se.ytree.no.nodes.to.display"></li>\n\n                <li class="ySENavigationTree-body__nodes__item"\n                    data-ng-repeat="node in ctrl.root.nodes"\n                    data-ui-tree-node\n                    data-ng-include="\'treeNodeRendererTemplate.html\'"></li>\n            </ol>\n        </div>\n    </div>\n</div>'),e.put("web/app/common/services/waitDialog.html",'<div class="panel panel-default ySEPanelSpinner">\n    <div class="panel-body">\n        <div class="spinner ySESpinner">\n            <div class="spinner-container spinner-container1">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n            <div class="spinner-container spinner-container2">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n            <div class="spinner-container spinner-container3">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n        </div>\n        <div class="ySESpinnerText"\n            data-translate="{{ modalController._modalManager.loadingMessage }}"></div>\n    </div>\n</div>'),e.put("web/app/common/services/wizard/modalWizardNavBarTemplate.html",'<div class="modal-wizard-template">\n    <div class="modal-wizard-template__steps">\n        <div data-ng-repeat="action in wizardController._wizardContext.navActions track by action.id"\n            class="modal-wizard-template-step">\n            <button id="{{ action.id }}"\n                data-ng-class="{ \'btn modal-wizard-template-step__action\': true, \'modal-wizard-template-step__action__enabled\': action.enableIfCondition(), \'modal-wizard-template-step__action__disabled\': !action.enableIfCondition(), \'modal-wizard-template-step__action__current\': action.isCurrentStep() }"\n                data-ng-click="wizardController.executeAction(action)"\n                data-ng-disabled="!action.enableIfCondition()">{{ action.i18n | translate }}\n            </button>\n            <span data-ng-if="!$last"\n                class=""\n                data-ng-class="{ \'modal-wizard-template-step__glyph-enabled\':  action.enableIfCondition(), \'modal-wizard-template-step__glyph-disabled\': !action.enableIfCondition()}"></span>\n        </div>\n    </div>\n    <div data-ng-repeat="step in wizardController._wizardContext._steps track by step.id">\n        <div data-ng-show="step.templateUrl === wizardController._wizardContext.templateUrl"\n            class="modal-wizard-template-content"\n            data-ng-include="step.templateUrl">\n        </div>\n    </div>\n</div>'),e.put("web/app/common/services/wizard/modalWizardTemplate.html",'<div>\n    <div id="yModalWizard"\n        data-ng-include="wizardController._wizardContext.templateOverride || wizardController._wizardContext.templateUrl"></div>\n</div>'),e.put("web/app/smartedit/modules/systemModule/features/contextualMenu/contextualMenuDecoratorTemplate.html",'<div class="cmsx-ctx-wrapper1">\n    <div class="cmsx-ctx-wrapper2">\n        <div class="decorative-top-border decorative-border"\n            data-ng-if="ctrl.showContextualMenuBorders()"></div>\n        <div class="decorative-right-border decorative-border"\n            data-ng-if="ctrl.showContextualMenuBorders()"></div>\n        <div class="decorative-bottom-border decorative-border"\n            data-ng-if="ctrl.showContextualMenuBorders()"></div>\n        <div class="decorative-left-border decorative-border"\n            data-ng-if="ctrl.showContextualMenuBorders()"></div>\n        <div class="contextualMenuOverlay"\n            data-ng-show="ctrl.showOverlay() || ctrl.status.isopen">\n            <div data-ng-repeat="item in ctrl.getItems().leftMenuItems"\n                id="{{ item.key }}"\n                class="btn btn-primary cmsx-ctx-btns">\n                <contextual-menu-item data-mode="small"\n                    class="se-contextual--menu-item"\n                    data-ng-click="ctrl.triggerMenuItemAction(item, $event)"\n                    y-popup-overlay="ctrl.itemTemplateOverlayWrapper"\n                    y-popup-overlay-trigger="{{ctrl.shouldShowTemplate(item)}}"\n                    y-popup-overlay-on-show="ctrl.onShowItemPopup()"\n                    y-popup-overlay-on-hide="ctrl.onHideItemPopup()"\n                    data-index="$index"\n                    data-component-attributes="ctrl.componentAttributes"\n                    data-slot-attributes="ctrl.slotAttributes"\n                    data-item-config="item"\n                    data-component-id="{{ctrl.smarteditComponentId}}"\n                    data-component-uuid="{{ctrl.componentAttributes.smarteditComponentUuid}}"\n                    data-component-type="{{ctrl.smarteditComponentType}}"\n                    data-slot-id="{{ctrl.smarteditSlotId}}"\n                    data-slot-uuid="{{ctrl.smarteditSlotUuid}}"\n                    data-container-id="{{ctrl.smarteditContainerId}}"\n                    data-container-type="{{ctrl.smarteditContainerType}}">\n                </contextual-menu-item>\n            </div>\n            <div data-ng-if="ctrl.getItems().moreMenuItems.length > 0"\n                class="cmsx-ctx-more">\n                <div class="btn-group yCmsCtxMenu">\n                    <a type="button"\n                        class="cmsx-ctx-more-btn pull-right"\n                        data-ng-click="ctrl.moreMenuIsOpen = !ctrl.moreMenuIsOpen"\n                        y-popup-overlay="ctrl.moreMenuPopupConfig"\n                        y-popup-overlay-trigger="{{ctrl.moreMenuIsOpen}}"\n                        y-popup-overlay-on-show="ctrl.onShowMoreMenuPopup()"\n                        y-popup-overlay-on-hide="ctrl.onHideMoreMenuPopup()">\n                        <span title="{{ctrl.moreButton.i18nKey | translate}}"\n                            class="{{ctrl.moreButton.displayClass}}"></span>\n                    </a>\n                </div>\n            </div>\n            <div class="contextualmenuBackground"></div>\n        </div>\n        <div class="yWrapperData">\n            <div data-ng-transclude></div>\n        </div>\n    </div>\n</div>'),e.put("web/app/smartedit/modules/systemModule/features/contextualMenu/contextualMenuItemOverlayWrapper.html",'<div data-ng-if="item.action.template || item.action.templateUrl"\n    class="se-contextual-extra-menu">\n    <div data-ng-if="item.action.template">\n        <div data-compile-html="item.action.template"></div>\n    </div>\n    <div data-ng-if="item.action.templateUrl">\n        <div data-ng-include="item.action.templateUrl"></div>\n    </div>\n</div>'),e.put("web/app/smartedit/modules/systemModule/features/contextualMenu/moreItemsTemplate.html",'<div class="se-contextual-more-menu">\n    <div id="{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-more-menu">\n        <div data-ng-repeat="item in ctrl.getItems().moreMenuItems">\n            <a class="se-contextual-more-menu--link"\n                data-smartedit-id="{{ctrl.smarteditComponentId}}"\n                data-smartedit-type="{{ctrl.smarteditComponentType}}">\n                <contextual-menu-item data-mode="compact"\n                    class="se-contextual-more-menu--item"\n                    data-ng-click="ctrl.triggerMenuItemAction(item, $event)"\n                    y-popup-overlay="ctrl.itemTemplateOverlayWrapper"\n                    y-popup-overlay-trigger="{{ctrl.shouldShowTemplate(item)}}"\n                    y-popup-overlay-on-show="ctrl.onShowItemPopup()"\n                    y-popup-overlay-on-hide="ctrl.onHideItemPopup(true)"\n                    data-index="$index"\n                    data-component-attributes="ctrl.componentAttributes"\n                    data-slot-attributes="ctrl.slotAttributes"\n                    data-item-config="item"\n                    data-component-id="{{ctrl.smarteditComponentId}}"\n                    data-component-uuid="{{ctrl.componentAttributes.smarteditComponentUuid}}"\n                    data-component-type="{{ctrl.smarteditComponentType}}"\n                    data-slot-id="{{ctrl.smarteditSlotId}}"\n                    data-slot-uuid="{{ctrl.smarteditSlotUuid}}"\n                    data-container-id="{{ctrl.smarteditContainerId}}"\n                    data-container-type="{{ctrl.smarteditContainerType}}">\n                </contextual-menu-item>\n            </a>\n        </div>\n    </div>\n</div>'),e.put("web/app/smartedit/modules/systemModule/features/contextualMenuItem/contextualMenuItemComponentTemplate.html",'<span>\n    <span data-ng-if="$ctrl.mode === \'small\'">\n        <span id="{{$ctrl.itemConfig.i18nKey | translate}}-{{$ctrl.componentAttributes.smarteditComponentId}}-{{$ctrl.componentAttributes.smarteditComponentType}}-{{$ctrl.index}}"\n            data-ng-if="$ctrl.isHybrisIcon($ctrl.itemConfig.displayIconClass)"\n            data-ng-class="[$ctrl.itemConfig.displayIconClass, $ctrl.itemConfig.displayClass]"\n            class="se-contextual--icon clickable"\n            title="{{$ctrl.itemConfig.i18nKey | translate}}">\n        </span>\n        <img data-ng-init="$ctrl.itemsrc = $ctrl.itemConfig.iconIdle"\n            data-ng-mouseout="$ctrl.itemsrc = $ctrl.itemConfig.iconIdle"\n            data-ng-mouseover="$ctrl.itemsrc = $ctrl.itemConfig.iconNonIdle"\n            id="{{$ctrl.itemConfig.i18nKey | translate}}-{{$ctrl.componentAttributes.smarteditComponentId}}-{{$ctrl.componentAttributes.smarteditComponentType}}-{{$ctrl.index}}"\n            title="{{$ctrl.itemConfig.i18nKey | translate}}"\n            data-ng-if="!$ctrl.isHybrisIcon($ctrl.itemConfig.displayIconClass)"\n            class="{{$ctrl.itemConfig.displayClass}}"\n            data-ng-class="{clickable:true}"\n            data-ng-src="{{$ctrl.itemsrc}}" />\n    </span>\n    <span data-ng-if="$ctrl.mode === \'compact\'">\n        <span id="{{$ctrl.itemConfig.i18nKey | translate}}-{{$ctrl.componentAttributes.smarteditComponentId}}-{{$ctrl.componentAttributes.smarteditComponentType}}-{{$ctrl.index}}"\n            data-ng-if="$ctrl.isHybrisIcon($ctrl.itemConfig.displaySmallIconClass)"\n            data-ng-class="[$ctrl.itemConfig.displaySmallIconClass, $ctrl.itemConfig.displayClass]"\n            class="se-contextual-more-menu--icon clickable"\n            title="{{$ctrl.itemConfig.i18nKey | translate}}">\n        </span>\n        <img data-ng-init="$ctrl.itemsrc = $ctrl.itemConfig.iconIdle"\n            data-ng-mouseout="$ctrl.itemsrc = $ctrl.itemConfig.iconIdle"\n            data-ng-mouseover="$ctrl.itemsrc = $ctrl.itemConfig.iconNonIdle"\n            id="{{$ctrl.itemConfig.i18nKey | translate}}-{{$ctrl.componentAttributes.smarteditComponentId}}-{{$ctrl.componentAttributes.smarteditComponentType}}-{{$ctrl.index}}"\n            title="{{$ctrl.itemConfig.i18nKey | translate}}"\n            data-ng-if="$ctrl.itemConfig.smallIconIdle && !$ctrl.isHybrisIcon($ctrl.itemConfig.displaySmallIconClass)"\n            class="{{ $ctrl.classes }}"\n            data-ng-src="{{$ctrl.itemsrc}}" />\n        <span class="se-contextual--label"\n            id="{{$ctrl.itemConfig.i18nKey | translate}}-{{$ctrl.componentAttributes.smarteditComponentId}}-{{$ctrl.componentAttributes.smarteditComponentType}}-{{$ctrl.index}}"\n            data-ng-class="$ctrl.itemConfig.displayClass">\n            {{$ctrl.itemConfig.i18nKey | translate}}\n        </span>\n    </span>\n</span>'),e.put("web/app/smartedit/modules/systemModule/features/slotContextualMenu/slotContextualMenuDecoratorTemplate.html",'<div>\n    <div class="cmsx-ctx-wrapper1 se-slot-contextual-menu-level1">\n        <div class="cmsx-ctx-wrapper2 se-slot-contextual-menu-level2">\n            <div class="decorative-panel-area"\n                data-ng-if="ctrl.showOverlay()">\n                <p class="decorative-panel-text">{{::ctrl.smarteditComponentId}}</p>\n                <div class="decorator-panel-padding-center"></div>\n                <div class="decorative-panel-slot-contextual-menu"\n                    data-ng-if="ctrl.showOverlay() && ctrl.showItems">\n                    <div data-ng-repeat="item in ctrl.getItems().leftMenuItems"\n                        class="btn btn-primary cmsx-ctx-btns pull-right"\n                        data-ng-init="itemsrc = item.iconIdle"\n                        data-ng-mouseout="itemsrc = item.iconIdle"\n                        data-ng-mouseover="itemsrc = item.iconNonIdle">\n                        <div data-ng-if="!item.action.templateUrl">\n                            <span id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-hyicon"\n                                data-ng-if="item.iconIdle && ctrl.isHybrisIcon(item.displayClass)"\n                                data-ng-click="ctrl.triggerMenuItemAction(item, $event)"\n                                class="ng-class:{clickable:true}">\n                                <img data-ng-src="{{itemsrc}}"\n                                    id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-hyicon-img"\n                                    title="{{::item.i18nKey | translate}}" />\n                            </span>\n                            <img id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}"\n                                title="{{::item.i18nKey | translate}}"\n                                data-ng-if="item.iconIdle && !ctrl.isHybrisIcon(item.displayClass)"\n                                class="{{item.displayClass}}"\n                                data-ng-class="{clickable:true}"\n                                data-ng-click="ctrl.triggerMenuItemAction(item, $event)"\n                                data-ng-src="{{itemsrc}}"\n                                alt="{{item.i18nKey}}" />\n                        </div>\n                        <div data-ng-if="item.action.templateUrl">\n                            <div data-ng-include="item.action.templateUrl"></div>\n                        </div>\n                        <div class="slot-context-menu-divider"></div>\n                    </div>\n                    <div data-ng-repeat="item in ctrl.getItems().moreMenuItems"\n                        class="btn btn-primary cmsx-ctx-btns pull-right"\n                        data-ng-init="itemsrc = item.iconIdle"\n                        data-ng-mouseout="itemsrc = item.iconIdle"\n                        data-ng-mouseover="itemsrc = item.iconNonIdle">\n                        <div data-ng-if="!item.action.templateUrl">\n                            <span id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-hyicon"\n                                data-ng-if="item.iconIdle && ctrl.isHybrisIcon(item.displayClass)"\n                                data-ng-click="ctrl.triggerMenuItemAction(item, $event)"\n                                class="ng-class:{clickable:true}">\n                                <img data-ng-src="{{itemsrc}}"\n                                    id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-hyicon-img"\n                                    title="{{::item.i18nKey | translate}}" />\n                            </span>\n                            <img id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}"\n                                title="{{::item.i18nKey | translate}}"\n                                data-ng-if="item.iconIdle && !ctrl.isHybrisIcon(item.displayClass)"\n                                class="{{item.displayClass}}"\n                                data-ng-class="{clickable:true}"\n                                data-ng-click="ctrl.triggerMenuItemAction(item, $event)"\n                                data-ng-src="{{itemsrc}}"\n                                alt="{{item.i18nKey}}" />\n                        </div>\n                        <div data-ng-if="item.action.templateUrl">\n                            <div data-ng-include="item.action.templateUrl"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="decorator-padding-container">\n                <div class="decorator-padding-left"\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div class="decorator-slot-border"\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div class="yWrapperData"\n                    data-ng-transclude\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div class="decorator-padding-right"\n                    data-ng-class="{active: ctrl.active}"></div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/components/landingPage/landingPage.html",'<div class="ySmartEditToolbars"\n    style="position:absolute">\n    <div>\n        <toolbar data-css-class="ySmartEditTitleToolbar"\n            data-image-root="imageRoot"\n            data-toolbar-name="smartEditTitleToolbar"></toolbar>\n    </div>\n</div>\n<div class="se-landing-page">\n    <span class="se-landing-page-title"\n        data-translate=\'se.landingpage.title\' />\n\n    <div class="se-landing-page-site-selection"\n        data-ng-if="landingCtl.model != undefined">\n        <se-dropdown data-field="landingCtl.field"\n            data-qualifier="landingCtl.qualifier"\n            data-model="landingCtl.model"\n            data-id="landingCtl.sites_id"></se-dropdown>\n    </div>\n\n    <span class="se-landing-page-label"\n        data-translate=\'se.landingpage.label\' />\n\n    <div class="se-landing-page-catalogs">\n        <div class="se-landing-page-catalog"\n            data-ng-repeat="catalog in landingCtl.catalogs">\n            <catalog-details data-catalog="catalog"\n                data-is-catalog-for-current-site="$last"></catalog-details>\n        </div>\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/components/notifications/hotkeys/perspectiveSelectorHotkey/perspectiveSelectorHotkeyNotificationTemplate.html","<y-hotkey-notification data-hotkey-names=\"['esc']\"\n    data-title=\"'se.application.status.hotkey.title' | translate\"\n    data-message=\"'se.application.status.hotkey.message' | translate\">\n</y-hotkey-notification>"),e.put("web/app/smarteditcontainer/components/notifications/hotkeys/yHotkeyNotificationTemplate.html",'<div class="y-notification__hotkey">\n    <div data-ng-repeat="key in $ctrl.hotkeyNames"\n        data-ng-if="$ctrl.hotkeyNames">\n        <div class="y-notification__hotkey--key">\n            <span>{{key}}</span>\n        </div>\n        <span class="y-notification__hotkey__icon--add"\n            data-ng-if="!$last">+</span>\n    </div>\n    <div class="y-notification__hotkey--text">\n        <div class="y-notification__hotkey--title">{{$ctrl.title}}</div>\n        <div class="y-notification__hotkey--message">{{$ctrl.message}}</div>\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/components/notifications/yNotificationPanelTemplate.html",'<div class="y-notification-panel"\n    data-ng-if="$ctrl.getNotifications().length > 0"\n    data-ng-hide="$ctrl.isMouseOver"\n    data-ng-mouseenter="$ctrl.onMouseEnter()">\n    <y-notification data-ng-repeat="notification in $ctrl.getNotifications()"\n        data-notification="notification">\n    </y-notification>\n</div>'),e.put("web/app/smarteditcontainer/components/notifications/yNotificationTemplate.html",'<div class="y-notification"\n    id="{{ $ctrl.id }}"\n    data-ng-if="$ctrl.notification">\n    <div data-ng-if="$ctrl.hasTemplate()"\n        data-ng-bind-html="$ctrl.notification.template"></div>\n    <div data-ng-if="$ctrl.hasTemplateUrl()"\n        data-ng-include="$ctrl.notification.templateUrl"></div>\n</div>'),e.put("web/app/smarteditcontainer/components/systemAlerts/systemAlertsTemplate.html",'\x3c!--<div class="row-fluid alert-overlay">--\x3e\n<div class="alert-overlay"\n    data-ng-if="$ctrl.getAlerts().length > 0">\n    <div uib-alert\n        id="{{ \'system-alert-\' + $index }}"\n        data-ng-repeat="alert in $ctrl.getAlerts()"\n        data-ng-class="[\'alert-\' + (alert.type || \'info\'), {\'alert-item--closeable\': alert.closeable}]"\n        class="alert-item"\n        data-close="alert.hide()">\n        <div class="alert-item--icon">\n            <span class="alert-item--icon-span hyicon"\n                data-ng-class="$ctrl.getIconType(alert.type)"></span>\n        </div>\n        <div class="alert-item--content">\n            <span id="{{ \'close-alert-\' + $index }}"\n                data-ng-if="alert.message">\n                {{ alert.message | translate:alert.messagePlaceholders }}\n            </span>\n            <div data-ng-if="alert.controller"\n                data-ng-controller="alert.controller as $alertInjectedCtrl">\n                <div data-ng-if="alert.template"\n                    data-compile-html="alert.template"></div>\n                <div data-ng-if="alert.templateUrl"\n                    data-ng-include="alert.templateUrl"></div>\n            </div>\n            <div data-ng-if="!alert.controller">\n                <div data-ng-if="alert.template"\n                    data-compile-html="alert.template"></div>\n                <div data-ng-if="alert.templateUrl"\n                    data-ng-include="alert.templateUrl"></div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/components/topToolbars/deviceSupportTemplate.html",'<inflection-point-selector data-ng-if="isOnStorefront()"></inflection-point-selector>'),e.put("web/app/smarteditcontainer/components/topToolbars/experienceSelectorWrapperTemplate.html",'<experience-selector-button data-ng-if="isOnStorefront()"></experience-selector-button>'),e.put("web/app/smarteditcontainer/components/topToolbars/leftToolbarTemplate.html",'<div class="se-left-menu">\n    <nav class="se-left-nav"\n        data-ng-if="showLeftMenu">\n\n        <ul class="se-left-nav__section se-left-nav__section--top">\n            <li class="se-left-nav__section__close">\n                <a href="#"\n                    class="se-left-nav__section__close--link"\n                    data-ng-click="closeLeftToolbar($event)">\n                    <span class="hyicon hyicon-close > se-left-nav__section__close--icon"></span>\n                </a>\n            </li>\n            <li class="se-left-nav__section--top__item">\n                <p class="se-user-name">{{username | uppercase}}</p>\n            </li>\n            <li class="se-left-nav__section--top__item">\n                <a class="se-sign-out__link"\n                    data-ng-click="signOut($event)">{{\'se.left.toolbar.sign.out\' | translate}}</a>\n            </li>\n\n            <li class="se-left-nav__section--top__item">\n                <language-selector class="se-left-nav__section--top__language"></language-selector>\n            </li>\n        </ul>\n\n        <ul data-ng-show="!showLevel2"\n            class="se-left-nav__section se-left-nav__section--level1"\n            id="hamburger-menu-level1">\n            <li class="se-left-nav__section__list-item">\n                <a class="se-left-nav__link"\n                    data-ng-click="showSites()">{{\'se.left.toolbar.sites\' | translate}}</a>\n            </li>\n            <li class="se-left-nav__section__list-item"\n                has-operation-permission="configurationCenterReadPermissionKey">\n                <a id="configurationCenter"\n                    class="se-left-nav__link"\n                    data-ng-click="showCfgCenter($event)">{{\'se.left.toolbar.configuration.center\' | translate}}\n                    <span class="hyicon hyicon-chevron"></span>\n                </a>\n            </li>\n        </ul>\n        <ul data-ng-show="showLevel2"\n            class="se-left-nav__section se-left-nav__section--level2"\n            id="hamburger-menu-level2">\n            <li class="se-left-nav__section__list-item">\n                <a data-ng-click="goBack()"\n                    class="se-left-nav__link">\n                    <span class="hyicon hyicon-back"></span>\n                    <span class="">{{\'se.left.toolbar.back\' | translate}}</span>\n                </a>\n            </li>\n            <li class="se-left-nav__section__list-item">\n                <general-configuration class="se-left-nav__link" />\n            </li>\n        </ul>\n    </nav>\n\n    <div class="navbar-header se-menu-button-wrapper">\n        <button type="button"\n            class="navbar-toggle se-menu-button__toggle"\n            id="nav-expander"\n            data-ng-click="showToolbar($event) ">\n            <span class="sr-only ">{{\'se.left.toolbar.toggle.navigation\' | translate}}</span>\n            <span class="icon-bar se-menu-button__icon-bar"></span>\n            <span class="icon-bar se-menu-button__icon-bar"></span>\n            <span class="icon-bar se-menu-button__icon-bar"></span>\n        </button>\n    </div>\n\n</div>'),e.put("web/app/smarteditcontainer/components/topToolbars/leftToolbarWrapperTemplate.html",'<left-toolbar data-image-root="imageRoot"></left-toolbar>'),e.put("web/app/smarteditcontainer/components/topToolbars/logoTemplate.html",'<div class="ySmartEditAppLogo "\n    alt="Smart Edit " />\n\n<svg xmlns="http://www.w3.org/2000/svg"\n    width="142"\n    height="25"\n    viewBox="0 0 142 25">\n    <defs>\n        <style>\n        .cls-1 {\n            fill: #fff;\n            fill-rule: evenodd;\n        }\n        </style>\n    </defs>\n    <path id="LOGO"\n        class="cls-1"\n        d="M115.056,33.546a30.4,30.4,0,0,1,1.458-9.4l3.809-.185V21l-5.972.278-0.376.88A31.674,31.674,0,0,0,112,33.546a31.674,31.674,0,0,0,1.975,11.389l0.376,0.926L120.275,46V43.037l-3.808-.093A30.782,30.782,0,0,1,115.056,33.546Zm9.968,2.268c0.189-.37.377-0.787,0.565-1.2a58.774,58.774,0,0,0,2.351-6.065l-3.2-.093c-0.329.88-.846,2.315-1.457,3.75-0.612-1.481-1.082-2.87-1.364-3.75l-3.15.139a52.838,52.838,0,0,0,2.257,6.065c0.8,1.713,1.787,3.565,2.445,4.768l3.432-.046C126.952,39.333,126.012,37.713,125.024,35.815Zm7.994-13.657-0.329-.88L126.717,21v2.963l3.809,0.185a30.964,30.964,0,0,1,1.457,9.4,32.976,32.976,0,0,1-1.41,9.4l-3.809.093V46l5.925-.139,0.376-.926a31.674,31.674,0,0,0,1.975-11.389A32.286,32.286,0,0,0,133.018,22.157Zm20.406,3.518a9.73,9.73,0,0,1,5.831,1.713l-1.646,2.454a7.951,7.951,0,0,0-4.09-1.3,2.607,2.607,0,0,0-1.74.556,1.657,1.657,0,0,0-.659,1.389,1.222,1.222,0,0,0,.424,1.019,5.041,5.041,0,0,0,1.5.694l2.116,0.556c2.962,0.787,4.42,2.454,4.42,5.046a5.1,5.1,0,0,1-1.975,4.167,8.087,8.087,0,0,1-5.266,1.574,12.179,12.179,0,0,1-5.971-1.528l1.316-2.685a10.646,10.646,0,0,0,4.8,1.389c2.069,0,3.056-.787,3.056-2.315,0-1.065-.752-1.806-2.3-2.222l-1.927-.509a5.385,5.385,0,0,1-3.433-2.176,5.048,5.048,0,0,1-.752-2.593,4.714,4.714,0,0,1,1.74-3.8A7.327,7.327,0,0,1,153.424,25.676Zm9.31,8.8a7.068,7.068,0,0,0-.47-3.194l3.056-.787a4.667,4.667,0,0,1,.471,1.25,4.522,4.522,0,0,1,3.15-1.25,3.609,3.609,0,0,1,2.633,1.019c0.141,0.139.282,0.324,0.517,0.6a5.023,5.023,0,0,1,3.668-1.62,3.831,3.831,0,0,1,2.68.926,3.878,3.878,0,0,1,.846,2.917v8.889h-3.291V34.935a5.086,5.086,0,0,0-.094-1.2,0.906,0.906,0,0,0-.94-0.556,3.6,3.6,0,0,0-2.257,1.065v8.982h-3.2V35.074a4.238,4.238,0,0,0-.141-1.343,0.968,0.968,0,0,0-1.034-.6,3.365,3.365,0,0,0-2.21.972v9.12h-3.292v-8.75h-0.094Zm21.018,0.046L182.3,32.157a17,17,0,0,1,2.069-1.019,9.107,9.107,0,0,1,3.526-.741c2.257,0,3.621.741,4.138,2.176a6.76,6.76,0,0,1,.235,2.268l-0.094,4.213v0.231a4.054,4.054,0,0,0,.188,1.482,3.5,3.5,0,0,0,.987,1.111l-1.786,1.991a3.572,3.572,0,0,1-1.834-1.528,3.737,3.737,0,0,1-.8.648,4.367,4.367,0,0,1-2.586.695,4.736,4.736,0,0,1-3.291-1.019,3.706,3.706,0,0,1-1.129-2.917q0-4.306,6.207-4.306a3.855,3.855,0,0,1,.752.046V34.982A2.728,2.728,0,0,0,188.6,33.5a1.426,1.426,0,0,0-1.222-.37A7.49,7.49,0,0,0,183.752,34.519Zm5.172,5.926,0.047-2.685H188.83a4.983,4.983,0,0,0-2.445.417,1.6,1.6,0,0,0-.658,1.528,1.715,1.715,0,0,0,.423,1.2,1.31,1.31,0,0,0,1.082.463A3.108,3.108,0,0,0,188.924,40.444Zm7.147-5.6a10.3,10.3,0,0,0-.47-3.657l3.01-.787a4.29,4.29,0,0,1,.517,1.806,4.816,4.816,0,0,1,1.928-1.574,2.6,2.6,0,0,1,1.128-.185,3.325,3.325,0,0,1,1.27.278l-0.941,2.87a1.932,1.932,0,0,0-.987-0.231,2.764,2.764,0,0,0-2.069,1.065v8.8h-3.386v-8.38Zm12.32-4.167H211.4l-0.846,2.176h-2.163v6.389a3.213,3.213,0,0,0,.282,1.62,1.322,1.322,0,0,0,1.175.417,6.572,6.572,0,0,0,1.223-.231l0.423,1.944a7.361,7.361,0,0,1-2.727.556,4.706,4.706,0,0,1-2.21-.509,2.711,2.711,0,0,1-1.27-1.343,6.39,6.39,0,0,1-.235-1.944v-6.9h-1.269v-2.13h1.269a21.49,21.49,0,0,1,.141-2.963l3.433-.833A32.137,32.137,0,0,0,208.391,30.676Zm4.8,12.546V26.232h9.968l-0.47,2.778h-5.972v3.935h5.031v2.778H216.76v4.537h6.63v2.963h-10.2Zm20.171-18.148,3.339,0.509V38.639a13.341,13.341,0,0,0,.47,4.583h-3.009a2.447,2.447,0,0,1-.189-0.741,4.458,4.458,0,0,1-2.962,1.065,4.817,4.817,0,0,1-3.9-1.713,6.852,6.852,0,0,1-1.458-4.63,7.114,7.114,0,0,1,1.552-4.768,5.046,5.046,0,0,1,4-1.852,3.674,3.674,0,0,1,2.3.694,15.107,15.107,0,0,1-.094-1.852V25.074h-0.047Zm0.094,14.907V34.009a2.678,2.678,0,0,0-1.833-.787c-1.458,0-2.163,1.343-2.163,4.028a5.461,5.461,0,0,0,.517,2.778,2.028,2.028,0,0,0,1.834.787A2.465,2.465,0,0,0,233.452,39.982Zm6.677-12.731a1.911,1.911,0,0,1,.611-1.435,2,2,0,0,1,1.5-.6,1.973,1.973,0,0,1,1.458.6,2.016,2.016,0,0,1,.611,1.435,1.911,1.911,0,0,1-.611,1.435,2,2,0,0,1-1.5.6,1.973,1.973,0,0,1-1.458-.6A1.911,1.911,0,0,1,240.129,27.25Zm0.376,15.972V30.907l3.386-.509V43.222h-3.386ZM250.9,30.676h3.009l-0.846,2.176H250.9v6.389a3.213,3.213,0,0,0,.282,1.62,1.322,1.322,0,0,0,1.175.417,6.572,6.572,0,0,0,1.223-.231L254,42.991a7.361,7.361,0,0,1-2.727.556,4.706,4.706,0,0,1-2.21-.509,2.711,2.711,0,0,1-1.27-1.343,6.39,6.39,0,0,1-.235-1.944v-6.9h-1.269v-2.13h1.269a21.49,21.49,0,0,1,.141-2.963l3.433-.833A32.137,32.137,0,0,0,250.9,30.676Z"\n        transform="translate(-112 -21)" />\n</svg>\n</div>'),e.put("web/app/smarteditcontainer/components/topToolbars/perspectiveSelectorWrapperTemplate.html","<perspective-selector></perspective-selector>"),e.put("web/app/smarteditcontainer/components/topToolbars/toolbarActionTemplate.html",'<div>\n    <div data-ng-if="item.type == \'ACTION\'"\n        class="toolbar-action">\n        <button type="button"\n            class="btn btn-default toolbar-action--button"\n            data-ng-click="triggerAction(item, $event)"\n            aria-pressed="false"\n            aria-haspopup="true"\n            id="{{toolbarName}}_option_{{item.key}}_btn"\n            aria-expanded="false">\n            <span data-ng-if=\'item.iconClassName\'\n                id="{{toolbarName}}_option_{{item.key}}_btn_iconclass"\n                data-ng-class="item.iconClassName"></span>\n            <img data-ng-if=\'!item.iconClassName && item.icons\'\n                id="{{toolbarName}}_option_{{item.key}}"\n                data-ng-src="{{::imageRoot}}{{item.icons[0]}}"\n                class="file"\n                id="{{toolbarName}}_option_{{item.key}}_btn_icon"\n                title="{{item.name | translate}}"\n                alt="{{item.name | translate}}" />\n            <span class="toolbar-action--button--txt"\n                id="{{toolbarName}}_option_{{item.key}}_btn_lbl">{{item.name | translate}}</span>\n        </button>\n    </div>\n    <div data-ng-if="item.type == \'HYBRID_ACTION\'"\n        class="toolbar-action toolbar-action--hybrid"\n        data-uib-dropdown\n        data-auto-close="outsideClick"\n        data-is-open="item.isOpen"\n        data-item-key="{{ item.key }}">\n        <button data-ng-show="item.iconClassName || item.icons"\n            type="button"\n            class="btn btn-default toolbar-action--button"\n            data-uib-dropdown-toggle\n            ng-disabled="disabled "\n            aria-pressed="false "\n            data-ng-click="triggerAction(item, $event)">\n            <span data-ng-if=\'item.iconClassName\'\n                data-ng-class="item.iconClassName"></span>\n            <img data-ng-if=\'!item.iconClassName && item.icons\'\n                id="{{toolbarName}}_option_{{item.key}}"\n                data-ng-src="{{::imageRoot}}{{item.icons[0]}}"\n                class="file"\n                title="{{item.name | translate}}"\n                alt="{{item.name | translate}}" />\n            <span class="toolbar-action--button--txt">{{item.name | translate}}</span>\n        </button>\n\n        <div data-uib-dropdown-menu\n            data-ng-class="{ \'dropdown-menu-left\': item.section == \'left\' || item.section == \'middle\', \'dropdown-menu-right\': item.section == \'right\' }"\n            class="btn-block toolbar-action--include">\n            <div data-ng-if="getItemVisibility(item)"\n                data-ng-include="item.include"></div>\n        </div>\n\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/components/topToolbars/toolbarItemContext/toolbarItemContextTemplate.html",'<div data-ng-if="$ctrl.displayContext"\n    id="toolbar_item_context_{{$ctrl.itemKey}}_btn"\n    class="se-toolbar-actionable-item-context"\n    data-ng-class="{\'se-toolbar-actionable-item-context--open\': $ctrl.itemIsOpen}">\n    <div class="se-toolbar-actionable-context__btn"\n        data-ng-include="$ctrl.contextTemplateUrl"></div>\n</div>'),e.put("web/app/smarteditcontainer/fragments/mainview.html",'<div class="ySmartEditToolbars">\n    <toolbar data-css-class="ySmartEditTitleToolbar"\n        data-image-root="imageRoot"\n        data-toolbar-name="smartEditTitleToolbar"></toolbar>\n    <toolbar data-css-class="ySmartEditExperienceSelectorToolbar"\n        data-image-root="imageRoot"\n        data-toolbar-name="experienceSelectorToolbar"></toolbar>\n</div>\n<div id="js_iFrameWrapper"\n    class="iframeWrapper">\n    <iframe id="ySmartEditFrame"\n        src=""\n        hy-dropabpe-iframe></iframe>\n    <div id="ySmartEditFrameDragArea"></div>\n</div>'),e.put("web/app/smarteditcontainer/modules/administrationModule/editConfigurationsTemplate.html",'<div id="editConfigurationsBody"\n    class="ySEConfigBody">\n    <form name="form.configurationForm"\n        novalidate\n        data-ng-submit="editor.submit(form.configurationForm)">\n        <button class="y-add-btn y-se-add-key-value__button"\n            type="button"\n            data-ng-click="editor.addEntry(); ">\n            <span class="hyicon hyicon-add "></span>\n            {{\'se.general.configuration.add.button\' | translate}}\n        </button>\n\n        <label for=""\n            class="control-label y-se-add-key-value__label">{{\'se.configurationform.label.keyvalue\' | translate}}</label>\n\n        <div class="ySECfgEntity form-group"\n            data-ng-repeat="entry in editor.filterConfiguration() "\n            data-ng-mouseenter="mouseenter() "\n            data-ng-mouseout="mouseout() ">\n\n            <div class="ySECfgEntity__data">\n\n                <div class="ySECfgEntity__key">\n                    <input type="text "\n                        data-ng-class="{\'has-error\':entry.errors.keys.length>0}"\n                        name="{{entry.key}}_key"\n                        placeholder="{{\'se.configurationform.header.key.name\' | translate}}"\n                        data-ng-model="entry.key"\n                        data-ng-required="true"\n                        data-ng-disabled="!entry.isNew"\n                        class="form-control ySECfgEntity__input"\n                        title="{{entry.key}}" />\n                    <span id="{{entry.key}}_error_{{$index}}"\n                        data-ng-if="entry.errors.keys"\n                        data-ng-repeat="error in entry.errors.keys"\n                        class="error-input help-block">\n                        {{error.message|translate}}\n                    </span>\n                </div>\n                <div class="ySECfgEntity__value">\n                    <textarea data-ng-class="{\'has-error\':entry.errors.values.length>0}"\n                        name="{{entry.key}}_value"\n                        ng-attr-placeholder="{{\'se.configurationform.header.value.name\' | translate}}"\n                        data-ng-model="entry.value"\n                        data-ng-required="true"\n                        class="form-control ySECfgEntity__textarea"\n                        data-ng-change="editor._validateUserInput(entry)"></textarea>\n                    <div data-ng-if="entry.requiresUserCheck">\n                        <input id="{{entry.key}}_absoluteUrl_check_{{$index}}"\n                            type="checkbox"\n                            data-ng-model="entry.isCheckedByUser" />\n                        <span id="{{entry.key}}_absoluteUrl_msg_{{$index}}"\n                            class="ng-class:{\'warning-check-msg\':true, \'not-checked\':entry.hasErrors && !entry.isCheckedByUser}">{{\'se.configurationform.absoluteurl.check\' | translate}}</span>\n                    </div>\n\n                    <span id="{{entry.key}}_error_{{$index}}"\n                        data-ng-if="entry.errors.values"\n                        data-ng-repeat="error in entry.errors.values"\n                        class="error-input help-block">\n                        {{error.message|translate}}\n                    </span>\n                </div>\n\n            </div>\n\n            <button type="button"\n                id="{{entry.key}}_removeButton_{{$index}}"\n                class="btn btn-subordinate ySECfgEntity__remove-button"\n                data-ng-click="editor.removeEntry(entry, form.configurationForm);">\n                <span class="hyicon hyicon-remove"\n                    aria-hidden="true">\n                </span>\n            </button>\n        </div>\n    </form>\n</div>'),e.put("web/app/smarteditcontainer/modules/administrationModule/generalConfigurationTemplate.html",'<a id="generalConfiguration"\n    data-ng-click="editConfiguration()">{{\'se.general.configuration.title\' | translate}}</a>'),e.put("web/app/smarteditcontainer/modules/administrationModule/productCatalogVersionsSelector/multiProductCatalogVersionsConfigurationsTemplate.html",'<multi-product-catalog-version-selector data-product-catalogs="modalController.productCatalogs"\n    data-selected-versions="modalController.selectedCatalogVersions"\n    data-on-selection-change="modalController.updateSelection($selectedVersions)"></multi-product-catalog-version-selector>'),e.put("web/app/smarteditcontainer/modules/administrationModule/productCatalogVersionsSelector/multiProductCatalogVersionSelector/multiProductCatalogVersionSelectorTemplate.html",'<div class="se-multi-product-catalog-version-selector">\n\n    <div class="form-group se-multi-product-catalog-version-selector__label"> {{\'se.product.catalogs.multiple.list.header\' | translate}}</div>\n\n    <div class="se-multi-product-catalog-version-selector__catalog form-group"\n        data-ng-repeat="productCatalog in $ctrl.productCatalogs">\n\n        <label class="control-label se-multi-product-catalog-version-selector__catalog-name"\n            id="{{productCatalog.catalogId}}-label">\n            {{productCatalog.name | l10n}}\n        </label>\n\n        <div class="se-multi-product-catalog-version-selector__catalog-version">\n            <y-select data-id="{{productCatalog.catalogId}}"\n                data-ng-model="productCatalog.selectedItem"\n                data-on-change="$ctrl.updateModel"\n                data-fetch-strategy="productCatalog.fetchStrategy" />\n        </div>\n\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/modules/administrationModule/productCatalogVersionsSelector/productCatalogVersionsSelectorTemplate.html",'<div data-ng-if="$ctrl.isReady">\n\n    <div data-ng-if="$ctrl.isSingleVersionSelector">\n        <y-select data-id="{{$ctrl.qualifier}}"\n            data-ng-model="$ctrl.model.productCatalogVersions[0]"\n            data-reset="$ctrl.reset"\n            data-fetch-strategy="$ctrl.fetchStrategy" />\n    </div>\n\n    <div data-ng-if="$ctrl.isMultiVersionSelector"\n        data-y-popover\n        data-trigger="\'hover\'"\n        class="se-products-catalog-select-multiple__popover"\n        data-placement="\'bottom\'"\n        data-template="$ctrl.buildMultiProductCatalogVersionsTemplate()"\n        data-is-open="$ctrl.isTooltipOpen">\n        <div id="multi-product-catalog-versions-selector"\n            data-ng-click="$ctrl.onClick($ctrl.productCatalogs, $ctrl.model[$ctrl.qualifier])"\n            class="se-products-catalog-select-multiple">\n            <input type="text"\n                data-ng-model="$ctrl.model[$ctrl.qualifier]"\n                data-ng-value="$ctrl.getMultiProductCatalogVersionsSelectedOptions()"\n                class="form-control se-products-catalog-select-multiple__catalogs se-nowrap-ellipsis"\n                name="{{$ctrl.qualifier}}"\n                readonly/>\n            <span class="hyicon hyicon-optionssm se-products-catalog-select-multiple__icon">\n        </div>\n    </div>\n\n</div>'),e.put("web/app/smarteditcontainer/modules/administrationModule/productCatalogVersionsSelector/productCatalogVersionsSelectorWrapperTemplate.html",'<se-product-catalog-versions-selector data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-id="id" />'),e.put("web/app/smarteditcontainer/services/experienceSelector/experienceSelectorTemplate.html",'<div data-recompile-dom="es.recompile">\n    <generic-editor data-ng-if="es.isReady"\n        data-smartedit-component-type="es.smarteditComponentType"\n        data-smartedit-component-id="es.smarteditComponentId"\n        data-structure-api="es.structureApi"\n        data-content="es.content"\n        data-content-api="es.contentApi"\n        data-get-api="es.getApi($api);">\n    </generic-editor>\n</div>'),e.put("web/app/smarteditcontainer/services/experienceSelectorButton/experienceSelectorButtonTemplate.html",'<div class="ySEpreview"\n    data-uib-dropdown\n    data-is-open="status.isopen"\n    data-auto-close="disabled">\n    <a class="btn yWebsiteSelectBtn"\n        type="button"\n        data-uib-dropdown-toggle\n        id="experience-selector-btn"\n        data-ng-click="resetExperienceSelector()">\n        <span class="yWebsiteSelectBtn--info">\n            <span class="yWebsiteSelectBtn--label"\n                title="{{$ctrl.buildExperienceText()}}"\n                data-translate="se.experience.selector.previewing"></span>\n            <span class="yWebsiteSelectBtn--text-wrapper">\n                <span class="yWebsiteSelectBtn--globe"\n                    data-ng-if="$ctrl.iscurrentPageFromParent"\n                    data-y-popover\n                    data-trigger="\'hover\'"\n                    data-placement="\'bottom\'"\n                    data-template="$ctrl.parentCatalogVersion">\n                    <span class="hyicon hyicon-globe yWebsiteSelectBtn--globe--icon"></span>\n                </span>\n                <span title="{{$ctrl.buildExperienceText()}}"\n                    class="yWebsiteSelectBtn--text se-nowrap-ellipsis">{{$ctrl.buildExperienceText()}}</span>\n                <span class="yWebsiteSelectBtn--arrow hyicon hyicon-arrow "></span>\n            </span>\n        </span>\n    </a>\n    <div class="dropdown-menu bottom btn-block yDdResolution "\n        role="menu">\n        <experience-selector data-experience="$ctrl.experience"\n            data-dropdown-status="status"\n            data-reset-experience-selector="resetExperienceSelector"></experience-selector>\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/services/inflectionPointSelectorWidget/inflectionPointSelectorWidgetTemplate.html",'<div data-uib-dropdown\n    is-open="status.isopen"\n    auto-close="disabled"\n    id="inflectionPtDropdown">\n    <button type="button"\n        class="btn btn-default yDddlbResolution"\n        data-uib-dropdown-toggle\n        ng-disabled="disabled "\n        aria-pressed="false">\n        <img data-ng-src="{{imageRoot}}{{currentPointSelected.icon}}"\n            data-ng-typeSelected="{{currentPointSelected.type}}" />\n    </button>\n    <ul class="dropdown-menu bottom btn-block yDdResolution "\n        role="menu">\n        <li ng-repeat="choice in points"\n            class="item text-center">\n            <a href\n                data-ng-click="selectPoint(choice);"\n                data-ng-class="{\'inflection-point-dropdown--option\': currentPointSelected.type !== choice.type, \'inflection-point-dropdown--selected\':currentPointSelected.type === choice.type}">\n                <img data-ng-show="currentPointSelected.type !== choice.type"\n                    data-ng-src="{{imageRoot}}{{choice.icon}}"\n                    class="file" />\n                <img data-ng-show="currentPointSelected.type === choice.type"\n                    data-ng-src="{{imageRoot}}{{choice.selectedIcon}}"\n                    class="file" />\n            </a>\n        </li>\n    </ul>\n</div>'),e.put("web/app/smarteditcontainer/services/perspectiveSelectorWidget/perspectiveSelectorHotkeyTooltipTemplate.html",'<div class="popover-tooltip"\n    data-translate="se.hotkey.tooltip" />'),e.put("web/app/smarteditcontainer/services/perspectiveSelectorWidget/perspectiveSelectorWidgetTemplate.html",'<div data-uib-dropdown\n    is-open="$ctrl.isOpen"\n    auto-close="disabled"\n    class="ySEPerspectiveSelector">\n\n    <a type="button"\n        class="btn btn-default yHybridAction"\n        data-uib-dropdown-toggle\n        ng-disabled="disabled "\n        aria-pressed="false">\n\n        <span id="hotkeyTooltip"\n            data-ng-if="$ctrl.isHotkeyTooltipVisible() && !$ctrl.isOpen"\n            data-y-popover\n            data-placement="\'bottom\'"\n            data-template-url="\'perspectiveSelectorHotkeyTooltipTemplate.html\'"\n            data-trigger="\'hover\'">\n            <span class="hyicon hyicon-info-icon ySEPerspectiveSelector__hotkey-tooltip--icon"></span>\n        </span>\n        <span class="ySEPerspectiveSelector__btn-text">{{$ctrl.getActivePerspectiveName() | translate}}</span>\n        <span class="hyicon hyicon-arrow"></span>\n    </a>\n    <ul class="dropdown-menu bottom btn-block ySEPerspectiveList"\n        role="menu">\n        <li ng-repeat="choice in $ctrl.getDisplayedPerspectives()"\n            class="item ySEPerspectiveList--item"\n            data-ng-click="$ctrl.selectPerspective(choice.key)">\n            <a href\n                data-ng-click="$ctrl.selectPerspective(choice.key);">{{choice.nameI18nKey | translate}}</a>\n        </li>\n    </ul>\n</div>'),e.put("web/app/smarteditcontainer/services/toolbar/toolbarTemplate.html",'<div class=\'{{cssClass}} yToolbar\'>\n    <div class="yToolbar__Left">\n        <div data-ng-repeat="item in actions | filter:{section:\'left\'}"\n            class="yTemplateToolbar yTemplateToolbar__left {{::item.className}}">\n            <div class="yTemplateToolbar__action-template"\n                data-ng-include="item.include && item.type ==\'TEMPLATE\' ? item.include : \'toolbarActionTemplate.html\'"></div>\n            <toolbar-item-context data-ng-if="item.contextTemplateUrl"\n                class="yTemplateToolbar__context-template"\n                data-item-key="item.key"\n                data-item-is-open="item.isOpen"\n                data-context-template-url="item.contextTemplateUrl"></toolbar-item-context>\n        </div>\n    </div>\n    <div class="yToolbar__Middle">\n        <div data-ng-repeat="item in actions | filter:{section:\'middle\'}"\n            class="yTemplateToolbar yTemplateToolbar__middle {{::item.className}}">\n            <div class="yTemplateToolbar__action-template"\n                data-ng-include="item.include && item.type ==\'TEMPLATE\' ? item.include : \'toolbarActionTemplate.html\'"> </div>\n            <toolbar-item-context data-ng-if="item.contextTemplateUrl"\n                class="yTemplateToolbar__context-template"\n                data-item-key="item.key"\n                data-item-is-open="item.isOpen"\n                data-context-template-url="item.contextTemplateUrl"></toolbar-item-context>\n\n        </div>\n\n    </div>\n    <div class="yToolbar__Right">\n        <div data-ng-repeat="item in actions | filter:{section:\'right\'}"\n            class="yTemplateToolbar yTemplateToolbar__right {{::item.className}}">\n            <div class="yTemplateToolbar__action-template"\n                data-ng-include="item.include && item.type ==\'TEMPLATE\' ? item.include : \'toolbarActionTemplate.html\'"> </div>\n            <toolbar-item-context data-ng-if="item.contextTemplateUrl"\n                class="yTemplateToolbar__context-template"\n                data-item-key="item.key"\n                data-item-is-open="item.isOpen"\n                data-context-template-url="item.contextTemplateUrl"></toolbar-item-context>\n        </div>\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/services/widgets/catalogDetails/catalogDetailsTemplate.html",'<div class="se-catalog-details"\n    data-ng-class="{\'se-catalog-for-current-site\': $ctrl.isCatalogForCurrentSite}">\n    <y-collapsible-container data-configuration="$ctrl.collapsibleConfiguration"\n        class="se-catalog-details__collapse">\n        <header class="se-catalog-details__header">\n            {{$ctrl.catalog.name | l10n}}\n        </header>\n        <content class="se-catalog-details__content">\n            \x3c!-- Left Side --\x3e\n            <div class="se-catalog-details__panel se-catalog-details__panel--left">\n                <catalog-versions-thumbnail-carousel data-catalog="$ctrl.catalog"\n                    data-site-id="$ctrl.siteIdForCatalog" />\n            </div>\n            \x3c!-- Right Side --\x3e\n            <div class="se-catalog-details__panel se-catalog-details__panel--right">\n                <div data-ng-repeat="catalogVersion in $ctrl.sortedCatalogVersions">\n                    <catalog-version-details data-catalog="$ctrl.catalog"\n                        data-catalog-version="catalogVersion"\n                        data-active-catalog-version="$ctrl.activeCatalogVersion"\n                        data-site-id="$ctrl.siteIdForCatalog" />\n                </div>\n            </div>\n        </content>\n    </y-collapsible-container>\n</div>\n\n<div class="se-catalog-divider"\n    data-ng-if="!$ctrl.isCatalogForCurrentSite">\n    <img data-ng-src="{{::$ctrl.cataloDeviderImage}}"\n        alt="" />\n</div>'),e.put("web/app/smarteditcontainer/services/widgets/catalogDetails/catalogVersionDetailsTemplate.html",'<div class="se-catalog-version-container">\n    <div class="se-catalog-version-container__left">\n        <div class="se-catalog-version-container__name">{{$ctrl.catalogVersion.version}}</div>\n        <div class="se-catalog-version-container__left__templates">\n            <div class="se-catalog-version-container__left__template"\n                data-ng-repeat="item in $ctrl.leftItems">\n                <div data-ng-include="item.include"></div>\n                <div class="se-catalog-version-container__divider"\n                    data-ng-if="!$last"></div>\n            </div>\n        </div>\n    </div>\n    <div class="se-catalog-version-container__right">\n        <div class="se-catalog-version-container__right__template"\n            data-ng-repeat="item in $ctrl.rightItems"\n            ng-include="item.include" />\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/services/widgets/catalogDetails/catalogVersionsThumbnailCarouselTemplate.html",'<div class="se-active-catalog-thumbnail">\n    <div class="se-active-catalog-version-container__thumbnail"\n        data-ng-click="$ctrl.onClick()">\n        <div class="se-active-catalog-version-container__thumbnail__default-img">\n            <div class="se-active-catalog-version-container__thumbnail__img"\n                style="background-image: url(\'{{$ctrl.selectedVersion.thumbnailUrl}}\');">\n            </div>\n        </div>\n        <div class="se-active-catalog-version-container__name">{{$ctrl.selectedVersion.version}}</div>\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/services/widgets/catalogDetails/links/homePageLinkTemplate.html",'<div class="home-link-container">\n    <a class="home-link-item__link se-catalog-version__link"\n        data-ng-click="ctrl.onClick()"\n        data-translate="se.landingpage.homepage"></a>\n</div>'),e.put("web/app/smarteditcontainer/services/widgets/catalogDetails/links/homePageLinkWrapperTemplate.html",'<home-page-link data-catalog="$ctrl.catalog"\n    data-catalog-version="$ctrl.catalogVersion"\n    data-site-id="$ctrl.siteId"></home-page-link>'),e.put("web/app/smarteditcontainer/services/widgets/clientPagedList/clientPagedList.html",'<div class="fluid-container ySEPageListResult">\n\n    <p class="paged-list-count"\n        ng-if="displayCount">\n        <span>({{ totalItems }} {{\'se.pagelist.countsearchresult\' | translate}})</span>\n    </p>\n\n    <table class="paged-list-table table table-striped table-hover techne-table">\n        <thead>\n            <tr>\n                <th data-ng-repeat="key in keys"\n                    data-ng-click="orderByColumn(key.property)"\n                    data-ng-style="{ \'width\': columnWidth + \'%\' }"\n                    class="paged-list-header"\n                    data-ng-class="\'paged-list-header-\'+key.property"\n                    ng-if="key.i18n">\n                    {{ key.i18n | translate }}\n                    <span class="header-icon"\n                        ng-show="visibleSortingHeader === key.property"\n                        ng-class="{ \'down\': headersSortingState[key.property] === true, \'up\': headersSortingState[key.property] === false }"></span>\n                </th>\n\n                <th class="paged-list-header"></th>\n                <th class="paged-list-header"\n                    data-ng-if="dropdownItems!==undefined"></th>\n            </tr>\n        </thead>\n        <tbody class="paged-list-table__body">\n            <tr data-ng-repeat=" item in items | filterByField: query : getFilterKeys() : filterCallback | startFrom:(currentPage-1)*itemsPerPage | limitTo:itemsPerPage "\n                class="techne-table-xs-right techne-table-xs-left paged-list-item ">\n                <td ng-repeat="key in keys"\n                    ng-class="\'paged-list-item-\'+key.property">\n                    <div data-ng-if="renderers[key.property]"\n                        compile-html="renderers[key.property](item, key)"></div>\n                    <span data-ng-if="!renderers[key.property]">{{ item[key.property] }}</span>\n                </td>\n                <td>\n                    <img data-ng-src="{{ item.visibilityIconSrc }}"\n                        tooltip-placement="bottom"\n                        tooltip="{{ \'se.icon.tooltip.visibility\' | translate: item.translationData }}" />\n                </td>\n                <td data-ng-if="dropdownItems!==undefined"\n                    has-operation-permission="\'se.edit.page\'"\n                    class="paged-list-table__body__td paged-list-table__body__td-menu">\n                    <y-drop-down-menu dropdown-items="dropdownItems"\n                        selected-item="item"\n                        class="y-dropdown pull-right" />\n                </td>\n            </tr>\n        </tbody>\n    </table>\n\n    <div class="pagination-container ">\n        <ul data-uib-pagination\n            boundary-links="true "\n            total-items="totalItems "\n            items-per-page="itemsPerPage "\n            ng-model="currentPage "\n            class="pagination-lg "\n            previous-text="&lsaquo; "\n            next-text="&rsaquo; "\n            first-text="&laquo; "\n            last-text="&raquo; "></ul>\n    </div>\n\n</div>'),e.put("web/app/smarteditcontainer/services/widgets/dynamicPagedList/dynamicPagedListTemplate.html",'<div data-ng-show="$ctrl.ready">\n\n    <p class="paged-list-count"\n        ng-if="$ctrl.config.displayCount">\n        <span>({{ $ctrl.totalItems }} {{\'se.pagelist.countsearchresult\' | translate}})</span>\n    </p>\n\n    <y-data-table data-columns="$ctrl.columns"\n        data-config="$ctrl.config"\n        data-items="$ctrl.items"\n        data-on-sort-column="$ctrl.orderByColumn($columnKey, $columnSortMode)"></y-data-table>\n\n    <y-pagination data-boundary-links="true "\n        data-total-items="$ctrl.totalItems "\n        data-items-per-page="$ctrl.config.itemsPerPage "\n        data-ng-model="$ctrl.currentPage"\n        data-on-change="$ctrl.onCurrentPageChange($currentPage)">\n    </y-pagination>\n\n</div>\n<div data-ng-if="!$ctrl.ready"\n    class="se-spinner">\n    <div class="spinner">\n        <div class="spinner-container spinner-container1">\n            <div class="spinner-circle1"></div>\n            <div class="spinner-circle2"></div>\n            <div class="spinner-circle3"></div>\n            <div class="circle4"></div>\n        </div>\n        <div class="spinner-container spinner-container2">\n            <div class="spinner-circle1"></div>\n            <div class="spinner-circle2"></div>\n            <div class="spinner-circle3"></div>\n            <div class="circle4"></div>\n        </div>\n        <div class="spinner-container spinner-container3">\n            <div class="spinner-circle1"></div>\n            <div class="spinner-circle2"></div>\n            <div class="spinner-circle3"></div>\n            <div class="circle4"></div>\n        </div>\n    </div>\n</div>'),e.put("web/app/smarteditcontainer/services/widgets/pagination/yPaginationTemplate.html",'<div class="pagination-container ">\n    <ul data-uib-pagination\n        boundary-links="true "\n        total-items="$ctrl.totalItems "\n        items-per-page="$ctrl.itemsPerPage "\n        ng-model="$ctrl.currentPage "\n        ng-change="$ctrl.pageChanged()"\n        class="pagination-lg "\n        previous-text="&lsaquo; "\n        next-text="&rsaquo; "\n        first-text="&laquo; "\n        last-text="&raquo; "></ul>\n</div>'),e.put("web/app/smarteditcontainer/services/widgets/yDataTable/yDataTableTemplate.html",'<table class="paged-list-table table table-striped table-hover techne-table">\n    <thead>\n        <tr>\n            <th data-ng-repeat="column in $ctrl.columns"\n                data-ng-click="$ctrl.sortColumn(column)"\n                data-ng-style="{ \'width\': columnWidth + \'%\' }"\n                class="paged-list-header"\n                data-ng-class="\'paged-list-header-\'+column.property">\n                {{ column.i18n | translate }}\n                <span class="header-icon"\n                    ng-show="$ctrl.visibleSortingHeader === column.property"\n                    ng-class="{ \'down\': $ctrl.headersSortingState[column.property] === true, \'up\': $ctrl.headersSortingState[column.property] === false }"></span>\n            </th>\n        </tr>\n    </thead>\n    <tbody class="paged-list-table__body">\n        <tr data-ng-repeat=" item in $ctrl.items"\n            class="techne-table-xs-right techne-table-xs-left paged-list-item ">\n            <td ng-repeat="column in $ctrl.columns"\n                ng-class="\'paged-list-item-\'+column.property">\n                <div data-ng-if="column.renderer"\n                    compile-html="column.renderer(item, column)"></div>\n                <span data-ng-if="!column.renderer">{{ item[column.property] }}</span>\n            </td>\n        </tr>\n    </tbody>\n</table>')}]),angular.module("landingPageModule",["loadConfigModule","smarteditServicesModule","catalogServiceModule","permissionServiceModule","resourceLocationsModule","eventServiceModule","seDropdownModule"]).service("selectedSiteCookieService",["$cookies",function(e){this.setSelectedSite=function(t){e.putObject("seselectedsite",t)},this.getSelectedSite=function(){var t=e.getObject("seselectedsite");return"string"==typeof t?t:null}}]).controller("landingPageController",["loadConfigManagerService","siteService","catalogService","SITES_RESOURCE_URI","permissionService","selectedSiteCookieService","systemEventService","EVENTS","LINKED_DROPDOWN",function(e,t,n,i,r,o,a,s,l){this.sites_id="sites-id",this.$onInit=function(){this.catalogs=[],this.qualifier="site",this.field={uri:i,idAttribute:"uid",labelAttributes:["name"],editable:!0,paged:!1},this.getCurrentSiteId().then(function(e){this.model={site:e}}.bind(this)),this.removeStorefrontCssClass()},this.getCurrentSiteId=function(){var e=o.getSelectedSite();return t.getSites().then(function(t){return t.some(function(t){return t.uid===e}.bind(this))?e:t.length>0?t[0].uid:null}.bind(this))}.bind(this),this.removeStorefrontCssClass=function(){var e=angular.element(document.querySelector("body"));e.hasClass("is-storefront")&&e.removeClass("is-storefront")},this.loadCatalogsBySite=function(e){n.getContentCatalogsForSite(e).then(function(t){this.displayedSite&&e===this.displayedSite||(this.displayedSite=e,this.catalogs=t)}.bind(this))}.bind(this),this.selectedSiteDropdownEvent=function(e,t){if(t.optionObject){var n=t.optionObject.id;o.setSelectedSite(n),this.loadCatalogsBySite(n)}else this.catalogs=[]};var c=a.registerEventHandler(this.sites_id+l,this.selectedSiteDropdownEvent.bind(this));this.$onDestroy=function(){this.displayedSite=null,c()}}]).component("landingPage",{templateUrl:"landingPage.html",controller:"landingPageController",controllerAs:"landingCtl",bindings:{}}),angular.module("yHotkeyNotificationModule",[]).component("yHotkeyNotification",{templateUrl:"yHotkeyNotificationTemplate.html",controller:function(){},bindings:{hotkeyNames:"<",title:"<",message:"<?"}}),angular.module("yNotificationModule",[]).controller("YNotificationController",function(){this.$onInit=function(){this.id=this.notification&&this.notification.id?"y-notification-"+this.notification.id:""},this.hasTemplate=function(){return this.notification.hasOwnProperty("template")},this.hasTemplateUrl=function(){return this.notification.hasOwnProperty("templateUrl")}}).component("yNotification",{templateUrl:"yNotificationTemplate.html",controller:"YNotificationController",bindings:{notification:"<"}}),angular.module("yNotificationPanelModule",["smarteditServicesModule","yNotificationModule","yHotkeyNotificationModule","eventServiceModule","iFrameManagerModule","ngAnimate"]).controller("YNotificationPanelController",["notificationService","EVENT_NOTIFICATION_CHANGED","notificationMouseLeaveDetectionService","systemEventService","iFrameManager","$element","$window","$scope","$timeout",function(e,t,n,i,r,o,a,s,l){var c,u=null,d=null,p=null,h=function(){return r.getIframe()[0]},f=function(){return o.find(".y-notification-panel")},g=function(){var e=f(),t=e.position();u={x:Math.floor(t.left),y:Math.floor(t.top),width:Math.floor(e.width()),height:Math.floor(e.height())}},m=function(){var e=h();e&&(d={x:u.x-e.offsetLeft,y:u.y-e.offsetTop,width:u.width,height:u.height})},v=function(){g(),m()},y=function(){u=null,d=null},E=function(){var e=!!u,t=!h()||!!d;return e&&t},S=function(){l(function(){this.isMouseOver=!1}.bind(this),0)}.bind(this),_=function(){y(),n.stopDetection(),this.isMouseOver&&S()}.bind(this),b=function(){_()},T=function(){_()},C=function(){p=null,n.startDetection(u,d,S)};this.$onInit=function(){this.isMouseOver=!1,a.addEventListener("resize",b),c=i.registerEventHandler(t,T)},this.$onDestroy=function(){a.removeEventListener("resize",b),n.stopDetection(),c()},this.onMouseEnter=function(){this.isMouseOver=!0,E()||v(),p=p||l(C,10)},this.getNotifications=function(){return e.getNotifications()}}]).component("yNotificationPanel",{templateUrl:"yNotificationPanelTemplate.html",controller:"YNotificationPanelController"}),angular.module("systemAlertsModule",["alertCollectionFacadesModule","alertFactoryModule","compileHtmlModule"]).component("systemAlerts",{templateUrl:"systemAlertsTemplate.html",controller:["alertCollectionComponentFacade","SE_ALERT_SERVICE_TYPES",function(e,t){this.$onInit=function(){this.getAlerts=function(){return e.getAlerts()}},this.getIconType=function(e){switch(e){case t.SUCCESS:return"hyicon-msgsuccess";case t.WARNING:return"hyicon-msgwarning";case t.DANGER:return"hyicon-msgdanger"}return"hyicon-msginfo"}}]}),angular.module("leftToolbarModule",["yjqueryModule","authenticationModule","iframeClickDetectionServiceModule","resourceLocationsModule","iFrameManagerModule","smarteditServicesModule","languageSelectorModule","sessionServiceModule","eventServiceModule"]).directive("leftToolbar",["$location","$timeout","yjQuery","authenticationService","iframeClickDetectionService","iFrameManager","sharedDataService","sessionService","systemEventService","LANDING_PAGE_PATH",function(e,t,n,i,r,o,a,s,l,c){return{templateUrl:"leftToolbarTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{imageRoot:"=?imageRoot"},link:function(u){function d(){a.get("preview").then(function(e){e&&e.resourcePath&&o.setCurrentLocation(e.resourcePath)})}function p(){u.username||s.getCurrentUserDisplayName().then(function(e){u.username=e})}u.showLevel2=!1,u.showLeftMenu=!1,u.configurationCenterReadPermissionKey="smartedit.configurationcenter.read",u.showToolbar=function(e){p(),u.showLevel2=!1,e.preventDefault(),u.showLeftMenu=!0},u.showSites=function(){u.closeLeftToolbar(),d(),t(function(){e.url(c)},400)},u.showCfgCenter=function(e){e.preventDefault(),u.showLevel2=!0},u.goBack=function(){u.showLevel2=!1},u.signOut=function(){i.logout(),d()},n(document).bind("click",function(e){document.querySelector(".se-left-menu").contains(e.target)||u.closeLeftToolbar()}),u.closeLeftToolbar=function(e){e&&e.preventDefault(),u.showLeftMenu=!1,u.goBack()},r.registerCallback("leftToolbarClose",function(){u.closeLeftToolbar()});var h=l.registerEventHandler("OVERLAY_DISABLED",function(){u.closeLeftToolbar()});u.$on("$destroy",function(){h()})}}}]),angular.module("catalogVersionPermissionRestServiceModule",["smarteditServicesModule","sessionServiceModule","functionsModule"]).constant("CATALOG_VERSION_PERMISSIONS_RESOURCE_URI","/permissionswebservices/v1/permissions/principals/:principal/catalogs").service("catalogVersionPermissionRestService",["restServiceFactory","sessionService","CATALOG_VERSION_PERMISSIONS_RESOURCE_URI","URIBuilder",function(e,t,n,i){var r=function(e,t){if(!e)throw new Error("catalog.version.permission.service.catalogid.is.required");if(!t)throw new Error("catalog.version.permission.service.catalogversion.is.required")},o=function(){return t.getCurrentUsername().then(function(e){return e})};this.getCatalogVersionPermissions=function(t,a){return r(t,a),o().then(function(r){var o=new i(n).replaceParams({principal:r}).build();return e.get(o).get({catalogId:t,catalogVersion:a}).then(function(e){return e.permissionsList[0]||{}})})}}]),angular.module("alertCollectionModule",["yLoDashModule"]).service("alertCollection",["lodash",function(e){var t=[];this.getAlerts=function(){return t},this.addAlert=function(e){t.unshift(e)},this.removeAlert=function(n){e.remove(t,function(e){return e===n})}}]).service("alertCollectionLegacySupport",["alertCollection","lodash",function(e,t){this.removeAlertById=function(n){t.remove(e.getAlerts(),function(e){return e.id===n})}}]),angular.module("alertCollectionFacadesModule",["alertCollectionModule"]).factory("alertCollectionComponentFacade",["alertCollection",function(e){return{getAlerts:e.getAlerts}}]).factory("alertCollectionServiceFacade",["alertCollection",function(e){return{addAlert:e.addAlert,removeAlert:e.removeAlert}}]),angular.module("alertFactoryModule",["alertCollectionFacadesModule","yLoDashModule","functionsModule"]).constant("SE_ALERT_SERVICE_TYPES",{INFO:"info",SUCCESS:"success",WARNING:"warning",DANGER:"danger"}).constant("SE_ALERT_DEFAULTS",{type:"info",message:"",closeable:!0,timeout:3e3}).factory("alertFactory",["$q","$timeout","$log","sanitize","alertCollectionServiceFacade","lodash","SE_ALERT_SERVICE_TYPES","SE_ALERT_DEFAULTS",function(e,t,n,i,r,o,a,s){function l(e){e.type?n.warn("alertService validation warning: alert contains both legacy successful property and an alert type for alert: ",e):("boolean"!=typeof e.successful&&n.warn("alertService validation warning: legacyAlertConf.successful not a boolean value for alert: ",e),e.type=e.successful?a.SUCCESS:a.DANGER),delete e.successful}function c(e){if(void 0!==e.successful&&l(e),e.message||e.template||e.templateUrl||n.warn("alertService._validateAlertConfig - alert must contain at least a message, template, or templateUrl property",e),e.messagePlaceholders&&!angular.isObject(e.messagePlaceholders))throw new Error("alertService._validateAlertConfig - property messagePlaceholders should be an object");if(e.message&&(e.template||e.templateUrl)||e.template&&(e.message||e.templateUrl)||e.templateUrl&&(e.message||e.template))throw new Error("alertService._validateAlertConfig - only one template type is allowed for the alert: message, template, or templateUrl")}function u(e){e.message?e.message=i(e.message):e.template&&(e.template=e.template)}function d(e){c(e=e||{}),u(e),o.defaultsDeep(this,e,o.cloneDeep(s)),this._displayed=!1}function p(e){return"string"==typeof e?{message:e}:e}return d.prototype.show=function(){this._displayed||(r.addAlert(this),this._deferred=e.defer(),this.promise=this._deferred.promise,this._displayed=!0,this.timeout&&this.timeout>0&&(this.timer=t(function(){this.hide(!0)}.bind(this),this.timeout)))},d.prototype.hide=function(e){this._displayed&&(r.removeAlert(this),this._displayed=!1,this.timer&&(t.cancel(this.timer),delete this.timer),void 0===e&&(e=!1),this._deferred.resolve(e))},d.prototype.isDisplayed=function(){return this._displayed},{createAlert:function(e){return e=p(e),new d(e)},createInfo:function(e){return e=p(e),e.type=a.INFO,new d(e)},createDanger:function(e){return e=p(e),e.type=a.DANGER,new d(e)},createWarning:function(e){return e=p(e),e.type=a.WARNING,new d(e)},createSuccess:function(e){return e=p(e),e.type=a.SUCCESS,new d(e)}}}]),angular.module("alertServiceModule",["gatewayProxyModule","alertCollectionModule","alertFactoryModule"]).constant("SE_ALERT_SERVICE_GATEWAY_ID","SE_ALERT_SERVICE_GATEWAY_ID").service("alertService",["alertFactory","alertCollectionLegacySupport","gatewayProxy","SE_ALERT_SERVICE_GATEWAY_ID",function(e,t,n,i){this.showAlert=function(t){e.createAlert(t).show()},this.showInfo=function(t){e.createInfo(t).show()},this.showDanger=function(t){e.createDanger(t).show()},this.showWarning=function(t){e.createWarning(t).show()},this.showSuccess=function(t){e.createSuccess(t).show()},this.pushAlerts=function(e){e.forEach(function(e){this.showAlert(e)}.bind(this))}.bind(this),this.removeAlertById=function(e){t.removeAlertById(e)},n.initForService(this,null,i)}]),angular.module("authenticationModule",["authenticationInterfaceModule","gatewayProxyModule","functionsModule","languageSelectorModule","resourceLocationsModule","smarteditServicesModule","alertServiceModule","modalServiceModule","ui.bootstrap","eventServiceModule","yLoDashModule"]).factory("authenticationService",["$rootScope","$q","$injector","$log","sanitize","AuthenticationServiceInterface","LANDING_PAGE_PATH","MODAL_BUTTON_ACTIONS","DEFAULT_AUTHENTICATION_ENTRY_POINT","DEFAULT_AUTH_MAP","DEFAULT_CREDENTIALS_MAP","gatewayProxy","sharedDataService","storageService","alertService","systemEventService","EVENTS","getQueryString","convertToArray","copy","merge","isBlank","extend","lodash",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h,f,g,m,v,y,E,S,_,b,T){var C=function(){this.reauthInProgress={},this.gatewayId="authenticationService",d.initForService(this)};return C=b(o,C),o.prototype._launchAuth=function(e){return n.get("languageService").isInitialized().then(function(){return h.isInitialized().then(function(o){return n.get("modalService").open({cssClasses:o?"se-login-modal--init":"se-login-modal--not-init",templateUrl:"loginDialog.html",controller:["modalManager",function(a){a.setShowHeaderDismiss(!1),this.initialized=o,this.auth={username:"",password:""},this.authURI=e.authURI,h.removeAuthToken(this.authURI),this.authURIKey=btoa(this.authURI).replace(/=/g,""),this.submit=function(o){var s=t.defer();if(o.posted=!0,o.errorMessage="",o.failed=!1,o.$valid){var c=E(e.clientCredentials||{});c.username=this.auth.username,c.password=this.auth.password,c.grant_type="password",n.get("$http")({method:"POST",url:this.authURI,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:v(c).replace("?","")}).then(function(e){var t=l===this.authURI;h.storeAuthToken(this.authURI,e.data),i.debug(["API Authentication Success: ",this.authURI," status: ",e.status].join(" ")),n.get("sessionService").hasUserChanged().then(function(e){a.close({userHasChanged:e}),t&&n.get("sessionService").setCurrentUsername(c.username),s.resolve()},function(e){i.error("Issue with sessionService.hasUserChanged(): "+e),s.reject(e)})}.bind(this),function(e){i.debug(["API Authentication Failure: ",this.authURI," status: ",e.status].join(" ")),o.errorMessage=e.data&&r(e.data.error_description)||"se.logindialogform.oauth.error.default",o.failed=!0,s.reject()}.bind(this))}else o.errorMessage="se.logindialogform.username.and.password.required",s.reject();return s.promise}}]})})})},o.prototype.filterEntryPoints=function(e){return p.get("authenticationMap").then(function(t){return t=S(t||{},c),y(t).filter(function(t){return new RegExp(t.key,"g").test(e)}).map(function(e){return e.value})})},o.prototype.isAuthEntryPoint=function(e){return p.get("authenticationMap").then(function(t){return y(t).map(function(e){return e.value}).indexOf(e)>-1||e===l})},o.prototype._findAuthURIAndClientCredentials=function(e){return this.filterEntryPoints(e).then(function(e){return p.get("credentialsMap").then(function(t){t=angular.extend(t||{},u);var n=e[0];return{authURI:n,clientCredentials:t[n]}})})},o.prototype.authenticate=function(e){return this._findAuthURIAndClientCredentials(e).then(function(e){return this._launchAuth(e).then(function(t){g.sendAsynchEvent(m.AUTHORIZATION_SUCCESS,{userHasChanged:t.userHasChanged}).then(function(){var e=T.values(this.reauthInProgress).some(function(e){return e});t.userHasChanged&&!e&&n.get("$route").reload()}.bind(this)),this.reauthInProgress[e.authURI]=!1}.bind(this))}.bind(this))},o.prototype.logout=function(){return g.sendAsynchEvent(m.LOGOUT,{}).finally(function(e){e.removeAllAuthTokens();var t=n.get("$location"),i=t.url();_(i)||i===a?n.get("$route").reload():t.url(a)}.bind(this,h))},o.prototype.isReAuthInProgress=function(e){return t.when(!0===this.reauthInProgress[e])},o.prototype.setReAuthInProgress=function(e){return this.reauthInProgress[e]=!0,t.when()},o.prototype.isAuthenticated=function(e){return this.filterEntryPoints(e).then(function(e){var t=e&&e[0];return h.getAuthToken(t).then(function(e){return!!e})})},new C}]),angular.module("catalogServiceModule",["gatewayProxyModule","smarteditServicesModule","resourceLocationsModule","functionsModule","yLoDashModule","eventServiceModule"]).constant("CATALOG_VERSION_DETAILS_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/catalogversiondetails").constant("CONTENT_CATALOG_VERSION_DETAILS_RESOURCE_API","/cmssmarteditwebservices/v1/sites/:siteUID/contentcatalogs").constant("PRODUCT_CATALOG_VERSION_DETAILS_RESOURCE_API","/cmssmarteditwebservices/v1/sites/:siteUID/productcatalogs").service("catalogService",["$q","$log","lodash","gatewayProxy","sharedDataService","restServiceFactory","operationContextService","siteService","urlService","systemEventService","EVENTS","CATALOG_VERSION_DETAILS_RESOURCE_URI","CONTENT_CATALOG_VERSION_DETAILS_RESOURCE_API","PRODUCT_CATALOG_VERSION_DETAILS_RESOURCE_API","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","OPERATION_CONTEXT",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h,f,g,m,v){function y(){S={},b={},T={}}function E(){b={}}var S={},_=o.get(d);this.getCatalogsForSite=function(t){return S[t]?e.when(S[t]):_.get({siteUID:t}).then(function(e){return S[t]=e.catalogVersionDetails.reduce(function(e,t){return t.name&&t.catalogId&&t.version&&e.push({name:t.name,catalogId:t.catalogId,catalogVersion:t.version,active:t.active,thumbnailUrl:t.thumbnailUrl}),e},[]),S[t]})},this.getAllCatalogsGroupedById=function(){return this.getAllContentCatalogsGroupedById()};var b={},T={},C=o.get(p);a.register(p,v.CMS).register(p,v.INTERACTIVE);var I=o.get(h);this.getContentCatalogsForSite=function(t){return b[t]?e.when(b[t]):C.get({siteUID:t}).then(function(e){return b[t]=e.catalogs,b[t]})},this.getAllContentCatalogsGroupedById=function(){return s.getSites().then(function(t){var n=t.map(function(e){return this.getContentCatalogsForSite(e.uid).then(function(t){return t.forEach(function(t){t.versions=t.versions.map(function(t){return t.siteDescriptor=e,t})}),t})}.bind(this));return e.all(n)}.bind(this))},this.getCatalogByVersion=function(e,t){return this.getContentCatalogsForSite(e).then(function(e){return e.filter(function(e){return e.versions.some(function(e){return e.version===t})})})},this.isContentCatalogVersionNonActive=function(e){return this._getContext(e).then(function(e){return this.getContentCatalogsForSite(e[f]).then(function(t){var n=t.find(function(t){return t.catalogId===e[g]}),i=n?n.versions.find(function(t){return t.version===e[m]}):null;if(!i)throw Error("Invalid URI ",e,". Cannot find catalog version.");return!i.active})}.bind(this))},this.getContentCatalogActiveVersion=function(e){return this._getContext(e).then(function(e){return this.getContentCatalogsForSite(e[f]).then(function(t){var n=t.find(function(t){return t.catalogId===e[g]}),i=n?n.versions.find(function(e){return e.active}):null;if(!i)throw Error("Invalid URI ",e,". Cannot find catalog version.");return i.version})}.bind(this))},this.getActiveContentCatalogVersionByCatalogId=function(e){return this._getContext().then(function(t){return this.getContentCatalogsForSite(t[f]).then(function(t){var n=t.find(function(t){return t.catalogId===e}),i=n?n.versions.find(function(e){return e.active}):null;if(!i)throw Error("Invalid content catalog ",e,". Cannot find any active catalog version.");return i.version})}.bind(this))},this.getContentCatalogVersion=function(e){return this._getContext(e).then(function(e){return this.getContentCatalogsForSite(e[f]).then(function(t){var n=t.find(function(t){return t.catalogId===e[g]});if(!n)throw new Error("no catalog "+e[g]+" found for site "+e[f]);var i=n.versions.find(function(t){return t.version===e[m]});if(!i)throw new Error("no catalogVersion "+e[m]+" for catalog "+e[g]+" and site "+e[f]);return i},function(e){t.error(e)})}.bind(this))},this.getDefaultSiteForContentCatalog=function(e){return s.getSites().then(function(i){var r=i.filter(function(t){var i=n.last(t.contentCatalogs);return i&&i===e});return 0===r.length?t.warn("[catalogService] - No default site found for content catalog ",e):r.length>1&&t.warn("[catalogService] - Many default sites found for content catalog ",e),r[0]})},this.getCatalogVersionByUuid=function(e,t){return this.getAllContentCatalogsGroupedById().then(function(i){var r=n.reduce(i,function(e,t){return e.concat(t)},[]),o=n.flatten(r.map(function(e){return n.cloneDeep(e.versions).map(function(t){return t.catalogName=e.name,t.catalogId=e.catalogId,t})})).filter(function(n){return e===n.uuid&&(!t||t===n.siteDescriptor.uid)})[0];if(!o){var a="Cannot find catalog version with UUID "+e+(t?" in site "+t:"");throw new Error(a)}return this.getDefaultSiteForContentCatalog(o.catalogId).then(function(e){return o.siteId=e.uid,o})}.bind(this))},this.getProductCatalogsForSite=function(t){return T[t]?e.when(T[t]):I.get({siteUID:t}).then(function(e){return T[t]=e.catalogs,T[t]}.bind(this))},this.getActiveProductCatalogVersionByCatalogId=function(e){return this.getProductCatalogsForSite(f).then(function(t){var n=t.find(function(t){return t.catalogId===e}),i=n?n.versions.find(function(e){return e.active}):null;if(!i)throw Error("Invalid product catalog ",e,". Cannot find any active catalog version.");return i.version})},this.getCatalogVersionUUid=function(e){return this.getContentCatalogVersion(e).then(function(e){return e.uuid})},this.returnActiveCatalogVersionUIDs=function(e){return e.reduce(function(e,t){return e.push(t.versions.find(function(e){return e.active}).uuid),e},[])},this.retrieveUriContext=function(e){return this._getContext(e)},this._getContext=function(t){return t?e.when(t):r.get("experience").then(function(e){if(!e)throw"catalogService was not provided with a uriContext and could not retrive an experience from sharedDataService";return l.buildUriContext(e.siteDescriptor.uid,e.catalogDescriptor.catalogId,e.catalogDescriptor.catalogVersion)})},this.gatewayId="catalogService",i.initForService(this),c.registerEventHandler(u.PAGE_CREATED,E),c.registerEventHandler(u.PAGE_DELETED,E),c.registerEventHandler(u.AUTHORIZATION_SUCCESS,function(e,t){t.userHasChanged&&y()}.bind(this))}]),angular.module("catalogVersionPermissionModule",["catalogVersionPermissionRestServiceModule","catalogServiceModule","resourceLocationsModule","gatewayProxyModule","functionsModule","catalogVersionPermissionServiceInterfaceModule"]).constant("PERMISSION_TYPES",{READ:"read",WRITE:"write"}).service("catalogVersionPermissionService",["$q","catalogVersionPermissionRestService","catalogService","gatewayProxy","extend","CatalogVersionPermissionServiceInterface","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","CONTEXT_SITE_ID","PERMISSION_TYPES",function(e,t,n,i,r,o,a,s,l,c){var u=function(e){this.gatewayId=e,i.initForService(this,["hasWritePermission","hasReadPermission","hasWritePermissionOnCurrent","hasReadPermissionOnCurrent"])},d=function(n,i,r,o){return p(n,i,r,o).then(function(o){return t.getCatalogVersionPermissions(i,r).then(function(t){if(t.permissions){var i=t.permissions.find(function(e){return e.key===n}),r=i?i.value:"false";return e.when("true"===r||o)}return e.when(!1)})})},p=function(t,i,r,o){return(o&&t===c.READ?n.getActiveContentCatalogVersionByCatalogId(i):e.when()).then(function(e){return e===r})},h=function(e){return n.retrieveUriContext().then(function(t){return d(e,t[a],t[s],t[l])})};return(u=r(o,u)).prototype.hasWritePermission=function(e,t){return d(c.WRITE,e,t)},u.prototype.hasReadPermission=function(e,t){return d(c.READ,e,t)},u.prototype.hasWritePermissionOnCurrent=function(){return h(c.WRITE)},u.prototype.hasReadPermissionOnCurrent=function(){return h(c.READ)},new u("CatalogVersionPermissionServiceId")}]),angular.module("confirmationModalServiceModule",["modalServiceModule","gatewayProxyModule"]).factory("confirmationModalService",["$q","modalService","gatewayProxy","MODAL_BUTTON_STYLES","MODAL_BUTTON_ACTIONS",function(e,t,n,i,r){function o(){this.gatewayId="confirmationModal",n.initForService(this,["confirm"])}var a=function(e,t,n){for(var i=[e,t,n],r=0,o=0;o<i.length;o++)void 0!==i[o]&&r++;return 0===r?"You must have one of the following configuration properties configured: description, template, or templateUrl":r>1?"You have more than one of the following configuration properties configured: description, template, or templateUrl":void 0},s=function(e){var t;if(e.scope){var n=e.scope;t=[function(){for(var e in n)n.hasOwnProperty(e)&&(this[e]=n[e])}]}return t};return o.prototype.confirm=function(n){var o=a(n.description,n.template,n.templateUrl);if(o)return e.reject(o);var l,c,u=s(n);return n.templateUrl?c=n.templateUrl:n.description?n.descriptionPlaceholders?(l='<div id="confirmationModalDescription">{{ "'+n.description+'" | translate: modalController.descriptionPlaceholders }}</div>',u=[function(){this.descriptionPlaceholders=n.descriptionPlaceholders}]):l='<div id="confirmationModalDescription">{{ "'+n.description+'" | translate }}</div>':n.template&&(l=n.template),t.open({size:"md",title:n.title||"se.confirmation.modal.title",templateInline:l,templateUrl:c,controller:u,cssClasses:"yFrontModal",buttons:[{id:"confirmCancel",label:"se.confirmation.modal.cancel",style:i.SECONDARY,action:r.DISMISS},{id:"confirmOk",label:"se.confirmation.modal.ok",action:r.CLOSE}]})},new o}]),angular.module("experienceSelectorModule",["eventServiceModule","recompileDomModule","genericEditorModule","smarteditServicesModule","iframeClickDetectionServiceModule","iFrameManagerModule","genericEditorModule","resourceLocationsModule","previewDataDropdownPopulatorModule","experienceServiceModule","yLoDashModule","functionsModule","catalogServiceModule","languageServiceModule"]).constant("ERROR_CATALOG_SERVICE_FAILED","catalogService received rejected promise: ").constant("WARN_NO_PRODUCT_CATALOGS_FOUND","No product catalogs we found").controller("ExperienceSelectorController",["$q","$scope","$filter","$timeout","$document","getAbsoluteURL","systemEventService","siteService","sharedDataService","iframeClickDetectionService","iFrameManager","GenericEditor","experienceService","EVENTS","TYPES_RESOURCE_URI","PREVIEW_RESOURCE_URI","lodash","formatDateAsUtc","catalogService","languageService",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h,f,g,m,v,y,E){var S={};this.$onInit=function(){this.resetExperienceSelector=function(){e.all([l.get("experience"),l.get("configuration")]).then(function(e){var t=e[0],n=e[1],i=m.cloneDeep(t);delete i.siteDescriptor,delete i.languageDescriptor,i.previewCatalog=t.siteDescriptor.uid+"_"+t.catalogDescriptor.catalogId+"_"+t.catalogDescriptor.catalogVersion,i.language=t.languageDescriptor.isocode,i.productCatalogVersions=i.productCatalogVersions.map(function(e){return e.uuid}),this.smarteditComponentType="PreviewData",this.smarteditComponentId=null,this.structureApi=f+"/:smarteditComponentType?mode=DEFAULT",this.contentApi=n&&n.previewTicketURI||g,this.content=i,this.isReady?this.recompile():this.isReady=!0}.bind(this))}.bind(this)},this.returnProductCatalogsByUuids=function(e){var t=[];return S.productCatalogs.forEach(function(n){if(n.versions){var i=n.versions.find(function(t){return e.indexOf(t.uuid)>-1});t.push({catalog:n.catalogId,catalogVersion:i.version})}}),t},this.preparePayload=function(t){return S.siteId=t.previewCatalog.split("_")[0],S.catalogId=t.previewCatalog.split("_")[1],S.catalogVersion=t.previewCatalog.split("_")[2],y.getProductCatalogsForSite(S.siteId).then(function(n){return S.productCatalogs=n,S.productCatalogVersions=t.productCatalogVersions,e.all([l.get("experience"),l.get("configuration")]).then(function(e){var n=e[0],i=e[1];return s.getSiteById(S.siteId).then(function(e){var r=m.cloneDeep(t);return delete r.previewCatalog,delete r.time,r.language=E.convertBCP47TagToJavaTag(r.language),r.catalog=S.catalogId,r.catalogVersion=S.catalogVersion,r.resourcePath=o(i.domain,e.previewUrl),r.pageId=n.pageId,r.time=t.time,r.catalogVersions=this.returnProductCatalogsByUuids(t.productCatalogVersions),r}.bind(this))}.bind(this))}.bind(this))}.bind(this),this.updateCallback=function(e,t){delete this.smarteditComponentId,this.dropdownStatus.isopen=!1;var n=m.cloneDeep(t);delete n.catalog,delete n.time,n.language=E.convertJavaTagToBCP47Tag(n.language),n.siteId=S.siteId,n.catalogId=S.catalogId,n.catalogVersion=S.catalogVersion,n.time=v(e.time),n.pageId=t.pageId,n.productCatalogVersions=S.productCatalogVersions,p.buildDefaultExperience(n).then(function(e){l.set("experience",e).then(function(){a.sendAsynchEvent(h.EXPERIENCE_UPDATE),u.loadPreview(e.siteDescriptor.previewUrl,t.ticketId);var n={previewTicketId:t.ticketId,resourcePath:e.siteDescriptor.previewUrl};l.set("preview",n)})})}.bind(this),this.modalHeaderTitle="se.experience.selector.header",this.$postLink=function(){this.unRegCloseExperienceFn=c.registerCallback("closeExperienceSelector",function(){this.dropdownStatus&&this.dropdownStatus.isopen&&(this.dropdownStatus.isopen=!1)}.bind(this)),this.unRegFn=a.registerEventHandler("OVERLAY_DISABLED",function(){this.dropdownStatus&&this.dropdownStatus.isopen&&(this.dropdownStatus.isopen=!1)}.bind(this))},this.$onDestroy=function(){this.unRegFn&&this.unRegFn(),this.unRegCloseExperienceFn&&this.unRegCloseExperienceFn()},this.getApi=function(e){e.setPreparePayload(this.preparePayload),e.setUpdateCallback(this.updateCallback),e.setAlwaysShowSubmit(!0),e.setAlwaysShowReset(!0),e.setSubmitButtonText("se.componentform.actions.apply"),e.setCancelButtonText("se.componentform.actions.cancel"),e.setOnReset(function(){this.dropdownStatus.isopen=!1}.bind(this))}.bind(this)}]).component("experienceSelector",{templateUrl:"experienceSelectorTemplate.html",transclude:!0,controller:"ExperienceSelectorController",controllerAs:"es",bindings:{experience:"=",dropdownStatus:"=",resetExperienceSelector:"="}}),angular.module("previewDataDropdownPopulatorModule",["dropdownPopulatorInterfaceModule","smarteditServicesModule","catalogServiceModule","languageServiceModule","l10nModule"]).factory("PreviewDatapreviewCatalogDropdownPopulator",["$q","DropdownPopulatorInterface","extend","catalogService","siteService","l10nFilter","lodash",function(e,t,n,i,r,o,a){var s=function(){};return s=n(t,s),s.prototype._initCatalogVersionDropdownChoices=function(t){return r.getSites().then(function(n){return e.all(n.map(function(e){return i.getContentCatalogsForSite(e.uid).then(function(n){var i=[a.last(n)].map(function(t){return t.versions.map(function(n){return{id:e.uid+"_"+t.catalogId+"_"+n.version,label:o(t.name)+" - "+n.version}})});return a.flatten(i).filter(function(e){return!t||e.label.toUpperCase().indexOf(t.toUpperCase())>-1})})})).then(function(e){return e.reduce(function(e,t){return Array.prototype.push.apply(e,t),e},[]).sort(function(e,t){return e.label.localeCompare(t.label)})})})},s.prototype.populate=function(e){return this._initCatalogVersionDropdownChoices(e.search)},new s}]).factory("PreviewDatalanguageDropdownPopulator",["$q","DropdownPopulatorInterface","extend","languageService",function(e,t,n,i){var r=function(){};return r=n(t,r),r.prototype._getLanguageDropdownChoices=function(t,n){var r=e.defer(),o=[];return i.getLanguagesForSite(t).then(function(e){o=e.map(function(e){var t={};return t.id=e.isocode,t.label=e.nativeName,t}),n&&(o=o.filter(function(e){return e.label.toUpperCase().indexOf(n.toUpperCase())>-1})),r.resolve(o)},function(){r.reject()}),r.promise},r.prototype.populate=function(t){if(t.model[t.field.dependsOn]){var n=t.model[t.field.dependsOn].split("_")[0];return this._getLanguageDropdownChoices(n,t.search)}return e.when([])},new r}]),angular.module("experienceSelectorButtonModule",["eventServiceModule","crossFrameEventServiceModule","smarteditServicesModule","l10nModule","seConstantsModule","seConstantsModule"]).controller("experienceSelectorButtonController",["EVENTS","DATE_CONSTANTS","systemEventService","crossFrameEventService","sharedDataService","l10nFilter","dateFilter",function(e,t,n,i,r,o,a){this.buildExperienceText=function(){return this.experience?o(this.experience.catalogDescriptor.name)+" - "+this.experience.catalogDescriptor.catalogVersion+"  |  "+this.experience.languageDescriptor.nativeName+(this.experience.time?"  |  "+a(this.experience.time,t.ANGULAR_FORMAT):"")+this._returnProductCatalogVersionTextByUuids(this.experience.productCatalogVersions):""},this._returnProductCatalogVersionTextByUuids=function(){return this.experience.productCatalogVersions.reduce(function(e,t){return e+=" | "+o(t.catalogName)+" ("+t.catalogVersion+")"},"")},this.updateExperience=function(){return r.get("experience").then(function(e){this.experience=e}.bind(this))},this.setPageFromParent=function(e,t){var n=t.pageContext.catalogVersionUuid;this.parentCatalogVersion="<div>"+o(t.pageContext.catalogName)+" ("+t.pageContext.catalogVersion+")</div>",this.iscurrentPageFromParent=t.catalogDescriptor.catalogVersionUuid!==n},this.$onInit=function(){this.iscurrentPageFromParent=!1,this.updateExperience(),this.unregFn=n.registerEventHandler(e.EXPERIENCE_UPDATE,this.updateExperience.bind(this)),this.unRegNewPageContextEventFn=i.subscribe(e.PAGE_CHANGE,this.setPageFromParent.bind(this))},this.$onDestroy=function(){this.unregFn(),this.unRegNewPageContextEventFn()}}]).component("experienceSelectorButton",{templateUrl:"experienceSelectorButtonTemplate.html",transclude:!0,controller:"experienceSelectorButtonController"}),angular.module("experienceServiceModule",["crossFrameEventServiceModule","catalogServiceModule","languageServiceModule","smarteditServicesModule","yLoDashModule","gatewayProxyModule"]).service("experienceService",["$q","$location","crossFrameEventService","EVENTS","siteService","catalogService","languageService","sharedDataService","lodash","gatewayProxy","STOREFRONT_PATH_WITH_PAGE_ID",function(e,t,n,i,r,o,a,s,l,c,u){var d=function(e){this.gatewayId=e,c.initForService(this,["updateExperiencePageContext","getCurrentExperience"])};return d.prototype.buildDefaultExperience=function(t){var n=t.siteId,i=t.catalogId,s=t.catalogVersion,c=t.productCatalogVersions;return r.getSiteById(n).then(function(r){return o.getContentCatalogsForSite(n).then(function(u){return o.getProductCatalogsForSite(n).then(function(o){var d=u.find(function(e){return e.catalogId===i}),p=d?d.versions.find(function(e){return e.version===s}):null;if(!p)return e.reject("no catalogVersionDescriptor found for _catalogId_ catalogId and _catalogVersion_ catalogVersion".replace("_catalogId_",i).replace("_catalogVersion_",s));var h=[];return o.forEach(function(e){var t=e.versions.find(function(e){return c?c.indexOf(e.uuid)>-1:!0===e.active});h.push({catalog:e.catalogId,catalogName:e.name,catalogVersion:t.version,active:t.active,uuid:t.uuid})}),a.getLanguagesForSite(n).then(function(e){var o=t.language?e.find(function(e){return e.isocode===t.language}):e[0],a=l.cloneDeep(t);return delete a.siteId,delete a.catalogId,delete a.catalogVersion,a.siteDescriptor=r,a.catalogDescriptor={catalogId:i,catalogVersion:p.version,catalogVersionUuid:p.uuid,name:d.name,siteId:n,active:p.active},a.languageDescriptor=o,a.time=a.time||null,a.productCatalogVersions=h,a})})})})},d.prototype.updateExperiencePageId=function(e){s.get("experience").then(function(n){if(n){n.pageId=e;var i=this.getExperiencePath(n);t.path(i).replace()}}.bind(this))},d.prototype.loadExperience=function(e){var n={siteDescriptor:{uid:e.siteId},catalogDescriptor:{catalogId:e.catalogId,catalogVersion:e.catalogVersion},pageId:e.pageUid},i=this.getExperiencePath(n);t.path(i).replace()},d.prototype.updateExperiencePageContext=function(e,t){return s.get("experience").then(function(n){return o.getContentCatalogsForSite(n.catalogDescriptor.siteId).then(function(i){if(n){var r=l.flatten(i.map(function(e){return l.cloneDeep(e.versions).map(function(t){return t.catalogName=e.name,t.catalogId=e.catalogId,t})})).filter(function(t){return t.uuid===e})[0];return o.getDefaultSiteForContentCatalog(r.catalogId).then(function(e){return n.pageId=t,n.pageContext={catalogId:r.catalogId,catalogName:r.catalogName,catalogVersion:r.version,catalogVersionUuid:r.uuid,siteId:e.uid,active:r.active},n})}})}).then(function(e){n.publish(i.PAGE_CHANGE,e)})},d.prototype.getExperiencePath=function(e){return u.replace(":siteId",e.siteDescriptor.uid).replace(":catalogId",e.catalogDescriptor.catalogId).replace(":catalogVersion",e.catalogDescriptor.catalogVersion).replace(":pageId",e.pageId)},d.prototype.getCurrentExperience=function(){return s.get("experience")},new d("experienceService")}]),angular.module("filterByFieldFilterModule",[]).filter("filterByField",function(){return function(e,t,n,i){var r=[];if(i=i||angular.noop,!t)return i(e),e;var o=(t=t.toLowerCase()).split(" ");return(e||[]).forEach(function(e){var t=(n=n||Object.keys(e)).map(function(t){return e[t]}).filter(function(e){return"string"==typeof e||e instanceof String}).map(function(e){return e.toLowerCase()});0===o.map(function(e){return!!t.find(function(t){return t.indexOf(e)>=0})}).filter(function(e){return!e}).length&&r.push(e)}),i(r),r}}),angular.module("heartBeatServiceModule",["alertServiceModule","gatewayFactoryModule","translationServiceModule"]).constant("HEART_BEAT_PERIOD",1e4).factory("heartBeatService",["$rootScope","$timeout","$translate","gatewayFactory","alertService","HEART_BEAT_PERIOD",function(e,t,n,i,r,o){var a=function(){this._heartBeatFailed=!1,this._attachListeners()};return a.prototype._attachListeners=function(){this._heartBeatGateway=i.createGateway("heartBeatGateway"),this._heartBeatGateway.subscribe("heartBeat",function(){this._heartBeatTimer&&this.resetTimer(!0)}.bind(this)),e.$on("$routeChangeStart",function(){this.resetTimer(!1)}.bind(this))},a.prototype._failureCallback=function(){if(!this._heartBeatFailed){this._heartBeatFailed=!0;var e=n.instant("se.heartbeat.failure");r.showWarning({id:"heartBeatFailure",message:e,closeable:!1})}},a.prototype.resetTimer=function(e){this._heartBeatFailed&&(r.removeAlertById("heartBeatFailure"),this._heartBeatFailed=!1),this._heartBeatTimer&&(t.cancel(this._heartBeatTimer),this._heartBeatTimer=null),e&&(this._heartBeatTimer=t(this._failureCallback.bind(this),o))},new a}]),angular.module("iframeClickDetectionServiceModule",["gatewayProxyModule"]).factory("iframeClickDetectionService",["gatewayProxy",function(e){function t(){this.gatewayId="iframeClick",this.callbacks={},e.initForService(this,["onIframeClick"])}return t.prototype.registerCallback=function(e,t){return this.callbacks[e]=t,this.removeCallback.bind(this,e)},t.prototype.removeCallback=function(e){this.callbacks[e]&&delete this.callbacks[e]},t.prototype.onIframeClick=function(){for(var e in this.callbacks)this.callbacks[e]()},new t}]),angular.module("iFrameManagerModule",["alertServiceModule","functionsModule","translationServiceModule","ngResource","loadConfigModule","smarteditServicesModule","resourceLocationsModule","heartBeatServiceModule","eventServiceModule","yLoDashModule","yjqueryModule"]).factory("deviceSupports",function(){return[{icon:"static-resources/images/icon_res_phone.png",selectedIcon:"static-resources/images/icon_res_phone_s.png",type:"phone",width:480},{icon:"static-resources/images/icon_res_wphone.png",selectedIcon:"static-resources/images/icon_res_wphone_s.png",type:"wide-phone",width:600},{icon:"static-resources/images/icon_res_tablet.png",selectedIcon:"static-resources/images/icon_res_tablet_s.png",type:"tablet",width:700},{icon:"static-resources/images/icon_res_wtablet.png",selectedIcon:"static-resources/images/icon_res_wtablet_s.png",type:"wide-tablet",width:1024},{icon:"static-resources/images/icon_res_desktop.png",selectedIcon:"static-resources/images/icon_res_desktop_s.png",type:"desktop",width:1200},{type:"wide-desktop",icon:"static-resources/images/icon_res_wdesktop.png",selectedIcon:"static-resources/images/icon_res_wdesktop_s.png",width:"100%"}]}).factory("deviceOrientations",["$translate",function(e){var t=[{orientation:"vertical",key:"se.deviceorientation.vertical.label"},{orientation:"horizontal",key:"se.deviceorientation.horizontal.label"}];return t.forEach(function(t){e(t.key).then(function(e){this.label=e}.bind(t))}),t}]).factory("iFrameManager",["$q","$log","$http","$location","alertService","deviceSupports","deviceOrientations","getOrigin","getURI","heartBeatService","isBlank","getAbsoluteURL","LANDING_PAGE_PATH","loadConfigManagerService","lodash","parseQuery","previewService","PREVIEW_RESOURCE_URI","restServiceFactory","sharedDataService","SMARTEDIT_IFRAME_ID","systemEventService","waitDialogService","yjQuery",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h,f,g,m,v,y,E,S,_,b,T){function C(e){return n({method:"GET",url:e})}function I(){return T("iframe#"+S)}var A;return{setCurrentLocation:function(e){A=e},getIframe:function(){return I()},getIFrameSrc:function(){return I().attr("src")},hideWaitModal:function(){b.hideWaitModal()},showWaitModal:function(){b.showWaitModal()},getDeviceSupports:function(){return o},getDeviceOrientations:function(){return a},isCrossOrigin:function(){return s()!==s(A)},_mustLoadAsSuch:function(e){return!A||l(e)===l(A)||"cmsTicketId"in g(A)},load:function(e,n,i){n?C(e).then(function(){this.getIframe().attr("src",e),c.resetTimer(!0)}.bind(this),function(e){404===e.status&&(this.getIframe().attr("src",i),c.resetTimer(!0))}.bind(this)):(t.debug("loading storefront ",e),this.getIframe().attr("src",e),c.resetTimer(!0))},_appendURISuffix:function(e){var t=e.split("?");return t[0].replace(/(.+)([^\/])$/g,"$1$2/previewServlet").replace(/(.+)\/$/g,"$1/previewServlet")+(2===t.length?"?"+t[1]:"")},loadPreview:function(n,i){var r=n;/.+\.html/.test(r)||(r=this._appendURISuffix(r)),t.debug("loading storefront iframe with preview ticket:",i);var o=r+(-1===r.indexOf("?")?"?":"&")+"cmsTicketId="+i;if(this._mustLoadAsSuch(n))this.load(o);else{var a=this.isCrossOrigin();(a?e.when():y.get(o).get()).then(function(){this.load(A,!a,o)}.bind(this))}},initializeCatalogPreview:function(){return this.setCurrentLocation(null),E.get("experience").then(function(n){if(n)return m.getResourcePathFromPreviewUrl(n.siteDescriptor.previewUrl).then(function(i){return n=f.cloneDeep(n),n.catalog=n.catalogDescriptor.catalogId,n.catalogVersion=n.catalogDescriptor.catalogVersion,n.language=n.languageDescriptor.isocode,n.resourcePath=i,n.pageId=n.pageId,m.createPreview(n).then(function(t){return window.smartEditBootstrapped={},this.loadPreview(t.resourcePath,t.previewTicketId),E.set("preview",t),e.when()}.bind(this),function(n){return t.error("iFrameManager.initializeCatalogPreview() - failed to create preview"),e.reject(n)})}.bind(this),function(n){return t.error("iFrameManager.initializeCatalogPreview() - failed to retrieve resourcepath"),e.reject(n)});i.url(p)}.bind(this),function(n){return t.error("iFrameManager.initializeCatalogPreview() - failed to retrieve experience"),e.reject(n)})},apply:function(e,t){var n,i,r=!0;u(t)||(r="vertical"===t.orientation),u(e)||(n=r?e.width:e.height,i=r?e.height:e.width),n||(n="100%"),i||(i="100%"),e?this.getIframe().removeClass().addClass("device-"+(r?"vertical":"horizontal")+" device-default"):this.getIframe().removeClass(),this.getIframe().css({width:n,height:i,display:"block",margin:"auto"})},applyDefault:function(){this.apply(this.getDeviceSupports[0],this.getDeviceOrientations()[0])}}}]),angular.module("inflectionPointSelectorModule",["yjqueryModule","smarteditServicesModule","iFrameManagerModule","resourceLocationsModule","iframeClickDetectionServiceModule","eventServiceModule"]).directive("inflectionPointSelector",["sharedDataService","iFrameManager","iframeClickDetectionService","systemEventService","$document","yjQuery",function(e,t,n,i,r,o){return{templateUrl:"inflectionPointSelectorWidgetTemplate.html",restrict:"E",transclude:!0,$scope:{},link:function(e){e.selectPoint=function(n){e.currentPointSelected=n,e.status.isopen=!e.status.isopen,void 0!==n&&t.apply(n,e.deviceOrientation)};var a=[];a=t.getDeviceSupports(),e.currentPointSelected=a[5],e.points=a,e.status={isopen:!1},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen},n.registerCallback("inflectionPointClose",function(){e.status.isopen=!1}),r.on("click",function(t){o(t.target).parents("inflection-point-selector").length<=0&&e.status.isopen&&(e.status.isopen=!1,e.$apply())});var s=i.registerEventHandler("OVERLAY_DISABLED",function(){e.status.isopen=!1});e.$on("$destroy",function(){s()})}}}]),angular.module("permissionServiceModule",["permissionServiceInterfaceModule","gatewayProxyModule","eventServiceModule","functionsModule","crossFrameEventServiceModule"]).constant("DEFAULT_RULE_NAME","se.permission.service.default.rule").factory("permissionService",["$q","$log","extend","DEFAULT_RULE_NAME","EVENTS","SE_PERMISSION_SERVICE_GATEWAY_ID","PermissionServiceInterface","gatewayProxy","systemEventService","crossFrameEventService","isBlank",function(e,t,n,i,r,o,a,s,l,c,u){var d=[],p=[],h={},f=function(e){return h.hasOwnProperty(e)},g=function(e){return h[e]},m=function(){this._registerEventHandlers(),s.initForService(this,["isPermitted","clearCache","registerPermission","unregisterDefaultRule","registerDefaultRule","registerRule","_registerRule","_remoteCallRuleVerify","_registerDefaultRule"],o)};return m=n(a,m),m.prototype._addRulePromise=function(t,n,i){var r,o=this._getRule(i),a=n[i],s=this._generateCacheKey(a);r=this.hasCachedResult(i,s)?e.when(this._getCachedResult(i,s)):this._callRuleVerify(o.names.join("-"),a).then(function(t){return t?e.resolve(!0):e.reject(!1)}),t[i]=r},m.prototype._isPermissionNameValid=function(e){return/^[A-Za-z0-9_\-]+\.[A-Za-z0-9_\-\.]+/.test(e)},m.prototype._getRulePromises=function(e){var t={};return Object.keys(e).forEach(function(n){this._addRulePromise.call(this,t,e,n)}.bind(this)),t},m.prototype._hasDefaultRule=function(){return!!this._getRule(i)},m.prototype._getCachedResult=function(e,t){return f(e)?g(e)[t]:null},m.prototype._generateCacheKey=function(e){return JSON.stringify(e.sort(function(e,t){var n=e.name,i=t.name;return n===i?0:n<i?-1:1}))},m.prototype._removeDuplicatePermissionNames=function(e){Object.keys(e).forEach(function(t){e[t]=e[t].filter(function(n){var i=e[t].find(function(e){return e.name===n.name});if(i===n)return!0;var r=i.context,o=n.context;return JSON.stringify(r)!==JSON.stringify(o)})})},m.prototype._mapRuleNameToPermissionNames=function(e){var t={};return e.forEach(function(e){if(!e.names)throw"Requested Permission requires at least one name";var n=e.names,i=e.context;n.forEach(function(e){this._populateRulePermissionNames(t,e,i)}.bind(this))}.bind(this)),this._removeDuplicatePermissionNames(t),t},m.prototype._populateRulePermissionNames=function(e,t,n){var r=this.getPermission(t);if(!!r&&!!r.rules&&r.rules.length>0)r.rules.forEach(function(i){this._addPermissionName(e,i,t,n)}.bind(this));else{if(!this._hasDefaultRule())throw"Permission has no rules";this._addPermissionName(e,i,t,n)}},m.prototype._addPermissionName=function(e,t,n,i){var r=this._getRule(t);if(!r)throw"Permission found but no rule found named: "+t;t=r.names[0],e.hasOwnProperty(t)||(e[t]=[]),e[t].push({name:n,context:i})},m.prototype._getRule=function(e){return d.find(function(t){return t.names.indexOf(e)>-1})},m.prototype.getPermission=function(e){return p.find(function(t){return t.aliases.indexOf(e)>-1})},m.prototype.unregisterDefaultRule=function(){var e=this._getRule(i);e&&d.splice(d.indexOf(e),1)},m.prototype.registerPermission=function(e){this._validatePermission(e),p.push({aliases:e.aliases,rules:e.rules})},m.prototype.hasCachedResult=function(e,t){return f(e)&&g(e).hasOwnProperty(t)},m.prototype.clearCache=function(e,t){(u(t)||u(t.userHasChanged)||!!t.userHasChanged)&&(h={})},m.prototype.isPermitted=function(n){var i=this._mapRuleNameToPermissionNames(n),r=this._getRulePromises.call(this,i),o=function(e){return this._updateCache(i,e),!0}.bind(this);return e.all(r).then(o,function(n){return!1===n?n:(t.error(n),e.reject(n))})},m.prototype._validationRule=function(e){e.names.forEach(function(e){if(this._getRule(e))throw"Rule already exists: "+e}.bind(this))},m.prototype._validatePermission=function(e){if(!(e.aliases instanceof Array))throw"Permission aliases must be an array";if(e.aliases.length<1)throw"Permission requires at least one alias";if(!(e.rules instanceof Array))throw"Permission rules must be an array";if(e.rules.length<1)throw"Permission requires at least one rule";e.aliases.forEach(function(e){if(this.getPermission(e))throw"Permission already exists: "+e;if(!this._isPermissionNameValid(e))throw"Permission aliases must be prefixed with namespace and a full stop"}.bind(this)),e.rules.forEach(function(e){if(!this._getRule(e))throw"Permission found but no rule found named: "+e}.bind(this))},m.prototype._updateCache=function(e,t){Object.keys(t).forEach(function(n){var i=this._generateCacheKey(e[n]),r=t[n];this._addCachedResult(n,i,r)}.bind(this))},m.prototype._addCachedResult=function(e,t,n){f(e)||(h[e]={}),h[e][t]=n},m.prototype._registerRule=function(e){if(this._validationRule(e),e.names&&e.names.length&&e.names.indexOf(i)>-1)throw"Register default rule using permissionService.registerDefaultRule()";d.push({names:e.names})},m.prototype._registerDefaultRule=function(e){if(this._validationRule(e),e.names&&e.names.length&&-1===e.names.indexOf(i))throw"Default rule name must be DEFAULT_RULE_NAME";d.push({names:e.names})},m.prototype._callRuleVerify=function(e,t){return this.ruleVerifyFunctions&&this.ruleVerifyFunctions[e]?this.ruleVerifyFunctions[e].verify(t):this._remoteCallRuleVerify(e,t)},m.prototype._registerEventHandlers=function(){l.registerEventHandler(r.AUTHORIZATION_SUCCESS,this.clearCache.bind(this)),l.registerEventHandler(r.EXPERIENCE_UPDATE,this.clearCache.bind(this)),c.subscribe(r.PAGE_CHANGE,this.clearCache.bind(this))},m.prototype._remoteCallRuleVerify=function(){},new m}]),angular.module("perspectiveSelectorModule",["yjqueryModule","iframeClickDetectionServiceModule","smarteditServicesModule","eventServiceModule","crossFrameEventServiceModule","yPopoverModule","seConstantsModule"]).constant("isE2eTestingActive",!1).controller("PerspectiveSelectorController",["$log","yjQuery","perspectiveService","iframeClickDetectionService","$scope","$document","systemEventService","EVENT_PERSPECTIVE_ADDED","EVENT_PERSPECTIVE_CHANGED","ALL_PERSPECTIVE","EVENTS","crossFrameEventService","isE2eTestingActive",function(e,t,n,i,r,o,a,s,l,c,u,d,p){var h,f,g,m,v=[],y=[],E=null,S=!1,_=function(){this.isOpen=!1}.bind(this),b=function(){n.getPerspectives().then(function(e){v=e,y=this._filterPerspectives(v)}.bind(this))}.bind(this);this.refreshPerspectives=function(){n.getPerspectives().then(function(e){v=e,T(),this._refreshActivePerspective(),y=this._filterPerspectives(v)}.bind(this))},this.isOpen=!1,this.$onInit=function(){i.registerCallback("perspectiveSelectorClose",_),h=a.registerEventHandler("OVERLAY_DISABLED",_),f=a.registerEventHandler(s,b),g=d.subscribe(l,this.refreshPerspectives.bind(this)),m=a.registerEventHandler(u.AUTHORIZATION_SUCCESS,function(e,t){t.userHasChanged&&b()}.bind(this)),b(),o.on("click",function(e){t(e.target).parents(".ySEPerspectiveSelector").length<=0&&this.isOpen&&(_(),r.$apply())}.bind(this))},this.$onDestroy=function(){h(),f(),g(),m()},this.selectPerspective=function(t){try{n.switchTo(t),_()}catch(t){e.error("selectPerspective() - Cannot select perspective.",t)}},this.getDisplayedPerspectives=function(){return y},this.getActivePerspectiveName=function(){return E?E.nameI18nKey:""},this.isHotkeyTooltipVisible=function(){return S},this._filterPerspectives=function(e){return e.filter(function(e){var t=E&&e.key===E.key,n=e.key===c;return!t&&(!n||p)})};var T=function(){n.isEmptyPerspectiveActive().then(function(e){S=!e})};this._refreshActivePerspective=function(){E=n.getActivePerspective()}}]).component("perspectiveSelector",{templateUrl:"perspectiveSelectorWidgetTemplate.html",controller:"PerspectiveSelectorController"}),angular.module("productCategoryServiceModule",["smarteditServicesModule","resourceLocationsModule"]).factory("productCategoryService",["restServiceFactory","PRODUCT_CATEGORY_RESOURCE_URI","PRODUCT_CATEGORY_SEARCH_RESOURCE_URI",function(e,t,n){var i=e.get(t),r=e.get(n);return{getCategoryById:function(e,t){return i.get({siteUID:e,categoryUID:t})},getCategories:function(e,t,n,i){return this._validateProductCatalogInfo(e),r.get({catalogId:e.catalogId,catalogVersion:e.catalogVersion,text:t,pageSize:n,currentPage:i})},_validateProductCatalogInfo:function(e){if(!e.siteUID)throw Error("[productService] - site UID missing.");if(!e.catalogId)throw Error("[productService] - catalog ID missing.");if(!e.catalogVersion)throw Error("[productService] - catalog version  missing.")}}}]),angular.module("renderServiceModule",["gatewayProxyModule","renderServiceInterfaceModule"]).factory("renderService",["$q","extend","gatewayProxy","RenderServiceInterface",function(e,t,n,i){var r=function(e){i.call(this),this.gatewayId=e,n.initForService(this,["blockRendering","isRenderingBlocked","renderSlots","renderComponent","renderRemoval","toggleOverlay","refreshOverlayDimensions","renderPage"])};return r=t(i,r),r.prototype.blockRendering=function(e){this.RenderingBlocked=e},r.prototype.isRenderingBlocked=function(){return e.when(this.RenderingBlocked||!1)},new r("Renderer")}]),angular.module("sessionServiceModule",["functionsModule","gatewayProxyModule","smarteditServicesModule","sessionServiceInterfaceModule"]).constant("PREVIOUS_USERNAME_HASH","previousUsername").factory("sessionService",["$q","extend","gatewayProxy","restServiceFactory","SessionServiceInterface","WHO_AM_I_RESOURCE_URI","PREVIOUS_USERNAME_HASH","storageService","cryptographicUtils",function(e,t,n,i,r,o,a,s,l){var c,u=function(e){this.gatewayId=e,n.initForService(this,["getCurrentUsername","getCurrentUserDisplayName","hasUserChanged","resetCurrentUserData","setCurrentUsername"]),this.resetCurrentUserData()},d=i.get(o),p=function(){return d.get().then(function(e){c=e})};return u=t(r,u),u.prototype.getCurrentUserDisplayName=function(){return(this.isUserLoggedIn()?e.when():p()).then(function(){return c.displayName})},u.prototype.getCurrentUsername=function(){return(this.isUserLoggedIn()?e.when():p()).then(function(){return c.uid})},u.prototype.hasUserChanged=function(){return this.resetCurrentUserData(),this.getCurrentUsername().then(function(e){return s.getItem(a).then(function(t){return!!t&&t!==l.sha1Hash(e)})})},u.prototype.isUserLoggedIn=function(){return!!c},u.prototype.resetCurrentUserData=function(){c=null},u.prototype.setCurrentUsername=function(e){s.setItem(a,l.sha1Hash(e))},new u("SessionServiceId")}]),angular.module("toolbarModule",["gatewayProxyModule","resourceLocationsModule","toolbarInterfaceModule","translationServiceModule","iframeClickDetectionServiceModule","eventServiceModule","toolbarItemContextModule"]).constant("CLOSE_ALL_ACTION_ITEMS","closeAllActionItems").factory("toolbarServiceFactory",["$q","$log","gatewayProxy","extend","ToolbarServiceInterface",function(e,t,n,i,r){var o=function(e){this.actions={},this.aliases=[],this.onAliasesChange=null,this.gatewayId=e,n.initForService(this,["addAliases","removeItemByKey","removeAliasByKey","_removeItemOnInner","triggerActionOnInner"])};(o=i(r,o)).prototype.addAliases=function(e){this.aliases=this.aliases.concat(e);var n=!1,i="In "+this.gatewayId+" the items ",r="";this.aliases.sort(function(e,t){return e.priority===t.priority&&e.section===t.section?(r=e.section,i+=e.key+" and "+t.key+" ",n=!0,e.key>t.key):e.priority-t.priority}),n&&t.warn("WARNING: "+i+"have the same priority withing section:"+r),this.onAliasesChange&&this.onAliasesChange(this.aliases)},o.prototype.removeItemByKey=function(e){e in this.actions?delete this.actions[e]:this._removeItemOnInner(e),this.removeAliasByKey(e)},o.prototype.removeAliasByKey=function(e){for(var t=0;t<this.aliases.length&&this.aliases[t].key!==e;t++);t<this.aliases.length&&this.aliases.splice(t,1)},o.prototype.setOnAliasesChange=function(e){this.onAliasesChange=e},o.prototype.triggerAction=function(e){e&&this.actions[e.key]?this.actions[e.key].call(e):this.triggerActionOnInner(e)},o.prototype.addItemsStyling=function(e){this.actionsClasses=e};var a={};return{getToolbarService:function(e){return a[e]||(a[e]=new o(e)),a[e]}}}]).directive("toolbar",["toolbarServiceFactory","STORE_FRONT_CONTEXT","iframeClickDetectionService","CLOSE_ALL_ACTION_ITEMS","systemEventService","$location",function(e,t,n,i,r,o){return{templateUrl:"toolbarTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{cssClass:"@",toolbarName:"@",imageRoot:"=?imageRoot"},link:function(a){a.imageRoot||(a.imageRoot=""),a.btnStates||(a.btnStates={lang:!1,add:!1,edit:!1,pageInfo:!1});var s=e.getToolbarService(a.toolbarName);s.setOnAliasesChange(function(e){a.actions=e,a.actionsClasses=s.actionsClasses}),a.actions=s.getAliases(),a.actionsClasses=s.actionsClasses,a.triggerAction=function(e,t){t.preventDefault(),s.triggerAction(e)},a.isOnStorefront=function(){return o.absUrl().indexOf(t)>=0},a.getItemVisibility=function(e){return e.include&&(e.isOpen||e.keepAliveOnClose)},this.unregCloseActions=n.registerCallback(i,function(){a.actions.forEach(function(e){e.isOpen=!1})}.bind(this)),this.unregOverlay=r.registerEventHandler("OVERLAY_DISABLED",function(){a.$apply()}),a.$onDestroy=function(){this.unregCloseActions(),this.unregOverlay()}.bind(this)}}}]),angular.module("catalogDetailsModule",["catalogVersionDetailsModule","catalogVersionsThumbnailCarouselModule","catalogServiceModule"]).controller("catalogDetailsController",["catalogService",function(e){this.$onInit=function(){this.activeCatalogVersion=this.catalog.versions.find(function(e){return e.active}),e.getDefaultSiteForContentCatalog(this.catalog.catalogId).then(function(e){this.siteIdForCatalog=e.uid}.bind(this)),this.cataloDeviderImage="static-resources/images/icon_catalog_arrow.png",this.sortedCatalogVersions=this._sortCatalogVersions(),this.collapsibleConfiguration={expandedByDefault:this.isCatalogForCurrentSite}},this._sortCatalogVersions=function(){var e=[];return e.push(this.activeCatalogVersion),e.concat(this.catalog.versions.filter(function(e){return!e.active}))}}]).component("catalogDetails",{templateUrl:"catalogDetailsTemplate.html",controller:"catalogDetailsController",bindings:{catalog:"<",isCatalogForCurrentSite:"<"}}),angular.module("catalogVersionDetailsModule",["homePageLinkModule"]).constant("CATALOG_DETAILS_COLUMNS",{LEFT:"left",RIGHT:"right"}).service("catalogDetailsService",["CATALOG_DETAILS_COLUMNS",function(e){this._customItems={left:[],right:[]},this.addItems=function(t,n){n===e.RIGHT?this._customItems.right=this._customItems.right.concat(t):this._customItems.left=this._customItems.left.concat(t)},this.getItems=function(){return this._customItems},this.addItems([{include:"homePageLinkWrapperTemplate.html"}],e.LEFT)}]).controller("catalogVersionDetailsController",["catalogDetailsService",function(e){this.$onInit=function(){var t=e.getItems();this.leftItems=t.left,this.rightItems=t.right}}]).component("catalogVersionDetails",{templateUrl:"catalogVersionDetailsTemplate.html",controller:"catalogVersionDetailsController",bindings:{catalog:"<",catalogVersion:"<",activeCatalogVersion:"<",siteId:"<"}}),angular.module("catalogVersionsThumbnailCarouselModule",["resourceLocationsModule"]).controller("catalogVersionsThumbnailCarouselController",["$location","STOREFRONT_PATH",function(e,t){this.$onInit=function(){this.selectedVersion=this._getActiveVersion()},this.onClick=function(){e.path(t.replace(":siteId",this.siteId).replace(":catalogId",this.catalog.catalogId).replace(":catalogVersion",this.selectedVersion.version))},this._getActiveVersion=function(){return this.catalog.versions.find(function(e){return e.active})}}]).component("catalogVersionsThumbnailCarousel",{templateUrl:"catalogVersionsThumbnailCarouselTemplate.html",controller:"catalogVersionsThumbnailCarouselController",bindings:{catalog:"<",siteId:"<"}}),angular.module("homePageLinkModule",[]).directive("homePageLink",function(){return{templateUrl:"homePageLinkTemplate.html",restrict:"E",controller:["$location","STOREFRONT_PATH",function(e,t){this.onClick=function(){e.path(t.replace(":siteId",this.siteId).replace(":catalogId",this.catalog.catalogId).replace(":catalogVersion",this.catalogVersion.version))}}],controllerAs:"ctrl",bindToController:{catalog:"<",catalogVersion:"<",siteId:"<"}}}),angular.module("clientPagedListModule",["pascalprecht.translate","ui.bootstrap","ngSanitize","paginationFilterModule","iFrameManagerModule","compileHtmlModule","yDropDownMenuModule","filterByFieldFilterModule","hasOperationPermissionModule"]).directive("clientPagedList",["$filter",function(e){return{templateUrl:"clientPagedList.html",restrict:"E",transclude:!1,scope:{items:"=",itemsPerPage:"=",totalItems:"=?",keys:"=",renderers:"=",injectedContext:"=",identifier:"=",sortBy:"=",reversed:"=",query:"=",displayCount:"=",dropdownItems:"=",selectedItem:"=",itemFilterKeys:"<?"},link:function(t){t.totalItems=0,t.currentPage=1,t.filteredItems=[],t.columnWidth=100/t.keys.length,t.columnToggleReversed=t.reversed,t.headersSortingState={},t.headersSortingState[t.sortBy]=t.reversed,t.visibleSortingHeader=t.sortBy;var n=t.$watch("sortBy",function(){t.items=e("orderBy")(t.items,t.sortBy,t.columnToggleReversed),t.sortBy&&n()});t.$watch("items",function(){t.totalItems=t.items.length}),t.filterCallback=function(e){t.totalItems=e.length},t.getFilterKeys=function(){return t.itemFilterKeys||[]},t.orderByColumn=function(n){t.columnToggleReversed=!t.columnToggleReversed,t.headersSortingState[n]=t.columnToggleReversed,t.visibleSortingHeader=n,t.items=e("orderBy")(t.items,n,t.columnToggleReversed)}}}}]),angular.module("dynamicPagedListModule",["pascalprecht.translate","ui.bootstrap","compileHtmlModule","seConstantsModule","ngSanitize","paginationFilterModule","yDropDownMenuModule","yPaginationModule","smarteditServicesModule","yLoDashModule","yDataTableModule","iFrameManagerModule","hasOperationPermissionModule","filterByFieldFilterModule"]).controller("dynamicPagedListController",["$log","$filter","SORT_DIRECTIONS","lodash","restServiceFactory",function(e,t,n,i,r){this.orderByColumn=function(e,t){this.internalSortBy=e.property,this.columnSortMode=t,e.sortable&&(this.currentPage=1,this.loadItems())}.bind(this),this.loadItems=function(){this.ready=!1;var t=i.merge(i.cloneDeep(this.config.queryParams||{}),{currentPage:this.currentPage-1,mask:this.mask,pageSize:this.config.itemsPerPage,sort:this.internalSortBy+":"+this.columnSortMode});return r.get(this.config.uri).get(t).then(function(t){return this.items=t.response,0===this.items.length&&e.warn("PagedList: No items returned to display"),this.totalItems=t.pagination.totalCount,this.currentPage=parseInt(t.pagination.page)+1,this.ready=!0,t}.bind(this),function(){e.error("PagedList: Failed to load items")})},this.onCurrentPageChange=function(e){this.currentPage=e,this.loadItems()},this._validateInput=function(){if(!this.config)throw"config object is required";if(!(this.config.keys instanceof Array))throw"keys must be an array";if(this.config.keys.length<1)throw"dynamic paged list requires at least one key";if(!this.config.uri)throw"dynamic paged list requires a uri to fetch the list of items"},this._buildColumnData=function(){this.columns=this.config.keys.map(function(e){var t=i.cloneDeep(e);return t.renderer=this.config.renderers[e.property],t}.bind(this))},this.$onInit=function(){this._validateInput(),this.ready=!1,this.totalItems=0,this.currentPage=1,this.columnSortMode=this.config.reversed?n.DESC:n.ASC,this.internalSortBy=i.cloneDeep(this.config.sortBy),this.oldMask=i.cloneDeep(this.mask),this.columns=[],this._buildColumnData(),this.loadItems(),"function"==typeof this.getApi&&this.getApi({$api:this.api})},this.$doCheck=function(){this.oldMask!==this.mask&&(this.oldMask=this.mask,this.currentPage=1,this.loadItems())},this.api={reloadItems:this.loadItems.bind(this)}}]).component("dynamicPagedList",{templateUrl:"dynamicPagedListTemplate.html",controller:"dynamicPagedListController",bindings:{config:"<",mask:"<?",getApi:"&?"}}),angular.module("paginationFilterModule",[]).filter("startFrom",function(){return function(e,t){return e?(t=+t,e.slice(t)):[]}}),angular.module("yPaginationModule",[]).controller("yPaginationController",function(){this.$onInit=function(){this.exposedModel.$viewChangeListeners.push(this.onPageChange),this.exposedModel.$render=this.onPageChange},this.onPageChange=function(){this.currentPage=this.exposedModel.$modelValue}.bind(this),this.pageChanged=function(){this.exposedModel.$setViewValue(this.currentPage),this.onChange({$currentPage:this.currentPage})}}).component("yPagination",{templateUrl:"yPaginationTemplate.html",controller:"yPaginationController",require:{exposedModel:"ngModel"},bindings:{totalItems:"<",itemsPerPage:"<",boundaryLinks:"<?",onChange:"&"}}),angular.module("yDataTableModule",["seConstantsModule"]).controller("yDataTableController",["SORT_DIRECTIONS",function(e){this._validateInput=function(){if(!(this.columns instanceof Array))throw"Columns must be an array";if(!(this.config instanceof Object))throw"Config must be an object"},this.$onInit=function(){this._validateInput(),this.columnWidth=100/this.columns.length,this.columnToggleReversed=this.config.reversed,this.columnSortMode=this.config.reversed?e.DESC:e.ASC,this.headersSortingState={},this.headersSortingState[this.config.sortBy]=this.config.reversed,this.visibleSortingHeader=this.config.sortBy},this.sortColumn=function(t){t.sortable&&(this.columnToggleReversed=!this.columnToggleReversed,this.headersSortingState[t.property]=this.columnToggleReversed,this.visibleSortingHeader=t.property,this.currentPage=1,this.internalSortBy=t.property,this.columnSortMode=this.columnToggleReversed?e.DESC:e.ASC,this.onSortColumn({$columnKey:t,$columnSortMode:this.columnSortMode}))}.bind(this)}]).component("yDataTable",{templateUrl:"yDataTableTemplate.html",controller:"yDataTableController",bindings:{columns:"<",config:"<",items:"<",onSortColumn:"&"}})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(0),r=(n.n(i),n(1)),o=n(3),a=(n(82),function(){function e(e,t,n){this.iFrameManager=e,this.experienceService=t,this.sharedDataService=n,this.setUpIFrame()}return e.$inject=["iFrameManager","experienceService","sharedDataService"],e.prototype.setUpIFrame=function(){this.iFrameManager.applyDefault(),this.iFrameManager.initializeCatalogPreview(),i.element(document.querySelector("body")).addClass("is-storefront")},e}()),s=i.module("smarteditcontainer",[o.s.name,"configModule","landingPageModule","templateCacheDecoratorModule","ngRoute","ngResource","ui.bootstrap","coretemplates","loadConfigModule","iFrameManagerModule","alertsBoxModule","httpAuthInterceptorModule","experienceInterceptorModule","toolbarModule","leftToolbarModule","modalServiceModule","catalogServiceModule","catalogDetailsModule","experienceSelectorButtonModule","experienceSelectorModule","inflectionPointSelectorModule","paginationFilterModule","resourceLocationsModule","experienceServiceModule","eventServiceModule","perspectiveSelectorModule","authorizationModule","hasOperationPermissionModule","l10nModule","treeModule","yInfiniteScrollingModule","ySelectModule","yHelpModule","crossFrameEventServiceModule","renderServiceModule","systemAlertsModule","yCollapsibleContainerModule","seDropdownModule","permissionServiceModule","yNotificationPanelModule","catalogAwareRouteResolverModule","catalogVersionPermissionModule","httpErrorInterceptorServiceModule","unauthorizedErrorInterceptorModule","resourceNotFoundErrorInterceptorModule","nonvalidationErrorInterceptorModule","previewErrorInterceptorModule","retryInterceptorModule","seConstantsModule","pageSensitiveDirectiveModule","yjqueryModule"]).config(["$provide","readObjectStructureFactory","LANDING_PAGE_PATH","STOREFRONT_PATH","STOREFRONT_PATH_WITH_PAGE_ID","$routeProvider","$logProvider","catalogAwareRouteResolverFunctions",function(e,t,n,i,o,a,s,l){"ngInject";Object(r.o)(e,t(),"smarteditcontainer"),a.when(n,{template:"<landing-page></landing-page>"}).when(i,{templateUrl:"mainview.html",controller:"defaultController",resolve:{setExperience:l.setExperience}}).when(o,{templateUrl:"mainview.html",controller:"defaultController",resolve:{setExperience:l.setExperience}}).otherwise({redirectTo:n}),s.debugEnabled(!1)}]).run(["$rootScope","$log","$q","DEFAULT_RULE_NAME","EVENTS","smartEditBootstrapGateway","toolbarServiceFactory","perspectiveService","gatewayFactory","loadConfigManagerService","bootstrapService","iFrameManager","restServiceFactory","delegateRestService","sharedDataService","urlService","featureService","storageService","renderService","closeOpenModalsOnBrowserBack","authorizationService","permissionService","httpErrorInterceptorService","unauthorizedErrorInterceptor","resourceNotFoundErrorInterceptor","nonValidationErrorInterceptor","previewErrorInterceptor","retryInterceptor","yjQuery","SMARTEDIT_IFRAME_WRAPPER_ID","permissionsRegistrationService",function(e,t,n,i,r,o,a,s,l,c,u,d,p,h,f,g,m,v,y,E,S,_,b,T,C,I,A,w,O,M,P){"ngInject";function R(){O(M).css("padding-top",O(".ySmartEditToolbars").height()+"px")}function D(){var e=window;return e.smartEditBootstrapped&&(e.smartEditBootstrapped={}),e.smartEditBootstrapped}l.initListener(),b.addInterceptor(w),b.addInterceptor(T),b.addInterceptor(C),b.addInterceptor(I),b.addInterceptor(A),c.loadAsObject().then(function(e){f.set("defaultToolingLanguage",e.defaultToolingLanguage)}),a.getToolbarService("smartEditTitleToolbar").addItems([{key:"topToolbar.leftToolbarTemplate",type:"TEMPLATE",include:"leftToolbarWrapperTemplate.html",priority:1,section:"left"},{key:"topToolbar.logoTemplate",type:"TEMPLATE",include:"logoTemplate.html",priority:2,section:"left"},{key:"topToolbar.deviceSupportTemplate",type:"TEMPLATE",include:"deviceSupportTemplate.html",priority:1,section:"right"},{type:"TEMPLATE",key:"topToolbar.experienceSelectorTemplate",className:"ySEPreviewSelector",include:"experienceSelectorWrapperTemplate.html",priority:1,section:"middle"}]),a.getToolbarService("experienceSelectorToolbar").addItems([{key:"bottomToolbar.perspectiveSelectorTemplate",type:"TEMPLATE",section:"right",priority:1,include:"perspectiveSelectorWrapperTemplate.html"}]),o.subscribe("reloadFormerPreviewContext",function(){R();var e=n.defer();return d.initializeCatalogPreview(),e.resolve(),e.promise}),o.subscribe("loading",function(e,t){var i=n.defer();return d.setCurrentLocation(t.location),d.showWaitModal(),delete D()[t.location],s.clearActivePerspective(),i.promise}),o.subscribe("bootstrapSmartEdit",function(e,t){R();var i=n.defer(),r=D();return r[t.location]?i.resolve():(r[t.location]=!0,c.loadAsObject().then(function(e){u.bootstrapSEApp(e),i.resolve()})),i.promise}),o.subscribe("smartEditReady",function(){var e=n.defer();return e.resolve(),d.hideWaitModal(),e.promise}),e.$on("$routeChangeSuccess",function(){E()}),l.createGateway("accessTokens").subscribe("get",function(){return n.when(v.getAuthTokens())}),_.registerDefaultRule({names:[i],verify:function(e){var t=e.map(function(e){return e.name});return S.hasGlobalPermissions(t)}}),P.registerRulesAndPermissions()}]).controller("defaultController",a).name},function(e,t,n){"use strict";var i=n(0);n.n(i);i.module("urlServiceModule",["smarteditServicesModule"]),i.module("sharedDataServiceModule",["smarteditServicesModule"]),i.module("waitDialogServiceModule",["smarteditServicesModule"]),i.module("productServiceModule",["smarteditServicesModule"]),i.module("perspectiveServiceModule",["smarteditServicesModule"]),i.module("siteServiceModule",["smarteditServicesModule"]),i.module("notificationServiceModule",["smarteditServicesModule"]),i.module("notificationMouseLeaveDetectionServiceModule",["smarteditServicesModule"]),i.module("storageServiceModule",["smarteditServicesModule"]),i.module("featureServiceModule",["smarteditServicesModule"]),i.module("bootstrapServiceModule",["cmsSmarteditServicesModule"])},function(e,t,n){"use strict";var i=n(84);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";var i=n(85);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(0),r=(n.n(i),n(86)),o=i.module("toolbarItemContextModule",["crossFrameEventServiceModule","seConstantsModule"]).component("toolbarItemContext",r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={controller:function(){function e(e,t,n){this.crossFrameEventService=e,this.SHOW_TOOLBAR_ITEM_CONTEXT=t,this.HIDE_TOOLBAR_ITEM_CONTEXT=n,this.displayContext=!0}return e.$inject=["crossFrameEventService","SHOW_TOOLBAR_ITEM_CONTEXT","HIDE_TOOLBAR_ITEM_CONTEXT"],e.prototype.$onInit=function(){var e=this;this.unregShowContext=this.crossFrameEventService.subscribe(this.SHOW_TOOLBAR_ITEM_CONTEXT,function(t,n){n===e.itemKey&&e.showContext(!0)}),this.unregHideContext=this.crossFrameEventService.subscribe(this.HIDE_TOOLBAR_ITEM_CONTEXT,function(t,n){n===e.itemKey&&e.showContext(!1)})},e.prototype.$onDestroy=function(){this.unregShowContext(),this.unregHideContext()},e.prototype.showContext=function(e){this.displayContext=e},e}(),controllerAs:"$ctrl",templateUrl:"toolbarItemContextTemplate.html",bindings:{itemKey:"<",contextTemplateUrl:"<",itemIsOpen:"<"}}}]);