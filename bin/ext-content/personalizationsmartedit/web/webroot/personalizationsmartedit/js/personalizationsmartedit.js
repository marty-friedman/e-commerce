!function(t){function e(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){function o(t){t.keys().forEach(function(e){a[e]=t(e)})}var a={};o(n(3)),o(n(16))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=(n.n(o),n(0));n.n(a);o.module("personalizationsmarteditmodule",["decoratorServiceModule","personalizationsmarteditContextServiceModule","personalizationsmarteditComponentLightUpDecorator","personalizationsmarteditCombinedViewComponentLightUpDecorator","personalizationsmarteditContextMenu","personalizationsmarteditCommons","personalizationsmarteditSharedSlotDecorator","featureServiceModule","personalizationsmarteditShowActionListModule","personalizationsmarteditShowComponentInfoListModule","yjqueryModule","personalizationsmarteditContextualMenuServiceModule","externalComponentDecoratorModule","externalComponentButtonModule","personalizationsmarteditComponentHandlerServiceModule","personalizationsmarteditExternalComponentDecoratorModule"]).directive("body",["personalizationsmarteditContextService",function(t){"ngInject";return{link:function(e,n,o){e.$watch("element.class",function(){var e=n.attr("class").split(" ").filter(function(t){return/smartedit-page-uid\-(\S+)/.test(t)});if(e.length>0){var o=/smartedit-page-uid\-(\S+)/.exec(e[0])[1];t.setPageId(o),e.length>1&&console.log("more than one page- class element attribute defined")}},!0)}}}]).run(["yjQuery","domain",function(t,e){"ngInject";!function(e){var n=t("<link rel='stylesheet' type='text/css' href='"+e+"'>");t("head").append(n)}(e+"/personalizationsmartedit/css/style.css")}]).run(["$q","personalizationsmarteditComponentHandlerService","decoratorService","featureService",function(t,e,n,o){"ngInject";n.addMappings({"^.*Slot$":["personalizationsmarteditSharedSlot"]}),n.addMappings({"^.*Component$":["personalizationsmarteditComponentLightUp","personalizationsmarteditCombinedViewComponentLightUp"]}),n.addMappings({"^((?!Slot).)*$":["personalizationsmarteditExternalComponentDecorator"]}),o.addDecorator({key:"personalizationsmarteditExternalComponentDecorator",nameI18nKey:"personalizationsmarteditExternalComponentDecorator",displayCondition:function(n,o){var a=e.getOriginalComponent(o,n),i=e.getParentContainerForComponent(a);return i.length>0&&i[0].attributes["data-smartedit-personalization-action-id"]?t.when(!1):t.when(e.isExternalComponent(o,n))}}),o.addDecorator({key:"personalizationsmarteditComponentLightUp",nameI18nKey:"personalizationsmarteditComponentLightUp"}),o.addDecorator({key:"personalizationsmarteditCombinedViewComponentLightUp",nameI18nKey:"personalizationsmarteditCombinedViewComponentLightUp"}),o.addDecorator({key:"personalizationsmarteditSharedSlot",nameI18nKey:"personalizationsmarteditSharedSlot"})}]).run(["personalizationsmarteditContextualMenuService","personalizationsmarteditContextServiceProxy","personalizationsmarteditContextModalHelper","featureService",function(t,e,n,o){"ngInject";o.addContextualMenuButton({key:"personalizationsmartedit.context.show.action.list",i18nKey:"personalization.context.action.list.show",nameI18nKey:"personalization.context.action.list.show",regexpKeys:["^.*Component$"],condition:function(e){return t.isContextualMenuShowActionListEnabled(e)},action:{template:'<personalizationsmartedit-show-action-list data-component="componentDetails"></personalizationsmartedit-show-action-list>'},displayClass:"showactionlistbutton",displayIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon--small",permissions:["se.read.page"],priority:500}),o.addContextualMenuButton({key:"personalizationsmartedit.context.info.action",i18nKey:"personalization.context.action.info",nameI18nKey:"personalization.context.action.info",regexpKeys:["^.*Component$"],condition:function(e){return t.isContextualMenuInfoItemEnabled(e.element)},action:{template:'<personalizationsmartedit-show-component-info-list data-component="componentDetails"></personalizationsmartedit-show-component-info-list>'},displayClass:"infoactionbutton",displayIconClass:"hyicon hyicon-msginfo cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-msginfo cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:510}),o.addContextualMenuButton({key:"personalizationsmartedit.context.add.action",i18nKey:"personalization.context.action.add",nameI18nKey:"personalization.context.action.add",regexpKeys:["^.*Component$"],condition:function(e){return t.isContextualMenuAddItemEnabled(e)},callback:function(t,e){n.openAddAction(t)},displayClass:"addactionbutton",displayIconClass:"hyicon hyicon-addlg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-addlg cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:520}),o.addContextualMenuButton({key:"personalizationsmartedit.context.component.edit.action",i18nKey:"personalization.context.component.action.edit",nameI18nKey:"personalization.context.component.action.edit",regexpKeys:["^.*Component$"],condition:function(e){return t.isContextualMenuEditComponentItemEnabled(e)},callback:function(t,e){n.openEditComponentAction(t)},displayClass:"editbutton",displayIconClass:"hyicon hyicon-edit cmsx-ctx__icon",displaySmallIconClass:"hyicon hyicon-edit cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:530}),o.addContextualMenuButton({key:"personalizationsmartedit.context.edit.action",i18nKey:"personalization.context.action.edit",nameI18nKey:"personalization.context.action.edit",regexpKeys:["^.*Component$"],condition:function(e){return t.isContextualMenuEditItemEnabled(e)},callback:function(t,e){n.openEditAction(t)},displayClass:"replaceactionbutton",displayIconClass:"hyicon hyicon-change cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-change cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:540}),o.addContextualMenuButton({key:"personalizationsmartedit.context.delete.action",i18nKey:"personalization.context.action.delete",nameI18nKey:"personalization.context.action.delete",regexpKeys:["^.*Component$"],condition:function(e){return t.isContextualMenuDeleteItemEnabled(e)},callback:function(t,e){n.openDeleteAction(t)},displayClass:"removeactionbutton",displayIconClass:"hyicon hyicon-removelg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-removelg cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:550})}])},function(t,e){t.exports=angular},function(t,e,n){function o(t){return n(a(t))}function a(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./combinedView/personalizationsmarteditCombinedViewComponentLightUpDecorator.js":4,"./componentLightUpDecorator/personalizationsmarteditComponentLightUpDecorator.js":5,"./contextMenu/personalizationsmarteditContextMenu.js":6,"./contextMenu/personalizationsmarteditShowActionList/personalizationsmarteditShowActionList.js":7,"./contextMenu/personalizationsmarteditShowComponentInfoList/personalizationsmarteditShowComponentInfoList.js":8,"./externalComponentDecorator/personalizationsmarteditExternalComponentDecorator.js":9,"./requireLegacyJsFiles.js":0,"./service/personalizationsmarteditComponentHandlerService.js":10,"./service/personalizationsmarteditContextService.js":11,"./service/personalizationsmarteditContextualMenuService.js":12,"./service/personalizationsmarteditRestService.js":13,"./sharedSlotDecorator/personalizationsmarteditSharedSlotDecorator.js":14,"./templates.js":15};o.keys=function(){return Object.keys(i)},o.resolve=a,t.exports=o,o.id=3},function(t,e){angular.module("personalizationsmarteditCombinedViewComponentLightUpDecorator",["personalizationsmarteditTemplates","personalizationsmarteditContextServiceModule"]).directive("personalizationsmarteditCombinedViewComponentLightUp",["personalizationsmarteditContextService","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",function(t,e){return{templateUrl:"personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,scope:{smarteditComponentId:"@",smarteditComponentType:"@"},link:function(n,o){var a=[];Object.keys(e).forEach(function(t,n){a.push(e[n].borderClass)}),a=a.join(" "),n.letterForElement="",n.classForElement="",n.getPersonalizationComponentBorderClass=function(){var i=t.getCombinedView();if(i.enabled){var r=o.parent().closest('[class~="smartEditComponentX"][data-smartedit-container-source-id][data-smartedit-container-type="CxCmsComponentContainer"][data-smartedit-personalization-customization-id][data-smartedit-personalization-variation-id]');r.length>0&&(r.removeClass(a),(i.selectedItems||[]).forEach(function(t,o){var a=r.data().smarteditPersonalizationCustomizationId===t.customization.code;a=a&&r.data().smarteditPersonalizationVariationId===t.variation.code;var i=o%Object.keys(e).length;a&&(r.addClass(e[i].borderClass),n.letterForElement=String.fromCharCode("a".charCodeAt()+i).toUpperCase(),n.classForElement=e[i].listClass)}))}}}}}])},function(t,e){angular.module("personalizationsmarteditComponentLightUpDecorator",["yjqueryModule","personalizationsmarteditTemplates","personalizationsmarteditContextServiceModule","personalizationsmarteditComponentHandlerServiceModule","componentHandlerServiceModule"]).directive("personalizationsmarteditComponentLightUp",["yjQuery","personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","CONTAINER_SOURCE_ID_ATTR","OVERLAY_COMPONENT_CLASS","CONTAINER_TYPE_ATTRIBUTE","ID_ATTRIBUTE","TYPE_ATTRIBUTE","CATALOG_VERSION_UUID_ATTRIBUTE",function(t,e,n,o,a,i,r,s,l){return{templateUrl:"personalizationsmarteditComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,scope:{smarteditComponentId:"@",smarteditComponentType:"@"},link:function(c,d){var m='[class~="'+a+'"]['+o+"]["+i+'="CxCmsComponentContainer"]',p='[class~="'+a+'"]['+i+'="CxCmsComponentContainer"][data-smartedit-personalization-action-id]',u="["+r+"]["+l+"]["+s+"]",g=function(){var o=!1;if(angular.isArray(e.getCustomize().selectedVariations)){var a=n.getParentContainerIdForComponent(d);o=t.inArray(a,e.getCustomize().selectedComponents)>-1}return o},C=function(t){var n=!1,o=e.getCustomize();return o.selectedCustomization&&o.selectedVariations&&(n=t.closest(p).length>0),n};c.getPersonalizationComponentBorderClass=function(){var t=d.parent().closest(u),e=t.closest(m);e.toggleClass("perso__component-decorator",C(t)),e.toggleClass("hyicon hyicon-checkedlg perso__component-decorator-icon",C(t)),e.toggleClass("personalizationsmarteditComponentSelected",g())}}}}])},function(t,e){angular.module("personalizationsmarteditContextMenu",["personalizationsmarteditComponentHandlerServiceModule","gatewayProxyModule"]).factory("personalizationsmarteditContextModal",["gatewayProxy",function(t){var e=function(){this.gatewayId="personalizationsmarteditContextModal",t.initForService(this)};return e.prototype.openDeleteAction=function(){},e.prototype.openAddAction=function(){},e.prototype.openEditAction=function(){},e.prototype.openEditComponentAction=function(){},new e}]).factory("personalizationsmarteditContextModalHelper",["personalizationsmarteditContextModal","personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService",function(t,e,n){var o={},a=function(){return e.getCombinedView().enabled?e.getCombinedView().customize.selectedVariations.code:e.getCustomize().selectedVariations.code},i=function(t){if(e.getCombinedView().enabled){var n=e.getCombinedView().customize.selectedCustomization;return!n&&t&&(n=e.getCombinedView().selectedItems.filter(function(e){return e.customization.code===t})[0].customization),n}return e.getCustomize().selectedCustomization},r=function(t){var e=n.getAllSlotsSelector();e+=' [data-smartedit-container-source-id="'+t+'"]';var o=n.getFromSelector(e);return Array.prototype.slice.call(o.map(function(){return n.getParentSlotIdForComponent(n.getFromSelector(this))}))};return o.openDeleteAction=function(e){var n=angular.fromJson(e.properties),o={};o.containerId=e.containerId,o.containerSourceId=n.smarteditContainerSourceId,o.slotId=e.slotId,o.actionId=n.smarteditPersonalizationActionId||null,o.selectedVariationCode=n.smarteditPersonalizationVariationId||null,o.selectedCustomizationCode=n.smarteditPersonalizationCustomizationId||null;var a=n.smarteditCatalogVersionUuid.split("/");o.componentCatalog=a[0],o.componentCatalogVersion=a[1];var s=i(o.selectedCustomizationCode);return o.catalog=s.catalog,o.catalogVersion=s.catalogVersion,o.slotsToRefresh=r(n.smarteditContainerSourceId),t.openDeleteAction(o)},o.openAddAction=function(e){var o=angular.fromJson(e.properties),s={};s.componentType=e.componentType,s.componentId=e.componentId,s.containerId=e.containerId,s.containerSourceId=o.smarteditContainerSourceId,s.slotId=e.slotId,s.actionId=o.smarteditPersonalizationActionId||null,s.selectedVariationCode=a();var l=o.smarteditCatalogVersionUuid.split("/");s.componentCatalog=l[0];var c=i();s.catalog=c.catalog,s.selectedCustomizationCode=c.code;var d=n.getParentSlotForComponent(e.element),m=n.getCatalogVersionUuid(d).split("/");return s.slotCatalog=m[0],s.slotsToRefresh=r(o.smarteditContainerSourceId),s.slotsToRefresh.push(e.slotId),t.openAddAction(s)},o.openEditAction=function(e){var n=angular.fromJson(e.properties),o={};return o.componentType=e.componentType,o.componentId=e.componentId,o.containerId=e.containerId,o.containerSourceId=n.smarteditContainerSourceId,o.slotId=e.slotId,o.actionId=n.smarteditPersonalizationActionId||null,o.selectedVariationCode=n.smarteditPersonalizationVariationId||null,o.selectedCustomizationCode=n.smarteditPersonalizationCustomizationId||null,o.componentUuid=n.smarteditComponentUuid||null,o.slotsToRefresh=r(n.smarteditContainerSourceId),t.openEditAction(o)},o.openEditComponentAction=function(e){var n=angular.fromJson(e.properties),o={};return o.smarteditComponentType=n.smarteditComponentType,o.smarteditComponentUuid=n.smarteditComponentUuid,o.smarteditCatalogVersionUuid=n.smarteditCatalogVersionUuid,t.openEditComponentAction(o)},o}])},function(t,e){angular.module("personalizationsmarteditShowActionListModule",["personalizationsmarteditCommons","personalizationsmarteditContextServiceModule","personalizationsmarteditComponentHandlerServiceModule"]).controller("personalizationsmarteditShowActionListController",["personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditComponentHandlerService",function(t,e,n){var o=this;this.initItem=function(t){t.visible=!1,(t.variation.actions||[]).forEach(function(e){e.containerId&&e.containerId===o.containerSourceId&&(t.visible=!0)}),e.getAndSetCatalogVersionNameL10N(t.variation)},this.isCustomizationFromCurrentCatalog=function(n){return e.isItemFromCurrentCatalog(n,t.getSeData())},this.$onInit=function(){o.selectedItems=t.getCombinedView().selectedItems,o.containerSourceId=n.getContainerSourceIdForContainerId(o.component.containerId),o.getClassForElement=e.getClassForElement,o.getLetterForElement=e.getLetterForElement}}]).component("personalizationsmarteditShowActionList",{templateUrl:"personalizationsmarteditShowActionListTemplate.html",controller:"personalizationsmarteditShowActionListController",controllerAs:"ctrl",transclude:!1,bindings:{component:"<"}})},function(t,e){angular.module("personalizationsmarteditShowComponentInfoListModule",["personalizationsmarteditCommons","personalizationsmarteditContextServiceModule","personalizationsmarteditRestServiceModule","personalizationsmarteditDataUtils","personalizationsmarteditComponentHandlerServiceModule"]).controller("personalizationsmarteditShowComponentInfoListController",["personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditRestService","personalizationsmarteditMessageHandler","$filter","PaginationHelper","personalizationsmarteditComponentHandlerService",function(t,e,n,o,a,i,r){var s=this;this.isCustomizationFromCurrentCatalog=function(n){return!!n&&e.isItemFromCurrentCatalog(n,t.getSeData())},this.customizationVisible=function(){return!!s.actions&&(!s.isContainerIdEmpty&&s.actions.length>0)};var l=function(){return{currentSize:s.initPageSize,currentPage:s.pagination.page+1}},c=function(t,r){n.getCxCmsAllActionsForContainer(t,r).then(function(t){s.actions=s.actions||{};var n=t.actions||{};n.forEach(function(t){t.customization={},t.customization.catalog=t.actionCatalog,t.customization.catalogVersion=t.actionCatalogVersion,e.getAndSetCatalogVersionNameL10N(t.customization)}),Array.prototype.push.apply(s.actions,n),s.pagination=new i(t.pagination),s.moreCustomizationsRequestProcessing=!1},function(){o.sendError(a("translate")("personalization.error.gettingactions")),s.moreCustomizationsRequestProcessing=!1})};this.addMoreItems=function(){s.pagination.page<s.pagination.totalPages-1&&!s.moreCustomizationsRequestProcessing&&!s.isContainerIdEmpty&&(s.moreCustomizationsRequestProcessing=!0,c(s.containerSourceId,l()))},this.$onInit=function(){s.initPageSize=25,s.moreCustomizationsRequestProcessing=!1,s.isContainerIdEmpty=!s.component.containerId,s.pagination=new i,s.pagination.reset(),s.containerSourceId=r.getContainerSourceIdForContainerId(s.component.containerId)}}]).component("personalizationsmarteditShowComponentInfoList",{templateUrl:"personalizationsmarteditShowComponentInfoListTemplate.html",controller:"personalizationsmarteditShowComponentInfoListController",controllerAs:"ctrl",transclude:!1,bindings:{component:"<"}})},function(t,e){angular.module("personalizationsmarteditExternalComponentDecoratorModule",[]).directive("personalizationsmarteditExternalComponentDecorator",function(){return{templateUrl:"externalComponentDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(t,e){angular.module("personalizationsmarteditComponentHandlerServiceModule",["smarteditServicesModule"]).constant("COMPONENT_CONTAINER_TYPE","CxCmsComponentContainer").constant("CONTAINER_SOURCE_ID_ATTR","data-smartedit-container-source-id").factory("personalizationsmarteditComponentHandlerService",["componentHandlerService","CONTAINER_TYPE_ATTRIBUTE","COMPONENT_CONTAINER_TYPE","CONTAINER_ID_ATTRIBUTE","TYPE_ATTRIBUTE","CONTENT_SLOT_TYPE","CONTAINER_SOURCE_ID_ATTR",function(t,e,n,o,a,i,r){var s=this;return s.getParentContainerForComponent=function(t){return t.closest("["+e+"="+n+"]")},s.getParentContainerIdForComponent=function(t){return t.closest("["+e+"="+n+"]").attr(o)},s.getParentSlotForComponent=function(t){return t.closest("["+a+"="+i+"]")},s.getParentSlotIdForComponent=function(e){return t.getParentSlotForComponent(e)},s.getOriginalComponent=function(e,n){return t.getOriginalComponent(e,n)},s.isExternalComponent=function(e,n){return t.isExternalComponent(e,n)},s.getCatalogVersionUuid=function(e){return t.getCatalogVersionUuid(e)},s.getAllSlotsSelector=function(){return t.getAllSlotsSelector()},s.getFromSelector=function(e){return t.getFromSelector(e)},s.getContainerSourceIdForContainerId=function(t){var e=s.getAllSlotsSelector();e+=" ["+o+'="'+t+'"]';var n=s.getFromSelector(e);return n[0]?n[0].getAttribute(r):""},s}])},function(t,e){angular.module("personalizationsmarteditContextServiceModule",["yjqueryModule","personalizationsmarteditCommons","contextualMenuServiceModule","personalizationsmarteditContextUtilsModule"]).factory("personalizationsmarteditContextService",["yjQuery","personalizationsmarteditContextServiceReverseProxy","contextualMenuService","personalizationsmarteditContextUtils",function(t,e,n,o){var a=o.getContextObject(),i=new e("PersonalizationCtxReverseGateway");return a.getPersonalization=function(){return a.personalization},a.setPersonalization=function(t){a.personalization=t,n.refreshMenuItems()},a.getCustomize=function(){return a.customize},a.setCustomize=function(t){a.customize=t,n.refreshMenuItems()},a.getCombinedView=function(){return a.combinedView},a.setCombinedView=function(t){a.combinedView=t,n.refreshMenuItems()},a.getSeData=function(){return a.seData},a.setSeData=function(t){a.seData=t},a.applySynchronization=function(){i.applySynchronization()},a.setPageId=function(t){a.seData.pageId=t,i.setPageId(t)},a}]).factory("personalizationsmarteditContextServiceProxy",["gatewayProxy","personalizationsmarteditContextService",function(t,e){var n=function(e){this.gatewayId=e,t.initForService(this)};return n.prototype.setPersonalization=function(t){e.setPersonalization(t)},n.prototype.setCustomize=function(t){e.setCustomize(t)},n.prototype.setCombinedView=function(t){e.setCombinedView(t)},n.prototype.setSeData=function(t){e.setSeData(t)},new n("PersonalizationCtxGateway")}]).factory("personalizationsmarteditContextServiceReverseProxy",["gatewayProxy",function(t){var e=function(e){this.gatewayId=e,t.initForService(this)};return e.prototype.applySynchronization=function(){},e.prototype.setPageId=function(){},e}])},function(t,e){angular.module("personalizationsmarteditContextualMenuServiceModule",["personalizationsmarteditContextServiceModule","personalizationsmarteditComponentHandlerServiceModule","personalizationsmarteditCommons","yjqueryModule"]).factory("personalizationsmarteditContextualMenuService",["personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","yjQuery","personalizationsmarteditUtils",function(t,e,n,o){var a,i,r,s,l={},c=function(){a=t.getPersonalization(),i=t.getCustomize(),r=t.getCombinedView(),s=t.getSeData()},d=function(t){return angular.isObject(t.selectedCustomization)&&angular.isObject(t.selectedVariations)&&!angular.isArray(t.selectedVariations)},m=function(){return d(i)||r.enabled&&d(r.customize)},p=function(t){return r.enabled?n.inArray(t.componentAttributes.smarteditContainerSourceId,r.customize.selectedComponents)>-1:n.inArray(t.componentAttributes.smarteditContainerSourceId,i.selectedComponents)>-1},u=function(t){var n=e.getParentSlotForComponent(t.element),o=e.getCatalogVersionUuid(n);return s.seExperienceData.catalogDescriptor.catalogVersionUuid===o},g=function(t){return s.seExperienceData.catalogDescriptor.catalogVersionUuid===t.smarteditCatalogVersionUuid},C=function(){var e=i.selectedCustomization||r.customize.selectedCustomization;return!!e&&o.isItemFromCurrentCatalog(e,t.getSeData())},f=function(e){var n=(r.selectedItems||[]).filter(function(t){return t.customization.code===e.smarteditPersonalizationCustomizationId&&t.variation.code===e.smarteditPersonalizationVariationId});return!!(n=n.shift())&&o.isItemFromCurrentCatalog(n.customization,t.getSeData())};return l.isContextualMenuAddItemEnabled=function(t){c();var e=m();return e=e&&!p(t),e=e&&u(t),e=e&&C()},l.isContextualMenuEditItemEnabled=function(t){c();var e=a.enabled,n=angular.fromJson(t.properties);return e=e&&angular.isDefined(n.smarteditPersonalizationActionId),e=e&&u(t),e=e&&(C()||f(n))},l.isContextualMenuDeleteItemEnabled=l.isContextualMenuEditItemEnabled,l.isContextualMenuShowActionListEnabled=function(t){c();var e=angular.fromJson(t.properties),n=angular.isDefined(e.smarteditPersonalizationActionId);return n=n&&r.enabled,n=n&&!r.customize.selectedCustomization},l.isContextualMenuInfoItemEnabled=function(){c();var t=a.enabled;return t=t&&!angular.isObject(i.selectedVariations),t=t||angular.isArray(i.selectedVariations),t=t&&!r.enabled},l.isContextualMenuEditComponentItemEnabled=function(t){c();var e=a.enabled,n=angular.fromJson(t.properties);return e=e&&!r.enabled&&g(n)},l}])},function(t,e){angular.module("personalizationsmarteditRestServiceModule",["smarteditServicesModule","personalizationsmarteditCommons","personalizationsmarteditContextServiceModule"]).factory("personalizationsmarteditRestService",["restServiceFactory","personalizationsmarteditUtils","personalizationsmarteditContextService",function(t,e,n){var o=function(t,e){e=e||{};var o=n.getSeData().seExperienceData,a={catalogId:e.catalog||o.catalogDescriptor.catalogId,catalogVersion:e.catalogVersion||o.catalogDescriptor.catalogVersion};return t=angular.extend(t,a)},a={};return a.getCxCmsAllActionsForContainer=function(e,n){n=n||{};var a=t.get("/personalizationwebservices/v1/catalogs/:catalogId/catalogVersions/:catalogVersion/actions"),i={type:"CXCMSACTION",customizationStatus:"ENABLED",variationStatus:"ENABLED",catalogs:"ALL",needsTotal:!0,containerId:e};return i=o(i),i.pageSize=n.currentSize||25,i.currentPage=n.currentPage||0,a.get(i)},a}])},function(t,e){angular.module("personalizationsmarteditSharedSlotDecorator",["slotSharedServiceModule"]).controller("personalizationsmarteditSharedSlotController",["slotSharedService","$element",function(t,e){var n=this,o=function(){e.offset().top<=e.find(".decorative-panel-area").height()&&e.find(".decorative-panel-area").css("margin-top",e.find(".decorator-padding-container").height())};this.$onChanges=function(t){t.active&&t.active.currentValue&&(o(),n.isPopupOpened=!1)},this.$onInit=function(){n.slotSharedFlag=!1,t.isSlotShared(n.smarteditComponentId).then(function(t){n.slotSharedFlag=t})}}]).directive("personalizationsmarteditSharedSlot",function(){return{templateUrl:"personalizationsmarteditSharedSlotDecoratorTemplate.html",restrict:"C",controller:"personalizationsmarteditSharedSlotController",controllerAs:"ctrl",scope:{},transclude:!0,bindToController:{smarteditComponentId:"@",active:"<"}}})},function(t,e){angular.module("personalizationsmarteditTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/personalizationsmartedit/combinedView/personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",'<div ng-class="getPersonalizationComponentBorderClass()">\n    <div ng-class="classForElement">{{letterForElement}}</div>\n    <div data-ng-transclude></div>\n</div>'),t.put("web/features/personalizationsmartedit/componentLightUpDecorator/personalizationsmarteditComponentLightUpDecoratorTemplate.html",'<div ng-class="getPersonalizationComponentBorderClass()">\n    <div data-ng-transclude></div>\n</div>'),t.put("web/features/personalizationsmartedit/contextMenu/personalizationsmarteditShowActionList/personalizationsmarteditShowActionListTemplate.html",'<div class="pe-combinedview-ranking">\n    <div class="pe-combinedview-ranking__info-layout">\n        <div class="pe-combinedview-ranking__title"\n            data-translate="personalization.modal.showactionlist.title"></div>\n        <div class="perso__page-level-help-message"\n            data-translate="personalization.modal.showactionlist.help.label"></div>\n    </div>\n    <div class="pe-combinedview-ranking__list-item"\n        data-ng-repeat="item in ctrl.selectedItems"\n        data-ng-init="ctrl.initItem(item)"\n        data-ng-show="item.visible">\n        <div class="pe-combinedview-ranking__letter-layout">\n            <div data-ng-class="ctrl.getClassForElement($index)"\n                data-ng-bind="ctrl.getLetterForElement($index)"></div>\n        </div>\n        <div class="pe-combinedview-ranking__names-layout">\n            <div class="perso-wrap-ellipsis pe-combinedview-ranking__cname"\n                data-ng-bind="item.customization.name"\n                title="{{item.customization.name}}"></div>\n            <div class="perso-wrap-ellipsis pe-combinedview-ranking__vname"\n                data-ng-bind="item.variation.name"\n                title="{{item.variation.name}}"></div>\n        </div>\n        <div class="pe-combinedview-ranking__icon">\n            <span data-ng-if="!ctrl.isCustomizationFromCurrentCatalog(item.customization)"\n                class="perso__globe-icon hyicon hyicon-globe"\n                data-uib-tooltip="{{item.variation.catalogVersionNameL10N}}"\n                data-tooltip-placement="top right"></span>\n        </div>\n    </div>\n</div>'),t.put("web/features/personalizationsmartedit/contextMenu/personalizationsmarteditShowComponentInfoList/personalizationsmarteditShowComponentInfoListTemplate.html",'<div class="pe-component-info">\n    <div class="pe-component-info__info-layout">\n        <div class="pe-component-info__title"\n            data-translate="personalization.modal.showcomponentinfolist.title"></div>\n        <div class="perso__page-level-help-message"\n            data-ng-show="ctrl.pagination.totalCount > 0"\n            data-translate="personalization.modal.showcomponentinfolist.help.label"></div>\n\n        <div class="perso__page-level-help-message"\n            data-ng-show="ctrl.pagination.totalCount === 0"\n            data-translate="personalization.modal.showcomponentinfolist.help.nocustomizations">\n        </div>\n    </div>\n    <div class="perso__page-level-help-message pe-component-info__info-layout"\n        data-ng-show="ctrl.pagination.totalCount > 0">\n        <span data-ng-bind="ctrl.pagination.totalCount"></span>\n        <span data-translate="personalization.modal.showcomponentinfolist.help.numberofenabledcustomizations"></span>\n    </div>\n    <div class="pe-component-info__wrapper"\n        personalization-infinite-scroll="ctrl.addMoreItems()"\n        personalization-infinite-scroll-distance="2">\n        <div data-ng-class="ctrl.customizationVisible() ? \'pe-component-info__list-item\':\'\'"\n            data-ng-repeat="item in ctrl.actions">\n            <div class="pe-component-info__names-layout">\n                <div class="perso-wrap-ellipsis pe-component-info__cname"\n                    data-ng-bind="item.customizationName"\n                    title="{{item.customizationName}}"></div>\n                <div class="perso-wrap-ellipsis pe-component-info__vname"\n                    data-ng-bind="item.variationName"\n                    title="{{item.variationName}}"></div>\n            </div>\n            <div data-ng-class="ctrl.customizationVisible() ? \'pe-component-info__icon\':\'\'">\n                <span data-ng-show="!ctrl.isCustomizationFromCurrentCatalog(item.customization)"\n                    data-ng-class="ctrl.customizationVisible()?\'perso__globe-icon hyicon hyicon-globe\':\'\'"\n                    data-uib-tooltip="{{item.customization.catalogVersionNameL10N}}"\n                    data-tooltip-placement="top right"></span>\n            </div>\n        </div>\n        <div data-ng-show="ctrl.moreCustomizationsRequestProcessing">\n            <div data-ng-include="\'waitDialog.html\'"></div>\n        </div>\n    </div>\n</div>'),t.put("web/features/personalizationsmartedit/sharedSlotDecorator/personalizationsmarteditSharedSlotDecoratorTemplate.html",'<div>\n    <div class="cmsx-ctx-wrapper1 se-slot-contextual-menu-level1">\n        <div class="cmsx-ctx-wrapper2 se-slot-contextual-menu-level2">\n            <div class="decorative-panel-area"\n                data-ng-if="ctrl.active && ctrl.slotSharedFlag">\n                <div class="decorator-panel-padding-center"></div>\n                <div class="decorative-panel-slot-contextual-menu">\n                    <div class="shared-slot-button-template"\n                        data-ng-if="ctrl.slotSharedFlag">\n                        <div class="btn-group se-slot-ctx-menu__btn-group"\n                            data-uib-dropdown\n                            data-dropdown-append-to="\'#smarteditoverlay\'"\n                            data-auto-close="outsideClick"\n                            data-is-open="ctrl.isPopupOpened">\n                            <button type="button"\n                                data-uib-dropdown-toggle\n                                class="btn btn-primary shared-slot-button-template__btn se-slot-ctx-menu__divider"\n                                data-ng-class="{\'ySESharedSlotOpen\': ctrl.isPopupOpened}"\n                                id="sharedSlotButton-{{::ctrl.smarteditComponentId}}">\n                                <span class="hyicon hyicon-linked se-slot-ctx-menu__icon-shared"></span>\n                            </button>\n                            <div class="dropdown-menu dropdown-menu-right btn-block shared-slot__dropdown"\n                                data-uib-dropdown-menu>\n                                <div class="shared-slot__description"\n                                    data-translate="personalization.slot.shared.popover.message"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="decorator-padding-container">\n                <div class="decorator-padding-left"\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div data-ng-class="ctrl.active && ctrl.slotSharedFlag ? \'decorator-slot-border active\' : \'\'"></div>\n                <div class="yWrapperData"\n                    data-ng-transclude\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div class="decorator-padding-right"\n                    data-ng-class="{active: ctrl.active}"></div>\n            </div>\n        </div>\n    </div>\n</div>')}])},function(t,e,n){function o(t){return n(a(t))}function a(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./personalizationsmarteditCommons.js":17,"./personalizationsmarteditContextUtils.js":18,"./personalizationsmarteditDataUtils.js":19,"./personalizationsmarteditDateUtils.js":20,"./personalizationsmarteditInfiniteScroll.js":21,"./personalizationsmarteditPagination/personalizationsmarteditPagination.js":22,"./personalizationsmarteditScrollZone/personalizationsmarteditScrollZone.js":23,"./templates.js":24};o.keys=function(){return Object.keys(i)},o.resolve=a,t.exports=o,o.id=16},function(t,e){angular.module("personalizationsmarteditCommons",["personalizationcommonsTemplates","yjqueryModule","alertServiceModule","languageServiceModule","seConstantsModule","l10nModule","catalogServiceModule"]).constant("PERSONALIZATION_MODEL_STATUS_CODES",{ENABLED:"ENABLED",DISABLED:"DISABLED"}).constant("PERSONALIZATION_VIEW_STATUS_MAPPING_CODES",{ALL:"ALL",ENABLED:"ENABLED",DISABLED:"DISABLED"}).constant("PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",{0:{borderClass:"personalizationsmarteditComponentSelected0",listClass:"personalizationsmarteditComponentSelectedList0"},1:{borderClass:"personalizationsmarteditComponentSelected1",listClass:"personalizationsmarteditComponentSelectedList1"},2:{borderClass:"personalizationsmarteditComponentSelected2",listClass:"personalizationsmarteditComponentSelectedList2"},3:{borderClass:"personalizationsmarteditComponentSelected3",listClass:"personalizationsmarteditComponentSelectedList3"},4:{borderClass:"personalizationsmarteditComponentSelected4",listClass:"personalizationsmarteditComponentSelectedList4"},5:{borderClass:"personalizationsmarteditComponentSelected5",listClass:"personalizationsmarteditComponentSelectedList5"},6:{borderClass:"personalizationsmarteditComponentSelected6",listClass:"personalizationsmarteditComponentSelectedList6"},7:{borderClass:"personalizationsmarteditComponentSelected7",listClass:"personalizationsmarteditComponentSelectedList7"},8:{borderClass:"personalizationsmarteditComponentSelected8",listClass:"personalizationsmarteditComponentSelectedList8"},9:{borderClass:"personalizationsmarteditComponentSelected9",listClass:"personalizationsmarteditComponentSelectedList9"},10:{borderClass:"personalizationsmarteditComponentSelected10",listClass:"personalizationsmarteditComponentSelectedList10"},11:{borderClass:"personalizationsmarteditComponentSelected11",listClass:"personalizationsmarteditComponentSelectedList11"},12:{borderClass:"personalizationsmarteditComponentSelected12",listClass:"personalizationsmarteditComponentSelectedList12"},13:{borderClass:"personalizationsmarteditComponentSelected13",listClass:"personalizationsmarteditComponentSelectedList13"},14:{borderClass:"personalizationsmarteditComponentSelected14",listClass:"personalizationsmarteditComponentSelectedList14"}}).run(["$rootScope","PERSONALIZATION_MODEL_STATUS_CODES",function(t,e){t.PERSONALIZATION_MODEL_STATUS_CODES=e}]).filter("statusNotDeleted",["personalizationsmarteditUtils",function(t){return function(e){return angular.isArray(e)?t.getVisibleItems(e):e}}]).factory("personalizationsmarteditUtils",["$q","$filter","PERSONALIZATION_MODEL_STATUS_CODES","PERSONALIZATION_VIEW_STATUS_MAPPING_CODES","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING","l10nFilter","catalogService",function(t,e,n,o,a,i,r){var s={};return s.pushToArrayIfValueExists=function(t,e,n){n&&t.push({key:e,value:n})},s.getVariationCodes=function(t){return void 0===t||null===t?[]:t.map(function(t){return t.code}).filter(function(t){return void 0!==t})},s.getVariationKey=function(t,e){return void 0===t||void 0===e?[]:e.map(function(e){return{variationCode:e.code,customizationCode:t,catalog:e.catalog,catalogVersion:e.catalogVersion}})},s.getSegmentTriggerForVariation=function(t){var e=(t.triggers||[]).filter(function(t){return"segmentTriggerData"===t.type});return 0===e.length?{}:e[0]},s.isPersonalizationItemEnabled=function(t){return t.status===n.ENABLED},s.getEnablementTextForCustomization=function(t,n){return n=n||"personalization",s.isPersonalizationItemEnabled(t)?e("translate")(n+".customization.enabled"):e("translate")(n+".customization.disabled")},s.getEnablementTextForVariation=function(t,n){return n=n||"personalization",s.isPersonalizationItemEnabled(t)?e("translate")(n+".variation.enabled"):e("translate")(n+".variation.disabled")},s.getEnablementActionTextForVariation=function(t,n){return n=n||"personalization",s.isPersonalizationItemEnabled(t)?e("translate")(n+".variation.options.disable"):e("translate")(n+".variation.options.enable")},s.getActivityStateForCustomization=function(t){return t.status===n.ENABLED?moment().isBetween(new Date(t.enabledStartDate),new Date(t.enabledEndDate),"minute","[]")?"status-active":"status-ignore":"status-inactive"},s.getActivityStateForVariation=function(t,e){return e.enabled?s.getActivityStateForCustomization(t):"status-inactive"},s.isItemVisible=function(t){return"DELETED"!==t.status},s.getVisibleItems=function(t){return t.filter(function(t){return s.isItemVisible(t)})},s.getValidRank=function(t,e,n){for(var o=t.indexOf(e),a=n<0?-1:1,i=o+n;i>=0&&i<t.length&&!s.isItemVisible(t[i]);)i+=a;return i=i>=t.length?t.length-1:i,i=i<0?0:i,t[i].rank},s.getStatusesMapping=function(){var t=[];return t.push({code:o.ALL,text:"personalization.context.status.all",modelStatuses:[n.ENABLED,n.DISABLED]}),t.push({code:o.ENABLED,text:"personalization.context.status.enabled",modelStatuses:[n.ENABLED]}),t.push({code:o.DISABLED,text:"personalization.context.status.disabled",modelStatuses:[n.DISABLED]}),t},s.getClassForElement=function(t){var e=t%Object.keys(a).length;return a[e].listClass},s.getLetterForElement=function(t){var e=t%Object.keys(a).length;return String.fromCharCode("a".charCodeAt()+e).toUpperCase()},s.getCommerceCustomizationTooltip=function(t,n,o){n=n||"",o=o||"\n";var a="";return angular.forEach(t.commerceCustomizations,function(t,i){a+=n+e("translate")("personalization.modal.manager.commercecustomization."+i)+": "+t+o}),a},s.getCommerceCustomizationTooltipHTML=function(t){return s.getCommerceCustomizationTooltip(t,"<div>","</div>")},s.isItemFromCurrentCatalog=function(t,e){var n=e.seExperienceData.catalogDescriptor;return t.catalog===n.catalogId&&t.catalogVersion===n.catalogVersion},s.hasCommerceActions=function(t){return t.numberOfCommerceActions>0},s.getCatalogVersionNameByUuid=function(e){var n=t.defer();return r.getCatalogVersionByUuid(e).then(function(t){n.resolve(i(t.catalogName)+" ("+t.version+")")}),n.promise},s.getAndSetCatalogVersionNameL10N=function(t){s.getCatalogVersionNameByUuid(t.catalog+"/"+t.catalogVersion).then(function(e){t.catalogVersionNameL10N=e})},s}]).factory("personalizationsmarteditMessageHandler",["alertService",function(t){var e={};return e.sendInformation=function(e){t.showInfo(e)},e.sendError=function(e){t.showDanger(e)},e.sendWarning=function(e){t.showWarning(e)},e.sendSuccess=function(e){t.showSuccess(e)},e}]).factory("personalizationsmarteditCommerceCustomizationService",function(){var t=["cxCmsActionData"],e={},n=[],o=function(e){return t.some(function(t){return t===e.type})},a=function(t){return!o(t)},i=function(t,e){return void 0!==e&&null!==e&&!0===e[t.confProperty]};return e.registerType=function(t){var e=t.type,o=!1;n.forEach(function(t){t.type===e&&(o=!0)}),o||n.push(t)},e.getAvailableTypes=function(t){return n.filter(function(e){return i(e,t)})},e.isCommerceCustomizationEnabled=function(t){return e.getAvailableTypes(t).length>0},e.getNonCommerceActionsCount=function(t){return(t.actions||[]).filter(o).length},e.getCommerceActionsCountMap=function(t){var e={};return(t.actions||[]).filter(a).forEach(function(t){var n=t.type.toLowerCase(),o=e[n];void 0===o?o=1:o+=1,e[n]=o}),e},e.getCommerceActionsCount=function(t){return(t.actions||[]).filter(a).length},e}).directive("uisOpenClose",["$parse","$timeout",function(t,e){return{restrict:"A",require:"uiSelect",link:function(n,o,a,i){i.onOpenCloseCallback=t(a.uisOpenClose),n.$watch("$select.open",function(t,o){t!==o&&e(function(){i.onOpenCloseCallback(n,{isOpen:t})})})}}}]).directive("negate",[function(){return{require:"ngModel",link:function(t,e,n,o){o.$isEmpty=function(t){return!!t},o.$formatters.unshift(function(t){return!t}),o.$parsers.unshift(function(t){return!t})}}}]).directive("personalizationCurrentElement",[function(){return{restrict:"A",link:function(t,e,n){n.personalizationCurrentElement&&t.$eval(n.personalizationCurrentElement)(e)}}}])},function(t,e){angular.module("personalizationsmarteditContextUtilsModule",[]).factory("personalizationsmarteditContextUtils",function(){var t=this,e=function(){this.enabled=!1},n=function(){this.enabled=!1,this.selectedCustomization=null,this.selectedVariations=null,this.selectedComponents=null},o=function(){this.enabled=!1,this.selectedItems=null,this.customize=new n},a=function(){this.pageId=null,this.seExperienceData=null,this.seConfigurationData=null,this.sePreviewData=null};return t.getContextObject=function(){return{personalization:new e,customize:new n,combinedView:new o,seData:new a}},t.clearCustomizeContext=function(t){var e=t.getCustomize();e.enabled=!1,e.selectedCustomization=null,e.selectedVariations=null,e.selectedComponents=null,t.setCustomize(e)},t.clearCustomizeContextAndReloadPreview=function(e,n){var o=angular.copy(n.getCustomize().selectedVariations);t.clearCustomizeContext(n),angular.isObject(o)&&!angular.isArray(o)&&e.clearAndReloadPreview()},t.clearCombinedViewCustomizeContext=function(t){var e=t.getCombinedView();e.customize.enabled=!1,e.customize.selectedCustomization=null,e.customize.selectedVariations=null,e.customize.selectedComponents=null,(e.selectedItems||[]).forEach(function(t){delete t.highlighted}),t.setCombinedView(e)},t.clearCombinedViewContext=function(t){var e=t.getCombinedView();e.enabled=!1,e.selectedItems=null,t.setCombinedView(e)},t.clearCombinedViewContextAndReloadPreview=function(e,n){var o=angular.copy(n.getCombinedView().enabled),a=angular.copy(n.getCombinedView().selectedItems);t.clearCombinedViewContext(n),o&&a&&e.clearAndReloadPreview()},t})},function(t,e){angular.module("personalizationsmarteditDataUtils",[]).factory("PaginationHelper",function(){return function(t){t=t||{},this.count=t.count||0,this.page=t.page||0,this.totalCount=t.totalCount||0,this.totalPages=t.totalPages||0,this.reset=function(){this.count=50,this.page=-1,this.totalPages=1,this.totalCount=0}}})},function(t,e){angular.module("personalizationsmarteditCommons").constant("PERSONALIZATION_DATE_FORMATS",{SHORT_DATE_FORMAT:"M/D/YY",MODEL_DATE_FORMAT:"YYYY-MM-DDTHH:mm:SSZ"}).factory("personalizationsmarteditDateUtils",["$filter","DATE_CONSTANTS","isBlank","PERSONALIZATION_DATE_FORMATS",function(t,e,n,o){var a={};return a.formatDate=function(t,n){return n=n||e.MOMENT_FORMAT,t?(t.match&&t.match(/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+|\-)(\d{4})$/)&&(t=t.slice(0,-2)+":"+t.slice(-2)),moment(new Date(t)).format(n)):""},a.formatDateWithMessage=function(e,n){return n=n||o.SHORT_DATE_FORMAT,e?a.formatDate(e,n):t("translate")("personalization.toolbar.pagecustomizations.nodatespecified")},a.isDateInThePast=function(t){return!n(t)&&moment(t,e.MOMENT_FORMAT).isBefore()},a.isDateValidOrEmpty=function(t){return n(t)||moment(t,e.MOMENT_FORMAT).isValid()},a.isDateRangeValid=function(t,e){return!(!n(t)&&!n(e))||moment(new Date(t)).isSameOrBefore(moment(new Date(e)))},a.isDateStrFormatValid=function(t,o){return o=o||e.MOMENT_FORMAT,!n(t)&&moment(t,o,!0).isValid()},a}]).directive("dateTimePickerRange",["$timeout","languageService","personalizationsmarteditDateUtils","DATE_CONSTANTS",function(t,e,n,o){return{templateUrl:"dateTimePickerRangeTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{name:"=",dateFrom:"=",dateTo:"=",isEditable:"=",dateFormat:"="},link:function(t,a){function i(){return a.querySelectorAll("#date-picker-range-from")}function r(){return i().datetimepicker().data("DateTimePicker")}function s(){return a.querySelectorAll("#date-picker-range-to")}function l(){return s().datetimepicker().data("DateTimePicker")}t.placeholderText="personalization.commons.datetimepicker.placeholder",t.isFromDateValid=!1,t.isToDateValid=!1,t.isEndDateInThePast=!1,t.isEditable&&(t.getDateOrDefault=function(t){try{return moment(new Date(t))}catch(t){return!1}},t.getMinToDate=function(e){return n.isDateInThePast(e)?new moment:t.getDateOrDefault(e)},i().datetimepicker({format:o.MOMENT_FORMAT,showClear:!0,showClose:!0,useCurrent:!1,keepInvalid:!0,locale:e.getBrowserLocale().split("-")[0]}).on("dp.change",function(e){var o=n.formatDate(e.date);n.isDateValidOrEmpty(o)&&n.isDateValidOrEmpty(t.dateTo)&&!n.isDateRangeValid(o,t.dateTo)&&(o=angular.copy(t.dateTo)),t.dateFrom=o}),s().datetimepicker({format:o.MOMENT_FORMAT,showClear:!0,showClose:!0,useCurrent:!1,keepInvalid:!0,locale:e.getBrowserLocale().split("-")[0]}).on("dp.change",function(e){var o=n.formatDate(e.date);n.isDateValidOrEmpty(o)&&n.isDateValidOrEmpty(t.dateFrom)&&!n.isDateRangeValid(t.dateFrom,o)&&(o=angular.copy(t.dateFrom)),t.dateTo=o}),t.$watch("dateFrom",function(){t.isFromDateValid=n.isDateValidOrEmpty(t.dateFrom),n.isDateStrFormatValid(t.dateFrom,o.MOMENT_FORMAT)?l().minDate(t.getMinToDate(t.dateFrom)):l().minDate(new moment)},!0),t.$watch("dateTo",function(){n.isDateValidOrEmpty(t.dateTo)?(t.isToDateValid=!0,t.isEndDateInThePast=n.isDateInThePast(t.dateTo)):(t.isToDateValid=!1,t.isEndDateInThePast=!1),n.isDateStrFormatValid(t.dateTo,o.MOMENT_FORMAT)&&r().maxDate(t.getDateOrDefault(t.dateTo))},!0))}}}]).directive("isdatevalidorempty",["isBlank","personalizationsmarteditDateUtils",function(t,e){return{restrict:"A",require:"ngModel",scope:!1,link:function(t,n,o,a){a.$validators.isdatevalidorempty=function(t){return e.isDateValidOrEmpty(t)}}}}])},function(t,e){angular.module("personalizationsmarteditCommons").directive("personalizationInfiniteScroll",["$rootScope","yjQuery","$window","$timeout",function(t,e,n,o){return{link:function(a,i,r){var s,l,c,d;return n=angular.element(n),c=0,null!==r.personalizationInfiniteScrollDistance&&a.$watch(r.personalizationInfiniteScrollDistance,function(t){return c=parseInt(t,10)}),d=!0,s=!1,null!==r.personalizationInfiniteScrollDisabled&&a.$watch(r.personalizationInfiniteScrollDisabled,function(t){if((d=!t)&&s)return s=!1,l()}),t.$on("refreshStart",function(){i.animate({scrollTop:"0"})}),l=function(){var n,o,l,m,p;if(!(i.children().length<=0))return n=e(i.children()[0]),o=i.offset().top+i.height(),p=n.offset().top+n.height(),l=p-o,(m=l<=i.height()*c)&&d?t.$$phase?a.$eval(r.personalizationInfiniteScroll):a.$apply(r.personalizationInfiniteScroll):m?s=!0:void 0},i.on("scroll",l),a.$on("$destroy",function(){return n.off("scroll",l)}),o(function(){return r.personalizationInfiniteScrollImmediateCheck?a.$eval(r.personalizationInfiniteScrollImmediateCheck)?l():void 0:l()},0)}}}])},function(t,e){angular.module("personalizationsmarteditCommons").directive("personalizationsmarteditPagination",function(){return{templateUrl:"personalizationsmarteditPaginationTemplate.html",restrict:"E",scope:{callback:"=",pages:"=?",currentPage:"=?",pageSizes:"=?",currentSize:"=?",pagesOffset:"=?",fixedPageSize:"=?",incrementByOne:"=?"},link:function(t){t.callback||console.error("callback is undefined!"),t.pages=t.pages||[0,1,2],t.currentPage=t.currentPage||0,t.pageSizes=t.pageSizes||[5,10,25,50,100],t.currentSize=t.currentSize||10,t.pagesOffset=t.pagesOffset||1,t.fixedPageSize=t.fixedPageSize||!1,t.incrementByOne=t.incrementByOne||!1,t.pageClick=function(e){t.currentPage!==e&&(t.currentPage=e,t.callback(t))},t.pageSizeClick=function(e){t.currentSize!==e&&(t.currentSize=e,t.currentPage=0,t.callback(t))},t.hasPrevious=function(){return t.currentPage>0},t.hasNext=function(){return t.currentPage<t.pages.length-1},t.isActive=function(e){return t.currentPage===e},t.rightClick=function(){t.hasNext()&&(t.currentPage=t.incrementByOne?t.currentPage+1:t.pages.length-1,t.callback(t))},t.leftClick=function(){t.hasPrevious()&&(t.currentPage=t.incrementByOne?t.currentPage-1:0,t.callback(t))},t.pagesToDisplay=function(){var e=2*t.pagesOffset+1;if(t.pages.length<=e)return t.pages;var n=Math.max(t.currentPage-t.pagesOffset,0);return n+e>t.pages.length&&(n=t.pages.length-e),t.pages.slice(n,n+e)},t.availablePageSizes=function(){return t.pageSizes},t.getCurrentPageSize=function(){return t.currentSize},t.isFixedPageSize=function(){return t.fixedPageSize},t.showArrows=function(){return t.pages.length>2*t.pagesOffset+1}}}})},function(t,e){angular.module("personalizationsmarteditScrollZone",["yjqueryModule"]).controller("personalizationsmarteditScrollZoneController",["$scope","$timeout","$compile","yjQuery",function(t,e,n,o){var a=this,i=!0;Object.defineProperty(this,"scrollZoneTop",{get:function(){return i},set:function(t){i=t}});var r=!0;Object.defineProperty(this,"scrollZoneBottom",{get:function(){return r},set:function(t){r=t}});var s=!1;Object.defineProperty(this,"start",{get:function(){return s},set:function(t){s=t}});var l={};Object.defineProperty(this,"elementToScroll",{get:function(){return l},set:function(t){l=t}});var c=!1;Object.defineProperty(this,"scrollZoneVisible",{get:function(){return c},set:function(t){c=t}}),this.stopScroll=function(){a.start=!1},this.scrollTop=function(){a.start&&(a.scrollZoneTop=!(a.elementToScroll.scrollTop()<=2),a.scrollZoneBottom=!0,a.elementToScroll.scrollTop(a.elementToScroll.scrollTop()-15),e(function(){a.scrollTop()},100))},this.scrollBottom=function(){if(a.start){a.scrollZoneTop=!0;var t=a.elementToScroll.get(0).scrollHeight-a.elementToScroll.scrollTop();a.scrollZoneBottom=!(Math.abs(t-a.elementToScroll.outerHeight())<2),a.elementToScroll.scrollTop(a.elementToScroll.scrollTop()+15),e(function(){a.scrollBottom()},100)}},this.$onChanges=function(t){t.scrollZoneVisible&&(a.start=t.scrollZoneVisible.currentValue,a.scrollZoneTop=!0,a.scrollZoneBottom=!0)},this.$onInit=function(){var e=n('<div id="sliderTopScrollZone" data-ng-include="\'personalizationsmarteditScrollZoneTopTemplate.html\'"></div>')(t);angular.element("body").append(e);var o=n('<div id="sliderBottomScrollZone" data-ng-include="\'personalizationsmarteditScrollZoneBottomTemplate.html\'"></div>')(t);angular.element("body").append(o),a.elementToScroll=a.getElementToScroll()},this.$onDestroy=function(){angular.element("#sliderTopScrollZone").scope().$destroy(),angular.element("#sliderTopScrollZone").remove(),angular.element("#sliderBottomScrollZone").scope().$destroy(),angular.element("#sliderBottomScrollZone").remove(),angular.element("body").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&this.data.indexOf("personalizationsmarteditScrollZone")>-1&&o(this).remove()})}}]).component("personalizationsmarteditScrollZone",{controller:"personalizationsmarteditScrollZoneController",controllerAs:"ctrl",transclude:!0,bindings:{scrollZoneVisible:"<",getElementToScroll:"&",isTransparent:"<?"}})},function(t,e){angular.module("personalizationcommonsTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/personalizationcommons/dateTimePickerRange/dateTimePickerRangeTemplate.html",'<div class="pe-datetime-range">\n    <div class="col-md-6 pe-datetime-range__from"\n        data-ng-class="{\'has-error\': !isFromDateValid}">\n        <label for="customization-start-date"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate"\n            class="personalization-modal__label"></label>\n        <y-help data-template="\'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate.help></span>\'">\n        </y-help>\n        <div class="input-group date pe-date-field"\n            id="date-picker-range-from"\n            data-ng-show="isEditable">\n            <input type=\'text\'\n                name="date_from_key"\n                class="form-control pe-date-field__input"\n                placeholder="{{ placeholderText | translate}}"\n                data-ng-disabled="!isEditable"\n                name="{{name}}"\n                isdatevalidorempty\n                data-ng-model="dateFrom"\n                id="customization-start-date" />\n            <span class="input-group-addon pe-datetime-range__picker"\n                data-ng-show="isEditable">\n                <span class="glyphicon glyphicon-calendar pe-datetime-range__picker__icon"></span>\n            </span>\n        </div>\n        <div class="input-group date pe-date-field"\n            id="date-picker-range-from"\n            data-ng-show="!isEditable">\n            <input type=\'text\'\n                name="date_from_key"\n                class="form-control pe-date-field__input "\n                data-ng-class="{\'pe-input--is-disabled\': !isEditable}"\n                data-ng-model="dateFrom"\n                data-date-formatter\n                id="customization-start-date"\n                isdatevalidorempty\n                data-ng-disabled="true"\n                data-format-type="short">\n        </div>\n        <span data-ng-if="!isFromDateValid"\n            class="help-block pe-datetime__error-msg pe-datetime__msg"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformatfrom.description">\n        </span>\n    </div>\n    <div class="col-md-6 pe-datetime-range__to"\n        data-ng-class="{\'has-error\':!isToDateValid, \'has-warning\':isEndDateInThePast}">\n        <label for="customization-end-date"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate"\n            class="personalization-modal__label"></label>\n        <y-help data-template="\'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate.help></span>\'">\n        </y-help>\n        <div class="input-group date pe-date-field"\n            id="date-picker-range-to">\n            <input type=\'text\'\n                name="date_to_key"\n                class="form-control pe-date-field__input"\n                placeholder="{{ placeholderText | translate}}"\n                data-ng-disabled="!isEditable"\n                name="{{name}}"\n                isdatevalidorempty\n                data-ng-model="dateTo"\n                id="customization-end-date" />\n            <span class="input-group-addon pe-datetime-range__picker"\n                data-ng-show="isEditable">\n                <span class="glyphicon glyphicon-calendar pe-datetime-range__picker__icon"></span>\n            </span>\n        </div>\n        <div class="input-group date pe-date-field"\n            id="date-picker-range-to"\n            data-ng-show="!isEditable">\n            <input type=\'text\'\n                name="date_to_key"\n                class="form-control pe-date-field__input "\n                data-ng-class="{\'pe-input--is-disabled\': !isEditable}"\n                data-ng-model="dateTo"\n                data-date-formatter\n                id="customization-end-date"\n                isdatevalidorempty\n                data-ng-disabled="true"\n                data-format-type="short">\n        </div>\n        <span class="help-block pe-datetime__error-msg pe-datetime__msg"\n            data-ng-if="!isToDateValid"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformat.description">\n        </span>\n        <span data-ng-if="isEndDateInThePast"\n            class="help-block pe-datetime__warning-msg pe-datetime__msg">\n            <span class="hyicon hyicon-msgwarning"></span>\n            <span data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddateinthepast.description"></span>\n        </span>\n    </div>\n</div>'),t.put("web/features/personalizationcommons/personalizationsmarteditPagination/personalizationsmarteditPaginationTemplate.html",'<div class="row">\n    <div class="col-xs-4"></div>\n    <div class="col-xs-4">\n        <ul class="pagination pagination-lg">\n            <li class="no-underline"\n                data-ng-if="showArrows()"\n                data-ng-click="leftClick()"\n                data-ng-class="hasPrevious()?\'enabled\':\'disabled\'"><a>&laquo;</a></li>\n            <li class="no-underline"\n                data-ng-repeat="i in pagesToDisplay()"\n                data-ng-class="isActive({{i}})?\'active\':\'\'"><a data-ng-click="pageClick(i)">{{i+1}}</a></li>\n            <li class="no-underline"\n                data-ng-if="showArrows()"\n                data-ng-click="rightClick()"\n                data-ng-class="hasNext()?\'enabled\':\'disabled\'"><a>&raquo;</a></li>\n        </ul>\n    </div>\n    <div class="col-xs-2"></div>\n    <div data-uib-dropdown\n        class="col-xs-2"\n        data-ng-if="!isFixedPageSize()">\n        <button type="button"\n            data-uib-dropdown-toggle\n            class="btn btn-link pull-right">\n            <span data-ng-bind="getCurrentPageSize()"></span>\n            <span data-translate="personalization.commons.pagination.rowsperpage"></span>\n            <span class="list-arrow hyicon hyicon-arrow"></span>\n        </button>\n        <ul data-uib-dropdown-menu\n            class="pull-right text-left"\n            role="menu">\n            <li data-ng-repeat="i in availablePageSizes() track by $index"><a data-ng-click="pageSizeClick(i)">{{i}}</a></li>\n        </ul>\n    </div>\n</div>'),t.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneBottomTemplate.html",'<div class="perso__scrollzone perso__scrollzone--bottom"\n    data-ng-class="ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'"\n    data-ng-show="ctrl.scrollZoneVisible && ctrl.scrollZoneBottom"\n    data-ng-mouseenter="ctrl.start=true;ctrl.scrollBottom()"\n    data-ng-mouseleave="ctrl.stopScroll()">\n</div>'),t.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneTopTemplate.html",'<div class="perso__scrollzone perso__scrollzone--top"\n    data-ng-class="ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'"\n    data-ng-show="ctrl.scrollZoneVisible && ctrl.scrollZoneTop"\n    data-ng-mouseenter="ctrl.start=true;ctrl.scrollTop()"\n    data-ng-mouseleave="ctrl.stopScroll()">\n</div>')}])}]);