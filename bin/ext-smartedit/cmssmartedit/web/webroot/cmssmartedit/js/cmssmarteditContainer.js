!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t){e.exports=angular},function(e,t,n){function i(e){e.keys().forEach(function(t){o[t]=e(t)})}var o={};i(n(4)),i(n(163)),i(n(175))},function(e,t){angular.module("AssetsServiceModule",["cmsSmarteditServicesModule"]),angular.module("trashedPageModule",["cmsSmarteditServicesModule"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=(n.n(i),n(176)),a=(n.n(o),n(0)),r=(n.n(a),n(177)),s=n(178),c=n(2),l=(n.n(c),function(){function e(e,t,n,i,o,a){var r=this;this.uriContext=t.buildUriContext(e.siteId,e.catalogId,e.catalogVersion),this.catalogName="",this.catalogVersion=this.uriContext[i],n.isPermitted([{names:["se.edit.navigation"]}]).then(function(e){r.readOnly=!e},function(e){throw e}),a.getContentCatalogsForSite(this.uriContext[o]).then(function(t){r.catalogName=t.filter(function(t){return t.catalogId===e.catalogId})[0].name})}return e.$inject=["$routeParams","urlService","permissionService","CONTEXT_CATALOG_VERSION","CONTEXT_SITE_ID","catalogService"],e}());a.module("cmssmarteditContainer",["experienceInterceptorModule","resourceLocationsModule","cmssmarteditContainerTemplates","componentMenuModule","cmscommonsTemplates","restrictionsMenuModule","pageInfoMenuModule","editorModalServiceModule","genericEditorModule","eventServiceModule","catalogDetailsModule","synchronizeCatalogModule","pageListLinkModule","pageListControllerModule","navigationEditorModule","slotRestrictionsServiceModule","cmsDragAndDropServiceModule","seMediaFieldModule","seMediaContainerFieldModule","editorFieldMappingServiceModule","navigationNodeEditorModule","entrySearchSelectorModule","pageRestrictionsModule","restrictionsEditorModule","yActionableSearchItemModule","seNavigationNodeSelector","pageSyncMenuToolbarItemModule","synchronizationPollingServiceModule","productSelectorModule","categorySelectorModule","clonePageWizardServiceModule","cmsLinkToSelectModule","permissionServiceModule","rulesAndPermissionsRegistrationModule","catalogServiceModule","experienceServiceModule","smarteditServicesModule","singleActiveCatalogAwareItemSelectorModule","productCatalogDropdownPopulatorModule","productDropdownPopulatorModule","categoryDropdownPopulatorModule","cmsItemDropdownModule","catalogAwareRouteResolverModule","catalogVersionPermissionModule","componentRestrictionsEditorModule","pageRestrictionsEditorModule","displayConditionsEditorModule","linkToggleModule","functionsModule","componentVisibilityAlertServiceModule","cmsGenericEditorConfigurationServiceModule","clonePageItemModule","deletePageItemModule","editPageItemModule","syncPageItemModule","deletePageToolbarItemModule",s.a.name,r.a.name]).config(["PAGE_LIST_PATH","TRASHED_PAGE_LIST_PATH","NAVIGATION_MANAGEMENT_PAGE_PATH","$routeProvider","catalogAwareRouteResolverFunctions",function(e,t,n,i,o){"ngInject";i.when(e,{templateUrl:"pageListTemplate.html",controller:"pageListController",controllerAs:"pageListCtl",resolve:{setExperience:o.setExperience}}),i.when(t,{templateUrl:"trashedpageListTemplate.html",controller:"trashedPageListController",controllerAs:"trashedPageListCtl",resolve:{setExperience:o.setExperience}}),i.when(n,{templateUrl:"navigationTemplate.html",controller:"navigationController",controllerAs:"nav",resolve:{setExperience:o.setExperience}})}]).controller("navigationController",l).run(["$log","$rootScope","$routeParams","NAVIGATION_MANAGEMENT_PAGE_PATH","ComponentService","systemEventService","catalogDetailsService","featureService","perspectiveService","assetsService","editorFieldMappingService","genericEditorTabService","cmsDragAndDropService","editorModalService","clonePageWizardService","CATALOG_DETAILS_COLUMNS","componentVisibilityAlertService","cmsGenericEditorConfigurationService",function(e,t,n,i,o,a,r,s,c,l,d,u,p,m,g,h,f,y){"ngInject";y.setDefaultEditorFieldMappings(),y.setDefaultTabFieldMappings(),y.setDefaultTabsConfiguration(),s.addToolbarItem({toolbarId:"experienceSelectorToolbar",key:"se.cms.componentMenuTemplate",type:"HYBRID_ACTION",nameI18nKey:"se.cms.componentmenu.btn.label.addcomponent",descriptionI18nKey:"cms.toolbaritem.componentmenutemplate.description",priority:1,section:"left",iconClassName:"hyicon hyicon-addlg se-toolbar-menu-ddlb--button__icon",callback:function(){a.sendSynchEvent("ySEComponentMenuOpen",{})},include:"componentMenuWrapperTemplate.html",permissions:["se.add.component"],keepAliveOnClose:!0}),s.addToolbarItem({toolbarId:"experienceSelectorToolbar",key:"se.cms.restrictionsMenu",type:"HYBRID_ACTION",nameI18nKey:"se.cms.restrictions.toolbar.menu",priority:2,section:"left",iconClassName:"hyicon hyicon-restrictions se-toolbar-menu-ddlb--button__icon",include:"pageRestrictionsMenuToolbarItemWrapperTemplate.html",permissions:["se.read.restriction"]}),s.addToolbarItem({toolbarId:"experienceSelectorToolbar",key:"se.cms.pageInfoMenu",type:"HYBRID_ACTION",nameI18nKey:"se.cms.pageinfo.menu.btn.label",descriptionI18nKey:"cms.toolbarItem.pageInfoMenu.description",priority:3,section:"left",iconClassName:"hyicon hyicon-info se-toolbar-menu-ddlb--button__icon",include:"pageInfoMenuToolbarItemWrapperTemplate.html",permissions:["se.read.page"]}),s.addToolbarItem({toolbarId:"experienceSelectorToolbar",key:"se.cms.clonePageMenu",type:"ACTION",nameI18nKey:"se.cms.clonepage.menu.btn.label",iconClassName:"hyicon hyicon-clone se-toolbar-menu-ddlb--button__icon",callback:function(){g.openClonePageWizard()},priority:4,section:"left",permissions:["se.clone.page"]}),s.addToolbarItem({toolbarId:"experienceSelectorToolbar",key:"se.cms.pageSyncMenu",nameI18nKey:"se.cms.toolbaritem.pagesyncmenu.name",type:"TEMPLATE",include:"pageSyncMenuToolbarItemWrapperTemplate.html",priority:5,section:"left",permissions:["se.sync.page"]}),s.addToolbarItem({toolbarId:"experienceSelectorToolbar",key:"deletePageMenu",nameI18nKey:"se.cms.actionitem.page.trash",type:"TEMPLATE",include:"deletePageToolbarItemWrapperTemplate.html",priority:6,section:"left",permissions:["se.delete.page.menu"]}),r.addItems([{include:"pageListLinkTemplate.html"},{include:"navigationEditorLinkTemplate.html"}]),r.addItems([{include:"catalogDetailsSyncTemplate.html"}],h.RIGHT),s.register({key:"se.cms.html5DragAndDrop.outer",nameI18nKey:"se.cms.dragAndDrop.name",descriptionI18nKey:"se.cms.dragAndDrop.description",enablingCallback:function(){p.register(),p.apply()},disablingCallback:function(){p.unregister()}}),c.register({key:"se.cms.perspective.basic",nameI18nKey:"se.cms.perspective.basic.name",descriptionI18nKey:"se.cms.perspective.basic.description",features:["se.contextualMenu","se.cms.dragandropbutton","se.cms.remove","se.cms.edit","se.cms.componentMenuTemplate","se.cms.restrictionsMenu","se.cms.clonePageMenu","se.cms.pageInfoMenu","se.emptySlotFix","se.cms.html5DragAndDrop","disableSharedSlotEditing","sharedSlotDisabledDecorator","se.cms.html5DragAndDrop.outer","externalComponentDecorator","externalcomponentbutton","externalSlotDisabledDecorator","clonecomponentbutton","deletePageMenu"],perspectives:[]}),c.register({key:"se.cms.perspective.advanced",nameI18nKey:"se.cms.perspective.advanced.name",descriptionI18nKey:"se.cms.perspective.advanced.description",features:["se.slotContextualMenu","se.slotSyncButton","se.slotSharedButton","se.slotContextualMenuVisibility","se.contextualMenu","se.cms.dragandropbutton","se.cms.remove","se.cms.edit","se.cms.componentMenuTemplate","se.cms.restrictionsMenu","se.cms.clonePageMenu","se.cms.pageInfoMenu","se.cms.pageSyncMenu","se.emptySlotFix","se.cms.html5DragAndDrop","se.cms.html5DragAndDrop.outer","syncIndicator","externalSlotDisabledDecorator","externalComponentDecorator","externalcomponentbutton","clonecomponentbutton","slotUnsharedButton","deletePageMenu"],perspectives:[]})}])},function(e,t,n){function i(e){return n(o(e))}function o(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var a={"./components/cmsComponents/cmsItemDropdown/cmsItemDropdown.js":5,"./components/cmsComponents/cmsItemDropdown/components/nestedComponent.js":6,"./components/cmsComponents/cmsItemDropdown/components/subTypeSelector.js":7,"./components/cmsComponents/cmsItemDropdown/services/cmsItemDropdownDropdownPopulator.js":8,"./components/cmsComponents/cmsItemDropdown/services/nestedComponentManagementService.js":9,"./components/cmsComponents/componentMenu/componentMenu.js":10,"./components/cmsComponents/componentMenu/components/componentItem.js":11,"./components/cmsComponents/componentMenu/components/componentSearch.js":12,"./components/cmsComponents/componentMenu/components/componentType.js":13,"./components/cmsComponents/componentMenu/filters/nameFilter.js":14,"./components/cmsComponents/componentMenu/services/componentMenuService.js":15,"./components/cmsComponents/componentMenu/tabs/componentTypesTab.js":16,"./components/cmsComponents/componentMenu/tabs/componentsTab.js":17,"./components/cmsComponents/editorModal/componentEditor/componentEditor.js":18,"./components/cmsComponents/editorModal/editorModalService.js":19,"./components/cmsComponents/editorModal/tabs/generic/genericTab.js":20,"./components/cmsComponents/restrictionEditor/componentRestrictionsEditor.js":21,"./components/cmsComponents/restrictionEditor/pageRestrictionsEditor.js":22,"./components/dragAndDrop/cmsDragAndDropService.js":23,"./components/editorTabset/editorTabset.js":24,"./components/genericEditor/catalog/components/catalogAwareSelector/catalogAwareSelector.js":25,"./components/genericEditor/catalog/components/categorySelector/categorySelector.js":26,"./components/genericEditor/catalog/components/itemSelectorPanel/itemSelectorPanel.js":27,"./components/genericEditor/catalog/components/productSelector/productSelector.js":28,"./components/genericEditor/catalog/components/services/seCatalogInformationService.js":29,"./components/genericEditor/cmsLinkToSelect/cmsLinkToSelect.js":30,"./components/genericEditor/cmsLinkToSelect/dropdownPopulators/cmsLinkComponentContentPageDropdownPopulator.js":31,"./components/genericEditor/config/cmsGenericEditorMappingService.js":32,"./components/genericEditor/linkToggle/linkToggle.js":33,"./components/genericEditor/media/components/errorsList/seErrorsList.js":34,"./components/genericEditor/media/components/fileSelector/seFileSelector.js":35,"./components/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedProperties.js":36,"./components/genericEditor/media/components/mediaContainerField/seMediaContainerField.js":37,"./components/genericEditor/media/components/mediaField/seMediaField.js":38,"./components/genericEditor/media/components/mediaFormat/seMediaFormat.js":39,"./components/genericEditor/media/components/mediaPreview/seMediaPreview.js":40,"./components/genericEditor/media/components/mediaSelector/seMediaPrinter.js":41,"./components/genericEditor/media/components/mediaSelector/seMediaSelector.js":42,"./components/genericEditor/media/components/mediaUploadForm/seMediaUploadField.js":43,"./components/genericEditor/media/components/mediaUploadForm/seMediaUploadForm.js":44,"./components/genericEditor/media/services/mediaService.js":45,"./components/genericEditor/media/services/seBackendValidationHandler.js":46,"./components/genericEditor/media/services/seFileMimeTypeService.js":47,"./components/genericEditor/media/services/seFileValidationService.js":48,"./components/genericEditor/media/services/seMediaService.js":49,"./components/genericEditor/media/services/seObjectValidatorFactory.js":50,"./components/genericEditor/navigationNode/components/breadcrumb/seBreadcrumb.js":51,"./components/genericEditor/navigationNode/components/navigationNodePicker/seNavigationNodePicker.js":52,"./components/genericEditor/navigationNode/components/navigationNodeSelector/seNavigationNodeSelector.js":53,"./components/genericEditor/singleActiveCatalogAwareSelector/dropdownPopulators/categoryDropdownPopulator.js":54,"./components/genericEditor/singleActiveCatalogAwareSelector/dropdownPopulators/productCatalogDropdownPopulator.js":55,"./components/genericEditor/singleActiveCatalogAwareSelector/dropdownPopulators/productDropdownPopulator.js":56,"./components/genericEditor/singleActiveCatalogAwareSelector/singleActiveCatalogAwareItemSelector/singleActiveCatalogAwareItemSelector.js":57,"./components/itemManagement/itemManagement.js":58,"./components/navigation/navigationEditor/itemTitleHandlerServices/itemTitleAbstractCMSComponentHandlerService.js":59,"./components/navigation/navigationEditor/itemTitleHandlerServices/itemTitleAbstractPageHandlerService.js":60,"./components/navigation/navigationEditor/itemTitleHandlerServices/itemTitleMediaHandlerService.js":61,"./components/navigation/navigationEditor/itemTitleHandlerServices/itemTitleStrategyInterface.js":62,"./components/navigation/navigationEditor/navigationEditor.js":63,"./components/navigation/navigationEditor/navigationEditorNodeService.js":64,"./components/navigation/navigationEditor/navigationEditorService.js":65,"./components/navigation/navigationEditor/navigationEntryItemService.js":66,"./components/navigation/navigationNodeEditor/entrySearchSelector/entryDropdownMatcher.js":67,"./components/navigation/navigationNodeEditor/entrySearchSelector/entrySearchSelector.js":68,"./components/navigation/navigationNodeEditor/entrySearchSelector/handlerServices/entrySearchStrategyInterface.js":69,"./components/navigation/navigationNodeEditor/entrySearchSelector/handlerServices/searchAbstractCMSComponentHandlerService.js":70,"./components/navigation/navigationNodeEditor/entrySearchSelector/handlerServices/searchAbstractPageHandlerService.js":71,"./components/navigation/navigationNodeEditor/entrySearchSelector/handlerServices/searchMediaHandlerService.js":72,"./components/navigation/navigationNodeEditor/navigationNodeEditor.js":73,"./components/navigation/navigationNodeEditor/navigationNodeEditorComponents/navigationNodeEditorAttributes.js":74,"./components/navigation/navigationNodeEditor/navigationNodeEditorComponents/navigationNodeEditorCreateEntry.js":75,"./components/navigation/navigationNodeEditor/navigationNodeEditorComponents/navigationNodeEditorEntryList.js":76,"./components/navigation/navigationNodeEditor/navigationNodeEditorModalService.js":77,"./components/navigation/navigationNodeEditor/navigationNodeEntryTypesService.js":78,"./components/pageRestrictions/pageRestrictionsMenu/pageRestrictionsMenuToolbarItem.js":79,"./components/pageRestrictions/pageRestrictionsMenu/pageRestrictionsPageInfo.js":80,"./components/pageRestrictions/restrictionsPageListIcon/restrictionsPageListIcon.js":81,"./components/pages/addPageWizard/components/newPageDisplayCondition/newPageDisplayConditionComponent.js":82,"./components/pages/addPageWizard/components/selectPageTemplate/selectPageTemplate.js":83,"./components/pages/addPageWizard/components/selectPageType/selectPageType.js":84,"./components/pages/addPageWizard/components/selectTargetCatalogVersion/selectTargetCatalogVersion.js":85,"./components/pages/clonePageWizard/components/clonePageInfo/componentCloneInfoFormComponent.js":86,"./components/pages/clonePageWizard/components/clonePageOptions/componentCloneOptionFormComponent.js":87,"./components/pages/deletePageMenu/deletePageToolbarItem.js":88,"./components/pages/displayConditions/displayConditionsEditor/displayConditionsEditor.js":89,"./components/pages/displayConditions/displayConditionsPageInfo/displayConditionsPageInfo.js":90,"./components/pages/displayConditions/displayConditionsPageInfo/displayConditionsPageInfoController.js":91,"./components/pages/displayConditions/displayConditionsPageVariations/displayConditionsPageVariations.js":92,"./components/pages/displayConditions/displayConditionsPageVariations/displayConditionsPageVariationsController.js":93,"./components/pages/displayConditions/displayConditionsPrimaryPage/displayConditionsPrimaryPage.js":94,"./components/pages/displayConditions/displayConditionsPrimaryPage/displayConditionsPrimaryPageController.js":95,"./components/pages/editPageModal/pageEditorModalService.js":96,"./components/pages/pageInfoMenu/pageInfo/pageInfoContainer.js":97,"./components/pages/pageInfoMenu/pageInfo/pageInfoDetails.js":98,"./components/pages/pageInfoMenu/pageInfo/pageInfoHeader.js":99,"./components/pages/pageInfoMenu/pageInfoMenuToolbarItem.js":100,"./components/pages/pageItems/clonePageItem/clonePageItem.js":101,"./components/pages/pageItems/deletePageItem/deletePageItem.js":102,"./components/pages/pageItems/editPageItem/editPageItem.js":103,"./components/pages/pageItems/syncPageItem/syncPageItem.js":104,"./components/pages/pageList/pageListController.js":105,"./components/pages/pageList/pageListLink.js":106,"./components/pages/pageList/pageListTemplatePrinter/pageListTemplatePrinter.js":107,"./components/pages/pageRestrictionsInfoMessage/pageRestrictionsInfoMessage.js":108,"./components/restrictions/restrictionManagement/flavours/restrictionManagementEdit.js":109,"./components/restrictions/restrictionManagement/flavours/restrictionManagementSelect.js":110,"./components/restrictions/restrictionManagement/restrictionManagement.js":111,"./components/restrictions/restrictionsEditor/restrictionsEditor.js":112,"./components/restrictions/restrictionsTable/restrictionsTable.js":113,"./components/synchronize/catalogs/synchronizeCatalog.js":114,"./components/synchronize/pages/pageListSyncIcon/pageListSyncIcon.js":115,"./components/synchronize/pages/pageSynchronizationHeader.js":116,"./components/synchronize/pages/pageSynchronizationPanel.js":117,"./components/synchronize/pages/syncMenu/pageSyncMenuToolbarItem.js":118,"./components/synchronize/pages/syncPageModal/syncPageModalService.js":119,"./dao/catalogVersionRestService.js":120,"./dao/createPageService.js":121,"./dao/pageRestrictionsRestService.js":122,"./dao/pageSynchronizationService.js":123,"./dao/pageTypeService.js":124,"./dao/pageTypesRestrictionTypesRestService.js":125,"./dao/pagesFallbacksRestService.js":126,"./dao/pagesRestService.js":127,"./dao/pagesVariationsRestService.js":128,"./dao/restrictionTypesRestService.js":129,"./dao/restrictionsRestService.js":130,"./dao/structuresRestService.js":131,"./dao/typeStructureRestService.js":132,"./facades/displayConditionsFacade.js":133,"./facades/pageFacade.js":134,"./facades/pageRestrictionsFacade.js":135,"./facades/restrictionsFacade.js":136,"./requireLegacyJsFiles.js":1,"./services/actionableAlert/actionableAlertService.js":137,"./services/actionableAlert/clonePageAlertService.js":138,"./services/actionableAlert/componentVisibilityAlertService.js":139,"./services/clonePage/clonePageWizardService.js":140,"./services/contextAwareCatalogService.js":141,"./services/contextAwarePageStructureService.js":142,"./services/deletePage/deletePageService.js":143,"./services/deprecatedSince-6.7.js":2,"./services/genericEditorModalService.js":144,"./services/pageDisplayConditions/displayConditionsEditorModel.js":145,"./services/pageDisplayConditions/pageDisplayConditionsService.js":146,"./services/pageRestrictions/pageRestrictionCriteriaService.js":147,"./services/pageRestrictions/pageRestrictionsService.js":148,"./services/pageRestrictions/pageTypesRestrictionTypesService.js":149,"./services/pageRestrictions/restrictionTypesService.js":150,"./services/pageTemplateService.js":151,"./services/pages/addPageWizardService.js":152,"./services/pages/pageListService.js":153,"./services/pages/pageService.js":154,"./services/pages/restrictionsStepHandlerFactory.js":155,"./services/removeComponentService.js":156,"./services/restrictions/restrictionsCriteriaService.js":157,"./services/restrictionsService.js":158,"./services/rulesAndPermissionsRegistrationService.js":159,"./services/slotRestrictionsService.js":160,"./services/syncPollingService.js":161,"./templates.js":162};i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=4},function(e,t){angular.module("cmsItemDropdownModule",["subTypeSelectorModule","nestedComponentModule","eventServiceModule","nestedComponentManagementServiceModule","genericEditorStackServiceModule","cmsItemDropdownDropdownPopulatorModule"]).controller("cmsItemDropdownController",["CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","ON_EDIT_NESTED_COMPONENT_EVENT","systemEventService","genericEditorStackService","nestedComponentManagementService",function(e,t,n,i,o,a){this.$onInit=function(){this.itemTemplateUrl="cmsItemSearchTemplate.html",this.editorStackId=this.ge.editor.editorStackId,this.field.params=this.field.params||{},this.field.editorStackId=this.editorStackId,this.field.params.catalogId=e,this.field.params.catalogVersion=t,this.showSubTypesSelector=!1,this._recompileDom=function(){},this.componentButtonPressedEventId="CREATE_NESTED_COMPONENT_BUTTON_PRESSED_EVENT_"+this.qualifier,this.createComponentButtonUnRegFn=i.registerEventHandler(this.componentButtonPressedEventId,this.onCreateComponentButtonPressed.bind(this)),this.editComponentClickedUnRegFn=i.registerEventHandler(n,this.onEditComponentClicked.bind(this))},this.$onDestroy=function(){this.createComponentButtonUnRegFn(),this.editComponentClickedUnRegFn()},this.onCreateComponentButtonPressed=function(e,t){if(this.textTyped=t,o.isTopEditorInStack(this.editorStackId,this.id)&&this.field.subTypes){var n=Object.keys(this.field.subTypes);n.length>1?this.showSubTypesSelector=!0:this.createNestedComponent(n[0])}},this.onSubTypeSelected=function(e){this.createNestedComponent(e).then(function(){this.showSubTypesSelector=!1}.bind(this)).catch(function(){this.showSubTypesSelector=!1}.bind(this))}.bind(this),this.onEditComponentClicked=function(e,t){o.isTopEditorInStack(this.editorStackId,this.id)&&this.qualifier===t.qualifier&&this.editComponent(t.item)},this.configureSeDropdown=function(e){var t="<y-actionable-search-item data-event-id='"+this.componentButtonPressedEventId+"'></y-actionable-search-item>";e.setResultsHeaderTemplate(t)}.bind(this),this.createNestedComponent=function(e){var t={componentId:null,componentUuid:null,componentType:e,content:{name:this.textTyped,catalogVersion:this.model.catalogVersion}};return a.openNestedComponentEditor(t,this.editorStackId,null).then(function(e){this.field.collection?(this.model[this.qualifier]||(this.model[this.qualifier]=[]),this.model[this.qualifier].push(e.uuid)):this.model[this.qualifier]=e.uuid,this._recompileDom(),this.textTyped=""}.bind(this))},this.editComponent=function(e){var t={componentId:e.uid,componentUuid:e.uuid,componentType:e.typeCode,content:e};a.openNestedComponentEditor(t,this.editorStackId,null).then(function(){this._recompileDom()}.bind(this))}}]).component("cmsItemDropdown",{templateUrl:"cmsItemDropdownTemplate.html",controller:"cmsItemDropdownController",controllerAs:"cmsItemDropdownCtrl",require:{ge:"^^genericEditor"},bindings:{field:"=",qualifier:"=",model:"=",id:"="}})},function(e,t){angular.module("nestedComponentModule",["cmsSmarteditServicesModule","eventServiceModule"]).constant("ON_EDIT_NESTED_COMPONENT_EVENT","ON_EDIT_NESTED_COMPONENT").controller("nestedComponentController",["ON_EDIT_NESTED_COMPONENT_EVENT","assetsService","systemEventService",function(e,t,n){this.$onInit=function(){this.imageRoot=t.getAssetsRoot()},this.onComponentClick=function(){this.isSelected&&n.sendAsynchEvent(e,{qualifier:this.qualifier,item:this.item})}}]).component("nestedComponent",{controller:"nestedComponentController",templateUrl:"nestedComponentTemplate.html",bindings:{item:"<",qualifier:"<",isSelected:"<"}})},function(e,t){angular.module("subTypeSelectorModule",[]).controller("subTypeSelectorController",["$q",function(e){this.$onInit=function(){this.subTypeSelected=null,this.fetchStrategy={fetchAll:function(){var t=Object.keys(this.subTypes).map(function(e){return{id:e,label:this.subTypes[e]}}.bind(this));return e.when(t)}.bind(this)}},this.onChange=function(){this.subTypeSelected&&this.onSubTypeSelected(this.subTypeSelected)}.bind(this)}]).component("subTypeSelector",{controller:"subTypeSelectorController",templateUrl:"subTypeSelectorTemplate.html",bindings:{subTypes:"<",onSubTypeSelected:"<"}})},function(e,t){angular.module("cmsItemDropdownDropdownPopulatorModule",["uriDropdownPopulatorModule","genericEditorStackServiceModule"]).factory("CMSItemDropdownDropdownPopulator",["extend","UriDropdownPopulatorFactory","genericEditorStackService",function(e,t,n){var i=function(){};(i=e(t,i)).prototype.fetchAll=function(e){return o(e),t.prototype.fetchAll(e).then(function(t){return a(e.field.editorStackId,t)})},i.prototype.fetchPage=function(e){return o(e),t.prototype.fetchPage(e).then(function(t){return t.response=a(e.field.editorStackId,t.response),t.pagination.count=t.response.length,t})},i.prototype.getItem=function(e){return o(e),t.prototype.getItem(e)};var o=function(e){e.field.uri="/cmswebservices/v1/sites/CURRENT_CONTEXT_SITE_ID/cmsitems"},a=function(e,t){var i=n.getEditorsStack(e).filter(function(e){return e.component.uuid}).map(function(e){return e.component.uuid});return t=t.filter(function(e){return!e.uuid||-1===i.indexOf(e.uuid)})};return new i}])},function(e,t){angular.module("nestedComponentManagementServiceModule",["genericEditorModalServiceModule","yLoDashModule"]).service("nestedComponentManagementService",["genericEditorModalService","lodash",function(e,t){this.openNestedComponentEditor=function(t,i,o){var a=n(t,i);return o=o||this.defaultSaveCallback,e.open(a,null,o)};var n=function(e,n){var i=e.componentType.toLowerCase();return{componentUuid:e.componentUuid,componentType:e.componentType,title:"type."+i+".name",content:t.defaultsDeep({},{typeCode:e.componentType,itemtype:e.componentType,visible:!0},e.content),editorStackId:n}};this.defaultSaveCallback=function(){}.bind(this)}])},function(e,t){angular.module("componentMenuModule",["eventServiceModule","componentTypesTabModule","componentsTabModule","cmsDragAndDropServiceModule","componentMenuServiceModule"]).controller("componentMenuController",["$q","systemEventService","componentMenuService","DRAG_AND_DROP_EVENTS","EVENTS",function(e,t,n,i,o){var a={COMPONENT_TYPES_TAB_ID:"componentTypesTab",COMPONENTS_TAB_ID:"componentsTab"};this.$onInit=function(){this._recompileDom=function(){},this._initializeComponentMenu(),this.removePageChangeEventHandler=t.registerEventHandler(o.PAGE_CHANGE,this._initializeComponentMenu),this.removeOpenComponentEventHandler=t.registerEventHandler("ySEComponentMenuOpen",this._resetComponentMenu),this.removeDropdownEvent=t.registerEventHandler(i.DRAG_STARTED,this._closeMenu),this.removeOverlapEvent=t.registerEventHandler("OVERLAY_DISABLED",this._closeMenu)},this.$onDestroy=function(){this.removePageChangeEventHandler(),this.removeOpenComponentEventHandler(),this.removeDropdownEvent(),this.removeOverlapEvent()},this._initializeComponentMenu=function(){this.tabsList=null,this._recompileDom(),n.hasMultipleContentCatalogs().then(function(e){this.hasMultipleContentCatalogs=e;var t={id:a.COMPONENT_TYPES_TAB_ID,title:"se.cms.compomentmenu.tabs.componenttypes",templateUrl:"componentTypesTabWrapperTemplate.html"},n={id:a.COMPONENTS_TAB_ID,title:"se.cms.compomentmenu.tabs.customizedcomp",templateUrl:"componentsTabWrapperTemplate.html",hasMultipleContentCatalogs:e};this.tabsList=[t,n],this.tabsList.componentsTab=n,this._resetComponentMenu()}.bind(this))}.bind(this),this._resetComponentMenu=function(){this.tabsList&&(this.tabsList.map(function(e){return e.active=e.id===a.COMPONENT_TYPES_TAB_ID,e.active}),t.sendAsynchEvent("RESET_COMPONENT_MENU_EVENT"))}.bind(this),this._closeMenu=function(){this.actionItem&&(this.actionItem.isOpen=!1)}.bind(this)}]).component("componentMenu",{templateUrl:"componentMenuTemplate.html",controller:"componentMenuController",bindings:{actionItem:"<"}})},function(e,t){angular.module("componentItemModule",["cmsSmarteditServicesModule","translationServiceModule"]).controller("componentItemController",["assetsService","$translate",function(e,t){this.$onInit=function(){this.imageRoot=e.getAssetsRoot()},this.getTemplateInfoForNonCloneableComponent=function(){return"<div class='se-ypopover--inner-content'>"+t.instant("se.cms.component.non.cloneable.tooltip",{componentName:this.componentInfo.name})+"</div>"},this.$onChanges=function(e){e.cloneOnDrop&&(this.componentDisabled=this.cloneOnDrop&&!this.componentInfo.cloneable)}}]).component("componentItem",{templateUrl:"componentItemTemplate.html",controller:"componentItemController",bindings:{componentInfo:"<",cloneOnDrop:"<"}})},function(e,t){angular.module("componentSearchModule",["eventServiceModule"]).controller("componentSearchController",["systemEventService",function(e){this.$onInit=function(){this._oldValue="",this._resetSearchBox(),this.removeResetEventListener=e.registerEventHandler("RESET_COMPONENT_MENU_EVENT",this._resetSearchBox)},this.$onDestroy=function(){this.removeResetEventListener()},this.$doCheck=function(){this.searchTerm!==this._oldValue&&(this._oldValue=this.searchTerm,this.showResetButton=""!==this.searchTerm,this.onChange({searchTerm:this.searchTerm}))},this._resetSearchBox=function(){this.searchTerm=""}.bind(this)}]).component("componentSearch",{templateUrl:"componentSearchTemplate.html",controller:"componentSearchController",bindings:{onChange:"&",placeholder:"@"}})},function(e,t){angular.module("componentTypeModule",["cmsSmarteditServicesModule"]).controller("componentTypeController",["assetsService",function(e){this.$onInit=function(){this.imageRoot=e.getAssetsRoot()}}]).component("componentType",{templateUrl:"componentTypeTemplate.html",controller:"componentTypeController",bindings:{typeInfo:"<"}})},function(e,t){angular.module("nameFilterModule",[]).filter("nameFilter",function(){return function(e,t){var n=[];if(!t||t.length<3)return e;var i=(t=t.toLowerCase()).split(" ");return(e||[]).forEach(function(e){var t=!0,o=e.name.toLowerCase();i.forEach(function(e){if(-1===o.indexOf(e))return t=!1,!1}),t&&-1===n.indexOf(e)&&n.push(e)}),n}})},function(e,t){angular.module("componentMenuServiceModule",["catalogServiceModule","experienceServiceModule","cmsDragAndDropServiceModule","yLoDashModule","smarteditServicesModule"]).service("componentMenuService",["$timeout","storageService","catalogService","experienceService","cmsDragAndDropService","lodash",function(e,t,n,i,o,a){this.hasMultipleContentCatalogs=function(){return this.getContentCatalogs().then(function(e){return e.length>1})},this.getContentCatalogs=function(){return this._getPageContext().then(function(e){var t=e.siteId;return n.getContentCatalogsForSite(t)}.bind(this))}.bind(this),this.getValidContentCatalogVersions=function(){return this._getPageContext().then(function(e){return this.getContentCatalogs().then(function(t){return t.map(function(t){return this._getActiveOrCurrentVersionForCatalog(e,t)}.bind(this))}.bind(this))}.bind(this))}.bind(this),this._getActiveOrCurrentVersionForCatalog=function(e,t){var n=t.versions.filter(function(n){return e.catalogId===t.catalogId?e.catalogVersion===n.version:n.active})[0];return{isCurrentCatalog:e.catalogVersion===n.version,catalogName:t.name,catalogId:t.catalogId,catalogVersionId:n.version,id:n.uuid}},this._getPageContext=function(){return i.getCurrentExperience().then(function(e){return e.pageContext})},this.refreshDragAndDrop=function(){e(function(){o.update()},0)},this.getInitialCatalogVersion=function(e){return t.getValueFromCookie("se_catalogmenu_catalogversion_cookie").then(function(t){var n="string"==typeof t?t:null,i=e.filter(function(e){return e.id===n}.bind(this))[0];return i||a.last(e)})},this.persistCatalogVersion=function(e){t._putValueInCookie("se_catalogmenu_catalogversion_cookie",e)}}])},function(e,t){angular.module("componentTypesTabModule",["eventServiceModule","componentSearchModule","componentServiceModule","componentTypeModule","nameFilterModule","componentMenuServiceModule"]).controller("componentTypesTabController",["$log","systemEventService","ComponentService","componentMenuService",function(e,t,n,i){this.$onInit=function(){this._retrieveComponentTypes()},this.onSearchTermChanged=function(e){this.searchTerm=e,i.refreshDragAndDrop()}.bind(this),this._retrieveComponentTypes=function(){n.getSupportedComponentTypesForCurrentPage().then(function(e){this.componentTypes=e,i.refreshDragAndDrop()}.bind(this)).catch(function(t){e.error("ComponentMenuController.$onInit() - error loading types. "+t)})}}]).component("componentTypesTab",{templateUrl:"componentTypesTabTemplate.html",controller:"componentTypesTabController",bindings:{}})},function(e,t){angular.module("componentsTabModule",["componentMenuServiceModule","componentServiceModule","componentItemModule","smarteditServicesModule"]).constant("ENABLE_CLONE_ON_DROP","enableCloneComponentOnDrop").controller("componentsTabController",["$q","componentMenuService","ComponentService","sharedDataService","ENABLE_CLONE_ON_DROP",function(e,t,n,i,o){this.$onInit=function(){this.catalogVersions=null,this.selectedCatalogVersionId=null,this.selectedCatalogVersion=null,this.catalogVersionTemplate="catalogVersionTemplate.html",i.get(o).then(function(e){this.cloneOnDrop=e||!1}.bind(this)),this.hasMultipleContentCatalogs?this.catalogVersionsFetchStrategy={fetchAll:this.fetchCatalogVersions}:this.fetchCatalogVersions().then(function(){this.onCatalogVersionChange()}.bind(this)),this.resetComponentsList=function(){},this.searchTerm=""},this.onCatalogVersionChange=function(){this.selectedCatalogVersionId&&(this.selectedCatalogVersion=this.catalogVersions.filter(function(e){return e.id===this.selectedCatalogVersionId}.bind(this))[0],t.persistCatalogVersion(this.selectedCatalogVersionId),this.resetComponentsList())}.bind(this),this.onSearchTermChanged=function(e){this.searchTerm=e}.bind(this),this.fetchCatalogVersions=function(){return t.getValidContentCatalogVersions().then(function(e){return this.catalogVersions=e,t.getInitialCatalogVersion(this.catalogVersions).then(function(t){return this.selectedCatalogVersion=t,this.selectedCatalogVersionId=this.selectedCatalogVersion.id,e}.bind(this))}.bind(this))}.bind(this),this.loadComponentItems=function(i,o,a){if(!this.selectedCatalogVersion)return e.when({results:[]});var r={catalogId:this.selectedCatalogVersion.catalogId,catalogVersion:this.selectedCatalogVersion.catalogVersionId,mask:i,pageSize:o,page:a};return n.loadPagedComponentItemsByCatalogVersion(r).then(function(e){return t.refreshDragAndDrop(),e.results=e.response,delete e.response,e}.bind(this))}.bind(this),this.onComponentCloneOnDropChange=function(){i.set(o,this.cloneOnDrop)}}]).component("componentsTab",{templateUrl:"componentsTabTemplate.html",controller:"componentsTabController",bindings:{hasMultipleContentCatalogs:"<",isActive:"<"}})},function(e,t){angular.module("componentEditorModule",["yLoDashModule","componentServiceModule","eventServiceModule","functionsModule"]).constant("COMPONENT_EDITOR_TAB_CONTENT_CHANGED_EVENT","ComponentEditorTabContentChangedEvent").factory("componentEditorService",["$q","lodash","ComponentService",function(e,t,n){var i,o={},a=function(){function i(){this._tabs=[],this._saveTabs=[],this._componentInfo={},this._tabDirtyState={},this._fullPayload={},this._partialPayload={},this._deferreds=[],this._content={}}function o(e,n,i){var o={};i.map(function(e){return e.qualifier}).filter(function(t){return Object.keys(e).indexOf(t)>-1}).forEach(function(t){o[t]=e[t]}),this._partialPayload[n]=t.cloneDeep(o)}function a(e){t.forEach(this._partialPayload,function(e){this._fullPayload=t.merge(this._fullPayload,e)}.bind(this)),t.forEach(e,function(t,n){this._fullPayload[n]||(this._fullPayload[n]=e[n])}.bind(this))}function r(e){return e.identifier?n.updateComponent(e):n.createNewComponent(this._componentInfo,e)}return i.prototype.registerTab=function(e,n){this._tabs.push(e),this._componentInfo=t.isEmpty(this._componentInfo)?t.cloneDeep(n):t.cloneDeep(this._componentInfo)},i.prototype.saveTabData=function(n,i,s){if(o.call(this,n,i,s),this._saveTabs.push(i),this._saveTabs.length===Object.keys(this._tabDirtyState).length)return a.call(this,n),r.call(this,this._fullPayload).then(function(e){var i=t.cloneDeep(this._partialPayload);return this._deferreds.forEach(function(t,n){t.resolve({payload:i[Object.keys(i)[n]],response:e})}.bind(this)),this.resetTabData(),{payload:n,response:e}}.bind(this),function(t){this._deferreds.forEach(function(e){e.reject(t)}),this._deferreds=[];var n=e.defer();return n.reject(t),this.resetTabData(),n.promise}.bind(this));var c=e.defer();return this._deferreds.push(c),c.promise},i.prototype.fetchTabsContent=function(e){return t.isEmpty(this._content)&&(this._content=n.loadComponentItem(e)),this._content},i.prototype.setTabDirtyState=function(e,t){t?this._tabDirtyState[e]=t:this._tabDirtyState[e]&&delete this._tabDirtyState[e]},i.prototype.resetTabData=function(){this._saveTabs=[],this._fullPayload={},this._partialPayload={},this._content={}},i}();return this.getInstance=function(e){return i=e||"DEFAULT_ID",o[i]=o[i]||new a,o[i]},this.destroyInstance=function(){delete o[i]},{getInstance:this.getInstance,destroyInstance:this.destroyInstance}}]).controller("componentEditorController",["$q","$scope","componentEditorService","systemEventService","COMPONENT_EDITOR_TAB_CONTENT_CHANGED_EVENT","copy",function(e,t,n,i,o,a){var r,s,c;this._validateStructure=function(){if(this.tabStructure&&this.structureApi)throw"please provide only one of either structure or structure api";if(!this.tabStructure&&!this.structureApi)throw"neither a structure nor a structure api is provided. The tab cannot be loaded with an empty structure."},this.$onInit=function(){r=n.getInstance(this.componentId),this._validateStructure(),r.registerTab(this.tabId,this.componentInfo),this.componentId?r.fetchTabsContent(this.componentId).then(function(e){this.content=e,this.isReady=!0}.bind(this)):(this.content=this.content||{},this.isReady=!0)},this.getApi=function(e){s=e},t.$watch(function(){return"function"==typeof this.isDirtyTab&&this.isDirtyTab()}.bind(this),function(e){r.setTabDirtyState(this.tabId,e)}.bind(this)),this.onSubmit=function(){var t=a(this.component);return this.isDirty()?(t=this.sanitizePayload(t,this.fields),this.smarteditComponentId&&(t.identifier=this.smarteditComponentId),r.saveTabData(t,this.id,this.fields)):e.when({payload:t,response:t})},this.$doCheck=function(){s&&c!==angular.toJson(s.getContent())&&(c=angular.toJson(s.getContent()),i.sendAsynchEvent(o,{tabId:this.tabId,component:s.getContent()}))},this.$onDestroy=function(){r.resetTabData(),n.destroyInstance()}.bind(this)}]).component("componentEditor",{transclude:!1,templateUrl:"componentEditorTemplate.html",controller:"componentEditorController",controllerAs:"compCtrl",bindings:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"=",componentType:"=",tabId:"=",componentInfo:"<",tabStructure:"<?",structureApi:"<?",content:"<?"}})},function(e,t){angular.module("editorModalServiceModule",["genericEditorModalServiceModule","gatewayProxyModule","typeStructureRestServiceModule","componentServiceModule","renderServiceModule","cmsitemsRestServiceModule","yLoDashModule"]).factory("editorModalService",["$q","isBlank","genericEditorModalService","gatewayProxy","ComponentService","renderService",function(e,t,n,i,o,a){function r(){this.gatewayId="EditorModal",i.initForService(this,["open","openAndRerenderSlot"])}function s(e,n,i,o,a){return e=e||{},e.position=t(e.position)?a:e.position,e.slotId=e.slotId||o,e.typeCode=e.typeCode||n,e.itemtype=e.itemtype||n,e.catalogVersion=e.catalogVersion||i,e.visible=!!t(e.visible)||e.visible,e}function c(e,t){var n;try{n=e.smarteditComponentType.toLowerCase()}catch(e){throw"editorModalService._createComponentData - invalid component type in componentAttributes."+e}var i=null;return i=void 0===e.smarteditComponentUuid?s(e.content,e.smarteditComponentType,e.catalogVersionUuid,t.slotId,t.position):void 0,{componentUuid:e.smarteditComponentUuid,componentType:e.smarteditComponentType,title:"type."+n+".name",targetedQualifier:t.targetedQualifier,initialDirty:e.initialDirty,content:i}}return r.prototype.openAndRerenderSlot=function(e,t,i){var r=c({smarteditComponentType:e,smarteditComponentUuid:t},{targetedQualifier:i});return n.open(r,null,function(){o.getSlotsForComponent(r.componentUuid).then(function(e){a.renderSlots(e)})})},r.prototype.open=function(e,t,i,r){var s=c(e,{slotId:t,position:i,targetedQualifier:r});return n.open(s,null,function(){if(s.componentUuid)return o.getSlotsForComponent(s.componentUuid).then(function(e){a.renderSlots(e)})})},new r}])},function(e,t){angular.module("genericTabModule",["genericEditorModule","resourceLocationsModule","componentEditorModule","eventServiceModule","cmsLinkToSelectModule"]).controller("genericTabCtrl",["TYPES_RESOURCE_URI","CMS_LINK_TO_RELOAD_STRUCTURE_EVENT_ID","systemEventService",function(e,t,n){var i=e+"?code=:smarteditComponentType&mode=:structureApiMode";this.$onInit=function(){this.structureApi=this.getStructureApiByMode("DEFAULT"),this.changeStructureEventListener=n.registerEventHandler(t,this.onChangeStructureEvent.bind(this))},this.onChangeStructureEvent=function(e,t){t.structureApiMode?(this.tabStructure=null,this.structureApi=this.getStructureApiByMode(t.structureApiMode)):t.structure&&(this.structureApi=null,this.tabStructure=t.structure.attributes),this.content=t.content},this.$onDestroy=function(){this.changeStructureEventListener()},this.getStructureApiByMode=function(e){return i.replace(/:structureApiMode/gi,e)}}]).component("genericTab",{transclude:!1,templateUrl:"componentEditorWrapperTemplate.html",controller:"genericTabCtrl",bindings:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"<",componentType:"<",tabId:"<",componentInfo:"<",content:"<"}})},function(e,t){angular.module("componentRestrictionsEditorModule",["restrictionTypesServiceModule","restrictionsServiceModule"]).controller("componentRestrictionsEditorController",["restrictionTypesService","restrictionsService",function(e,t){this.restrictionsResult=function(e,t){this.model.onlyOneRestrictionMustApply=e,this.model.restrictions=t}.bind(this),this.getRestrictionTypes=function(){return e.getRestrictionTypes()},this.getSupportedRestrictionTypes=function(){return t.getSupportedRestrictionTypeCodes()},this.$onInit=function(){void 0===this.model.restrictions&&(this.editor.pristine.restrictions=[],this.editor.pristine.onlyOneRestrictionMustApply=!1)},this.$onChanges=function(e){e.model&&(this.model.restrictions=e.model.currentValue.restrictions,this.model.onlyOneRestrictionMustApply=e.model.currentValue.onlyOneRestrictionMustApply)}}]).component("componentRestrictionsEditor",{templateUrl:"componentRestrictionsEditorTemplate.html",controller:"componentRestrictionsEditorController",controllerAs:"componentRestrictionsEditorCtrl",bindings:{model:"<",editor:"="}})},function(e,t){angular.module("pageRestrictionsEditorModule",["pageRestrictionsModule","restrictionTypesServiceModule","restrictionsServiceModule"]).controller("pageRestrictionsEditorController",["restrictionTypesService","pageRestrictionsFacade","restrictionsService",function(e,t,n){this.restrictionsResult=function(e,t){this.model.onlyOneRestrictionMustApply=e,this.model.restrictions=t}.bind(this),this.getRestrictionTypes=function(){return t.getRestrictionTypesByPageType(this.model.typeCode)}.bind(this),this.getSupportedRestrictionTypes=function(){return n.getSupportedRestrictionTypeCodes()},this.$onChanges=function(e){e.model&&(this.model.restrictions=e.model.currentValue.restrictions,this.model.onlyOneRestrictionMustApply=e.model.currentValue.onlyOneRestrictionMustApply)}}]).component("pageRestrictionsEditor",{templateUrl:"pageRestrictionsEditorTemplate.html",controller:"pageRestrictionsEditorController",controllerAs:"pageRestrictionsEditorCtrl",bindings:{model:"<page"}})},function(e,t){angular.module("cmsDragAndDropServiceModule",["yjqueryModule","dragAndDropServiceModule","eventServiceModule","gatewayFactoryModule","smarteditServicesModule"]).constant("DRAG_AND_DROP_EVENTS",{DRAG_STARTED:"CMS_DRAG_STARTED",DRAG_STOPPED:"CMS_DRAG_STOPPED"}).constant("ENABLE_CLONE_ON_DROP","enableCloneComponentOnDrop").service("cmsDragAndDropService",["yjQuery","dragAndDropService","systemEventService","gatewayFactory","sharedDataService","ID_ATTRIBUTE","UUID_ATTRIBUTE","TYPE_ATTRIBUTE","DRAG_AND_DROP_EVENTS","ENABLE_CLONE_ON_DROP",function(e,t,n,i,o,a,r,s,c,l){this._gateway=i.createGateway("cmsDragAndDrop"),this.register=function(){t.register({id:"se.cms.dragAndDrop",sourceSelector:".smartEditComponent[data-smartedit-component-type!='ContentSlot']",targetSelector:"",startCallback:this._onStart,stopCallback:this._onStop,enableScrolling:!1})},this.unregister=function(){t.unregister(["se.cms.dragAndDrop"])},this.apply=function(){t.apply()},this.update=function(){t.update("se.cms.dragAndDrop")},this._onStart=function(e){o.get(l).then(function(t){var i=this._getSelector(e.target).closest(".smartEditComponent"),o={componentId:i.attr(a),componentUuid:i.attr(r),componentType:i.attr(s),slotUuid:null,slotId:null,cloneOnDrop:t};this._gateway.publish(c.DRAG_STARTED,o),n.sendAsynchEvent(c.DRAG_STARTED)}.bind(this))}.bind(this),this._onStop=function(){this._gateway.publish(c.DRAG_STOPPED)}.bind(this),this._getSelector=function(t){return e(t)}}])},function(e,t){!function(){function e(e,t,n){for(var i=0;i<e.length;i++)if(e[i][t]===n)return i;return-1}angular.module("editorTabsetModule",["ui.bootstrap","functionsModule","experienceInterceptorModule","tabsetModule","eventServiceModule","cmssmarteditContainerTemplates"]).factory("editorTabsetService",function(){var t=function(){this.tabsList=[]};return t.prototype.registerTab=function(e,t,n){this._validateTab(e,t,n),this.tabsList.push({id:e,title:t,templateUrl:n,hasErrors:!1})},t.prototype._validateTabs=function(e){e.forEach(function(e){this._validateTab(e.id,e.title,e.templateUrl)}.bind(this))},t.prototype._validateTab=function(e,t,n){if(!e)throw new Error("editorTabsetService.registerTab.invalidTabID");if(!t)throw new Error("editorTabsetService.registerTab.missingTabTitle");if(!n)throw new Error("editorTabsetService.registerTab.missingTemplateUrl")},t.prototype.deleteTab=function(t){var n=e(this.tabsList,"id",t);if(!(n>=0))throw new Error("editorTabsetService.deleteTab.tabNotFound");delete this.tabsList[n]},new t}).directive("editorTabset",["$q","$log","systemEventService","merge","copy",function(t,n,i,o,a){return{restrict:"E",transclude:!1,templateUrl:"editorTabsetTemplate.html",scope:{control:"=",model:"=",tabs:"="},link:function(r){function s(e,t,n){if(!e)throw new Error("editorTabset.invalidTabID");if(!t)throw new Error("editorTabset.missingTabTitle");if(!n)throw new Error("editorTabset.missingTemplateUrl")}var c=!1,l=function(){for(var e in r.tabsList)r.tabsList[e].hasErrors=!1};r.tabs.forEach(function(e){s(e.id,e.title,e.templateUrl)}),r.tabsList=a(r.tabs),r.numTabsDisplayed=6,r.control={saveTabs:function(){var n={errorsList:[],item:{},operationSuccessful:!0},o=t.defer();return i.sendAsynchEvent("sm-editor-save",n).then(function(){l();for(var t in n.errorsList){var i=n.errorsList[t],a=e(r.tabsList,"id",i);a>=0&&(r.tabsList[a].hasErrors=!0)}n.operationSuccessful?o.resolve(n.item):o.reject()}),o.promise},resetTabs:function(){return i.sendAsynchEvent("sm-editor-reset").then(function(){l()})},cancelTabs:function(){return i.sendAsynchEvent("sm-editor-cancel").then(function(){l()})},isDirty:function(){return c}};var d={},u=function(e,n){d[n.tabId]=n.isDirty;for(var i in d)if(d[i])return c=!0,t.when(!0);return c=!1,t.when(!0)};i.registerEventHandler("EDITOR_IN_ERROR_EVENT",function(n,i){var o=e(r.tabsList,"id",i);return o>=0&&(r.tabsList[o].hasErrors=!0),t.when()}),i.registerEventHandler("sm-editor-is-dirty",u),r.$on("$destroy",function(){i.unRegisterEventHandler("sm-editor-is-dirty",u)}),r.tabControl=function(e){var a=function(i,a){return t.when(function(){if(e.onSave)return e.onSave().then(function(e){a.item=o(a.item,e)},function(t){return t&&(t.data&&t.data.errors?t.data.errors.forEach(function(t){var n=t.tabId||e.tabId;a.errorsList.includes(n)||a.errorsList.push(n)}):a.errorsList.push(e.tabId)),a.operationSuccessful=!1,t});n.warn("Cannot save tab",e.tabId,". Save callback not defined.")}())},r=function(){return t.when(function(){if(e.onReset)return e.onReset().then(function(e){return e},function(e){return e});n.warn("Cannot reset tab",e.tabId,". Reset callback not defined.")}())},s=function(){return t.when(function(){if(e.onCancel)return e.onCancel().then(function(e){return e},function(e){return e});n.warn("Cannot cancel tab",e.tabId,". Cancel callback not defined.")}())};e.$watch(function(){return"function"==typeof e.isDirty&&e.isDirty()},function(t,n){"boolean"==typeof t&&t!==n&&i.sendAsynchEvent("sm-editor-is-dirty",{tabId:e.tabId,isDirty:t})}),i.registerEventHandler("sm-editor-save",a),i.registerEventHandler("sm-editor-reset",r),i.registerEventHandler("sm-editor-cancel",s),e.$on("$destroy",function(){i.unRegisterEventHandler("sm-editor-save",a),i.unRegisterEventHandler("sm-editor-reset",r),i.unRegisterEventHandler("sm-editor-cancel",s)})}}}}])}()},function(e,t){angular.module("catalogAwareSelectorModule",["itemSelectorPanelModule","yEditableListModule"]).controller("CatalogAwareSelectorController",["$q","$log","$translate","lodash",function(e,t,n,i){this.model=[],this.currentOptions={},this.itemsList=[],this.$onInit=function(){void 0===this.editable&&(this.editable=!0),this.exposedModel.$viewChangeListeners.push(this._syncFromExternalModel),this.exposedModel.$render=this._syncFromExternalModel,this.catalogItemTypeKey=this.catalogItemTypeKey?this.catalogItemTypeKey:"se.cms.catalogaware.catalogitemtype.default",n(this.catalogItemTypeKey).then(function(e){this.catalogItemType=e}.bind(this))},this._syncFromExternalModel=function(){0===this.model.length&&(this.model.push.apply(this.model,this.exposedModel.$modelValue),this._syncFromModelToItemsList())}.bind(this),this._syncFromItemsListToModel=function(){this.model.length=0,this.itemsList.map(function(e){this.model.push(e.id)}.bind(this))},this._syncFromModelToItemsList=function(){var e={},n=[];this.model.map(function(t){var o=i.find(this.itemsList,function(e){return e.id===t});o?e[t]=o:n.push(t)}),this._fetchItems(n,e).then(function(){this.itemsList.length=0,this.model.map(function(n){var i=e[n];i?this.itemsList.push(i):t.warn("[seCatalogAwareSelector] - Cannot find item with key ",n)}.bind(this)),this._refreshListWidget&&i.isFunction(this._refreshListWidget)&&this._refreshListWidget()}.bind(this))},this._fetchItems=function(t,n){var i=e.when(null);if(t.length>0)if(this.itemsFetchStrategy.fetchAll)i=this.itemsFetchStrategy.fetchAll().then(function(e){t.map(function(t){n[t]=e.find(function(e){return e.id===t})}.bind(this))});else{if(!this.itemsFetchStrategy.fetchEntities){if(this.itemsFetchStrategy.fetchEntity){var o=[];return t.map(function(e){o.push(this.itemsFetchStrategy.fetchEntity(e))}.bind(this)),e.all(o).then(function(e){e.map(function(e){n[e.id]=e})})}throw Error("[seCatalogAwareSelector] Invalid items fetch strategy. Cannot retrieve information.")}i=this.itemsFetchStrategy.fetchEntities(this.model).then(function(e){e.map(function(e){n[e.id]=e})}.bind(this))}return i},this.listIsEmpty=function(){return 0===this.model.length},this.openEditingPanel=function(){this.showPanel()},this.onPanelChange=function(){this._syncFromModelToItemsList(),this.exposedModel.$setViewValue(this.model)}.bind(this),this.onListChange=function(){this._syncFromItemsListToModel(),this.exposedModel.$setViewValue(this.model)}.bind(this)}]).component("seCatalogAwareSelector",{templateUrl:"catalogAwareSelectorTemplate.html",controller:"CatalogAwareSelectorController",controllerAs:"ctrl",require:{exposedModel:"ngModel"},bindings:{id:"@",getCatalogs:"<",itemsFetchStrategy:"<",itemTemplate:"<?",catalogItemTypeKey:"@?",editable:"<?",maxNumItems:"<?"}})},function(e,t){angular.module("categorySelectorModule",["catalogAwareSelectorModule","catalogInformationServiceModule"]).constant("CATEGORY_TEMPLATE_FOR_SELECTOR","categoryTemplate.html").controller("CategorySelectorController",["$q","lodash","sharedDataService","seCatalogInformationService","CATEGORY_TEMPLATE_FOR_SELECTOR",function(e,t,n,i,o){this.$onInit=function(){this.categoryTemplate=o,this.getCatalogs=i.getProductCatalogsInformation,this.itemsFetchStrategy=i.categoriesFetchStrategy,void 0===this.editable&&(this.editable=!0)}}]).component("seCategorySelector",{templateUrl:"categorySelectorTemplate.html",controller:"CategorySelectorController",controllerAs:"ctrl",bindings:{id:"@",model:"<",qualifier:"<",editable:"<?"}})},function(e,t){angular.module("itemSelectorPanelModule",["sliderPanelModule","l10nModule","recompileDomModule"]).controller("ItemSelectorPanelController",["$q","$element","lodash",function(e,t,n){this.catalogInfo={},this.catalogItemTemplate="catalogItemTemplate.html",this.saveButtonDisabled=!0,this.$onInit=function(){this.sliderConfiguration={cssSelector:"#y-modal-dialog",greyedOutOverlay:!1,modal:{showDismissButton:!0,title:this.catalogItemType,cancel:{onClick:this._cancelItemsChanges,label:"se.cms.catalogaware.panel.button.cancel"},save:{onClick:this._saveItemChanges,label:"se.cms.catalogaware.panel.button.add",isDisabledFn:this._isSaveButtonDisabled}}},this._initCatalogs(),(void 0===this.maxNumItems||this.maxNumItems<0)&&(this.maxNumItems=0),this.showPanel=function(){this.catalogInfo={},this._initCatalogs(),this._internalItemsSelected=this.itemsSelected?n.clone(this.itemsSelected):[],this._internalShowPanel()}.bind(this)},this._initCatalogs=function(){return this.getCatalogs().then(function(e){this.catalogs=e,1===this.catalogs.length&&(this.catalogInfo.catalogId=this.catalogs[0].id),this._initCatalogSelector(),this._initCatalogVersionSelector(),this._initItemsSelector()}.bind(this))},this._initCatalogSelector=function(){if(Array.isArray(this.catalogList))throw Error("Cannot show panel - Invalid list of catalogs.");this.catalogSelectorFetchStrategy={fetchAll:function(){return e.when(this.catalogs)}.bind(this)}},this._onCatalogSelectorChange=function(){this.resetCatalogVersionSelector&&this.resetCatalogVersionSelector()}.bind(this),this._initCatalogVersionSelector=function(){this.catalogVersionSelectorFetchStrategy={fetchAll:function(){var t=[];return this.catalogInfo.catalogId&&(t=this.catalogs.find(function(e){return e.id===this.catalogInfo.catalogId}.bind(this)).versions),e.when(t)}.bind(this)}},this._onCatalogVersionSelectorChange=function(){this.catalogInfo.catalogId&&this.catalogInfo.catalogVersion&&this.resetItemsListSelector&&this.resetItemsListSelector()}.bind(this),this._initItemsSelector=function(){var e=function(e,t){var i=n.concat([this.catalogInfo],Array.from(arguments).slice(2));return e.apply(null,i).then(function(e){if(t)for(var i=e.results.length;i--;){var o=e.results[i];n.includes(this._internalItemsSelected,o.uid)&&(e.results.splice(i,1),e.pagination.count--)}return e}.bind(this))}.bind(this);this._internalItemsFetchStrategy={fetchAll:this.itemsFetchStrategy.fetchAll?e.bind(null,this.itemsFetchStrategy.fetchAll,!1):null,fetchPage:this.itemsFetchStrategy.fetchPage?e.bind(null,this.itemsFetchStrategy.fetchPage,!0):null,fetchEntity:this.itemsFetchStrategy.fetchEntity,fetchEntities:this.itemsFetchStrategy.fetchEntities}},this._onItemsSelectorChange=function(){this._isItemSelectorEnabled()&&(this.saveButtonDisabled=!1)}.bind(this),this._isSaveButtonDisabled=function(){return this.saveButtonDisabled}.bind(this),this._cancelItemsChanges=function(){this.catalogInfo={},this._internalHidePanel()}.bind(this),this._saveItemChanges=function(){this.itemsSelected.splice.apply(this.itemsSelected,[0,this.itemsSelected.length].concat(this._internalItemsSelected)),this.onChange&&this.onChange(),this._internalHidePanel()}.bind(this),this._isItemSelectorEnabled=function(){return this.catalogInfo&&this.catalogInfo.catalogId&&this.catalogInfo.catalogVersion}.bind(this)}]).component("seItemSelectorPanel",{templateUrl:"itemSelectorPanelTemplate.html",controller:"ItemSelectorPanelController",controllerAs:"ctrl",bindings:{panelTitle:"<",itemsSelected:"=",itemTemplate:"<",getCatalogs:"<",itemsFetchStrategy:"<",onChange:"=",showPanel:"=",hidePanel:"=?",catalogItemType:"<",maxNumItems:"<?"}})},function(e,t){angular.module("productSelectorModule",["catalogAwareSelectorModule","catalogInformationServiceModule"]).constant("PRODUCT_TEMPLATE_FOR_SELECTOR","productTemplate.html").constant("MAX_NUM_PRODUCTS_IN_SELECTOR",10).controller("ProductSelectorController",["$q","lodash","seCatalogInformationService","PRODUCT_TEMPLATE_FOR_SELECTOR","MAX_NUM_PRODUCTS_IN_SELECTOR",function(e,t,n,i,o){this.$onInit=function(){this.productTemplate=i,this.itemsFetchStrategy=n.productsFetchStrategy},this.getCatalogs=n.getProductCatalogsInformation,this.maxNumItems=o}]).component("seProductSelector",{templateUrl:"productSelectorTemplate.html",controller:"ProductSelectorController",controllerAs:"ctrl",bindings:{id:"@",model:"<",qualifier:"<"}})},function(e,t){angular.module("catalogInformationServiceModule",["catalogServiceModule","smarteditServicesModule","productCategoryServiceModule"]).service("seCatalogInformationService",["$q","lodash","catalogService","productService","productCategoryService","sharedDataService",function(e,t,n,i,o,a){this.getProductCatalogsInformation=function(){return this._getSiteUID().then(function(e){return this._cachedSiteUID===e&&this._parsedCatalogs?this._parsedCatalogs:(this._cachedSiteUID=e,n.getProductCatalogsForSite(e).then(function(e){var n={};return e.map(function(e){n[e.catalogId]={id:e.catalogId,name:e.name,versions:e.versions.map(function(e){return{id:e.version,label:e.version}})}}),this._parsedCatalogs=t.values(n),this._parsedCatalogs}.bind(this)))}.bind(this))}.bind(this),this.productsFetchStrategy={fetchPage:function(e,t,n,o){return this._getSiteUID().then(function(a){return e.siteUID=a,i.findProducts(e,{mask:t,pageSize:n,currentPage:o})}).then(function(e){return e.products.map(function(e){e.id=e.uid}.bind(this)),{pagination:e.pagination,results:e.products}}.bind(this))}.bind(this),fetchEntity:function(e){return this._getSiteUID().then(function(t){return i.getProductById(t,e)}.bind(this)).then(function(e){return e.id=e.uid,e}.bind(this))}.bind(this)},this.categoriesFetchStrategy={fetchPage:function(e,t,n,i){return this._getSiteUID().then(function(a){return e.siteUID=a,o.getCategories(e,t,n,i)}).then(function(e){return e.productCategories.map(function(e){e.id=e.uid}.bind(this)),{pagination:e.pagination,results:e.productCategories}})}.bind(this),fetchEntity:function(e){return this._getSiteUID().then(function(t){return o.getCategoryById(t,e)}).then(function(e){return e.id=e.uid,e})}.bind(this)},this._getSiteUID=function(){return a.get("experience").then(function(e){return e.siteDescriptor.uid})}}])},function(e,t){angular.module("cmsLinkToSelectModule",["eventServiceModule","seDropdownModule","resourceLocationsModule","cmsLinkComponentContentPageDropdownPopulatorModule"]).constant("CMS_LINK_TO_SELECT_OPTIONS",[{id:"content",structureApiMode:"CONTENT"},{id:"product",structureApiMode:"PRODUCT",hasCatalog:!0},{id:"category",structureApiMode:"CATEGORY",hasCatalog:!0},{id:"external",structureApiMode:"EXTERNAL"}]).constant("CMS_LINK_TO_RELOAD_STRUCTURE_EVENT_ID","cms-link-to-reload-structure").controller("CmsLinkToSelectController",["CMS_LINK_TO_SELECT_OPTIONS","CMS_LINK_TO_RELOAD_STRUCTURE_EVENT_ID","LINKED_DROPDOWN","systemEventService",function(e,t,n,i){function o(n,o){if(this.qualifier===o.qualifier&&o.optionObject){var a=o.optionObject.id,s=e.find(function(e){return e.id===a});if(!s)throw new Error("Error selected option not supported");a!==this.model.currentSelectedOptionValue&&(this.model.currentSelectedOptionValue=a,this.model.external="external"!==a,r.call(this,s),i.sendEvent(t,{content:this.model,structureApiMode:s.structureApiMode}))}}function a(e){return e.url?"external":e.product?"product":e.contentPage?"content":e.category?"category":null}function r(e){this.model&&("category"!==e.id&&delete this.model.category,"product"!==e.id&&delete this.model.product,e.hasCatalog||delete this.model.productCatalog,"content"!==e.id&&delete this.model.contentPage,"external"!==e.id&&delete this.model.url)}this.$onInit=function(){var e=a(this.model);null!==e&&(this.model.linkTo=e),this.unregisterDropdownListener=i.registerEventHandler(this.id+n,o.bind(this))},this.$onDestroy=function(){this.unregisterDropdownListener()}}]).component("cmsLinkToSelect",{transclude:!0,replace:!1,templateUrl:"cmsLinkToSelectTemplate.html",controller:"CmsLinkToSelectController",controllerAs:"ctrl",bindings:{field:"<",id:"<",model:"<",qualifier:"<"}})},function(e,t){angular.module("cmsLinkComponentContentPageDropdownPopulatorModule",["dropdownPopulatorInterfaceModule","contextAwareCatalogModule","uriDropdownPopulatorModule"]).factory("CMSLinkComponentcontentPageDropdownPopulator",["DropdownPopulatorInterface","extend","contextAwareCatalogService","uriDropdownPopulator",function(e,t,n,i){var o=function(){};return o=t(e,o),o.prototype.fetchPage=function(e){return n.getContentPageSearchUri().then(function(t){return e.field.uri=t,i.fetchPage(e)}.bind(this))},o.prototype.isPaged=function(){return!0},o.prototype.getItem=function(e){return n.getContentPageItemUri().then(function(t){return e.field.uri=t,i.getItem(e)}.bind(this))},new o}])},function(e,t){angular.module("cmsGenericEditorConfigurationServiceModule",["editorFieldMappingServiceModule","genericEditorTabServiceModule","functionsModule"]).service("cmsGenericEditorConfigurationService",["editorFieldMappingService","genericEditorTabService","sanitize",function(e,t,n){var i={PAGE:"PAGE",COMPONENT:"COMPONENT"};this.setDefaultEditorFieldMappings=function(){e.addFieldMapping("EntrySearchSelector",null,null,{template:"entrySearchSelectorTemplate.html"}),e.addFieldMapping("Media",null,null,{template:"mediaTemplate.html"}),e.addFieldMapping("MediaContainer",null,null,{template:"mediaContainerTemplate.html"}),e.addFieldMapping("NavigationNodeSelector",null,null,{template:"navigationNodeSelectorWrapperTemplate.html"}),e.addFieldMapping("MultiProductSelector",null,null,{template:"multiProductSelectorTemplate.html"}),e.addFieldMapping("MultiCategorySelector",null,null,{template:"multiCategorySelectorTemplate.html"}),e.addFieldMapping("CMSLinkToSelect",null,null,{template:"cmsLinkToSelectWrapperTemplate.html"}),e.addFieldMapping("SingleOnlineProductSelector",null,null,{template:"singleActiveCatalogAwareItemSelectorWrapperTemplate.html"}),e.addFieldMapping("SingleOnlineCategorySelector",null,null,{template:"singleActiveCatalogAwareItemSelectorWrapperTemplate.html"}),e.addFieldMapping("CMSItemDropdown",null,null,{template:"cmsItemDropdownWrapperTemplate.html"}),e.addFieldMapping("CMSComponentRestrictionsEditor",null,null,{template:"componentRestrictionsEditorWrapperTemplate.html"}),e.addFieldMapping("PageRestrictionsEditor",null,"restrictions",{template:"pageRestrictionsEditorWrapperTemplate.html"}),e.addFieldMapping("DisplayConditionEditor",null,"displayCondition",{template:"pageDisplayConditionWrapperTemplate.html",hidePrefixLabel:!0}),e.addFieldMapping("ShortString",this._isPagePredicate,"typeCode",{template:"pageTypeEditorTemplate.html",hidePrefixLabel:!0}),e.addFieldMapping("Boolean",null,"visible",{template:"booleanWrapperTemplate.html",i18nKey:"type.component.abstractcmscomponent.visible.name"}),e.addFieldMapping("LinkToggle",null,null,{template:"linkToggleWrapperTemplate.html",customSanitize:function(e,t){void 0===t&&(t=n),e.urlLink=t(e.urlLink)}})},this.setDefaultTabsConfiguration=function(){t.configureTab("default",{priority:5}),t.configureTab("information",{priority:5}),t.configureTab("administration",{priority:4})},this.setDefaultTabFieldMappings=function(){t.addComponentTypeDefaultTabPredicate(this._defaultTabPredicate),e.addFieldTabMapping(null,this._isComponentPredicate,"visible","visibility"),e.addFieldTabMapping(null,this._isComponentPredicate,"restrictions","visibility"),e.addFieldTabMapping(null,this._isComponentPredicate,"onlyOneRestrictionMustApply","visibility"),e.addFieldTabMapping(null,this._isComponentPredicate,"uid","basicinfo"),e.addFieldTabMapping(null,this._isComponentPredicate,"id","basicinfo"),e.addFieldTabMapping(null,this._isComponentPredicate,"modifiedtime","basicinfo"),e.addFieldTabMapping("DateTime",this._isComponentPredicate,"creationtime","basicinfo"),e.addFieldTabMapping("DisplayConditionEditor",this._isPagePredicate,"displayCondition","displaycondition"),e.addFieldTabMapping(null,this._isPagePredicate,"restrictions","restrictions")},this._defaultTabPredicate=function(e){return e.category===i.PAGE?"information":null},this._isPagePredicate=function(e,t,n){return n.category===i.PAGE},this._isComponentPredicate=function(e,t,n){return n.category===i.COMPONENT}}])},function(e,t){angular.module("linkToggleModule",[]).controller("linkToggleController",function(){this.emptyUrlLink=function(){this.model.linkToggle.urlLink=""},this.$onInit=function(){void 0===this.model.linkToggle&&(this.model.linkToggle={},this.editor.pristine.linkToggle={}),void 0===this.model.linkToggle.external&&(this.model.linkToggle.external=!0,this.editor.pristine.linkToggle.external=!0)}}).component("linkToggle",{templateUrl:"linkToggleTemplate.html",transclude:!0,controller:"linkToggleController",bindings:{field:"<",model:"<",editor:"<"}})},function(e,t){angular.module("seErrorsListModule",[]).controller("seErrorsListController",function(){this.getSubjectErrors=function(){return this.subject?this.errors.filter(function(e){return e.subject===this.subject}.bind(this)):this.errors}}).directive("seErrorsList",function(){return{templateUrl:"seErrorsListTemplate.html",restrict:"E",scope:{},controller:"seErrorsListController",controllerAs:"ctrl",bindToController:{errors:"=",subject:"="}}})},function(e,t){angular.module("seFileSelectorModule",[]).controller("seFileSelectorController",function(){this.imageRoot=this.imageRoot||"",this.disabled=this.disabled||!1,this.customClass=this.customClass||"",this.buildAcceptedFileTypesList=function(){return this.acceptedFileTypes.map(function(e){return"."+e}).join(",")}}).directive("seFileSelector",function(){return{templateUrl:"seFileSelectorTemplate.html",restrict:"E",scope:{},controller:"seFileSelectorController",controllerAs:"ctrl",bindToController:{imageRoot:"=?",uploadIcon:"=",labelI18nKey:"=",acceptedFileTypes:"=",customClass:"=?",disabled:"=?",onFileSelect:"&"},link:function(e,t){t.find("input").on("change",function(n){e.$apply(function(){e.ctrl.onFileSelect({files:n.target.files});var i=t.find("input");i.replaceWith(i.clone(!0))})})}}})},function(e,t){angular.module("seMediaAdvancedPropertiesModule",["ui.bootstrap"]).constant("seMediaAdvancedPropertiesConstants",{CONTENT_URL:"seMediaAdvancedPropertiesContentTemplate.html",I18N_KEYS:{DESCRIPTION:"se.media.advanced.information.description",CODE:"se.media.advanced.information.code",ALT_TEXT:"se.media.advanced.information.alt.text",ADVANCED_INFORMATION:"se.media.advanced.information",INFORMATION:"se.media.information"}}).controller("seMediaAdvancedPropertiesController",["seMediaAdvancedPropertiesConstants",function(e){this.$onInit=function(){this.i18nKeys=e.I18N_KEYS,this.contentUrl=e.CONTENT_URL}}]).component("seMediaAdvancedProperties",{bindings:{code:"=",advInfoIcon:"=",description:"=",altText:"="},controller:"seMediaAdvancedPropertiesController",controllerAs:"ctrl",templateUrl:"seMediaAdvancedPropertiesTemplate.html"}).component("seMediaAdvancedPropertiesCondensed",{bindings:{code:"=",advInfoIcon:"=",description:"=",altText:"="},controller:"seMediaAdvancedPropertiesController",controllerAs:"ctrl",templateUrl:"seMediaAdvancedPropertiesCondensedTemplate.html"})},function(e,t){angular.module("seMediaContainerFieldModule",["seMediaUploadFormModule","seMediaFormatModule","seErrorsListModule","seFileValidationServiceModule"]).controller("seMediaContainerFieldController",["seFileValidationService",function(e){this.image={},this.fileErrors=[],this.fileSelected=function(t,n){var i=this.image.format;this.resetImage(),1===t.length&&e.validate(t[0],this.fileErrors).then(function(){this.image={file:t[0],format:n||i}}.bind(this))},this.resetImage=function(){this.fileErrors=[],this.image={}},this.imageUploaded=function(e){this.model&&this.model[this.qualifier]?this.model[this.qualifier][this.image.format]=e:(this.model[this.qualifier]={},this.model[this.qualifier][this.image.format]=e),this.resetImage()},this.imageDeleted=function(e){delete this.model[this.qualifier][e]},this.isFormatUnderEdit=function(e){return e===this.image.format}}]).directive("seMediaContainerField",function(){return{templateUrl:"seMediaContainerFieldTemplate.html",restrict:"E",controller:"seMediaContainerFieldController",controllerAs:"ctrl",scope:{},bindToController:{field:"=",model:"=",editor:"=",qualifier:"="}}})},function(e,t){angular.module("seMediaFieldModule",["seMediaSelectorModule","seMediaUploadFormModule","seFileValidationServiceModule","seErrorsListModule","cmsSmarteditServicesModule"]).factory("seMediaFieldConstants",["assetsService",function(e){return{I18N_KEYS:{UPLOAD_IMAGE_TO_LIBRARY:"se.upload.image.to.library"},UPLOAD_ICON_URL:e.getAssetsRoot()+"/images/upload_image.png"}}]).controller("seMediaFieldController",["seMediaFieldConstants","seFileValidationServiceConstants","seFileValidationService",function(e,t,n){this.i18nKeys=e.I18N_KEYS,this.acceptedFileTypes=t.ACCEPTED_FILE_TYPES,this.uploadIconUrl=e.UPLOAD_ICON_URL,this.image={},this.fileErrors=[],this.fileSelected=function(e,t){this.resetImage(),1===e.length&&n.validate(e[0],this.fileErrors).then(function(){this.image={file:e[0],format:t||this.image.format}}.bind(this))},this.resetImage=function(){this.fileErrors=[],this.image={}},this.imageUploaded=function(e){this.resetImage(),this.model[this.qualifier]=e,this.field.initiated&&(this.field.initiated.length=0)},this.showFileSelector=function(){return this.model&&!this.model[this.qualifier]&&!this.image.file}}]).directive("seMediaField",function(){return{templateUrl:"seMediaFieldTemplate.html",restrict:"E",controller:"seMediaFieldController",controllerAs:"ctrl",scope:{},bindToController:{field:"=",model:"=",editor:"=",qualifier:"="}}})},function(e,t){angular.module("seMediaFormatModule",["mediaServiceModule","seFileSelectorModule","seFileValidationServiceModule","cmsSmarteditServicesModule"]).constant("seMediaFormatConstants",{I18N_KEYS:{UPLOAD:"se.media.format.upload",REPLACE:"se.media.format.replace",UNDER_EDIT:"se.media.format.under.edit",REMOVE:"se.media.format.remove"},UPLOAD_ICON_URL:"/images/upload_image.png",UPLOAD_ICON_DIS_URL:"/images/upload_image_disabled.png",DELETE_ICON_URL:"/images/remove_image_small.png",REPLACE_ICON_URL:"/images/replace_image_small.png",ADV_INFO_ICON_URL:"/images/info_image_small.png"}).controller("seMediaFormatController",["mediaService","seMediaFormatConstants","seFileValidationServiceConstants","assetsService","$scope",function(e,t,n,i,o){this.i18nKeys=t.I18N_KEYS,this.acceptedFileTypes=n.ACCEPTED_FILE_TYPES;var a=i.getAssetsRoot();this.uploadIconUrl=a+t.UPLOAD_ICON_URL,this.uploadIconDisabledUrl=a+t.UPLOAD_ICON_DIS_URL,this.deleteIconUrl=a+t.DELETE_ICON_URL,this.replaceIconUrl=a+t.REPLACE_ICON_URL,this.advInfoIconUrl=a+t.ADV_INFO_ICON_URL,this.fetchMedia=function(){e.getMedia(this.mediaUuid).then(function(e){this.media=e}.bind(this))},this.isMediaCodeValid=function(){return this.mediaUuid&&"string"==typeof this.mediaUuid},this.isMediaPreviewEnabled=function(){return this.isMediaCodeValid()&&!this.isUnderEdit&&this.media&&this.media.code},this.isMediaEditEnabled=function(){return!this.isMediaCodeValid()&&!this.isUnderEdit},this.getErrors=function(){return(this.field.messages||[]).filter(function(e){return e.format===this.mediaFormat}.bind(this)).map(function(e){return e.message})},this.$onInit=function(){this.isMediaCodeValid()&&this.fetchMedia(),this.mediaFormatI18NKey="se.media.format."+this.mediaFormat},o.$watch(function(){return this.mediaUuid}.bind(this),function(e,t){e&&"string"==typeof e?e!==t&&this.fetchMedia():this.media={}}.bind(this))}]).component("seMediaFormat",{templateUrl:"seMediaFormatTemplate.html",controller:"seMediaFormatController",controllerAs:"ctrl",bindings:{mediaUuid:"=",mediaFormat:"=",isUnderEdit:"=",field:"=",onFileSelect:"&?",onDelete:"&?"}})},function(e,t){angular.module("seMediaPreviewModule",[]).constant("seMediaPreviewConstants",{CONTENT_URL:"seMediaPreviewContentTemplate.html",I18N_KEYS:{PREVIEW:"media.preview"}}).controller("seMediaPreviewController",["seMediaPreviewConstants",function(e){this.i18nKeys=e.I18N_KEYS,this.contentUrl=e.CONTENT_URL}]).directive("seMediaPreview",function(){return{restrict:"E",scope:{},bindToController:{imageUrl:"="},controller:"seMediaPreviewController",controllerAs:"ctrl",templateUrl:"seMediaPreviewTemplate.html"}})},function(e,t){angular.module("seMediaPrinterModule",["seMediaPreviewModule"]).factory("seMediaPrinterConstants",["assetsService",function(e){var t=e.getAssetsRoot();return{DELETE_ICON_URL:t+"/images/remove_image_small.png",REPLACE_ICON_URL:t+"/images/replace_image_small.png",ADV_INFO_ICON_URL:t+"/images/info_image_small.png"}}]).controller("seMediaPrinterController",["$scope","seMediaPrinterConstants",function(e,t){this.deleteIcon=t.DELETE_ICON_URL,this.replaceIcon=t.REPLACE_ICON_URL,this.advInfoIcon=t.ADV_INFO_ICON_URL,this.$onChanges=function(){e.selected=this.selected,e.item=this.item,e.ySelect=this.ySelect}}]).component("seMediaPrinter",{templateUrl:"seMediaPrinterTemplate.html",controller:"seMediaPrinterController",controllerAs:"printer",require:{ySelect:"^ySelect"},bindings:{selected:"<",item:"<"}})},function(e,t){angular.module("seMediaSelectorModule",["seMediaAdvancedPropertiesModule","seMediaPrinterModule","mediaServiceModule"]).controller("seMediaSelectorController",["mediaService",function(e){this.mediaTemplate="seMediaPrinterWrapperTemplate.html",this.fetchStrategy={fetchEntity:function(t){return e.getMedia(t)},fetchPage:function(t,n,i){return e.getPage(t,n,i)}}}]).component("seMediaSelector",{templateUrl:"seMediaSelectorTemplate.html",bindings:{field:"=",model:"=",editor:"=",qualifier:"=",deleteIcon:"=",replaceIcon:"=",advInfoIcon:"="},controller:"seMediaSelectorController",controllerAs:"ctrl"})},function(e,t){angular.module("seMediaUploadFieldModule",["cmsSmarteditServicesModule"]).controller("seMediaUploadFieldController",["assetsService",function(e){this.displayImage=!1,this.assetsRoot=e.getAssetsRoot()}]).directive("seMediaUploadField",function(){return{templateUrl:"seMediaUploadFieldTemplate.html",restrict:"E",scope:{},bindToController:{field:"=",model:"=",error:"="},controller:"seMediaUploadFieldController",controllerAs:"ctrl",link:function(e,t,n,i){t.bind("mouseover",function(){i.displayImage=!0,e.$digest()}),t.bind("mouseout",function(){i.displayImage=!1,e.$digest()})}}})},function(e,t){angular.module("seMediaUploadFormModule",["seFileValidationServiceModule","seMediaServiceModule","seObjectValidatorFactoryModule","seBackendValidationHandlerModule","seMediaUploadFieldModule","functionsModule","cmsSmarteditServicesModule"]).constant("seMediaUploadFormConstants",{MAX_FILENAME_CHARACTERS_DISPLAYED:15,I18N_KEYS:{UPLOAD_IMAGE_CANCEL:"se.upload.image.cancel",UPLOAD_IMAGE_SUBMIT:"se.upload.image.submit",UPLOAD_IMAGE_REPLACE:"se.upload.image.replace",UPLOAD_IMAGE_TO_LIBRARY:"se.upload.image.to.library",DESCRIPTION:"se.uploaded.image.description",CODE:"se.uploaded.image.code",ALT_TEXT:"se.uploaded.image.alt.text",UPLOADING:"se.uploaded.is.uploading",CODE_IS_REQUIRED:"se.uploaded.image.code.is.required"}}).factory("seMediaUploadFormValidators",["seMediaUploadFormConstants",function(e){return[{subject:"code",message:e.I18N_KEYS.CODE_IS_REQUIRED,validate:function(e){return!!e}}]}]).controller("seMediaUploadFormController",["seFileValidationServiceConstants","seMediaService","seMediaUploadFormConstants","seObjectValidatorFactory","seMediaUploadFormValidators","seBackendValidationHandler","escapeHtml","assetsService","$scope",function(e,t,n,i,o,a,r,s,c){this.i18nKeys=n.I18N_KEYS,this.acceptedFileTypes=e.ACCEPTED_FILE_TYPES,this.imageParameters={},this.isUploading=!1,this.fieldErrors=[],this.assetsRoot=s.getAssetsRoot(),c.$watch(function(){return this.image}.bind(this),function(){this.image&&this.image.file&&(this.imageParameters={code:this.image.file.name,description:this.image.file.name,altText:this.image.file.name})}.bind(this)),this.onCancel=function(){this.imageParameters={},this.fieldErrors=[],this.isUploading=!1,this.onCancelCallback()},this.onImageUploadSuccess=function(e){this.imageParameters={},this.fieldErrors=[],this.isUploading=!1,this.onUploadCallback({uuid:e.uuid})},this.onImageUploadFail=function(e){this.isUploading=!1,a.handleResponse(e,this.fieldErrors)},this.onMediaUploadSubmit=function(){this.fieldErrors=[],i.build(o).validate(this.imageParameters,this.fieldErrors)&&(this.isUploading=!0,t.uploadMedia({file:this.image.file,code:r(this.imageParameters.code),description:r(this.imageParameters.description),altText:r(this.imageParameters.altText)}).then(this.onImageUploadSuccess.bind(this),this.onImageUploadFail.bind(this)))},this.getErrorsForField=function(e){return this.fieldErrors.filter(function(t){return t.subject===e}).map(function(e){return e.message})},this.hasError=function(e){return this.fieldErrors.some(function(t){return t.subject===e})},this.getTruncatedName=function(){var e=this.image&&this.image.file&&this.image.file.name||"";return e.length>n.MAX_FILENAME_CHARACTERS_DISPLAYED&&(e=e.substring(0,n.MAX_FILENAME_CHARACTERS_DISPLAYED),e+="..."),e}}]).directive("seMediaUploadForm",function(){return{templateUrl:"seMediaUploadFormTemplate.html",restrict:"E",scope:{},controller:"seMediaUploadFormController",controllerAs:"ctrl",bindToController:{field:"=",image:"=",onUploadCallback:"&",onCancelCallback:"&",onSelectCallback:"&"}}})},function(e,t){angular.module("mediaServiceModule",["resourceModule","resourceLocationsModule","functionsModule","smarteditServicesModule"]).service("mediaService",["restServiceFactory","MEDIA_PATH","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","isBlank",function(e,t,n,i,o){this.uriParameters={},this.getPage=function(a,r,s,c){this.uriParameters=c||{};var l={catalogId:this.uriParameters[n]||n,catalogVersion:this.uriParameters[i]||i};o(a)||(l.code=a);var d={namedQuery:"namedQueryMediaSearchByCodeCatalogVersion",params:Object.keys(l).reduce(function(e,t){return e+=","+t+":"+l[t]},"").substring(1),pageSize:r,currentPage:s};return e.get(t).get(d).then(function(e){return e.results=e.media.map(function(e){return{id:e.uuid,code:e.code,description:e.description,altText:e.altText,url:e.url,downloadUrl:e.downloadUrl}}),delete e.media,e})},this.getMedia=function(n,i){return this.uriParameters=i,e.get(t+"/"+n).get().then(function(e){return{id:e.uuid,code:e.code,description:e.description,altText:e.altText,url:e.url,downloadUrl:e.downloadUrl}})}}])},function(e,t){angular.module("seBackendValidationHandlerModule",[]).factory("seBackendValidationHandler",function(){return{handleResponse:function(e,t){return t=t||[],e&&e.data&&e.data.errors&&e.data.errors.filter(function(e){return"ValidationError"===e.type}).forEach(function(e){var n=e.subject;n&&t.push({subject:n,message:e.message})}),t}}})},function(e,t){angular.module("seFileMimeTypeServiceModule",[]).constant("seFileMimeTypeServiceConstants",{VALID_IMAGE_MIME_TYPE_CODES:["FFD8FFDB","FFD8FFE0","FFD8FFE1","474946383761","424D","49492A00","4D4D002A","89504E470D0A1A0A"]}).factory("seFileReader",function(){return{read:function(e,t){var n=new FileReader;return t=t||{},n.onloadend=t.onLoadEnd,n.onerror=t.onError,n.readAsArrayBuffer(e),n}}}).factory("seFileMimeTypeService",["seFileMimeTypeServiceConstants","seFileReader","$q",function(e,t,n){var i=function(t){var n=new Uint8Array(t).subarray(0,8).reduce(function(e,t){var n=t.toString(16);return 1===n.length&&(n="0"+n),e+=n},"");return e.VALID_IMAGE_MIME_TYPE_CODES.some(function(e){return 0===n.toLowerCase().indexOf(e.toLowerCase())})};return{isFileMimeTypeValid:function(e){var o=n.defer();return t.read(e,{onLoadEnd:function(e){i(e.target.result)?o.resolve():o.reject()},onError:function(){o.reject()}}),o.promise}}}])},function(e,t){angular.module("seFileValidationServiceModule",["seObjectValidatorFactoryModule","seFileMimeTypeServiceModule"]).constant("seFileValidationServiceConstants",{ACCEPTED_FILE_TYPES:["jpeg","jpg","gif","bmp","tiff","tif","png"],MAX_FILE_SIZE_IN_BYTES:20971520,I18N_KEYS:{FILE_TYPE_INVALID:"se.upload.file.type.invalid",FILE_SIZE_INVALID:"se.upload.file.size.invalid"}}).factory("seFileObjectValidators",["seFileValidationServiceConstants",function(e){return[{subject:"size",message:e.I18N_KEYS.FILE_SIZE_INVALID,validate:function(t){return t<=e.MAX_FILE_SIZE_IN_BYTES}}]}]).factory("seFileValidationService",["seObjectValidatorFactory","seFileObjectValidators","seFileValidationServiceConstants","seFileMimeTypeService","$q",function(e,t,n,i,o){return{buildAcceptedFileTypesList:function(){return n.ACCEPTED_FILE_TYPES.map(function(e){return"."+e}).join(",")},validate:function(a,r){return e.build(t).validate(a,r),i.isFileMimeTypeValid(a).then(function(){return 0===r.length?o.when():o.reject(r)},function(){return r.push({subject:"type",message:n.I18N_KEYS.FILE_TYPE_INVALID}),o.reject(r)})}}}])},function(e,t){angular.module("seMediaServiceModule",["resourceLocationsModule","experienceInterceptorModule","ngResource"]).factory("seMediaResource",["$resource","MEDIA_RESOURCE_URI",function(e,t){return e(t,{},{get:{method:"GET",cache:!0,headers:{}},save:{method:"POST",headers:{"Content-Type":void 0,enctype:"multipart/form-data","x-requested-with":"Angular"},transformRequest:function(e){var t=new FormData;return angular.forEach(e,function(e,n){t.append(n,e)}),t}}})}]).factory("seMediaResourceService",["$resource","MEDIA_RESOURCE_URI",function(e,t){return{getMediaByCode:function(n){return e(t+"/"+n,{},{get:{method:"GET",cache:!0,headers:{}}})}}}]).factory("seMediaService",["seMediaResource","seMediaResourceService",function(e,t){return{uploadMedia:function(t){return e.save(t).$promise},getMediaByCode:function(e){return t.getMediaByCode(e).get().$promise}}}])},function(e,t){angular.module("seObjectValidatorFactoryModule",[]).factory("seObjectValidatorFactory",function(){function e(e,t,n){return n=n||[],e.forEach(function(e){var i=t[e.subject];e.validate(i,t)||n.push({subject:e.subject,message:e.message})}),0===n.length}return{build:function(t){return{validate:e.bind(null,t)}}}})},function(e,t){angular.module("seBreadcrumbModule",["resourceLocationsModule","navigationEditorNodeServiceModule","resourceModule","functionsModule","cmsSmarteditServicesModule","cmsitemsRestServiceModule"]).controller("BreadcrumbController",["$q","navigationEditorNodeService","assetsService","cmsitemsRestService",function(e,t,n,i){this.$onInit=function(){if(!this.nodeUid&&!this.nodeUuid)throw new Error("seBreadcrumb component requires either nodeUid or nodeUuid");(this.nodeUid?e.when({uid:this.nodeUid}):i.getById(this.nodeUuid)).then(function(e){t.getNavigationNodeAncestry(e.uid,this.uriContext).then(function(e){this.breadcrumb=e}.bind(this))}.bind(this))},this.arrowIconUrl=n.getAssetsRoot()+"/images/slash_icon.png"}]).component("seBreadcrumb",{templateUrl:"seBreadcrumbTemplate.html",bindings:{nodeUid:"<?",nodeUuid:"<?",uriContext:"<"},controller:"BreadcrumbController",controllerAs:"bc"})},function(e,t){angular.module("seNavigationNodePickerModule",["functionsModule","resourceLocationsModule","cmsitemsRestServiceModule","eventServiceModule"]).constant("SELECTED_NODE","selected_node").controller("NavigationNodePickerController",["URIBuilder","NAVIGATION_MANAGEMENT_RESOURCE_URI","NAVIGATION_NODE_ROOT_NODE_UID","SELECTED_NODE","cmsitemsRestService","systemEventService",function(e,t,n,i,o,a){this.$onInit=function(){this.nodeURI=new e(t).replaceParams(this.uriContext).build()},this.nodeTemplateUrl="navigationNodePickerRenderTemplate.html",this.rootNodeUid=n,this.actions={pick:function(e,t){var n={pageSize:10,currentPage:0,mask:t.$modelValue.uid};o.get(n).then(function(e){var n={nodeUuid:e.response.find(function(e){return e.uid===t.$modelValue.uid}).uuid,nodeUid:t.$modelValue.uid};a.sendAsynchEvent(i,n)}.bind(this))}.bind(this)}}]).component("seNavigationPicker",{templateUrl:"seNavigationNodePickerTemplate.html",bindings:{uriContext:"<",model:"=",qualifier:"="},controller:"NavigationNodePickerController",controllerAs:"ctrl"})},function(e,t){angular.module("seNavigationNodeSelector",["catalogServiceModule","seBreadcrumbModule","seNavigationNodePickerModule","resourceLocationsModule","cmsitemsRestServiceModule","eventServiceModule"]).controller("NavigationNodeSelectorController",["SELECTED_NODE","catalogService","cmsitemsRestService","systemEventService",function(e,t,n,i){this.isReady=function(){return this.ready},this.remove=function(){delete this.model[this.qualifier]}.bind(this),this.$onInit=function(){this.ready=!1,t.retrieveUriContext().then(function(e){this.uriContext=e,this.model[this.qualifier]?n.getById(this.model[this.qualifier]).then(function(e){this.nodeUid=e.uid,this.ready=!0}.bind(this)):this.ready=!0}.bind(this)),this.unregFn=i.registerEventHandler(e,function(e,t){this.nodeUid=t.nodeUid,this.model[this.qualifier]=t.nodeUuid}.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).component("seNavigationNodeSelector",{templateUrl:"seNavigationNodeSelectorTemplate.html",controller:"NavigationNodeSelectorController",controllerAs:"nav",bindings:{field:"<",model:"<",qualifier:"<"}})},function(e,t){angular.module("categoryDropdownPopulatorModule",["dropdownPopulatorInterfaceModule","contextAwareCatalogModule","uriDropdownPopulatorModule","functionsModule"]).factory("categoryDropdownPopulator",["DropdownPopulatorInterface","extend","contextAwareCatalogService","uriDropdownPopulator",function(e,t,n,i){var o=function(){};return o=t(e,o),o.prototype.fetchPage=function(e){return n.getProductCategorySearchUri(e.model.productCatalog).then(function(t){return e.field.uri=t,i.fetchPage(e)}.bind(this))},o.prototype.isPaged=function(){return!0},o.prototype.getItem=function(e){return n.getProductCategoryItemUri().then(function(t){return e.field.uri=t,i.getItem(e)}.bind(this))},new o}])},function(e,t){angular.module("productCatalogDropdownPopulatorModule",["dropdownPopulatorInterfaceModule","optionsDropdownPopulatorModule","resourceLocationsModule","catalogServiceModule","functionsModule"]).factory("productCatalogDropdownPopulator",["DropdownPopulatorInterface","optionsDropdownPopulator","CONTEXT_SITE_ID","catalogService","extend",function(e,t,n,i,o){var a=function(){};return a=o(e,a),a.prototype.fetchAll=function(e){return i.getProductCatalogsForSite(n).then(function(n){return e.field.options=n.filter(function(e){return 1===e.versions.filter(function(e){return!0===e.active}).length}),t.populate(e)}.bind(this))},a.prototype.isPaged=function(){return!1},new a}])},function(e,t){angular.module("productDropdownPopulatorModule",["dropdownPopulatorInterfaceModule","contextAwareCatalogModule","uriDropdownPopulatorModule","functionsModule"]).factory("productDropdownPopulator",["DropdownPopulatorInterface","extend","contextAwareCatalogService","uriDropdownPopulator",function(e,t,n,i){var o=function(){};return o=t(e,o),o.prototype.fetchPage=function(e){return n.getProductSearchUri(e.model.productCatalog).then(function(t){return e.field.uri=t,i.fetchPage(e)}.bind(this))},o.prototype.isPaged=function(){return!0},o.prototype.getItem=function(e){return n.getProductItemUri().then(function(t){return e.field.uri=t,i.getItem(e)}.bind(this))},new o}])},function(e,t){angular.module("singleActiveCatalogAwareItemSelectorModule",["resourceLocationsModule","catalogServiceModule","yLoDashModule","l10nModule"]).controller("SingleActiveCatalogAwareItemSelectorController",["catalogService","CONTEXT_SITE_ID",function(e,t){this.$onInit=function(){n.call(this),i.call(this)};var n=function(){this.productCatalogField={idAttribute:"catalogId",labelAttributes:["name"],editable:!0,propertyType:"productCatalog"},this.mainDropDownI18nKey=this.field.i18nKey,delete this.field.i18nKey,this.field.paged=!0,this.field.editable=!0,this.field.idAttribute="uid",this.field.labelAttributes=["name"],this.field.dependsOn="productCatalog",this.field.propertyType=this.qualifier},i=function(){e.getProductCatalogsForSite(t).then(function(e){this.catalogs=e,1===this.catalogs.length&&(this.model.productCatalog=this.catalogs[0].catalogId,this.editor.pristine.productCatalog=this.catalogs[0].catalogId,this.catalogName=this.catalogs[0].name)}.bind(this))}}]).component("singleActiveCatalogAwareItemSelector",{templateUrl:"singleActiveCatalogAwareItemSelectorTemplate.html",controller:"SingleActiveCatalogAwareItemSelectorController",controllerAs:"ctrl",bindings:{field:"<",id:"<",model:"<",qualifier:"<",editor:"="}})},function(e,t){angular.module("itemManagementModule",["functionsModule"]).constant("ITEM_MANAGEMENT_EDITOR_ID","se-item-management-editor").controller("ItemManagementController",["$q","ITEM_MANAGEMENT_EDITOR_ID",function(e,t){var n=["add","edit","create"];this.editorId=t,this._submitInternal=function(){switch(this.mode.toLowerCase()){case"add":return e.when(this.item);case"edit":return this.submit();case"create":return this.submit().then(function(e){return e}.bind(this));default:throw"ItemManagementController - The given mode ["+this.mode+"] has not been implemented for this component"}}.bind(this),this._isDirtyLocal=function(){return!!this.isDirtyInternal&&this.isDirtyInternal()}.bind(this),this.isDirty=function(){},this.submit=function(){},this.reset=function(){},this.$onInit=function(){if(-1===n.indexOf(this.mode))throw"ItemManagementController.$onInit() - Mode not supported: "+this.mode;this.submitFunction=this._submitInternal,this.isDirty=this._isDirtyLocal,!this.componentType&&this.item&&(this.componentType=this.item.typeCode),this.item||(this.itemId=null),this.item&&this.item.uuid?this.itemId=this.item.uuid:this.item&&this.item.uid&&(this.itemId=this.item.uid)}}]).component("itemManager",{controller:"ItemManagementController",templateUrl:"itemManagementTemplate.html",bindings:{item:"<",uriContext:"<",mode:"<",contentApi:"<",structureApi:"<",componentType:"<?",isDirty:"=",submitFunction:"="}})},function(e,t){angular.module("itemTitleAbstractCMSComponentHandlerServiceModule",["resourceModule","functionsModule","resourceLocationsModule","componentServiceModule","itemTitleStrategyInterfaceModule"]).factory("itemTitleAbstractCMSComponentHandlerService",["$q","extend","ITEMS_RESOURCE_URI","URIBuilder","restServiceFactory","ItemTitleStrategyInterface",function(e,t,n,i,o,a){var r=function(){};return r=t(a,r),r.prototype.getItemTitleById=function(e,t){var a=new i(n).replaceParams(t).build();return o.get(a).getById(e).then(function(e){var t={};return t.itemType=e.typeCode,"CMSLinkComponent"===e.typeCode?(t.title=e.linkName,t):(t.title=e.name,t)})},new r}])},function(e,t){angular.module("itemTitleAbstractPageHandlerServiceModule",["functionsModule","resourceModule","resourceLocationsModule","componentServiceModule","itemTitleStrategyInterfaceModule"]).factory("itemTitleAbstractPageHandlerService",["$q","extend","restServiceFactory","ItemTitleStrategyInterface","URIBuilder","PAGES_LIST_RESOURCE_URI",function(e,t,n,i,o,a){var r=function(){};return r=t(i,r),r.prototype.getItemTitleById=function(e,t){var i=new o(a).replaceParams(t).build();return n.get(i).getById(e).then(function(e){var t={};return t.itemType=e.typeCode,t.title=e.name,t})},new r}])},function(e,t){angular.module("itemTitleMediaHandlerServiceModule",["resourceModule","functionsModule","resourceLocationsModule","functionsModule","itemTitleStrategyInterfaceModule"]).factory("itemTitleMediaHandlerService",["extend","URIBuilder","MEDIA_RESOURCE_URI","ItemTitleStrategyInterface","restServiceFactory",function(e,t,n,i,o){var a=function(){this.uriParameters={}};return a=e(i,a),a.prototype.getItemTitleById=function(e,i){var a=new t(n+"/"+e).replaceParams(i).build();return o.get(a).get().then(function(e){var t={};return t.itemType="Media",t.title=e.code,t})},new a}])},function(e,t){angular.module("itemTitleStrategyInterfaceModule",[]).factory("ItemTitleStrategyInterface",function(){var e=function(){};return e.prototype.getItemTitleById=function(){throw"getItemById is not implemented"},e})},function(e,t){!function(){function e(e){return e.hasOwnProperty("itemId")}function t(t,n,i){for(var o=e(t),a=0,r=0;r<i;r++)e(n[r])!==o&&a++;return a}function n(e,t,n){return e.position===t&&e.parentUid===n.uid}function i(e,t){return e.itemId&&t.itemId||!e.itemId&&!t.itemId}angular.module("navigationEditorModule",["functionsModule","navigationEditorNodeServiceModule","resourceLocationsModule","navigationNodeEditorModalServiceModule","navigationEntryItemServiceModule","confirmationModalServiceModule","resourceModule","eventServiceModule","yLoDashModule"]).constant("NAVIGATION_NODE_ROOT_NODE_UID","root").controller("navigationEditorController",["$q","$translate","lodash","URIBuilder","NAVIGATION_MANAGEMENT_RESOURCE_URI","NAVIGATION_NODE_ROOT_NODE_UID","TreeService","navigationEditorNodeService","navigationNodeEditorModalService","navigationEntryItemService","confirmationModalService","navigationNodeRestService","systemEventService","CONTEXT_SITE_ID","CONTEXT_CATALOG_VERSION","NODE_CREATION_EVENT",function(e,o,a,r,s,c,l,d,u,p,m,g,h,f,y,v){this.$onInit=function(){this.readOnly=this.readOnly||!1,this.readOnly||(this.dragOptions={onDropCallback:function(e){this.actions.dragAndDrop(e)}.bind(this),allowDropCallback:function(e){return e.sourceNode.parent.uid===e.destinationNodes[0].parent.uid&&!(e.position<e.destinationNodes.length&&!i(e.destinationNodes[e.position],e.sourceNode))},beforeDropCallback:function(e){return e.sourceNode.parent.uid===e.destinationNodes[0].parent.uid||{confirmDropI18nKey:"se.cms.navigationmanagement.navnode.confirmation"}}}),this.readOnlyErrorKey="navigation.in.readonly.mode",this.nodeTemplateUrl="navigationNodeRenderTemplate.html",this.nodeURI=new r(s).replaceParams(this.uriContext).build(),this.rootNodeUid=this.rootNodeUid||c;var o=this.uriContext,l=[{key:"se.cms.navigationmanagement.navnode.edit",callback:function(e){this.actions.editNavigationNode(e)}.bind(this)},{key:"se.cms.navigationmanagement.navnode.removenode",callback:function(e){this.actions.removeItem(e)}.bind(this)},{key:"se.cms.navigationmanagement.navnode.move.up",condition:function(e){return this.actions.isMoveUpAllowed(e)}.bind(this),callback:function(e){this.actions.moveUp(e)}.bind(this)},{key:"se.cms.navigationmanagement.navnode.move.down",condition:function(e){return this.actions.isMoveDownAllowed(e)}.bind(this),callback:function(e){this.actions.moveDown(e)}.bind(this)},{key:"se.cms.navigationmanagement.navnode.addchild",condition:function(e){return!e.$modelValue.itemId},callback:function(e){this.actions.addNewChild(e)}.bind(this)},{key:"se.cms.navigationmanagement.navnode.addsibling",condition:function(e){return!e.$modelValue.itemId},callback:function(e){this.actions.addNewSibling(e)}.bind(this)}];this.actions={isReadOnly:function(){return this.readOnly}.bind(this),hasChildren:function(e,t){var n=t.$modelValue;return n.hasChildren||!a.isEmpty(n.entries)},fetchData:function(t,n){return n.initiated?e.when(n.nodes):(this.rootNodeUid===n.uid&&this.rootNodeUid!==c?d.getNavigationNode(this.rootNodeUid,this.uriContext).then(function(e){return a.assign(n,e),e.entries}):e.when(n.entries||[])).then(function(e){return p.finalizeNavigationEntries(e,o,!0).then(function(){return n.nodes=[],e.forEach(function(e){e.parent=n,n.nodes.push(e)}),t.fetchChildren(n)})})}.bind(this),removeItem:function(e,t){if(this.readOnly)throw this.readOnlyErrorKey;var n=t.$modelValue,i={};i.description=n.itemId?"se.cms.navigationmanagement.navnode.removeentry.confirmation.message":"se.cms.navigationmanagement.navnode.removenode.confirmation.message",i.title=n.itemId?"se.cms.navigationmanagement.navnode.removeentry.confirmation.title":"se.cms.navigationmanagement.navnode.removenode.confirmation.title",m.confirm(i).then(function(){if(n.itemId){var e=a.cloneDeep(n.parent);e.entries=e.entries.filter(function(e){return e.id!==n.id}).map(function(e){return delete e.parent,delete e.title,delete e.id,e});var i=angular.extend({identifier:e.uid},o,e);delete i.parent,delete i.title,delete i.nodes,g.update(i).then(function(){var e=n.parent;e.entries=e.entries.filter(function(e){return e.id!==n.id}).map(function(e,t){return e.position=t,e}),this.refreshParentNode(t)}.bind(this))}else this.remove(t)}.bind(this))},performMove:function(e,t,n,i){if(this.readOnly)throw this.readOnlyErrorKey;return d.updateNavigationNode(t,o).then(function(){n?i?this.refreshNode(n):this.refreshParentNode(n):this.fetchData(this.root)}.bind(this))},dragAndDrop:function(e,i){var o=i.sourceNode.itemId?i.sourceNode.parent:i.sourceNode,r=i.destinationNodes;if(i.sourceNode.itemId)o.entries=o.nodes.filter(function(e){return e.itemId});else{var s=t(o,r,i.position),c=i.position-s,l=a.find(r,function(e){return e.uid!==o.uid}).parent;if(n(o,i.position,l))return;o.position=c,o.parentUid=l.uid,o.parent=l}this.performMove(o,i.targetParentHandle,!0).then(function(){i.sourceParentHandle!==i.targetParentHandle&&this.refreshNode(i.sourceParentHandle)}.bind(this))},moveUp:function(e,t){if(this.readOnly)throw this.readOnlyErrorKey;var n=t.$modelValue,i=n.parent;if(n.itemId){var o=i.entries.indexOf(n),a=i.entries[o-1];i.entries.splice(o-1,2,n,a),this.performMove(i,t)}else n.position=parseInt(n.position)-1,this.performMove(n,t)},moveDown:function(e,t){if(this.readOnly)throw this.readOnlyErrorKey;var n=t.$modelValue,i=n.parent;if(n.itemId){var o=i.entries.indexOf(n),a=i.entries[o+1];i.entries.splice(o,2,a,n),this.performMove(i,t)}else n.position=parseInt(n.position)+1,this.performMove(n,t)},isMoveUpAllowed:function(e,t){var n=t.$modelValue;return n.itemId?n.parent.entries.indexOf(n)>0:0!==parseInt(n.position)},isMoveDownAllowed:function(e,t){var n=t.$modelValue;if(n.itemId){var i=n.parent.entries.length;return n.parent.entries.indexOf(n)!==i-1}var o=n.parent.nodes.filter(function(e){return!e.itemId}).length;return parseInt(n.position)!==o-1},refreshNode:function(e,t){return this.refresh(t)},refreshParentNode:function(e,t){return this.refreshParent(t)},editNavigationNode:function(e,t){var n=t.$modelValue,i={};return t.$modelValue.itemType?(i.nodeUid=n.parent.uid,i.entryIndex=n.parent.entries.indexOf(n)):(i.nodeUid=n.uid,i.entryIndex=void 0),u.openNodeEditor(i,this.uriContext).then(function(){var e;return e=n.parent.uid===c?n:n.parent,d.getNavigationNode(e.uid,this.uriContext).then(function(i){return a.assign(e,i),n.parent.uid===c?this.actions.refreshNode(t):this.actions.refreshParentNode(t)}.bind(this))}.bind(this))}.bind(this),addTopLevelNode:function(){return this.addNewChild().then(function(){this.fetchData(this.rootNodeUid)}.bind(this))},addNewChild:function(e,t){return this.actions._expandIfNeeded(t).then(function(){return u.openNodeEditor({parentUid:t?t.$modelValue.uid:this.rootNodeUid},this.uriContext)}.bind(this))}.bind(this),addNewSibling:function(e,t){var n=t.$modelValue;return u.openNodeEditor({parentUid:n.parent.uid},this.uriContext)}.bind(this),getDropdownItems:function(){return l},_findNodeById:function(e,t){return this.getNodeById(t)},_expandIfNeeded:function(t,n){return n&&n.collapsed?this.toggleAndfetch(n):e.when()}},h.registerEventHandler(v,S)};var S=function(t,n){var i=this.actions._findNodeById(n.parentUid);return i&&!i.nodes.find(function(e){return e.uid===n.uid})&&(n.parent=i,i.nodes=i.nodes||[],i.nodes.push(n),i.hasChildren=i.nodes.length>0),e.when()}.bind(this);this.$onDestroy=function(){h.unRegisterEventHandler(v,S)}}]).directive("navigationEditor",function(){return{restrict:"E",transclude:!1,replace:!1,templateUrl:"navigationEditorTemplate.html",controller:"navigationEditorController",controllerAs:"nav",scope:{},bindToController:{uriContext:"<",readOnly:"<?",rootNodeUid:"<?"}}})}()},function(e,t){angular.module("navigationEditorNodeServiceModule",["resourceModule","yLoDashModule","functionsModule"]).service("_nodeAncestryService",["lodash",function(e){this._fetchAncestors=function(e,t){var n=e.find(function(e){return e.uid===t});return n?[n].concat(this._fetchAncestors(e,n.parentUid)):[]},this.buildOrderedListOfAncestors=function(t,n){var i=-1;return e.reverse(this._fetchAncestors(t,n)).map(function(t){var n=++i;return e.assign(e.cloneDeep(t),{level:n,formattedLevel:0===n?"se.cms.navigationcomponent.management.node.level.root":"se.cms.navigationcomponent.management.node.level.non.root"})})}}]).service("navigationEditorNodeService",["$q","_nodeAncestryService","navigationNodeRestService","lodash","getDataFromResponse",function(e,t,n,i,o){this.getNavigationNode=function(e,t){var i=angular.extend({identifier:e},t);return n.get(i)},this.updateNavigationNode=function(e,t){var o=i.assign({identifier:e.uid},e,t);return delete o.parent,delete o.nodes,o.entries=o.entries.map(function(e){var t=i.cloneDeep(e);return delete t.parent,t}),n.update(o).then(function(){e.parent.initiated=!1})},this.getNavigationNodeAncestry=function(e,a){var r=i.assign({ancestorTrailFrom:e},a);return n.get(r).then(function(n){return t.buildOrderedListOfAncestors(o(n),e)})}}])},function(e,t){angular.module("navigationEditorServiceModule",["smarteditServicesModule","resourceLocationsModule"]).factory("navigationEditorService",["NAVIGATION_MANAGEMENT_RESOURCE_URI","restServiceFactory",function(e,t){var n=t.get(e);return{getNavigationNode:function(e,t){return n.get({identifier:e,siteUID:t.siteId,catalogId:t.catalogId,catalogVersion:t.catalogVersion}).then(function(){})},updateNavigationNode:function(e,t){var i=e.parent;return n.update({identifier:e.uid,siteUID:t.siteId,catalogId:t.catalogId,catalogVersion:t.catalogVersion,parentUid:e.parentUid,uid:e.uid,name:e.name,title:e.title,position:e.position}).then(function(){i.initiated=!1})}}}])},function(e,t){angular.module("navigationEntryItemServiceModule",["yLoDashModule","smarteditServicesModule","itemTitleAbstractPageHandlerServiceModule","itemTitleAbstractCMSComponentHandlerServiceModule","itemTitleMediaHandlerServiceModule"]).factory("navigationEntryItemService",["$q","$injector","$log","lodash","generateIdentifier",function(e,t,n,i,o){return{finalizeNavigationEntries:function(a,r,s){var c=[];return a.forEach(function(e){if(delete i.cloneDeep(e).parent,e.id=e.id||o(),e.itemSuperType){var a="itemTitle"+e.itemSuperType+"HandlerService";t.has(a)?c.push(t.get(a).getItemTitleById(e.itemId,r).then(function(e){s?this.name=e.title:this.title=e.title,this.itemType=e.itemType}.bind(e))):n.error("handler not found for "+a)}}),e.all(c)}}}])},function(e,t){angular.module("entryDropdownMatcherModule",[]).directive("entryDropdownMatcher",function(){return{restrict:"E",transclude:!1,replace:!1,template:'<div class="ySEEntryDropdownMatcher" ng-include="getTemplateUrl()"></div>',scope:{templateUrl:"<",templateData:"<"},link:function(e){e.$watch(function(){return e.templateData},function(){e.option=e.templateData}),e.getTemplateUrl=function(){return e.templateUrl}}}})},function(e,t){angular.module("entrySearchSelectorModule",["ui.bootstrap","ui.select","smarteditServicesModule","entryDropdownMatcherModule","eventServiceModule","searchAbstractCMSComponentHandlerServiceModule","searchAbstractPageHandlerServiceModule","searchMediaHandlerServiceModule"]).controller("entrySearchSelectorController",["$injector","$q","systemEventService","LINKED_DROPDOWN","urlService","isBlank",function(e,t,n,i,o,a){var r=function(e,t){if(this.reset){var n=this._getItemType(t),i=this.itemType&&n!==this.itemType;this.reset(i)}this.setup(t)}.bind(this);this._fetchEntity=function(e){return this.handlerService.getItem(e,this.uriContext)}.bind(this),this._fetchOptions=function(e){return this.handlerService?this.handlerService.getSearchResults(e,this.uriContext):t.when([])}.bind(this),this._fetchPage=function(e,n,i){return this.handlerService?this.handlerService.getPage(e,n,i,this.uriContext):t.when()}.bind(this),this.fetchStrategy={fetchEntity:this._fetchEntity},this.setup=function(t){if(this.uriContext=o.buildUriContext(this.editor.parameters.siteId,this.editor.parameters.catalogId,this.editor.parameters.catalogVersion),this.itemType=this._getItemType(t),this.itemType){var n="search"+this.itemType+"HandlerService";if(!e.has(n))throw"handler not found for "+n;this.handlerService=e.get(n),this.dropdownProperties=this.handlerService.getSearchDropdownProperties(),this.fetchStrategy={fetchEntity:this._fetchEntity},this.dropdownProperties.isPaged?(this.fetchStrategy.fetchPage=this._fetchPage,delete this.fetchStrategy.fetchAll):(delete this.fetchStrategy.fetchPage,this.fetchStrategy.fetchAll=this._fetchOptions),this.initialized=!0}return!a(this.itemType)}.bind(this),this._getItemType=function(e){return e&&this.model?this.model[e.qualifier]:this.model.itemSuperType},this.$onInit=function(){this.unRegisterer=n.registerEventHandler(this.id+i,r)},this.$onChanges=function(){this.setup()},this.$onDestroy=function(){this.unRegisterer()},this.dropdownProperties={}}]).component("entrySearchSelector",{transclude:!1,templateUrl:"entrySearchSelectorDropdownTemplate.html",controller:"entrySearchSelectorController",controllerAs:"ctrl",bindings:{model:"<",qualifier:"<",field:"<",id:"<",editor:"<"}})},function(e,t){angular.module("entrySearchStrategyInterfaceModule",[]).factory("EntrySearchStrategyInterface",function(){var e=function(){};return e.prototype.getSearchDropdownProperties=function(){throw"getSearchDropdownProperties is not implemented"},e.prototype.getItem=function(){throw"getItem is not implemented"},e.prototype.getSearchResults=function(){},e.prototype.getPage=function(){},e})},function(e,t){angular.module("searchAbstractCMSComponentHandlerServiceModule",["functionsModule","resourceModule","resourceLocationsModule","componentServiceModule","entrySearchStrategyInterfaceModule"]).factory("searchAbstractCMSComponentHandlerService",["$q","extend","ITEMS_RESOURCE_URI","restServiceFactory","EntrySearchStrategyInterface","URIBuilder",function(e,t,n,i,o,a){var r=function(){this.SEARCH_TEMPLATE="itemSearchHandlerTemplate.html",this.PLACEHOLDER_KEY="se.cms.navigationmanagement.navnode.node.entry.dropdown.component.search",this.uriParameters={}};return r=t(o,r),r.prototype._getItem=function(e){return i.get(new a(n).replaceParams(this.uriParameters).build()).getById(e).then(function(e){return{name:e.name,id:e.uid,typeCode:e.typeCode}})},r.prototype._getComponents=function(){return this._getPage().then(function(e){return e.results})},r.prototype._getPage=function(e,t,o){return i.get(new a(n).replaceParams(this.uriParameters).build()).get({mask:e,pageSize:t,currentPage:o}).then(function(e){return e.results=e.componentItems.map(function(e){return{name:e.name,id:e.uid,typeCode:e.typeCode}}),delete e.componentItems,e})},r.prototype.getSearchDropdownProperties=function(){return{templateUrl:this.SEARCH_TEMPLATE,placeHolderI18nKey:this.PLACEHOLDER_KEY,isPaged:!0}},r.prototype.getSearchResults=function(e,t){return this.uriParameters=t,this._getComponents()},r.prototype.getPage=function(e,t,n,i){return this.uriParameters=i,this._getPage(e,t,n)},r.prototype.getItem=function(e,t){return this.uriParameters=t,this._getItem(e)},new r}])},function(e,t){angular.module("searchAbstractPageHandlerServiceModule",["cmsitemsRestServiceModule","resourceLocationsModule","functionsModule","entrySearchStrategyInterfaceModule"]).factory("searchAbstractPageHandlerService",["$q","URIBuilder","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","restServiceFactory","cmsitemsUri","extend","EntrySearchStrategyInterface",function(e,t,n,i,o,a,r,s){var c=function(){this.SEARCH_TEMPLATE="itemSearchHandlerTemplate.html",this.PLACEHOLDER_KEY="se.cms.navigationmanagement.navnode.node.entry.dropdown.page.search",this.uriParameters={}};return c=r(s,c),c.prototype._getItem=function(e){return o.get(new t(a).replaceParams(this.uriParameters).build()).get({mask:e,pageSize:10,currentPage:0,catalogId:this.uriParameters[n],catalogVersion:this.uriParameters[i],typeCode:"AbstractPage",itemSearchParams:"pageStatus:active"}).then(function(e){var t=e.response[0];return{name:t.name,id:t.uid,typeCode:t.typeCode}})},c.prototype._getPage=function(e,r,s){return o.get(new t(a).replaceParams(this.uriParameters).build()).get({mask:e,pageSize:r,currentPage:s,catalogId:this.uriParameters[n],catalogVersion:this.uriParameters[i],typeCode:"AbstractPage",itemSearchParams:"pageStatus:active",sort:"name:asc"}).then(function(e){return e.results=e.response.map(function(e){return{name:e.name,id:e.uid,typeCode:e.typeCode}}),delete e.response,e})},c.prototype.getSearchDropdownProperties=function(){return{templateUrl:this.SEARCH_TEMPLATE,placeHolderI18nKey:this.PLACEHOLDER_KEY,isPaged:!0}},c.prototype.getPage=function(e,t,n,i){return this.uriParameters=i,this._getPage(e,t,n)},c.prototype.getItem=function(e,t){return this.uriParameters=t,this._getItem(e)},new c}])},function(e,t){angular.module("searchMediaHandlerServiceModule",["entrySearchStrategyInterfaceModule","functionsModule","smarteditServicesModule","resourceLocationsModule"]).factory("searchMediaHandlerService",["extend","EntrySearchStrategyInterface","restServiceFactory","MEDIA_PATH","MEDIA_RESOURCE_URI","URIBuilder","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","isBlank",function(e,t,n,i,o,a,r,s,c){var l=function(){this.SEARCH_TEMPLATE="mediaSearchHandlerTemplate.html",this.PLACEHOLDER_KEY="se.cms.navigationmanagement.navnode.node.entry.dropdown.media.search",this.uriParameters={}};return l=e(t,l),l.prototype._getMedias=function(e,t,o){var a={catalogId:this.uriParameters[r]||r,catalogVersion:this.uriParameters[s]||s};c(e)||(a.code=e);var l={namedQuery:"namedQueryMediaSearchByCodeCatalogVersion",params:Object.keys(a).reduce(function(e,t){return e+=","+t+":"+a[t]},"").substring(1),pageSize:t,currentPage:o};return n.get(i).get(l).then(function(e){return e.results=e.media.map(function(e){return{id:e.code,code:e.code,description:e.description,altText:e.altText,url:e.url,downloadUrl:e.downloadUrl}}),delete e.media,e})},l.prototype.getSearchDropdownProperties=function(){return{templateUrl:this.SEARCH_TEMPLATE,placeHolderI18nKey:this.PLACEHOLDER_KEY,isPaged:!0}},l.prototype.getSearchResults=function(e,t){return this.uriParameters=t,this._getMedias(e).then(function(e){return e.results})},l.prototype.getPage=function(e,t,n,i){return this.uriParameters=i,this._getMedias(e,t,n)},l.prototype.getItem=function(e,t){this.uriParameters=t;var i=new a(o).replaceParams(this.uriParameters).build();return n.get(i+"/"+e).get().then(function(e){return{id:e.code,code:e.code,description:e.description,altText:e.altText,url:e.url,downloadUrl:e.downloadUrl}})},new l}])},function(e,t){angular.module("navigationNodeEditorModule",["navigationNodeEditorCreateEntryModule","navigationNodeEditorEntryListModule","navigationNodeEditorAttributesModule","seBreadcrumbModule"]).controller("navigationNodeEditorController",function(){this.$onInit=function(){this.navigationNodeEntryData={navigationNodeEntry:null,prepareEntryNodeEditor:function(){}}}}).directive("navigationNodeEditor",function(){return{restrict:"E",transclude:!1,replace:!1,templateUrl:"navigationNodeEditorTemplate.html",controller:"navigationNodeEditorController",controllerAs:"ctrl",scope:{},bindToController:{nodeUid:"<",parentUid:"<?",entryIndex:"<",uriContext:"<",reset:"=",submit:"=",isDirty:"="}}})},function(e,t){angular.module("navigationNodeEditorAttributesModule",["functionsModule","resourceLocationsModule","eventServiceModule","resourceModule","yLoDashModule"]).constant("NODE_CREATION_EVENT","nodeCreationEvent").controller("navigationNodeEditorAttributesController",["lodash","NAVIGATION_MANAGEMENT_RESOURCE_URI","URIBuilder","systemEventService","navigationNodeRestService","NODE_CREATION_EVENT",function(e,t,n,i,o,a){var r;this.isContentLoaded=!1,this.tabId="ge-nav-node-editor",this.typeCode="CMSNavigationNode",this.tabStructure={attributes:[{cmsStructureType:"ShortString",qualifier:"name",i18nKey:"se.cms.navigationmanagement.navnode.node.name",required:!0},{cmsStructureType:"ShortString",qualifier:"title",i18nKey:"se.cms.navigationmanagement.navnode.node.title",localized:!0}],category:"NAVIGATION"};var s=function(t,n){var i=e.cloneDeep(n).map(function(e){return delete e.id,e}),o=r.getContent();o.entries=i,r.updateContent(o)}.bind(this);this.getApi=function(e){r=e},this.$onInit=function(){if(this.contentApi=new n(t).replaceParams(this.uriContext).build(),this.nodeUid){var e=angular.extend({identifier:this.nodeUid},this.uriContext);o.get(e).then(function(e){this.content=e,this.isContentLoaded=!0}.bind(this))}else{if(!this.parentUid)throw"navigationNodeEditorAttributes directive was provided with neither nodeUid nore parentUid";this.content={parentUid:this.parentUid},this.isContentLoaded=!0}i.registerEventHandler("modifyEntrySet",s)},this.updateCallback=function(e,t){this.nodeUid||i.sendAsynchEvent(a,t)}.bind(this),this.$onDestroy=function(){i.unRegisterEventHandler("modifyEntrySet",s)}}]).directive("navigationNodeEditorAttributes",function(){return{restrict:"E",transclude:!1,replace:!1,templateUrl:"navigationNodeEditorAttributesTemplate.html",controller:"navigationNodeEditorAttributesController",controllerAs:"ctrl",scope:{},bindToController:{nodeUid:"=?",parentUid:"<?",uriContext:"=",reset:"=",submit:"=",isDirty:"=",navigationNodeEntryData:"="}}})},function(e,t){angular.module("navigationNodeEditorCreateEntryModule",["resourceLocationsModule","eventServiceModule","entryDropdownMatcherModule","yLoDashModule","resourceModule","genericEditorModule","dropdownPopulatorInterfaceModule","navigationNodeEntryTypesServiceModule"]).constant("NAV_ENTRY_EDITOR_ID","se-nav-entry-editor").service("navigationEntryStructureService",["$q","$translate",function(e,t){this.getGenericEditorTabStructure=function(){var n={attributes:[{i18nKey:"se.cms.navigationmanagement.navnode.node.create.entry",cmsStructureType:"EditableDropdown",qualifier:"itemSuperType",placeholder:t.instant("se.cms.navigationmanagement.navnode.node.entry.dropdown.title"),required:!0},{cmsStructureType:"EntrySearchSelector",qualifier:"itemId",editable:!1,required:!0}],category:"NAVIGATION"};return e.when(n)}}]).factory("cmsNavigationEntryDropdownPopulator",["DropdownPopulatorInterface","$q","extend","navigationNodeEntryTypesService",function(e,t,n,i){var o=function(){},a=function(){return i.getNavigationNodeEntryTypes().then(function(e){var t=[];return e&&e.forEach(function(e){t.push({id:e.itemType,label:"se.cms."+e.itemType.toLowerCase()})}),t})};return(o=n(e,o)).prototype.populate=function(){return a(),t.when(a())},new o}]).controller("navigationNodeEditorCreateEntryController",["$timeout","NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","GENERIC_EDITOR_LOADED_EVENT","NAV_ENTRY_EDITOR_ID","systemEventService","LINKED_DROPDOWN","lodash","navigationEntryStructureService",function(e,t,n,i,o,a,r,s,c){this.entryTypeCode="cmsNavigationEntry";var l=function(e){this.entry=e,this.displayEditor=!0}.bind(this),d=function(e){var t=this.tabStructure.attributes;t.forEach(function(n,i){s.isMatch(n,{cmsStructureType:"EntrySearchSelector"})&&(t[i].editable=e)}.bind(this))}.bind(this),u=function(e,t){var n={};n.id=this.entry?this.entry.id:void 0,n[t.qualifier]=t.optionObject?t.optionObject.id:void 0,this.navigationNodeEntryData.prepareEntryNodeEditor(n)}.bind(this);this.addNewEntry=function(){this.entry=void 0,this.displayEditor=!0},this.saveEntry=function(){return this.submit().then(function(e){e.itemId?(a.sendAsynchEvent("saveEntry",e),this.cancelEntry()):a.sendAsynchEvent(n,{messages:[{message:"se.cms.navigationmanagement.node.addentry.no.itemid.message",subject:"itemId",type:"ValidationError"}]})}.bind(this))},this.isNewEntry=function(){return!this.entry||this.entry&&!this.entry.id},this.isDisabled=function(){return!this.isDirty()||!this.isValid()},this.cancelEntry=function(){d(!1),this.entry=void 0,this.displayEditor=!1};var p=function(e,t){this.entry&&t.id===this.entry.id&&this.cancelEntry()}.bind(this);this.$onInit=function(){this.displayEditor=!1,this.tabId=o,this.unregisterSelectHandler=a.registerEventHandler(this.tabId+r,u),this.unregisterDeleteHandler=a.registerEventHandler("deleteEntry",p),this.navigationNodeEntryData.prepareEntryNodeEditor=function(t){if(t&&(!this.entry||t.id!==this.entry.id)){var n=s.cloneDeep(t);delete n.parent,this.entry&&this.reset?this.reset().then(function(){this.cancelEntry(),e(function(){l(n)})}.bind(this)):(l(n),d(!0))}}.bind(this),c.getGenericEditorTabStructure().then(function(e){this.tabStructure=e,this.entry&&this.navigationNodeEntryData.prepareEntryNodeEditor(this.entry)}.bind(this))},this.$onDestroy=function(){this.unregisterSelectHandler(),this.unregisterDeleteHandler()}}]).directive("navigationNodeEditorCreateEntry",function(){return{restrict:"E",transclude:!1,replace:!1,templateUrl:"navigationNodeEditorCreateEntryTemplate.html",controller:"navigationNodeEditorCreateEntryController",controllerAs:"ctrl",scope:{},bindToController:{entry:"<?",uriContext:"<",navigationNodeEntryData:"<",isDirty:"&"}}})},function(e,t){angular.module("navigationNodeEditorEntryListModule",["genericEditorModule","seValidationErrorParserModule","navigationEntryItemServiceModule","eventServiceModule","resourceModule","yLoDashModule"]).controller("navigationNodeEditorEntryListController",["$q","lodash","navigationEntryItemService","systemEventService","seValidationErrorParser","navigationNodeRestService","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","GENERIC_EDITOR_LOADED_EVENT","NAV_ENTRY_EDITOR_ID",function(e,t,n,i,o,a,r,s,c){this.entries=[],this.isInError=function(e){return this.errorsMap&&Object.keys(this.errorsMap).indexOf(e.id)>-1},this.onSelect=function(e){this.currentEntry=e,this.navigationNodeEntryData.prepareEntryNodeEditor(e)}.bind(this);this.dropdownItems=[{key:"se.cms.navigationmanagement.navnode.edit",callback:this.onSelect},{key:"se.cms.navigationmanagement.navnode.move.up",condition:function(e){return this.entries.indexOf(e)>0}.bind(this),callback:function(e){var t=this.entries.indexOf(e),n=this.entries[t-1];this.entries.splice(t-1,2,e,n),i.sendAsynchEvent("modifyEntrySet",this.entries)}.bind(this)},{key:"se.cms.navigationmanagement.navnode.move.down",condition:function(e){return this.entries.indexOf(e)<this.entries.length-1}.bind(this),callback:function(e){var t=this.entries.indexOf(e),n=this.entries[t+1];this.entries.splice(t,2,n,e),i.sendAsynchEvent("modifyEntrySet",this.entries)}.bind(this)},{key:"se.cms.navigationmanagement.navnode.removenode",callback:function(e){var t=this.entries.filter(function(t){return t.id!==e.id});this.entries=t,i.sendAsynchEvent("modifyEntrySet",this.entries),i.sendAsynchEvent("deleteEntry",e)}.bind(this)}];var l=function(e,o){n.finalizeNavigationEntries([o],this.uriContext).then(function(){var e=t.cloneDeep(o);this.entries=this.entries.map(function(t){return t.id===e.id&&(t=e),t}),this.entries.some(function(t){return t.id===e.id})||this.entries.push(e),i.sendAsynchEvent("modifyEntrySet",this.entries)}.bind(this))}.bind(this),d=function(n,a){var s=t.cloneDeep(a);return a.messages.processed||(this.errorsMap=s.messages.filter(function(e){return"entries"===e.subject}).map(function(e){var t=o.parse(e.message);return e.position=t.position,e.subject=t.field,e}).reduce(function(e,t){var n=this.entries[t.position].id;return e[n]=e[n]||[],e[n].push(t),delete t.position,e}.bind(this),{}),this.errorsMap&&this.currentEntry&&this.errorsMap[this.currentEntry.id]&&(this.errorsMap[this.currentEntry.id].processed=!0,i.sendAsynchEvent(r,{messages:this.errorsMap[this.currentEntry.id]}))),e.when()}.bind(this),u=function(t,n){return this.currentEntry&&this.errorsMap&&this.errorsMap[this.currentEntry.id]&&n===c&&(this.errorsMap[this.currentEntry.id].processed=!0,i.sendAsynchEvent(r,{messages:this.errorsMap[this.currentEntry.id]})),e.when()}.bind(this);this.$onInit=function(){if(this.nodeUid){var e=angular.extend({identifier:this.nodeUid},this.uriContext);a.get(e).then(function(e){var t=e.entries;n.finalizeNavigationEntries(t,this.uriContext).then(function(){this.entries=e.entries,void 0!==this.entryIndex&&(this.entry=this.entries[this.entryIndex],this.onSelect(this.entry))}.bind(this))}.bind(this))}this.unregisterEntryListListener=i.registerEventHandler("saveEntry",l),this.unregisterErrorListener=i.registerEventHandler(r,d),this.unregisterEditorLoadListener=i.registerEventHandler(s,u)},this.$onDestroy=function(){this.unregisterEntryListListener(),this.unregisterErrorListener(),this.unregisterEditorLoadListener()}}]).component("navigationNodeEditorEntryList",{transclude:!1,templateUrl:"navigationNodeEditorEntryListTemplate.html",controller:"navigationNodeEditorEntryListController",controllerAs:"ctrl",bindings:{entryIndex:"<?",nodeUid:"<?",uriContext:"<",navigationNodeEntryData:"<"}})},function(e,t){angular.module("navigationNodeEditorModalServiceModule",["modalServiceModule","confirmationModalServiceModule"]).factory("navigationNodeEditorModalService",["$q","$log","modalService","confirmationModalService","MODAL_BUTTON_STYLES","MODAL_BUTTON_ACTIONS",function(e,t,n,i,o,a){function r(){}return r.prototype.openNodeEditor=function(r,s){return n.open({title:"se.cms.navigationmanagement.node.edit.title",templateUrl:"navigationNodeEditorModalTemplate.html",controller:["$scope","modalManager",function(n,o){this.target=r,this.uriContext=s,this.onCancel=function(){return this.isDirty()?i.confirm({description:"se.editor.cancel.confirm"}).then(function(){return e.when({})},function(){return e.reject()}):e.when({})},this.init=function(){o.setDismissCallback(this.onCancel.bind(this)),o.setButtonHandler(function(e){switch(e){case"save":return this.submit().then(function(){o.close()});case"cancel":return this.onCancel();default:t.error("A button callback has not been registered for button with id",e)}}.bind(this)),n.$watch(function(){return"function"==typeof this.isDirty&&this.isDirty()}.bind(this),function(e){"boolean"==typeof e&&(e?o.enableButton("save"):o.disableButton("save"))}.bind(this))}}],buttons:[{id:"cancel",label:"se.cms.navigationmanagement.node.edit.cancel",style:o.SECONDARY,action:a.DISMISS},{id:"save",label:"se.cms.navigationmanagement.node.edit.save",action:a.NONE,disabled:!0}]})},new r}])},function(e,t){angular.module("navigationNodeEntryTypesServiceModule",["resourceModule"]).service("navigationNodeEntryTypesService",["navigationEntryTypesRestService",function(e){this.getNavigationNodeEntryTypes=function(){return e.get().then(function(e){return e.navigationEntryTypes})}}])},function(e,t){angular.module("restrictionsMenuModule",["cmsSmarteditServicesModule","restrictionsTableModule","restrictionsPageInfoModule","eventServiceModule","iframeClickDetectionServiceModule","pageRestrictionsModule","displayConditionsFacadeModule","smarteditServicesModule"]).component("restrictionsMenuToolbarItem",{templateUrl:"pageRestrictionsMenuToolbarItemTemplate.html",controller:["assetsService","pageInfoService","pageListService","pageRestrictionsFacade","displayConditionsFacade",function(e,t,n,i,o){this.$onInit=function(){t.getPageUID().then(function(e){i.getRestrictionsByPageUID(e).then(function(e){this.restrictions=e}.bind(this)),n.getPageById(e).then(function(e){this.pageId=e&&e.uid,this.pageNameLabelI18nKey="se.cms.label.page.name",this.pageName=e&&e.name,o.isPagePrimary(this.pageId).then(function(e){this.pageIsPrimary=e,this.pageIsPrimary||o.getPrimaryPageForVariationPage(this.pageId).then(function(e){this.associatedPrimaryPageName=e.name}.bind(this))}.bind(this)),this.restrictionCriteria=i.getRestrictionCriteriaOptionFromPage(e)}.bind(this))}.bind(this))}}]})},function(e,t){angular.module("restrictionsPageInfoModule",["pageListServiceModule"]).controller("restrictionsPageInfoController",function(){this.associatedPrimaryPageLabelI18nKey="se.cms.label.page.primary",this.displayConditionsI18nKey={primary:{description:"page.displaycondition.primary.description",value:"page.displaycondition.primary"},variation:{description:"page.displaycondition.variation.description",value:"page.displaycondition.variation"}},this.pageDisplayConditionsLabelI18nKey="se.cms.label.page.display.conditions",this.pageNameLabelI18nKey="se.cms.label.page.name",this.getDisplayConditionsValue=function(){return this.pageIsPrimary?"primary":"variation"}}).directive("restrictionsPageInfo",function(){return{templateUrl:"pageRestrictionsPageInfoTemplate.html",restrict:"E",controller:"restrictionsPageInfoController",controllerAs:"ctrl",scope:{},bindToController:{pageName:"=",pageType:"=",pageIsPrimary:"=",associatedPrimaryPageName:"="}}})},function(e,t){angular.module("restrictionsPageListIconModule",["cmssmarteditContainerTemplates","translationServiceModule","cmsSmarteditServicesModule"]).controller("restrictionsPageListIconController",["assetsService",function(e){this.tooltipI18nKey="se.icon.tooltip.visibility",this.getIconUrl=function(){return e.getAssetsRoot()+(this.numberOfRestrictions>0?"/images/icon_restriction_small_blue.png":"/images/icon_restriction_small_grey.png")},this.getInterpolationParameters=function(){return{numberOfRestrictions:this.numberOfRestrictions}}}]).directive("restrictionsPageListIcon",function(){return{templateUrl:"restrictionsPageListIconTemplate.html",restrict:"E",controller:"restrictionsPageListIconController",controllerAs:"ctrl",scope:{},bindToController:{numberOfRestrictions:"="}}})},function(e,t){angular.module("newPageDisplayConditionModule",["catalogServiceModule","pageServiceModule","pageDisplayConditionsServiceModule"]).controller("newPageDisplayConditionController",["$scope","$log","catalogService","pageService","pageDisplayConditionsService","lodash",function(e,t,n,i,o,a){var r={};this.$onInit=function(){this.previousPageTypeCode=null,this.previousTargetCatalogVersion=null,this.conditions=null,this.conditionSelected=null,this.primarySelected=null,this.ready=!1,this.resultFn=this.resultFn||function(){},this.initialConditionSelected=this.initialConditionSelected||"page.displaycondition.primary",this.showPrimarySelector=function(){return!(this.conditionSelected&&!0===this.conditionSelected.isPrimary)},this.dataChanged=function(){this.resultFn(this._getResults())}},this.$onChanges=function(e){(e.pageTypeCode&&this.pageTypeCode!==this.previousPageTypeCode||e.targetCatalogVersion&&this.targetCatalogVersion!==this.previousTargetCatalogVersion)&&(this.previousPageTypeCode=this.pageTypeCode,this.previousTargetCatalogVersion=this.targetCatalogVersion,!this.targetCatalogVersion||this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)?this._getPrimaryPages():this._getOnlyPrimaryDisplayCondition())},this._getResults=function(){var e={isPrimary:this.conditionSelected.isPrimary};return this.conditionSelected.isPrimary||(e.primaryPage=this.primarySelected),e},this._getPrimaryPages=function(){this.pageTypeCode?r[this.pageTypeCode]?(this.primaryPageChoices=r[this.pageTypeCode],this._getAllPrimaryDisplayCondition()):i.getPrimaryPagesForPageType(this.pageTypeCode,this.uriContext).then(function(e){this.primaryPageChoices=e,r[this.pageTypeCode]=e}.bind(this),function(e){t.error(e),this.primaryPageChoices=[]}.bind(this)).finally(function(){this._getAllPrimaryDisplayCondition()}.bind(this)):this._getAllPrimaryDisplayCondition()},this._getAllPrimaryDisplayCondition=function(){o.getNewPageConditions(this.pageTypeCode,this.uriContext).then(function(e){this.conditions=e,this.conditionSelected=this.conditions[0],this.conditions.length>1&&(this.conditionSelected=a.find(this.conditions,function(e){return e.label===this.initialConditionSelected}.bind(this))),this.primaryPageChoices&&this.primaryPageChoices.length>0&&(this.initialPrimaryPageSelected?this.primarySelected=this.primaryPageChoices.find(function(e){return e.label===this.initialPrimaryPageSelected}.bind(this)):this.primarySelected=this.primaryPageChoices[0]),this.ready=!0}.bind(this)).finally(function(){this.targetCatalogVersion&&!this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)?this._getOnlyPrimaryDisplayCondition():this.dataChanged()}.bind(this))},this._getOnlyPrimaryDisplayCondition=function(){this.conditions=[{description:"page.displaycondition.primary.description",isPrimary:!0,label:"page.displaycondition.primary"}],this.conditionSelected=this.conditions[0],this.primarySelected=!0,this.ready=!0,this.dataChanged()},this._isUriContextEqualToCatalogVersion=function(e,t){return e&&t&&t.siteId===e.CURRENT_CONTEXT_SITE_ID&&t.catalogId===e.CURRENT_CONTEXT_CATALOG&&t.version===e.CURRENT_CONTEXT_CATALOG_VERSION}}]).component("newPageDisplayCondition",{controller:"newPageDisplayConditionController",templateUrl:"newPageDisplayConditionTemplate.html",bindings:{pageTypeCode:"<",uriContext:"<",resultFn:"<?",initialPrimaryPageSelected:"<?",initialConditionSelected:"<?",targetCatalogVersion:"<?"}})},function(e,t){angular.module("selectPageTemplateModule",["pageTemplateServiceModule","l10nModule"]).component("selectPageTemplate",{controller:"selectPageTemplateController",templateUrl:"selectPageTemplateTemplate.html",bindings:{uriContext:"<",pageTypeCode:"<",onTemplateSelected:"<"}}).controller("selectPageTemplateController",["pageTemplateService","$rootScope",function(e){var t=this,n={};this.templateSelected=function(e){this.selectedTemplate=e,this.onTemplateSelected(e)},this.isSelected=function(e){return e===this.selectedTemplate},this.clearSearch=function(){this.searchString=""},this.$onChanges=function(e){e.pageTypeCode.currentValue&&this._onInputUpdated()},this._onInputUpdated=function(){this.clearSearch(),this.selectedTemplate=null,n[t.pageTypeCode]?t.pageTemplates=n[t.pageTypeCode]:(t.pageTemplates=[],e.getPageTemplatesForType(t.uriContext,t.pageTypeCode).then(function(e){n[t.pageTypeCode]=e.templates,t.pageTemplates=n[t.pageTypeCode]}))}}]).filter("templateNameFilter",function(){return function(e,t){var n=[];if(!t)return e;var i=(t=t.toLowerCase()).split(" ");return(e||[]).forEach(function(e){var t=!0,o=e.name.toLowerCase();i.forEach(function(e){if(-1===o.indexOf(e))return t=!1,!1}),t&&-1===n.indexOf(e)&&n.push(e)}),n}})},function(e,t){angular.module("selectPageTypeModule",["pageTypeServiceModule","l10nModule"]).component("selectPageType",{controller:"selectPageTypeController",templateUrl:"selectPageTypeTemplate.html",bindings:{onTypeSelected:"="}}).controller("selectPageTypeController",["pageTypeService",function(e){this.pageTypes=[],this.selectedType=null,this.selectType=function(e){this.selectedType=e,this.onTypeSelected(e)},this.isSelected=function(e){return e===this.selectedType},this.$onInit=function(){e.getPageTypes().then(function(e){this.pageTypes=e}.bind(this))}}])},function(e,t){angular.module("selectTargetCatalogVersionModule",["yLoDashModule","pageFacadeModule","catalogVersionRestServiceModule","pageServiceModule","resourceLocationsModule","seConstantsModule"]).component("selectTargetCatalogVersion",{controller:"selectTargetCatalogVersionController",templateUrl:"selectTargetCatalogVersionTemplate.html",bindings:{uriContext:"<",pageTypeCode:"<",pageLabel:"<",basePageInfo:"<",onTargetCatalogVersionSelected:"&"}}).controller("selectTargetCatalogVersionController",["$q","lodash","pageFacade","catalogVersionRestService","catalogService","pageService","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","VALIDATION_MESSAGE_TYPES",function(e,t,n,i,o,a,r,s,c,l){this.catalogVersions=[],this.selectedCatalogVersion=null,this.catalogVersionContainsPageWithSameLabel=!1,this.catalogVersionContainsPageWithSameTypeCode=!1,this.catalogVersionSelectorFetchStrategy={fetchAll:function(){return e.when(t.forEach(this.catalogVersions,function(e){e.id=e.uuid,e.label=e.name}))}.bind(this)},this.setYSelectAPI=function(e){this.ySelectAPI=e}.bind(this),this.onSelectionChanged=function(){this.selectedCatalogVersion&&o.getCatalogVersionByUuid(this.selectedCatalogVersion).then(function(e){if(this.onTargetCatalogVersionSelected({$catalogVersion:e}),"ContentPage"===this.pageTypeCode)return n.contentPageWithLabelExists(this.pageLabel,e.catalogId,e.version);var t={};return t[r]=e.siteId,t[s]=e.catalogId,t[c]=e.version,a.getPrimaryPagesForPageType(this.pageTypeCode,t)}.bind(this)).then(function(e){"ContentPage"===this.pageTypeCode?this.catalogVersionContainsPageWithSameLabel=e:this.catalogVersionContainsPageWithSameTypeCode=!t.isEmpty(e),this.updateYSelectValidationState()}.bind(this))}.bind(this),this.updateYSelectValidationState=function(){this.ySelectAPI&&(this.catalogVersionContainsPageWithSameLabel||this.catalogVersionContainsPageWithSameTypeCode?this.ySelectAPI.setValidationState(l.WARNING):this.ySelectAPI.resetValidationState())},this.pageAlreadyExists=function(){return this.catalogVersionContainsPageWithSameTypeCode&&!this.catalogVersionContainsPageWithSameLabel}.bind(this),this.$onInit=function(){i.getCloneableTargets(this.uriContext).then(function(e){this.catalogVersions=e.versions,t.isEmpty(this.catalogVersions)||o.getCatalogVersionUUid(this.uriContext).then(function(e){var n=t.find(this.catalogVersions,function(t){return t.uuid===e});this.selectedCatalogVersion=n?n.uuid:this.catalogVersions[0].uuid}.bind(this))}.bind(this))}}])},function(e,t){angular.module("componentCloneInfoFormModule",["yLoDashModule","catalogServiceModule","languageServiceModule","pageFacadeModule","pageServiceModule","genericEditorModule","eventServiceModule","resourceLocationsModule"]).controller("componentCloneInfoFormController",["$translate","lodash","catalogService","languageService","pageFacade","pageService","systemEventService","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT",function(e,t,n,i,o,a,r,s,c,l,d){this.$onInit=function(){if(this.pageLabel=null,this.catalogVersionContainsPageWithSameTypeCode=!1,"ContentPage"!==this.pageTypeCode&&this.targetCatalogVersion&&!this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)){var e={};e[s]=this.targetCatalogVersion.siteId,e[c]=this.targetCatalogVersion.catalogId,e[l]=this.targetCatalogVersion.version,a.getPrimaryPagesForPageType(this.pageTypeCode,e).then(function(e){this.catalogVersionContainsPageWithSameTypeCode=!t.isEmpty(e)}.bind(this))}this.setGenericEditorApi=function(e){this.pageInfoEditorApi=e,this.targetCatalogVersion&&!this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)&&(this.pageInfoEditorApi.getLanguages=function(){return i.getLanguagesForSite(this.targetCatalogVersion.siteId)}.bind(this))}.bind(this)},this.$doCheck=function(){if("ContentPage"===this.pageTypeCode&&this.targetCatalogVersion&&this.pageInfoEditorApi&&!this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)){var t=this.pageInfoEditorApi.getContent();t&&t.label!==this.pageLabel&&(this.pageLabel=t.label,o.contentPageWithLabelExists(this.pageLabel,this.targetCatalogVersion.catalogId,this.targetCatalogVersion.version).then(function(t){t?r.sendAsynchEvent(d,{messages:[{subject:"label",message:e.instant("se.cms.clonepagewizard.pageinfo.targetcatalogversion.label.exists.message"),type:"Warning"}]}):this.pageInfoEditorApi.clearMessages()}.bind(this)))}},this._isUriContextEqualToCatalogVersion=function(e,t){return e&&t&&t.siteId===e.CURRENT_CONTEXT_SITE_ID&&t.catalogId===e.CURRENT_CONTEXT_CATALOG&&t.version===e.CURRENT_CONTEXT_CATALOG_VERSION}}]).component("componentCloneInfoForm",{controller:"componentCloneInfoFormController",templateUrl:"componentCloneInfoTemplate.html",bindings:{structure:"<",content:"<",submit:"=",reset:"=",isDirty:"=",isValid:"=",pageTemplate:"<",pageTypeCode:"<",uriContext:"<",targetCatalogVersion:"<"}})},function(e,t){angular.module("componentCloneOptionFormModule",["yHelpModule"]).controller("componentCloneOptionFormController",["$translate",function(e){this.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION={REFERENCE_EXISTING:"reference",CLONE:"clone"},this.$onInit=function(){this.helpTemplate="<span>"+e.instant("se.cms.clonepagewizard.options.tooltip")+"</span>",this.componentInSlotOption=this.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING,this.onSelectionChange({$cloneOptionData:this.componentInSlotOption})},this.updateComponentInSlotOption=function(e){this.componentInSlotOption=e,this.onSelectionChange({$cloneOptionData:this.componentInSlotOption})}}]).component("componentCloneOptionForm",{controller:"componentCloneOptionFormController",templateUrl:"componentCloneOptionTemplate.html",bindings:{onSelectionChange:"&"}})},function(e,t){angular.module("deletePageToolbarItemModule",["pageServiceModule","deletePageServiceModule","eventServiceModule","seConstantsModule","pageFacadeModule"]).controller("DeletePageToolbarItemController",["pageService","pageFacade","deletePageService","systemEventService","EVENT_CONTENT_CATALOG_UPDATE",function(e,t,n,i,o){this.$onChanges=function(){this.ready=!1,t.retrievePageUriContext().then(function(t){this.uriContext=t,e.getCurrentPageInfo().then(function(e){this.pageInfo=e,n.isDeletePageEnabled(this.pageInfo.uid).then(function(e){this.isDeletePageEnabled=e,this.ready=!0}.bind(this))}.bind(this))}.bind(this))},this.onClickOnDeletePage=function(){return e.getCurrentPageInfo().then(function(e){return n.deletePage(e,this.uriContext).then(function(e){i.sendEvent(o,e)}.bind(this))}.bind(this))}}]).component("deletePageToolbarItem",{controller:"DeletePageToolbarItemController",templateUrl:"deletePageToolbarItemTemplate.html",bindings:{toolbarItem:"<"}})},function(e,t){angular.module("displayConditionsEditorModule",["displayConditionsEditorModelModule","displayConditionsPageInfoModule","displayConditionsPageVariationsModule","displayConditionsPrimaryPageModule"]).controller("displayConditionsEditorController",["displayConditionsEditorModel",function(e){this.$onInit=function(){e.initModel(this.page.uid)},this.getPageName=function(){return e.pageName},this.getPageType=function(){return e.pageType},this.isPagePrimary=function(){return e.isPrimary},this.getVariations=function(){return e.variations},this.getAssociatedPrimaryPage=function(){return e.associatedPrimaryPage},this.getIsAssociatedPrimaryReadOnly=function(){return e.isAssociatedPrimaryReadOnly},this.getPrimaryPages=function(){return e.primaryPages},this.onPrimaryPageSelect=function(e){this.page.label=e.label}}]).component("displayConditionsEditor",{controller:"displayConditionsEditorController",templateUrl:"displayConditionsEditorTemplate.html",bindings:{page:"<"}})},function(e,t){angular.module("displayConditionsPageInfoModule",["cmssmarteditContainerTemplates","displayConditionsPageInfoControllerModule","yHelpModule"]).component("displayConditionsPageInfo",{controller:"displayConditionsPageInfoController",templateUrl:"displayConditionsPageInfoTemplate.html",bindings:{pageName:"<",pageType:"<",isPrimary:"<"}})},function(e,t){angular.module("displayConditionsPageInfoControllerModule",["translationServiceModule"]).controller("displayConditionsPageInfoController",["$translate",function(e){this.displayConditionLabelI18nKey="se.cms.display.conditions.label",this.pageNameI18nKey="se.cms.pagelist.headerpagename",this.pageTypeI18nKey="se.cms.pagelist.headerpagetype",this.getPageDisplayConditionI18nKey=function(){return this.isPrimary?"se.cms.display.conditions.primary.id":"se.cms.display.conditions.variation.id"},this.getPageDisplayConditionDescriptionI18nKey=function(){return this.isPrimary?"se.cms.display.conditions.primary.description":"se.cms.display.conditions.variation.description"},this.$onChanges=function(){e(this.getPageDisplayConditionDescriptionI18nKey()).then(function(e){this.helpTemplate="<span>"+e+"</span>"}.bind(this))}}])},function(e,t){angular.module("displayConditionsPageVariationsModule",["cmssmarteditContainerTemplates","displayConditionsPageVariationsControllerModule","clientPagedListModule"]).component("displayConditionsPageVariations",{templateUrl:"displayConditionsPageVariationsTemplate.html",controller:"displayConditionsPageVariationsController",bindings:{variations:"<"}})},function(e,t){angular.module("displayConditionsPageVariationsControllerModule",[]).controller("displayConditionsPageVariationsController",["$translate",function(e){this.variationPagesTitleI18nKey="se.cms.display.conditions.variation.pages.title",this.noVariationsI18nKey="se.cms.display.conditions.no.variations",this.variationsDescriptionI18nKey="se.cms.display.conditions.variations.description",this.itemsPerPage=3,this.keys=[{property:"pageName",i18n:"se.cms.display.conditions.header.page.name"},{property:"creationDate",i18n:"se.cms.display.conditions.header.creation.date"},{property:"restrictions",i18n:"se.cms.display.conditions.header.restrictions"}],this.renderers={creationDate:function(){return'<span>{{item.creationDate | date: "short"}}</span>'},helpTemplate:function(){return"<span>"+e.instant(this.variationsDescriptionI18nKey)+"</span>"}.bind(this)}}])},function(e,t){angular.module("displayConditionsPrimaryPageModule",["cmssmarteditContainerTemplates","displayConditionsPrimaryPageControllerModule"]).component("displayConditionsPrimaryPage",{templateUrl:"displayConditionsPrimaryPageTemplate.html",controller:"displayConditionsPrimaryPageController",bindings:{readOnly:"<",associatedPrimaryPage:"<",allPrimaryPages:"<?",onPrimaryPageSelect:"&?"}})},function(e,t){angular.module("displayConditionsPrimaryPageControllerModule",[]).controller("displayConditionsPrimaryPageController",function(){this.associatedPrimaryPageLabelI18nKey="se.cms.display.conditions.primary.page.label",this.triggerOnPrimaryPageSelect=function(){this.onPrimaryPageSelect({primaryPage:this.associatedPrimaryPage})}})},function(e,t){angular.module("pageEditorModalServiceModule",["genericEditorModalServiceModule","pageServiceModule","crossFrameEventServiceModule","synchronizationConstantsModule","contextAwarePageStructureServiceModule","cmsitemsRestServiceModule"]).factory("pageEditorModalService",["$q","genericEditorModalService","crossFrameEventService","contextAwarePageStructureService","cmsitemsRestService","pageService","SYNCHRONIZATION_POLLING",function(e,t,n,i,o,a,r){function s(){}return s.prototype.open=function(s){var c={title:"se.cms.pageeditormodal.editpagetab.title",componentId:s.uid,componentUuid:s.uuid,componentType:s.typeCode},l=o.getById(s.uuid),d=a.isPagePrimary(s.uid);return e.all([l,d]).then(function(e){return c.content=e[0],o.getById(e[0].masterTemplate).then(function(o){return c.content.template=o.uid,i.getPageStructureForPageEditing(c.content.typeCode,c.content.uid).then(function(i){return c.structure=i,e[1]&&(c.structure.attributes=c.structure.attributes.filter(function(e){return"restrictions"!==e.qualifier&&"onlyOneRestrictionMustApply"!==e.qualifier})),t.open(c,null,function(){n.publish(r.FETCH_SYNC_STATUS_ONCE,s.uuid)})}.bind(this))}.bind(this))}.bind(this))},new s}])},function(e,t){angular.module("pageInfoContainerModule",["catalogServiceModule","pageInfoDetailsModule","pageInfoHeaderModule","pageListServiceModule","contextAwarePageStructureServiceModule","pageEditorModalServiceModule","cmsitemsRestServiceModule","pageServiceModule"]).controller("pageInfoContainerController",["catalogService","pageListService","contextAwarePageStructureService","pageEditorModalService","cmsitemsRestService","pageService",function(e,t,n,i,o,a){this.isEditPageDisabled=!0,this.$onInit=function(){a.getCurrentPageInfo().then(function(t){this.pageUid=t.uid,this.pageUuid=t.uuid,this.pageTemplateUuid=t.masterTemplate,this.pageTypeCode=t.typeCode,this.pageContent=t,e.retrieveUriContext().then(function(e){this.pageContent=t,this.pageContent.uriContext=e}.bind(this))}.bind(this)).then(function(){o.getById(this.pageTemplateUuid).then(function(e){this.pageTemplate=e.uid,this.pageContent.template=e.uid,this.isEditPageDisabled=!1}.bind(this))}.bind(this)).then(function(){n.getPageStructureForViewing(this.pageTypeCode).then(function(e){this.pageStructure=e}.bind(this))}.bind(this))}.bind(this),this.onEditClick=function(){this.isEditPageDisabled=!0,i.open(this.pageContent).finally(function(){this.isEditPageDisabled=!1}.bind(this))}}]).component("pageInfoContainer",{templateUrl:"pageInfoContainerTemplate.html",controller:"pageInfoContainerController"})},function(e,t){angular.module("pageInfoDetailsModule",["hasOperationPermissionModule"]).component("pageInfoDetails",{templateUrl:"pageInfoDetailsTemplate.html",bindings:{isEditPageDisabled:"<",onEditClick:"&",pageContent:"<",pageStructure:"<",pageTypeCode:"<",pageUid:"<"}})},function(e,t){angular.module("pageInfoHeaderModule",[]).component("pageInfoHeader",{templateUrl:"pageInfoHeaderTemplate.html",bindings:{pageTypeCode:"<",pageTemplate:"<"}})},function(e,t){angular.module("pageInfoMenuModule",["pageInfoContainerModule"]).component("pageInfoMenuToolbarItem",{templateUrl:"pageInfoMenuToolbarItemTemplate.html"})},function(e,t){angular.module("clonePageItemModule",["clonePageWizardServiceModule"]).controller("ClonePageItemController",["clonePageWizardService",function(e){this.onClickOnClone=function(){e.openClonePageWizard(this.pageInfo)}}]).component("clonePageItem",{bindings:{pageInfo:"<"},controller:"ClonePageItemController",templateUrl:"clonePageItemTemplate.html"})},function(e,t){angular.module("deletePageItemModule",["deletePageServiceModule","eventServiceModule","seConstantsModule"]).controller("DeletePageItemController",["deletePageService","systemEventService","EVENT_CONTENT_CATALOG_UPDATE",function(e,t,n){this.$onChanges=function(){this.pageInfo&&e.isDeletePageEnabled(this.pageInfo.uid).then(function(e){this.isDeletePageEnabled=e}.bind(this))},this.onClickOnDeletePage=function(){return e.deletePage(this.pageInfo,this.pageInfo.uriContext).then(function(e){t.sendEvent(n,e)})}}]).component("deletePageItem",{bindings:{pageInfo:"<"},controller:"DeletePageItemController",templateUrl:"deletePageItemTemplate.html"})},function(e,t){angular.module("editPageItemModule",["catalogServiceModule","eventServiceModule","pageEditorModalServiceModule","seConstantsModule"]).controller("EditPageItemController",["catalogService","pageEditorModalService","systemEventService","EVENT_CONTENT_CATALOG_UPDATE",function(e,t,n,i){this.$onChanges=function(){this.pageInfo&&e.retrieveUriContext().then(function(e){this.pageInfo.uriContext=e}.bind(this))},this.onClickOnEdit=function(){return t.open(this.pageInfo).then(function(e){n.sendEvent(i,e)})}}]).component("editPageItem",{bindings:{pageInfo:"<"},controller:"EditPageItemController",templateUrl:"editPageItemTemplate.html"})},function(e,t){angular.module("syncPageItemModule",["syncPageModalServiceModule"]).controller("SyncPageItemController",["syncPageModalService",function(e){this.onClickOnSync=function(){e.open(this.pageInfo)}}]).component("syncPageItem",{bindings:{pageInfo:"<"},controller:"SyncPageItemController",templateUrl:"syncPageItemTemplate.html"})},function(e,t){angular.module("pageListControllerModule",["addPageServiceModule","functionsModule","pageListSyncIconModule","resourceLocationsModule","restrictionsPageListIconModule","smarteditServicesModule","hasOperationPermissionModule","yLoDashModule","dynamicPagedListModule","pageListTemplatePrinterModule","cmsitemsRestServiceModule","eventServiceModule","seConstantsModule","translationServiceModule"]).controller("pageListController",["$routeParams","$location","$translate","$scope","STOREFRONT_PATH_WITH_PAGE_ID","EVENT_CONTENT_CATALOG_UPDATE","TRASHED_PAGE_LIST_PATH","lodash","cmsitemsUri","urlService","catalogService","addPageWizardService","systemEventService","trashedPageService",function(e,t,n,i,o,a,r,s,c,l,d,u,p,m){this.isReady=!1,this.siteUID=e.siteId,this.catalogId=e.catalogId,this.catalogVersion=e.catalogVersion,this.uriContext=l.buildUriContext(this.siteUID,this.catalogId,this.catalogVersion),this.pageUriContext=l.buildPageUriContext(this.siteUID,this.catalogId,this.catalogVersion),this.pageListConfig={sortBy:"name",reversed:!1,itemsPerPage:10,displayCount:!0},this.pageListConfig.uri=c,this.pageListConfig.queryParams={catalogId:this.catalogId,catalogVersion:this.catalogVersion,typeCode:"AbstractPage",itemSearchParams:"pageStatus:active"},d.isContentCatalogVersionNonActive().then(function(e){this.goToTrash=function(){t.path(r.replace(":siteId",this.siteUID).replace(":catalogId",this.catalogId).replace(":catalogVersion",this.catalogVersion))},this.catalogName="",this.query={value:""},this.searchOptions={debounce:500},this.pageListConfig.keys=[{property:"name",i18n:"se.cms.pagelist.headerpagename",sortable:!0},{property:"uid",i18n:"se.cms.pagelist.headerpageid",sortable:!0},{property:"itemtype",i18n:"se.cms.pagelist.headerpagetype",sortable:!0},{property:"template",i18n:"se.cms.pagelist.headerpagetemplate"},{property:"numberOfRestrictions",i18n:"se.cms.pagelist.headerrestrictions"}],e&&this.pageListConfig.keys.push({property:"syncStatus",i18n:"se.cms.actionitem.page.sync"}),this.pageListConfig.keys.push({property:"dropdownitems",i18n:""}),this.reset=function(){this.query.value=""},d.getContentCatalogsForSite(this.siteUID).then(function(e){this.catalogName=e.filter(function(e){return e.catalogId===this.catalogId}.bind(this))[0].name}.bind(this)),this.pageListConfig.renderers={name:function(){return'<a data-ng-click="$ctrl.config.injectedContext.onLink( item.uid )">{{ item.name }}</a>'},template:function(){return'<page-list-template-printer data-template-uuid="item.masterTemplate"></page-list-template-printer>'},numberOfRestrictions:function(){return'<restrictions-page-list-icon data-number-of-restrictions="item.restrictions.length || 0"/>'},syncStatus:function(){return'<div><page-list-sync-icon data-uri-context="$ctrl.config.injectedContext.uriContext" data-page-id="item.uuid" /></div>'},dropdownitems:function(){return'<div has-operation-permission="$ctrl.config.injectedContext.permissionForDropdownItems" class="paged-list-table__body__td paged-list-table__body__td-menu"><y-drop-down-menu dropdown-items="$ctrl.config.injectedContext.dropdownItems" selected-item="item" class="y-dropdown pull-right" /></div>'}},this.pageListConfig.dropdownItems=[{template:"<edit-page-item data-page-info='$ctrl.selectedItem' />"}],e&&this.pageListConfig.dropdownItems.push({template:"<sync-page-item data-page-info='$ctrl.selectedItem' />"}),this.pageListConfig.dropdownItems.push({template:"<clone-page-item data-page-info='$ctrl.selectedItem' />"}),this.pageListConfig.dropdownItems.push({template:"<delete-page-item data-page-info='$ctrl.selectedItem' />"}),this.pageListConfig.injectedContext={onLink:function(e){if(e){var n=this._buildExperiencePath(e);t.path(n)}}.bind(this),uriContext:s.merge(this.uriContext,this.pageUriContext),dropdownItems:this.pageListConfig.dropdownItems,permissionForDropdownItems:"se.edit.page"},this._buildExperiencePath=function(e){return o.replace(":siteId",this.siteUID).replace(":catalogId",this.catalogId).replace(":catalogVersion",this.catalogVersion).replace(":pageId",e)},this.openAddPageWizard=function(){u.openAddPageWizard().then(function(){this.dynamicPagedListApi.reloadItems()}.bind(this))},this.getApi=function(e){this.dynamicPagedListApi=e};var n=[],c=function(){this.dynamicPagedListApi&&this.dynamicPagedListApi.reloadItems(),this.updateTrashedPagesCount()}.bind(this);this.setEventSubscriptions=function(){n.push(p.registerEventHandler(a,c))},this.updateTrashedPagesCount=function(){return m.getTrashedPagesCount(this.uriContext).then(function(e){this.trashedPagesTranslationData={totalCount:e}}.bind(this))}.bind(this),this.setEventSubscriptions(),i.$on("$destroy",function(){n.forEach(function(e){e()})}),this.updateTrashedPagesCount().then(function(){this.isReady=!0,this.isCatalogVersionInactive=e}.bind(this))}.bind(this))}])},function(e,t){angular.module("pageListLinkModule",[]).component("pageListLink",{templateUrl:"pageListLinkDirectiveTemplate.html",bindings:{catalog:"<",catalogVersion:"<",siteId:"<"}})},function(e,t){angular.module("pageListTemplatePrinterModule",["cmsitemsRestServiceModule"]).controller("pageListTemplatePrinterController",["cmsitemsRestService",function(e){this.$onInit=function(){e.getById(this.templateUuid).then(function(e){this.template=e.uid}.bind(this))}}]).component("pageListTemplatePrinter",{template:"<div>{{$ctrl.template}}</div>",controller:"pageListTemplatePrinterController",bindings:{templateUuid:"<"}})},function(e,t){angular.module("pageRestrictionsInfoMessageModule",[]).component("pageRestrictionsInfoMessage",{templateUrl:"pageRestrictionsInfoMessageTemplate.html"})},function(e,t){angular.module("restrictionManagementEditModule",["alertServiceModule","restrictionsServiceModule","functionsModule"]).controller("RestrictionManagementEditController",["$q","alertService","restrictionsService","URIBuilder","cmsitemsUri",function(e,t,n,i,o){this._internalInit=function(t){this.isTypeSupported=t,t?this.submitFn=function(){return this.submitInternal().then(function(t){return e.when(t)}.bind(this))}.bind(this):(this.submitFn=function(){},this.isDirtyFn=function(){return!1}),this.ready=!0}.bind(this),this.$onInit=function(){this.ready=!1,this.restriction=this.restriction||{},this.itemManagementMode="edit";var e=o+"/:identifier?dryRun=true";return this.contentApi=new i(e).replaceParams(this.uriContext).build(),this.structureApi=n.getStructureApiUri(this.itemManagementMode),void 0!==this.getSupportedRestrictionTypesFn?this.getSupportedRestrictionTypesFn().then(function(e){this._internalInit(e.indexOf(this.restriction.itemtype)>=0)}.bind(this)):this._internalInit(!0)}}]).component("restrictionManagementEdit",{controller:"RestrictionManagementEditController",templateUrl:"restrictionManagementEditTemplate.html",bindings:{isDirtyFn:"=?",restriction:"<",getSupportedRestrictionTypesFn:"<?",submitFn:"=?",uriContext:"<"}})},function(e,t){angular.module("restrictionManagementSelectModule",["alertServiceModule","eventServiceModule","restrictionsModule","restrictionsServiceModule","yActionableSearchItemModule","ySelectModule","yMessageModule","cmsitemsRestServiceModule","catalogServiceModule","functionsModule","yLoDashModule"]).controller("RestrictionManagementSelectController",["$q","alertService","restrictionManagementSelectModel","restrictionsService","systemEventService","cmsitemsUri","URIBuilder",function(e,t,n,i,o,a,r){this.resultsHeaderTemplate="<y-actionable-search-item data-event-id='RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID'></y-actionable-search-item>",this.resultsHeaderLabel="se.cms.restrictionmanagement.restrictionresults.header",this.itemTemplateUrl="restrictionManagementItemNameTemplate.html",this.editorHeader="",this.getResultsHeaderTemplate=function(){return this.selectModel.isTypeSupported()?this.resultsHeaderTemplate:""},this.selectRestrictionType=function(){this.selectModel.restrictionTypeSelected()&&(this.controllerModel.showRestrictionSelector?this.resetSelector():this.controllerModel.showRestrictionSelector=!0,this.controllerModel.showRestrictionEditor=!1)}.bind(this),this.selectRestriction=function(){this.selectModel.restrictionSelected()&&(this.editorHeader="se.cms.restriction.management.select.editor.header.add",this.controllerModel.mode="add",this.controllerModel.structureApi=i.getStructureApiUri(this.controllerModel.mode),this.controllerModel.showRestrictionEditor?this.resetEditor():this.controllerModel.showRestrictionEditor=!0)}.bind(this),this.createButtonEventHandler=function(e,t){this.createRestriction(t)}.bind(this),this.createRestriction=function(e){this.selectModel.createRestrictionSelected(e,this.uriContext),this.editorHeader="se.cms.restriction.management.select.editor.header.create",this.controllerModel.mode="create",this.controllerModel.structureApi=i.getStructureApiUri(this.controllerModel.mode),this.controllerModel.showRestrictionEditor?this.resetEditor():this.controllerModel.showRestrictionEditor=!0}.bind(this),this.disableRestrictionChoice=function(e){return-1!==this.existingRestrictions.findIndex(function(t){return e.uid===t.uid})}.bind(this),this.$onDestroy=function(){o.unRegisterEventHandler("RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID",this.createButtonEventHandler)}.bind(this),this.$onInit=function(){this.selectModel=n.createRestrictionManagementSelectModel(this.getRestrictionTypesFn,this.getSupportedRestrictionTypesFn),this.resetEditor=function(){},this.resetSelector=function(){};var t=a+"/:identifier?dryRun=true";this.controllerModel={showRestrictionSelector:!1,showRestrictionEditor:!1,mode:"add",contentApi:new r(t).replaceParams(this.uriContext).build()},this.isDirtyFn=function(){return"add"===this.controllerModel.mode?this.controllerModel.showRestrictionEditor:!!this.isDirtyInternal&&this.isDirtyInternal()}.bind(this),this.fetchOptions={fetchPage:this.selectModel.getRestrictionsPaged,fetchEntity:this.selectModel.getRestrictionFromBackend},this.submitFn=function(){return this.selectModel.isTypeSupported()?this.submitInternal().then(function(e){return e}.bind(this)):e.when(this.selectModel.getRestriction())}.bind(this),o.registerEventHandler("RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID",this.createButtonEventHandler)}.bind(this)}]).factory("restrictionManagementSelectModel",["$q","lodash","restrictionsFacade","cmsitemsRestService","catalogService",function(e,t,n,i,o){function a(a,r){var s,c,l={},d=[];a().then(function(e){l.restrictionTypes=e;var n=0;l.restrictionTypes.forEach(function(e){e.id=n++}),void 0!==r?r().then(function(e){d=e}):d=t.map(l.restrictionTypes,"code")}.bind(this)),this.selectedIds={},this.getRestrictionsPaged=function(e,t,n){var o={pageSize:t,currentPage:n,typeCode:l.selectedRestrictionType.code,mask:e};return i.get(o).then(function(e){s=e.response;var t=0;return e.response.forEach(function(e){e.id=t++}.bind(this)),e.results=e.response,delete e.response,e}.bind(this))}.bind(this),this.getRestrictionFromBackend=function(){return{}},this.getRestrictions=function(){return s?e.when(s):n.getAllRestrictions().then(function(t){var n=0;return(s=t.restrictions).forEach(function(e){e.id=n++}),e.when(s)}.bind(this))}.bind(this),this.getRestrictionTypes=function(){return e.when(l.restrictionTypes)}.bind(this),this.restrictionSelected=function(){return!(!this.selectedIds.restriction&&0!==this.selectedIds.restriction)&&(c=s.find(function(e){return e.id===this.selectedIds.restriction}.bind(this)),!0)}.bind(this),this.restrictionTypeSelected=function(){return delete this.selectedIds.restriction,l.selectedRestrictionType=l.restrictionTypes.find(function(e){return e.id===this.selectedIds.restrictionType}.bind(this)),!!l.selectedRestrictionType&&(c={typeCode:l.selectedRestrictionType.code},!0)}.bind(this),this.createRestrictionSelected=function(e,t){c={itemtype:l.selectedRestrictionType.code,name:e},o.getCatalogVersionUUid(t).then(function(e){c.catalogVersion=e})}.bind(this),this.getRestrictionTypeCode=function(){return l.selectedRestrictionType.code},this.getRestriction=function(){return c},this.isTypeSupported=function(){return!(!l.selectedRestrictionType||!l.selectedRestrictionType.code)&&d.indexOf(l.selectedRestrictionType.code)>=0}}return{createRestrictionManagementSelectModel:function(e,t){return new a(e,t)}}}]).component("restrictionManagementSelect",{controller:"RestrictionManagementSelectController",templateUrl:"restrictionManagementSelectTemplate.html",bindings:{uriContext:"<",existingRestrictions:"<?",getRestrictionTypesFn:"&",getSupportedRestrictionTypesFn:"<?",submitFn:"=?",isDirtyFn:"=?"}})},function(e,t){angular.module("restrictionPickerModule",["itemManagementModule","recompileDomModule","restrictionManagementEditModule","restrictionManagementSelectModule","yLoDashModule"]).service("restrictionPickerConfig",["lodash",function(e){this.MODE_EDITING="editing",this.MODE_SELECT="select",this.getConfigForEditing=function(e,t){return{mode:this.MODE_EDITING,restriction:e,getSupportedRestrictionTypesFn:t}}.bind(this),this.getConfigForSelecting=function(e,t,n){return{mode:this.MODE_SELECT,getRestrictionTypesFn:t,getSupportedRestrictionTypesFn:n,existingRestrictions:e}}.bind(this),this.isEditingMode=function(e){return e.mode===this.MODE_EDITING}.bind(this),this.isSelectMode=function(e){return e.mode===this.MODE_SELECT}.bind(this),this.isValidConfig=function(t){switch(t.mode){case this.MODE_EDITING:return e.isObject(t.restriction);case this.MODE_SELECT:return t.getSupportedRestrictionTypesFn?e.isFunction(t.getRestrictionTypesFn)&&e.isFunction(t.getSupportedRestrictionTypesFn):e.isFunction(t.getRestrictionTypesFn)}}.bind(this)}]).controller("RestrictionManagementController",["$q","restrictionPickerConfig",function(e,t){this.$onInit=function(){this.submitFn=function(){return this.submitInternal().then(function(e){return e})}.bind(this)},this.$onChanges=function(){if(!t.isValidConfig(this.config))throw"restrictionManagementController - invalid restrictionPickerConfig";this.editMode=t.isEditingMode(this.config),this.getSupportedRestrictionTypesFn=this.config.getSupportedRestrictionTypesFn,this.editMode?this.restriction=this.config.restriction:(this.getRestrictionTypesFn=this.config.getRestrictionTypesFn,this.existingRestrictions=this.config.existingRestrictions)}}]).component("restrictionManagement",{controller:"RestrictionManagementController",templateUrl:"restrictionManagementTemplate.html",bindings:{config:"<",uriContext:"<",submitFn:"=?",isDirtyFn:"=?"}})},function(e,t){angular.module("restrictionsEditorModule",["cmssmarteditContainerTemplates","eventServiceModule","restrictionsTableModule","smarteditServicesModule","restrictionPickerModule","sliderPanelModule","yMessageModule","yLoDashModule","cmsitemsRestServiceModule","restrictionsCriteriaServiceModule","itemManagementModule","functionsModule"]).controller("restrictionsEditorController",["$q","$log","lodash","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","GENERIC_EDITOR_LOADED_EVENT","ITEM_MANAGEMENT_EDITOR_ID","restServiceFactory","systemEventService","restrictionPickerConfig","cmsitemsRestService","restrictionsCriteriaService","isBlank",function(e,t,n,i,o,a,r,s,c,l,d,u){this.setSliderConfigForAddOrCreate=function(){this.sliderPanelConfiguration.modal.title="se.cms.restriction.management.panel.title.add",this.sliderPanelConfiguration.modal.save.label="se.cms.restriction.management.panel.button.add",this.sliderPanelConfiguration.modal.save.isDisabledFn=function(){return!this.restrictionManagement.isDirtyFn||!this.restrictionManagement.isDirtyFn()}.bind(this),this.sliderPanelConfiguration.modal.save.onClick=function(){this.restrictionManagement.submitFn().then(function(e){this.restrictions.push(e),this.sliderPanelHide()}.bind(this))}.bind(this)}.bind(this),this.setSliderConfigForEditing=function(){this.sliderPanelConfiguration.modal.title="se.cms.restriction.management.panel.title.edit",this.sliderPanelConfiguration.modal.save.label="se.cms.restriction.management.panel.button.save",this.sliderPanelConfiguration.modal.save.isDisabledFn=function(){return!this.restrictionManagement.isDirtyFn||!this.restrictionManagement.isDirtyFn()}.bind(this),this.sliderPanelConfiguration.modal.save.onClick=function(){this.restrictionManagement.submitFn().then(function(e){if(this.restrictionManagement.operation){var t=this.restrictionManagement.operation.restriction;e.$restrictionIndex=t.$restrictionIndex}var n=e.$restrictionIndex;if(-1===n)throw"restrictionsEditorController - edited restriction not found in list: "+e;this.restrictions[n]=e,this.sliderPanelHide()}.bind(this))}.bind(this)}.bind(this),this.sliderPanelConfiguration={modal:{showDismissButton:!0,cancel:{label:"se.cms.restriction.management.panel.button.cancel",onClick:function(){this.sliderPanelHide()}.bind(this)},save:{}},cssSelector:"#y-modal-dialog"},this.onClickOnAdd=function(){this.setSliderConfigForAddOrCreate(),this.restrictionManagement.operation=c.getConfigForSelecting(n.clone(this.restrictions),this.getRestrictionTypes,this.getSupportedRestrictionTypes),this.sliderPanelShow()}.bind(this),this.onClickOnEdit=function(e){this.setSliderConfigForEditing(),this.restrictionManagement.operation=c.getConfigForEditing(n.clone(e),this.getSupportedRestrictionTypes),this.sliderPanelShow()}.bind(this),this.matchCriteriaChanged=function(e){this.criteria=e,this.matchCriteriaIsDirty=this.criteria!==this.orrigCriteria,this.updateRestrictionsData()}.bind(this),this.setupResults=function(e){this.restrictions=e,this.restrictions=this._indexRestrictions(this.restrictions),this.oldRestrictions=this._cloneRestrictions(this.restrictions),this.originalRestrictions=this._cloneRestrictions(this.restrictions),this.updateRestrictionsData(),this.isRestrictionsReady=!0},this.updateRestrictionsData=function(){this.onRestrictionsChanged&&this.onRestrictionsChanged({$onlyOneRestrictionMustApply:this.criteria.value,$restrictions:this.restrictions})},this._prepareRestrictionsCriteria=function(){this.criteriaOptions=d.getRestrictionCriteriaOptions(),this.item.onlyOneRestrictionMustApply?(this.criteria=this.criteriaOptions[1],this.orrigCriteria=this.criteriaOptions[1]):(this.criteria=this.criteriaOptions[0],this.orrigCriteria=this.criteriaOptions[0])},this._isRestrictionRelatedError=function(e){return n.includes(e.subject,"restrictions")},this._formatRestrictionRelatedError=function(e){var t=n.clone(e);return u(t.position)||(t.position=parseInt(t.position)),u(t.subject)||(t.subject=t.subject.split(".").pop()),t},this._handleUnrelatedValidationErrors=function(e,t){this.errors=t.messages.filter(function(e){return this._isRestrictionRelatedError(e)}.bind(this)).map(function(e){return this._formatRestrictionRelatedError(e)}.bind(this))},this._propagateErrors=function(e,t){if(this.restrictionManagement.operation&&this.restrictionManagement.operation.mode===c.MODE_EDITING&&t===a){var n=this.restrictionManagement.operation.restriction.$restrictionIndex,o=this.errors.filter(function(e){return e.position===n});this._clearEvents(),s.sendAsynchEvent(i,{messages:o,targetGenericEditorId:t}).then(function(){this._initEvents()}.bind(this))}},this._indexRestrictions=function(e){return(e||[]).forEach(function(e,t){e.$restrictionIndex=t}),e},this._cloneRestrictions=function(e){return n.cloneDeep(e)},this._initEvents=function(){this.unregisterErrorListener=s.registerEventHandler(i,this._handleUnrelatedValidationErrors.bind(this)),this.unregisterErrorPropagationEvent=s.registerEventHandler(o,this._propagateErrors.bind(this))},this._clearEvents=function(){this.unregisterErrorListener(),this.unregisterErrorPropagationEvent()},this.$onInit=function(){this.showRestrictionPicker=!1,this.restrictions=this.restrictions||[],this.originalRestrictions=[],this.restrictionsArrayIsDirty=!1,this.matchCriteriaIsDirty=!1,this.oldRestrictions=[],this.isRestrictionsReady=!1,this.errors=[],this._prepareRestrictionsCriteria(),this.setupResults(this.restrictions),this.restrictionManagement={uriContext:this.item.uriContext},this.isDirtyFn=function(){return this.restrictionsArrayIsDirty||this.matchCriteriaIsDirty&&this.restrictions.length>=2}.bind(this),this.resetFn=function(){return!0},this.cancelFn=function(){return e.when(!0)},this._initEvents()},this.$onDestroy=function(){this._clearEvents()},this.$doCheck=function(){this.restrictionsArrayIsDirty=angular.toJson(this.originalRestrictions)!==angular.toJson(this.restrictions),angular.toJson(this.oldRestrictions)!==angular.toJson(this.restrictions)&&(this.restrictions=this._indexRestrictions(this.restrictions),this.oldRestrictions=this._cloneRestrictions(this.restrictions),this.updateRestrictionsData())}}]).component("restrictionsEditor",{templateUrl:"restrictionsEditorTemplate.html",controller:"restrictionsEditorController",scope:{},bindings:{item:"<",editable:"=",restrictions:"<?",resetFn:"=?",cancelFn:"=?",isDirtyFn:"=?",onRestrictionsChanged:"&?",getRestrictionTypes:"&",getSupportedRestrictionTypes:"&?"}})},function(e,t){angular.module("restrictionsTableModule",["cmssmarteditContainerTemplates","l10nModule","restrictionsCriteriaServiceModule","yLoDashModule"]).controller("restrictionsTableController",["restrictionsCriteriaService","lodash",function(e,t){this.resetRestrictionCriteria=function(){(!this.restrictions||this.restrictions.length<2)&&(this.restrictionCriteria=this.criteriaOptions[0])}.bind(this),this.removeRestriction=function(e){var t=this.restrictions.indexOf(e);this.restrictions.splice(t,1),this._removeUnnecessaryError(t),this._modifyErrorPositions(t)}.bind(this),this._removeUnnecessaryError=function(e){var t=this.errors.findIndex(function(t){return t.position===e});t>-1&&this.errors.splice(t,1)}.bind(this),this._modifyErrorPositions=function(e){this.errors.forEach(function(t){t.position>=e&&(t.position=t.position-1)})}.bind(this),this.editRestriction=function(e){this.onClickOnEdit(e)}.bind(this),this.criteriaClicked=function(){this.onCriteriaSelected(this.restrictionCriteria)},this.removeAllRestrictions=function(){this.restrictions=[]},this.showRemoveAllButton=function(){return this.restrictions&&this.restrictions.length>0&&this.editable},this.isInError=function(e){return!!this.errors&&t.some(this.errors,function(t){return t.position===e})},this.$onInit=function(){this.criteriaOptions=e.getRestrictionCriteriaOptions(),this.resetRestrictionCriteria(),this.actions=[{key:"se.cms.restrictions.item.edit",callback:this.editRestriction},{key:"se.cms.restrictions.item.remove",callback:this.removeRestriction}]},this.$doCheck=function(){this.resetRestrictionCriteria()}}]).component("restrictionsTable",{templateUrl:"restrictionsTableTemplate.html",controller:"restrictionsTableController",controllerAs:"$ctrl",bindings:{customClass:"=",editable:"=",onClickOnEdit:"<?",onCriteriaSelected:"=",onSelect:"=",restrictions:"=",restrictionCriteria:"=?",errors:"<?"}})},function(e,t){angular.module("synchronizeCatalogModule",["confirmationModalServiceModule","synchronizationServiceModule","l10nModule","hasOperationPermissionModule"]).controller("synchronizeCatalogController",["$scope","synchronizationService","$q","confirmationModalService","l10nFilter",function(e,t,n,i,o){var a={RUNNING:"RUNNING",ERROR:"ERROR",FAILURE:"FAILURE",FINISHED:"FINISHED",UNKNOWN:"UNKNOWN"};this.$onInit=function(){this.syncJobStatus={syncStartTime:"",syncEndTime:"",status:"",source:"",target:""},this.targetCatalogVersion=this.activeCatalogVersion.version,this.sourceCatalogVersion=this.catalogVersion.active?null:this.catalogVersion.version,this.syncCatalogPermission=[{names:["se.sync.catalog"],context:{catalogId:this.catalog.catalogId,catalogVersion:this.sourceCatalogVersion}}],this.catalogDto={catalogId:this.catalog.catalogId,targetCatalogVersion:this.targetCatalogVersion,sourceCatalogVersion:this.sourceCatalogVersion},t.startAutoGetSyncData(this.catalogDto,this._updateSyncStatusData.bind(this)),this._invokeGetSyncData()},this.$onDestroy=function(){t.stopAutoGetSyncData(this.catalogDto)},this.syncCatalog=function(){var e=o(this.catalog.name);i.confirm({template:'<div id="confirmationModalDescription">{{ "se.sync.confirm.msg" | translate: { catalogName: modalController.catalogName } }}</div>',title:"se.sync.confirmation.title",scope:{catalogName:e}}).then(function(){t.updateCatalogSync(this.catalogDto).then(function(e){this._updateSyncStatusData(e)}.bind(this))}.bind(this))},this._invokeGetSyncData=function(){t.getCatalogSyncStatus(this.catalogDto).then(function(e){this._updateSyncStatusData(e)}.bind(this))},this._updateSyncStatusData=function(e){this.syncJobStatus={syncStartTime:e.creationDate,syncEndTime:e.endDate,status:e.syncStatus,source:e.sourceCatalogVersion?e.sourceCatalogVersion:"",target:e.targetCatalogVersion?e.targetCatalogVersion:""}},this.isSyncJobFinished=function(){return this.syncJobStatus.status===a.FINISHED},this.isSyncJobInProgress=function(){return"RUNNING"===this.syncJobStatus.status||"UNKNOWN"===this.syncJobStatus.status},this.isSyncJobFailed=function(){return this.syncJobStatus.status===a.ERROR||this.syncJobStatus.status===a.FAILURE},this.isButtonEnabled=function(){return!this.isSyncJobInProgress()},this.getSyncFromLabels=function(){return{sourceCatalogVersion:this.syncJobStatus.source}}}]).directive("synchronizeCatalog",function(){return{templateUrl:"synchronizeCatalogTemplate.html",restrict:"E",controller:"synchronizeCatalogController",controllerAs:"ctrl",bindToController:{catalog:"<",catalogVersion:"<",activeCatalogVersion:"<"}}})},function(e,t){angular.module("pageListSyncIconModule",["pageSynchronizationServiceModule","catalogServiceModule","synchronizationConstantsModule","crossFrameEventServiceModule"]).controller("pageListSyncIconController",["pageSynchronizationService","catalogService","SYNCHRONIZATION_STATUSES","SYNCHRONIZATION_POLLING","crossFrameEventService",function(e,t,n,i,o){this.classes={},this.classes[n.UNAVAILABLE]="",this.classes[n.IN_SYNC]="hyicon-done se-sync-button__sync__done",this.classes[n.NOT_SYNC]="hyicon-sync se-sync-button__sync__sync-not",this.classes[n.IN_PROGRESS]="hyicon-sync se-sync-button__sync__sync-not",this.classes[n.SYNC_FAILED]="hyicon-sync se-sync-button__sync__sync-not",this.fetchSyncStatus=function(){return e.getSyncStatus(this.pageId,this.uriContext).then(function(e){this.syncStatus=e}.bind(this),function(){this.syncStatus.status=n.UNAVAILABLE}.bind(this))}.bind(this),this.triggerFetch=function(e,t){t.itemId===this.pageId&&this.fetchSyncStatus()},this.$onInit=function(){t.isContentCatalogVersionNonActive(this.uriContext).then(function(e){e&&(this.syncStatus={status:n.UNAVAILABLE},this.unRegisterSyncPolling=o.subscribe(i.FAST_FETCH,this.triggerFetch.bind(this)),this.fetchSyncStatus())}.bind(this))},this.$onDestroy=function(){this.unRegisterSyncPolling()}}]).component("pageListSyncIcon",{templateUrl:"pageListSyncIconTemplate.html",controller:"pageListSyncIconController",controllerAs:"$ctrl",bindings:{pageId:"<",uriContext:"<"}})},function(e,t){angular.module("pageSynchronizationHeaderModule",["translationServiceModule","smarteditServicesModule","catalogServiceModule","l10nModule","functionsModule"]).controller("PageSynchronizationHeaderController",["$translate","sharedDataService","catalogService","l10nFilter","isBlank",function(e,t,n,i,o){this.$onChanges=function(){this.syncStatus&&(this.ready=!1,this.pageHasUnavailableDependencies=this.syncStatus.unavailableDependencies.length>0,this.pageHasSyncStatus=!o(this.syncStatus.lastSyncStatus),this.pageHasUnavailableDependencies||!this.pageHasSyncStatus?t.get("experience").then(function(t){var o=this.getCurrentCatalogIdFromExperience(t),a=o.catalogId,r=i(o.catalogName);return n.getActiveContentCatalogVersionByCatalogId(a).then(function(t){this.headerText=this.pageHasUnavailableDependencies?e.instant("se.cms.synchronization.page.unavailable.items.description",{itemNames:this._fetchUnavailableDependencies(),catalogName:r,catalogVersion:t}):e.instant("se.cms.synchronization.page.new.description",{catalogName:r,catalogVersion:t}),this.ready=!0}.bind(this))}.bind(this)):(e("se.cms.synchronization.page.header.help").then(function(e){this.helpTemplate="<span>"+e+"</span>"}.bind(this)),this.ready=!0))},this._fetchUnavailableDependencies=function(){return this.syncStatus.unavailableDependencies.map(function(e){return e.name}).join(",")},this.userIsInsidePage=function(e){return!!e.pageContext},this.getCurrentCatalogIdFromExperience=function(e){return{catalogId:this.userIsInsidePage(e)?e.pageContext.catalogId:e.catalogDescriptor.catalogId,catalogName:this.userIsInsidePage(e)?e.pageContext.catalogName:e.catalogDescriptor.name}}}]).component("pageSynchronizationHeader",{templateUrl:"pageSynchronizationHeaderTemplate.html",bindings:{syncStatus:"<"},controller:"PageSynchronizationHeaderController",controllerAs:"pageSync"})},function(e,t){angular.module("pageSynchronizationPanelModule",["functionsModule","synchronizationPanelModule","pageSynchronizationServiceModule","pageSynchronizationHeaderModule","smarteditServicesModule"]).constant("SYNCHRONIZATION_PAGE_SELECT_ALL_SLOTS_LABEL","se.cms.synchronization.page.select.all.slots").controller("PageSynchronizationPanelController",["$attrs","SYNCHRONIZATION_PAGE_SELECT_ALL_SLOTS_LABEL","isBlank","pageSynchronizationService","pageInfoService",function(e,t,n,i,o){this.getSyncStatus=function(){return i.getSyncStatus(this.itemId,this.uriContext).then(function(e){return e.selectAll=t,e}.bind(this))}.bind(this),this.headerTemplateUrl="pageSynchronizationHeaderWrapperTemplate.html",this.onSyncStatusReady=function(e){e.unavailableDependencies.length>0?this._disablePageSync():e.lastSyncStatus?this._enableSlotsSync():this._enablePageSync()}.bind(this),this.performSync=function(e){return i.performSync(e,this.uriContext)}.bind(this),this.$postLink=function(){this.showSyncButton=n(e.syncItems),n(this.itemId)&&o.getPageUID().then(function(e){this.itemId=e}.bind(this))},this.getApi=function(e){this.synchronizationPanelApi=e},this._disablePageSync=function(){this.synchronizationPanelApi.displayItemList(!1)},this._enablePageSync=function(){this.synchronizationPanelApi.selectAll(),this.synchronizationPanelApi.displayItemList(!1)},this._enableSlotsSync=function(){this.synchronizationPanelApi.displayItemList(!0)}}]).component("pageSynchronizationPanel",{templateUrl:"pageSynchronizationPanelTemplate.html",controller:"PageSynchronizationPanelController",controllerAs:"pageSync",bindings:{syncItems:"=?",itemId:"=?",uriContext:"=?",onSelectedItemsUpdate:"<?"}})},function(e,t){angular.module("pageSyncMenuToolbarItemModule",["crossFrameEventServiceModule","catalogServiceModule","pageSynchronizationPanelModule","smarteditServicesModule"]).controller("PageSyncMenuToolbarItemController",["crossFrameEventService","catalogService","assetsService","systemEventService","iframeClickDetectionService","pageInfoService","pageSynchronizationService","SYNCHRONIZATION_STATUSES","SYNCHRONIZATION_POLLING","$scope",function(e,t,n,i,o,a,r,s,c,l){this.fetchSyncStatus=function(){a.getPageUUID().then(function(e){r.getSyncStatus(e).then(function(e){this.isNotInSync=e.status!==s.IN_SYNC}.bind(this))}.bind(this))}.bind(this),this.$onInit=function(){this.isContentCatalogVersionNonActive=!1,t.isContentCatalogVersionNonActive().then(function(t){if(t){this.icons={open:n.getAssetsRoot()+"/images/icon_info_white.png",closed:n.getAssetsRoot()+"/images/icon_info_blue.png"},this.menuIcon=this.icons.closed,this.isNotInSync=!1,this.isContentCatalogVersionNonActive=!0;var i=e.subscribe(c.FAST_FETCH,this.fetchSyncStatus);this.fetchSyncStatus(),l.$on("$destroy",function(){i()})}}.bind(this))}}]).component("pageSyncMenuToolbarItem",{templateUrl:"pageSyncMenuToolbarItemTemplate.html",controller:"PageSyncMenuToolbarItemController",controllerAs:"$ctrl",bindings:{toolbarItem:"<item"}})},function(e,t){angular.module("syncPageModalServiceModule",["modalServiceModule","pageSynchronizationPanelModule"]).factory("syncPageModalService",["modalService","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES",function(e,t,n){function i(){}return i.prototype.open=function(i,o){return e.open({title:"se.cms.synchronization.pagelist.modal.title.prefix",titleSuffix:"se.cms.pageeditormodal.editpagetab.title",cssClasses:"yFrontModal",templateInline:'<page-synchronization-panel data-on-selected-items-update="modalController.onSelectedItemsUpdate" data-sync-items="modalController.sync" data-item-id="modalController.itemId" data-uri-context="modalController.uriContext"></page-synchronization-panel>',controller:["syncPageModalService","modalManager","$log",function(e,t,n){this.showSyncButton=!1,this.modalManager=t,this.itemId=i.uuid,this.onSelectedItemsUpdate=function(e){0===e.length?t.disableButton("sync"):t.enableButton("sync")},this.uriContext=o,this.init=function(){t.setDismissCallback(this.onCancel),t.setButtonHandler(function(e){if("close"!==e)switch(e){case"sync":return this.sync();default:n.error("A button callback has not been registered for button with id",e)}}.bind(this))}}],buttons:[{id:"close",label:"se.cms.component.confirmation.modal.close",style:n.SECONDARY,action:t.DISMISS},{id:"sync",label:"se.cms.actionitem.page.sync",action:t.NONE,disabled:!0}]})},new i}])},function(e,t){angular.module("catalogVersionRestServiceModule",["smarteditServicesModule","resourceLocationsModule"]).factory("catalogVersionRestService",["restServiceFactory","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i){var o="/cmswebservices/v1/sites/:"+t+"/catalogs/:"+n+"/versions/:"+i;return{get:function(t){return e.get(o).get(t)},getCloneableTargets:function(t){return e.get(o+"/targets?mode=cloneableTo").get(t)}}}])},function(e,t){angular.module("createPageServiceModule",["smarteditServicesModule","resourceLocationsModule"]).factory("createPageService",["restServiceFactory","PAGES_LIST_RESOURCE_URI",function(e,t){var n=e.get(t);return{createPage:function(e,t){var i=angular.extend({},t,e);return n.save(i)}}}])},function(e,t){angular.module("pageRestrictionsRestServiceModule",["smarteditServicesModule"]).service("pageRestrictionsRestService",["CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI","PAGES_RESTRICTIONS_RESOURCE_URI","restServiceFactory","UPDATE_PAGES_RESTRICTIONS_RESOURCE_URI",function(e,t,n,i){var o=n.get(e),a=n.get(t),r=n.get(i,"pageid");this.update=function(e){return r.update(e)},this.getPagesRestrictionsForPageId=function(e){return o.get({pageId:e})},this.getPagesRestrictionsForCatalogVersion=function(e,t,n){return a.get({siteUID:e,catalogId:t,catalogVersion:n})}}])},function(e,t){angular.module("pageSynchronizationServiceModule",["synchronizationPollingServiceModule"]).service("pageSynchronizationService",["syncPollingService",function(e){this.getSyncStatus=function(t,n){return e.getSyncStatus(t,n).then(function(e){return e})},this.performSync=function(t,n){return e.performSync(t,n)}}])},function(e,t){angular.module("pageTypeServiceModule",["smarteditServicesModule"]).service("pageTypeService",["restServiceFactory","PAGE_TYPES_URI",function(e,t){var n,i=e.get(t);this.getPageTypes=function(){return(n=n||i.get()).then(function(e){return e.pageTypes})}}])},function(e,t){angular.module("pageTypesRestrictionTypesRestServiceModule",["smarteditServicesModule"]).service("pageTypesRestrictionTypesRestService",["languageService","PAGE_TYPES_RESTRICTION_TYPES_URI","restServiceFactory",function(e,t,n){var i=n.get(t);this.getPageTypesRestrictionTypes=function(){return i.get().then(function(e){return e})}}])},function(e,t){angular.module("pagesFallbacksRestServiceModule",["resourceLocationsModule","smarteditServicesModule","yLoDashModule"]).service("pagesFallbacksRestService",["restServiceFactory","lodash","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION",function(e,t,n,i,o){var a="/cmswebservices/v1/sites/"+n+"/catalogs/"+i+"/versions/"+o+"/pages/:pageId/fallbacks";this.getFallbacksForPageId=function(n,i){this._resource=this._resource||e.get(a);var o=t.assign({pageId:n},i||{});return this._resource.get(o).then(function(e){return e.uids})}}])},function(e,t){angular.module("pagesRestServiceModule",["smarteditServicesModule","yLoDashModule","resourceLocationsModule","functionsModule"]).service("pagesRestService",["restServiceFactory","lodash","URIBuilder","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i,o,a,r,s,c){var l="/cmswebservices/v1/sites/"+i+"/catalogs/"+o+"/versions/"+a+"/pages/:pageUid";this.get=function(d){var u=t.cloneDeep(d),p=new n(l).replaceParams(u).build();return delete u[r],delete u[s],delete u[c],delete u[i],delete u[o],delete u[a],e.get(p,"pageUid").get(u).then(function(e){return e.pages})},this.getById=function(r,s){var c=new n(l).replaceParams(s).build(),d=t.assign({pageUid:r},s||{});return delete d[i],delete d[o],delete d[a],e.get(c,"pageUid").get(d)},this.update=function(r,s){var c=new n(l).replaceParams(s).build(),d=t.assign({pageUid:r},s||{});return delete d[i],delete d[o],delete d[a],e.get(c,"pageUid").update(d)}}])},function(e,t){angular.module("pagesVariationsRestServiceModule",["resourceLocationsModule","smarteditServicesModule","yLoDashModule"]).service("pagesVariationsRestService",["restServiceFactory","lodash","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i,o){this._uri="/cmswebservices/v1/sites/"+n+"/catalogs/"+i+"/versions/"+o+"/pages/:pageId/variations",this._resource=e.get(this._uri),this.getVariationsForPrimaryPageId=function(e,n){var i=t.assign({pageId:e},n||{});return this._resource.get(i).then(function(e){return e.uids})}.bind(this)}])},function(e,t){angular.module("restrictionTypesRestServiceModule",["smarteditServicesModule"]).service("restrictionTypesRestService",["languageService","RESTRICTION_TYPES_URI","restServiceFactory",function(e,t,n){var i=n.get(t);this.getRestrictionTypes=function(){return i.get().then(function(e){return e})}}])},function(e,t){angular.module("restrictionsRestServiceModule",["functionsModule","smarteditServicesModule"]).service("restrictionsRestService",["languageService","RESTRICTIONS_RESOURCE_URI","restServiceFactory","URIBuilder",function(e,t,n,i){var o=n.get(t);this.get=function(e){return o.get(e)},this.getById=function(e){return o.getById(e).then(function(e){return e})},this.getContentApiUri=function(e){return new i(t).replaceParams(e).build()}}])},function(e,t){angular.module("structuresRestServiceModule",["yLoDashModule","operationContextServiceModule","resourceLocationsModule"]).service("structureModeManagerFactory",["lodash",function(e){function t(t){if(!e.isArray(t))throw"ModeManager initialization error: supportedModes must be an array of strings";var n=t;this.getSupportedModes=function(){return e.clone(n)}}return t.prototype.isModeSupported=function(e){return-1!==this.getSupportedModes().indexOf(e)},t.prototype.validateMode=function(e){if(-1===this.getSupportedModes().indexOf(e))throw"ModeManager.validateMode() - mode ["+e+"] not in list of supported modes: "+this.getSupportedModes();return!0},{createModeManager:function(e){return new t(e)}}}]).service("structuresRestService",["operationContextService","OPERATION_CONTEXT","TYPES_RESOURCE_URI",function(e,t,n){var i=n+"/";e.register(i,t.CMS),this.getUriForContext=function(e,t){var i=n;return i=e?i+"?code="+(t||":smarteditComponentType")+"&mode="+e.toUpperCase():i+"/"+(t||":smarteditComponentType")}}])},function(e,t){angular.module("typeStructureRestServiceModule",["smarteditServicesModule","resourceLocationsModule"]).service("typeStructureRestService",["TYPES_RESOURCE_URI","restServiceFactory",function(e,t){var n=t.get(e);this.getStructureByType=function(e,t){var i=t||{};return n.getById(e).then(function(e){return i.getWholeStructure?e:e.attributes})},this.getStructureByTypeAndMode=function(n,i,o){var a=t.get(e+"?code="+n+"?mode="+i),r=o||{};return a.get().then(function(e){return r.getWholeStructure?e:e.attributes})},this.getStructuresByCategory=function(e){return n.get({category:e}).then(function(e){return e.componentTypes})}}])},function(e,t){angular.module("displayConditionsFacadeModule",["pageServiceModule","pageRestrictionsServiceModule","pageDisplayConditionsServiceModule"]).service("displayConditionsFacade",["pageService","pageRestrictionsService","pageDisplayConditionsService","$q",function(e,t,n,i){this.getPageInfoForPageUid=function(t){var n=e.getPageById(t),o=e.isPagePrimary(t);return i.all([n,o]).then(function(e){return{pageName:e[0].name,pageType:e[0].typeCode,isPrimary:e[1]}})},this.getVariationsForPageUid=function(n){return e.getVariationPages(n).then(function(e){return 0===e.length?i.when([]):i.all(e.map(function(e){return t.getPageRestrictionsCountForPageUID(e.uid)})).then(function(t){return e.map(function(e,n){return{pageName:e.name,creationDate:e.creationtime,restrictions:t[n]}})})})},this.getPrimaryPagesForVariationPageType=function(t){return e.getPrimaryPagesForPageType(t).then(function(e){return e.map(function(e){return{uid:e.uid,uuid:e.uuid,name:e.name,label:e.label}})})},this.updatePage=function(t,n){return e.updatePageById(t,n)},this.isPagePrimary=function(t){return e.isPagePrimary(t)},this.getPrimaryPageForVariationPage=function(t){return e.getPrimaryPage(t).then(function(e){return{uid:e.uid,name:e.name,label:e.label}})}}])},function(e,t){angular.module("pageFacadeModule",["yLoDashModule","cmsitemsRestServiceModule","crossFrameEventServiceModule","smarteditServicesModule","catalogServiceModule"]).service("pageFacade",["lodash","cmsitemsRestService","crossFrameEventService","sharedDataService","urlService","restServiceFactory","catalogService","EVENTS",function(e,t,n,i,o,a,r,s){this.contentPageWithLabelExists=function(n,i,o){var a={pageSize:10,currentPage:0,typeCode:"ContentPage",itemSearchParams:"label:"+n,catalogId:i,catalogVersion:o};return t.get(a).then(function(t){return t&&!e.isEmpty(t.response)}.bind(this))},this.retrievePageUriContext=function(){return i.get("experience").then(function(e){if(!e)throw"pageFacade could not retrieve an experience from sharedDataService";return o.buildUriContext(e.pageContext.siteId,e.pageContext.catalogId,e.pageContext.catalogVersion)})},this.createPage=function(e){return r.getCatalogVersionUUid().then(function(i){return e.catalogVersion=e.catalogVersion||i,void 0===e.onlyOneRestrictionMustApply&&(e.onlyOneRestrictionMustApply=!1),t.create(e).then(function(t){return n.publish(s.PAGE_CREATED,e),t})})}}])},function(e,t){angular.module("pageRestrictionsModule",["pageRestrictionsCriteriaModule","pageRestrictionsServiceModule","restrictionTypesServiceModule"]).factory("pageRestrictionsFacade",["pageRestrictionsCriteriaService","pageRestrictionsService","restrictionTypesService",function(e,t,n){return{getRestrictionCriteriaOptions:e.getRestrictionCriteriaOptions,getRestrictionCriteriaOptionFromPage:e.getRestrictionCriteriaOptionFromPage,getRestrictionTypesByPageType:n.getRestrictionTypesByPageType,getRestrictionsByPageUID:t.getRestrictionsByPageUID,isRestrictionTypeSupported:t.isRestrictionTypeSupported,updateRestrictionsByPageUID:t.updateRestrictionsByPageUID,getRestrictionsByPageUUID:t.getRestrictionsByPageUUID}}])},function(e,t){angular.module("restrictionsModule",["restrictionsServiceModule"]).factory("restrictionsFacade",["restrictionsService",function(e){return{getAllRestrictions:e.getAllRestrictions,getPagedRestrictionsForType:e.getPagedRestrictionsForType}}])},function(e,t){angular.module("actionableAlertModule",["alertServiceModule"]).constant("actionableAlertConstants",{ALERT_TEMPLATE:"<div><p>{{ $alertInjectedCtrl.description | translate: $alertInjectedCtrl.descriptionDetails }}</p><div><a data-ng-click='alert.hide(); $alertInjectedCtrl.onClick();'>{{ $alertInjectedCtrl.hyperlinkLabel | translate }}</a></div></div>",TIMEOUT_DURATION:2e4}).service("actionableAlertService",["alertService","actionableAlertConstants",function(e,t){this.displayActionableAlert=function(n){return e.showInfo({closeable:!0,controller:n.controller,template:t.ALERT_TEMPLATE,timeout:n.timeoutDuration||t.TIMEOUT_DURATION})}}])},function(e,t){angular.module("clonePageAlertServiceModule",["actionableAlertModule","experienceServiceModule","catalogServiceModule","functionsModule","l10nModule"]).service("clonePageAlertService",["$translate","actionableAlertService","experienceService","catalogService","l10nFilter","isBlank",function(e,t,n,i,o,a){this.displayClonePageAlert=function(e){return i.getCatalogVersionByUuid(e.catalogVersion).then(function(n){return t.displayActionableAlert({controller:["experienceService","l10nFilter",function(t){this.description="se.cms.clonepage.alert.info.description",this.descriptionDetails={catalogName:o(n.catalogName),catalogVersion:n.version},this.hyperlinkLabel="se.cms.clonepage.alert.info.hyperlink",this.onClick=function(){if(a(e.uid))throw"clonePageAlertService.checkAndAlertOnClonePage - missing required parameter 'uid'";t.loadExperience({siteId:n.siteId,catalogId:n.catalogId,catalogVersion:n.version,pageUid:e.uid})}}]})}.bind(this))}}])},function(e,t){angular.module("componentVisibilityAlertServiceModule",["alertServiceModule","actionableAlertModule","smarteditServicesModule","componentVisibilityAlertServiceInterfaceModule","editorModalServiceModule","gatewayProxyModule"]).factory("componentVisibilityAlertService",["alertService","actionableAlertService","sharedDataService","ComponentVisibilityAlertServiceInterface","editorModalService","extend","isBlank","gatewayProxy",function(e,t,n,i,o,a,r,s){var c=function(){this.gatewayId="ComponentVisibilityAlertService",s.initForService(this,["checkAndAlertOnComponentVisibility"])};return c=a(i,c),c.prototype.checkAndAlertOnComponentVisibility=function(i){var o={ITEM_ALERT_HIDDEN:"se.cms.component.visibility.alert.description.hidden",ITEM_ALERT_RESTRICTED:"se.cms.component.visibility.alert.description.restricted"};i.visible&&!i.restricted||n.get("experience").then(function(n){var a=i.visible?o.ITEM_ALERT_RESTRICTED:o.ITEM_ALERT_HIDDEN;i.catalogVersion!==n.pageContext.catalogVersionUuid?e.showAlert({message:a}):t.displayActionableAlert({controller:["componentVisibilityAlertService","editorModalService",function(e,t){this.onClick=function(){!function(){var e=[i.itemId,i.itemType,i.slotId];if(e.filter(function(e){return e&&!r(e)}).length!==e.length)throw"componentVisibilityAlertService.checkAndAlertOnComponentVisibility - missing properly typed parameters"}(),t.openAndRerenderSlot(i.itemType,i.itemId,"visibilityTab").then(function(t){t.visible&&!t.restricted||e.checkAndAlertOnComponentVisibility({itemId:t.uuid,itemType:t.itemtype,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:i.slotId,visible:t.visible})})},this.description=a,this.hyperlinkLabel="se.cms.component.visibility.alert.hyperlink"}],timeoutDuration:6e3})}.bind(this))},new c}])},function(e,t){angular.module("clonePageWizardServiceModule",["wizardServiceModule","catalogServiceModule","createPageServiceModule","newPageDisplayConditionModule","yLoDashModule","experienceServiceModule","selectPageTypeModule","selectPageTemplateModule","contextAwarePageStructureServiceModule","confirmationModalServiceModule","resourceLocationsModule","typeStructureRestServiceModule","smarteditServicesModule","pageDisplayConditionsServiceModule","componentCloneOptionFormModule","componentCloneInfoFormModule","restrictionsStepHandlerFactoryModule","cmsitemsRestServiceModule","genericEditorModule","eventServiceModule","pageRestrictionsModule","restrictionsServiceModule","pageRestrictionsInfoMessageModule","selectTargetCatalogVersionModule","smarteditServicesModule","clonePageAlertServiceModule","alertServiceModule","pageFacadeModule","functionsModule"]).service("clonePageWizardService",["modalWizard","catalogService","pageFacade",function(e,t,n){this.openClonePageWizard=function(i){return(i?t.retrieveUriContext():n.retrievePageUriContext()).then(function(t){return e.open({controller:"clonePageWizardController",controllerAs:"clonePageWizardCtrl",properties:{uriContext:t,basePageUUID:i?i.uuid:void 0}})})}}]).factory("ClonePageBuilderFactory",["$q","lodash","isBlank","contextAwarePageStructureService","pageInfoService","typeStructureRestService","cmsitemsRestService","catalogService",function(e,t,n,i,o,a,r,s){var c=function(t){return n(t)?o.getPageUUID():e.when(t)},l=function(n,i,o){this.restrictionsStepHandler=n,this.pageInfoStructure=[],this.basePage={},this.pageData={},this.componentCloneOption=null,this.basePageInfoAvailable=!1,c(i).then(function(n){e.all([r.getById(n),s.getCatalogVersionUUid(o)]).then(function(e){this.basePage=e[0],this.pageData=t.cloneDeep(this.basePage),this.pageData.catalogVersion=e[1],this.pageData.pageUuid=this.basePage.uuid,delete this.pageData.uuid,this.basePageInfoAvailable=!0,r.getById(this.basePage.masterTemplate).then(function(e){this.pageData.template=e.uid}.bind(this)),a.getStructureByTypeAndMode(this.pageData.typeCode,"DEFAULT",{getWholeStructure:!0}).then(function(e){this.pageData.type=e.type}.bind(this))}.bind(this))}.bind(this))};return l.prototype._updatePageInfoFields=function(){void 0!==this.pageData.defaultPage&&(this.pageData.typeCode?i.getPageStructureForNewPage(this.pageData.typeCode,this.pageData.defaultPage).then(function(e){this.pageInfoStructure=e}.bind(this)):this.pageInfoStructure=[])},l.prototype.getPageTypeCode=function(){return this.pageData.typeCode},l.prototype.getPageTemplate=function(){return this.pageData.template},l.prototype.getPageLabel=function(){return this.pageData.label},l.prototype.getPageInfo=function(){return this.pageData},l.prototype.getBasePageInfo=function(){return this.basePage},l.prototype.getPageProperties=function(){var e={};return e.type=this.pageData.type,e.typeCode=this.pageData.typeCode,e.template=this.pageData.template,e.onlyOneRestrictionMustApply=this.pageData.onlyOneRestrictionMustApply,e.catalogVersion=this.pageData.catalogVersion,e},l.prototype.getPageInfoStructure=function(){return this.pageInfoStructure},l.prototype.getPageRestrictions=function(){return this.pageData.restrictions||[]},l.prototype.getComponentCloneOption=function(){return this.componentCloneOption},l.prototype.displayConditionSelected=function(e){var t=e.isPrimary;this.pageData.defaultPage=t,t?(this.pageData.label=this.basePage.label,this.pageData.restrictions&&delete this.pageData.restrictions,this.restrictionsStepHandler.hideStep()):(this.pageData.label=e.primaryPage?e.primaryPage.label:"",this.restrictionsStepHandler.showStep()),this.pageData.uid="",this._updatePageInfoFields()},l.prototype.onTargetCatalogVersionSelected=function(e){this.targetCatalogVersion=e,this.pageData.catalogVersion=e.uuid},l.prototype.componentCloneOptionSelected=function(e){this.componentCloneOption=e},l.prototype.restrictionsSelected=function(e,t){this.pageData.onlyOneRestrictionMustApply=e,this.pageData.restrictions=t},l.prototype.getTargetCatalogVersion=function(){return this.targetCatalogVersion},l.prototype.isBasePageInfoAvailable=function(){return this.basePageInfoAvailable},l}]).controller("clonePageWizardController",["$q","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","lodash","wizardManager","ClonePageBuilderFactory","restrictionsStepHandlerFactory","experienceService","confirmationModalService","cmsitemsRestService","systemEventService","pageRestrictionsFacade","restrictionsService","sharedDataService","clonePageAlertService","alertService","pageFacade",function(e,t,n,i,o,a,r,s,c,l,d,u,p,m,g,h){this.uriContext=i.properties.uriContext,this.callbacks={},this.basePageUUID=i.properties.basePageUUID;var f=!1,y=this;this.restrictionStepProperties={id:"restrictionsStepId",name:"se.cms.restrictions.editor.tab",title:"se.cms.clonepagewizard.pageclone.title",templateUrl:"clonePageRestrictionsStepTemplate.html"};var v={},S=a.createRestrictionsStepHandler(i,v,this.restrictionStepProperties),C={PAGE_CLONE_OPTIONS:"cloneOptions",PAGE_INFO:"pageInfo",PAGE_RESTRICTIONS:this.restrictionStepProperties.id};this.pageBuilder=new o(S,this.basePageUUID,this.uriContext),this.restrictionsEditorFunctionBindings=v,this.typeChanged=!0,this.infoChanged=!0,this.model={page:{},sharedPage:{}},this.getWizardConfig=function(){return{isFormValid:this.isFormValid.bind(this),onNext:this.onNext.bind(this),onDone:this.onDone.bind(this),onCancel:this.onCancel,steps:[{id:C.PAGE_CLONE_OPTIONS,name:"se.cms.clonepagewizard.pagecloneoptions.tabname",title:"se.cms.clonepagewizard.pageclone.title",templateUrl:"clonePageOptionsStepTemplate.html"},{id:C.PAGE_INFO,name:"se.cms.clonepagewizard.pageinfo.tabname",title:"se.cms.clonepagewizard.pageclone.title",templateUrl:"clonePageInfoStepTemplate.html"}]}}.bind(this),this.onCancel=function(){return s.confirm({description:"se.editor.cancel.confirm"})},this.isFormValid=function(e){switch(e){case C.PAGE_CLONE_OPTIONS:return!0;case C.PAGE_INFO:return!f&&y.callbacks.isValidPageInfo&&y.callbacks.isValidPageInfo();case C.PAGE_RESTRICTIONS:return!f&&this.pageBuilder.getPageRestrictions().length>0}return!1},this.onNext=function(){return e.when(!0)},this.onDone=function(){return f=!0,this.callbacks.savePageInfo().then(function(n){var o=this._preparePagePayload(n);return this.pageBuilder.getTargetCatalogVersion()&&(o.siteId=this.pageBuilder.getTargetCatalogVersion().siteId),p.get("experience").then(function(n){return h.createPage(o).then(function(e){return n.catalogDescriptor.catalogVersionUuid===e.catalogVersion?r.updateExperiencePageId(e.uid):m.displayClonePageAlert(e),g.showSuccess({message:"se.cms.clonepage.alert.success"})},function(n){return f=!1,l.sendAsynchEvent(t,{messages:n.data.errors}),i.goToStepWithId(C.PAGE_INFO),e.reject()})}.bind(this))}.bind(this),function(){f=!1})},this._preparePagePayload=function(e){var t=n.cloneDeep(e);return n.merge(t,this.pageBuilder.getPageProperties()),t.cloneComponents="clone"===this.pageBuilder.getComponentCloneOption(),t.itemtype=e.typeCode,this.isRestrictionsActive()&&(t.restrictions=this.pageBuilder.getPageRestrictions()),t}.bind(this),this.getPageTypeCode=function(){return this.pageBuilder.getPageTypeCode()}.bind(this),this.getPageLabel=function(){return this.pageBuilder.getPageLabel()}.bind(this),this.getPageTemplate=function(){return this.pageBuilder.getPageTemplate()}.bind(this),this.getPageInfo=function(){var e=this.pageBuilder.getPageInfo();return e.uriContext=this.uriContext,e}.bind(this),this.getBasePageInfo=function(){var e=this.pageBuilder.getBasePageInfo();return e.uriContext=this.uriContext,e}.bind(this),this.getPageRestrictions=function(){return this.pageBuilder.getPageRestrictions()}.bind(this),this.variationResult=function(e){this.infoChanged=!0,this.pageBuilder.displayConditionSelected(e)}.bind(this),this.onTargetCatalogVersionSelected=function(e){this.pageBuilder.onTargetCatalogVersionSelected(e)}.bind(this),this.triggerUpdateCloneOptionResult=function(e){this.pageBuilder.componentCloneOptionSelected(e)}.bind(this),this.getPageInfoStructure=function(){return this.pageBuilder.getPageInfoStructure()}.bind(this),this.restrictionsResult=function(e,t){this.pageBuilder.restrictionsSelected(e,t)}.bind(this),this.isRestrictionsActive=function(){return(!this.typeChanged||i.getCurrentStepId()===C.PAGE_RESTRICTIONS)&&(this.typeChanged=!1,!0)}.bind(this),this.isPageInfoActive=function(){return(!this.infoChanged||i.getCurrentStepId()===C.PAGE_INFO)&&(this.infoChanged=!1,!0)}.bind(this),this.resetQueryFilter=function(){this.query.value=""}.bind(this),this.getRestrictionTypes=function(){return d.getRestrictionTypesByPageType(this.getPageTypeCode())}.bind(this),this.getSupportedRestrictionTypes=function(){return u.getSupportedRestrictionTypeCodes()},this.getTargetCatalogVersion=function(){return this.pageBuilder.getTargetCatalogVersion()}.bind(this),this.isBasePageInfoAvailable=function(){return this.pageBuilder.isBasePageInfoAvailable()}.bind(this)}])},function(e,t){angular.module("contextAwareCatalogModule",["catalogServiceModule","resourceLocationsModule","smarteditServicesModule"]).service("contextAwareCatalogService",["$q","catalogService","PRODUCT_CATEGORY_SEARCH_RESOURCE_URI","PRODUCT_CATEGORY_RESOURCE_URI","PRODUCT_LIST_RESOURCE_API","PRODUCT_RESOURCE_API","PAGES_LIST_RESOURCE_URI","sharedDataService",function(e,t,n,i,o,a,r,s){this._getSearchUriByProductCatalogIdAndUriConstant=function(n,i){return t.getActiveProductCatalogVersionByCatalogId(n).then(function(t){var o=i.replace(/:catalogId/gi,n).replace(/:catalogVersion/gi,t);return e.when(o)})},this._getItemUriByUriConstant=function(t){var n=t.replace(/:siteUID/gi,"CURRENT_CONTEXT_SITE_ID");return e.when(n)},this._getContentPageUri=function(){return s.get("experience").then(function(n){var i=n.catalogDescriptor.catalogId;return t.getActiveContentCatalogVersionByCatalogId(i).then(function(t){var n=r.replace(/:catalogId/gi,i).replace(/:catalogVersion/gi,t);return e.when(n)})})},this.getProductCategorySearchUri=function(e){return this._getSearchUriByProductCatalogIdAndUriConstant(e,n)},this.getProductCategoryItemUri=function(){return this._getItemUriByUriConstant(i)},this.getProductSearchUri=function(e){return this._getSearchUriByProductCatalogIdAndUriConstant(e,o)},this.getProductItemUri=function(){return this._getItemUriByUriConstant(a)},this.getContentPageSearchUri=function(){return this._getContentPageUri().then(function(t){return e.when(t+"?typeCode=ContentPage")})},this.getContentPageItemUri=function(){return this._getContentPageUri()}}])},function(e,t){angular.module("contextAwarePageStructureServiceModule",["typeStructureRestServiceModule","pageServiceModule"]).value("PAGE_STRUCTURE_PRE_ORDER",["typeCode","template","name","label","uid","title"]).value("PAGE_STRUCTURE_POST_ORDER",["creationtime","modifiedtime"]).service("contextAwarePageStructureService",["$q","typeStructureRestService","pageService","PAGE_STRUCTURE_PRE_ORDER","PAGE_STRUCTURE_POST_ORDER",function(e,t,n,i,o){function a(e,t,n){return n>=e.length&&(n=Math.max(0,e.length-1)),e.splice(n,0,e.splice(t,1)[0]),e}function r(e){var t;if(i)for(t=i.length-1;t>=0;t--)a(e,e.findIndex(function(e){return e.qualifier===i[t]}),0);if(o)for(t=0;t<o.length;t++)a(e,e.findIndex(function(e){return e.qualifier===o[t]}),e.length);return e}function s(e,t){var n=e.findIndex(function(e){return"label"===e.qualifier});-1!==n&&(e[n].editable=t)}function c(e){return t.getStructureByType(e).then(function(e){return e.push({cmsStructureType:"DisplayConditionEditor",i18nKey:"type.abstractpage.displayCondition.name",qualifier:"displayCondition"},{cmsStructureType:"ShortString",i18nKey:"se.cms.pageinfo.page.type",qualifier:"typeCode",editable:!1}),e})}function l(e,t){var n=e.findIndex(function(e){return e.qualifier===t});-1!==n&&e.splice(n,1)}this.getPageStructureForNewPage=function(e,t){return c(e).then(function(n){return"ContentPage"===e&&s(n,t),l(n,"creationtime"),l(n,"modifiedtime"),l(n,"displayCondition"),l(n,"restrictions"),{attributes:r(n),category:"PAGE"}})},this.getPageStructureForPageEditing=function(e,t){return c(e).then(function(i){var o=["uid","creationtime","modifiedtime"];return i.filter(function(e){return o.indexOf(e.qualifier)>=0}).forEach(function(e){e.editable=!1}),"ContentPage"===e?n.isPagePrimary(t).then(function(e){return s(i,e),{attributes:r(i),category:"PAGE"}}):{attributes:r(i),category:"PAGE"}})},this.getPageStructureForViewing=function(e){return c(e).then(function(e){return e.forEach(function(e){e.editable=!1}),l(e,"typeCode"),l(e,"template"),l(e,"displayCondition"),l(e,"restrictions"),{attributes:r(e),category:"PAGE"}})}}])},function(e,t){angular.module("deletePageServiceModule",["alertServiceModule","cmsitemsRestServiceModule","confirmationModalServiceModule","crossFrameEventServiceModule","pagesVariationsRestServiceModule","resourceLocationsModule","smarteditServicesModule"]).service("deletePageService",["$location","$log","$q","$translate","alertService","cmsitemsRestService","crossFrameEventService","pageInfoService","confirmationModalService","pagesVariationsRestService","EVENTS",function(e,t,n,i,o,a,r,s,c,l,d){this._getConfirmationModalDescription=function(){var e=n.defer();return s.getPageUUID().then(function(n){n?e.resolve("se.cms.actionitem.page.trash.confirmation.description.storefront"):(t.error("deletePageService::deletePage - pageUUID is undefined"),e.reject())},function(){e.resolve("se.cms.actionitem.page.trash.confirmation.description.pagelist")}),e.promise},this.deletePage=function(t,s){var l={catalogId:s.CURRENT_CONTEXT_CATALOG,catalogVersion:s.CURRENT_CONTEXT_CATALOG_VERSION,siteId:s.CURRENT_CONTEXT_SITE_ID};return this._getConfirmationModalDescription().then(function(s){return c.confirm({description:s,descriptionPlaceholders:{pageName:t.name},title:"se.cms.actionitem.page.trash.confirmation.title"}).then(function(){return t.identifier=t.uuid,t.pageStatus="DELETED",a.update(t).then(function(){return r.publish(d.PAGE_DELETED),o.showSuccess({message:"se.cms.actionitem.page.trash.alert.success.description",messagePlaceholders:{pageName:t.name}})}).then(function(){e.path("/pages/:siteId/:catalogId/:catalogVersion".replace(":siteId",l.siteId).replace(":catalogId",l.catalogId).replace(":catalogVersion",l.catalogVersion))},function(e){return e.data.errors.filter(function(e){return"ValidationError"===e.type}).forEach(function(e){var n=i.instant("se.cms.actionitem.page.trash.alert.failure.prefix",{pageName:t.name})+e.subject+" - "+e.message;o.showDanger({message:n,timeout:5e3})}),n.reject(e)})},function(){return n.reject("Error")})})},this.isDeletePageEnabled=function(e){return l.getVariationsForPrimaryPageId(e).then(function(e){return 0===e.length})}}])},function(e,t){angular.module("genericEditorModalServiceModule",["confirmationModalServiceModule","coretemplates","editorTabsetModule","gatewayProxyModule","modalServiceModule","yLoDashModule"]).factory("genericEditorModalService",["modalService","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES","TYPES_RESOURCE_URI","CMS_LINK_TO_RELOAD_STRUCTURE_EVENT_ID","CONTEXT_SITE_ID","systemEventService","gatewayProxy","confirmationModalService",function(e,t,n,i,o,a,r,s,c){function l(){}return l.prototype.open=function(r,s,l){return e.open({title:r.title,titleSuffix:"se.cms.editor.title.suffix",templateUrl:"genericEditorModalTemplate.html",controller:["genericEditorModalService","modalManager","systemEventService","$scope","$log","$q","lodash",function(e,t,n,s,d,u,p){this.isDirty=!1,this.controls={},this.editorStackId=r.editorStackId,this.data=p.cloneDeep(r),this.getApi=function(e){this.controls.genericEditorAPI=e,this.data.targetedQualifier&&e.switchToTabContainingQualifier(this.data.targetedQualifier),this.data.initialDirty&&e.considerFormDirty()}.bind(this),this.onSave=function(){return this.controls.submit().then(function(e){return l(),this.changeStructureEventListener(),e}.bind(this))},this.onCancel=function(){var e=u.defer();return this.isDirty?c.confirm({description:"se.editor.cancel.confirm"}).then(function(){this.controls.reset().then(function(){this.changeStructureEventListener(),e.resolve()}.bind(this),function(){e.reject()})}.bind(this),function(){e.reject()}):e.resolve(),e.promise},this.init=function(){t.setDismissCallback(this.onCancel.bind(this)),t.setButtonHandler(function(e){switch(e){case"save":return this.onSave();case"cancel":return this.onCancel();default:d.error("A button callback has not been registered for button with id",e)}}.bind(this)),s.$watch(function(){return["function"==typeof this.controls.isDirty&&this.controls.isDirty(),this.controls.genericEditorAPI&&this.controls.genericEditorAPI.isSubmitDisabled()]}.bind(this),function(e){this.isDirty=e[0],e[1]?t.disableButton("save"):t.enableButton("save")}.bind(this),!0),this.structure=r.structure,this.structure||(this.structureApi=this.getStructureApiByMode("DEFAULT")),this.changeStructureEventListener=n.registerEventHandler(o,this.onChangeStructureEvent.bind(this)),this.contentApi="/cmswebservices/v1/sites/"+a+"/cmsitems"},this.onChangeStructureEvent=function(e,t){t.structureApiMode?(this.structure=null,this.structureApi=this.getStructureApiByMode(t.structureApiMode)):t.structure&&(this.structureApi=null,this.structure=t.structure),this.data.content=t.content};var m=i+"?code=:smarteditComponentType&mode=:structureApiMode";this.getStructureApiByMode=function(e){return m.replace(/:structureApiMode/gi,e)}}],buttons:[{id:"cancel",label:"se.cms.component.confirmation.modal.cancel",style:n.SECONDARY,action:t.DISMISS},{id:"save",label:"se.cms.component.confirmation.modal.save",action:t.CLOSE,disabled:!0}]})},new l}])},function(e,t){angular.module("displayConditionsEditorModelModule",["displayConditionsFacadeModule","eventServiceModule"]).service("displayConditionsEditorModel",["displayConditionsFacade","$q","systemEventService",function(e,t,n){this._initModelForPrimary=function(t){e.getVariationsForPageUid(t).then(function(e){this.variations=e}.bind(this))},this._initModelForVariation=function(t){e.getPrimaryPageForVariationPage(t).then(function(e){this.associatedPrimaryPage=e,this.originalPrimaryPage=e}.bind(this)),this.isAssociatedPrimaryReadOnly="ContentPage"!==this.pageType,this.isAssociatedPrimaryReadOnly||e.getPrimaryPagesForVariationPageType(this.pageType).then(function(e){this.primaryPages=e}.bind(this))},this.initModel=function(t){this.pageUid=t,e.getPageInfoForPageUid(t).then(function(e){this.pageName=e.pageName,this.pageType=e.pageType,this.isPrimary=e.isPrimary,this.isPrimary?this._initModelForPrimary(t):this._initModelForVariation(t)}.bind(this))},this.setAssociatedPrimaryPage=function(e){n.sendAsynchEvent("EDIT_PAGE_ASSOCIATED_PRIMARY_UPDATED_EVENT",e),this.associatedPrimaryPage=e},this.save=function(){return this.isDirty()?e.updatePage(this.pageUid,{label:this.associatedPrimaryPage.label}):t.when(!0)},this.isDirty=function(){return!!this.originalPrimaryPage&&!!this.associatedPrimaryPage&&!angular.equals(this.originalPrimaryPage,this.associatedPrimaryPage)}}])},function(e,t){angular.module("pageDisplayConditionsServiceModule",["catalogServiceModule"]).service("pageDisplayConditionsService",["catalogService",function(e){function t(t,n){return e.getContentCatalogVersion(n).then(function(e){return e.pageDisplayConditions.find(function(e){return e.typecode===t})})}function n(e,n){var i=[];return t(e,n).then(function(e){return e&&e.options?(e.options.forEach(function(e){var t={label:e.label,description:e.label+".description",isPrimary:"PRIMARY"===e.id};i.push(t)}),i):[]})}this.getNewPageConditions=function(e,t){return n(e,t)}}])},function(e,t){angular.module("pageRestrictionsCriteriaModule",[]).service("pageRestrictionsCriteriaService",function(){function e(e,t,n){Object.defineProperty(e,"id",{writable:!1,value:t}),Object.defineProperty(e,"label",{writable:!1,value:"se.cms.restrictions.criteria."+t}),Object.defineProperty(e,"editLabel",{writable:!1,value:"se.cms.restrictions.criteria.select."+t}),Object.defineProperty(e,"value",{writable:!1,value:n})}var t={},n={};e(t,"all",!1),e(n,"any",!0);var i=[t,n];this.getMatchCriteriaLabel=function(e){return e?n.label:t.label},this.getRestrictionCriteriaOptions=function(){return i},this.getRestrictionCriteriaOptionFromPage=function(e){return e&&"boolean"==typeof e.onlyOneRestrictionMustApply&&e.onlyOneRestrictionMustApply?n:t}})},function(e,t){angular.module("pageRestrictionsServiceModule",["pageRestrictionsRestServiceModule","restrictionsServiceModule","restrictionTypesServiceModule","yLoDashModule","cmsitemsRestServiceModule"]).service("pageRestrictionsService",["$q","lodash","pageRestrictionsRestService","restrictionsService","restrictionTypesService","cmsitemsRestService",function(e,t,n,i,o,a){function r(t){return e.all([n.getPagesRestrictionsForPageId(t),i.getAllRestrictions()]).then(function(e){var t=e[0],n=e[1],i=t.pageRestrictionList.map(function(e){return e.restrictionId});return n.restrictions.filter(function(e){return i.indexOf(e.uid)>=0})})}this.getRestrictionsByPageUID=function(t){return r(t).then(function(t){return e.all(t.map(function(e){return o.getRestrictionTypeForTypeCode(e.typeCode).then(function(t){return angular.extend({},e,{typeName:t.name})})}))})},this.updateRestrictionsByPageUID=function(e,t){var i={pageid:e,pageRestrictionList:[]};return t.forEach(function(t){i.pageRestrictionList.push({restrictionId:t.uid,pageId:e})}),n.update(i)},this.getPageRestrictionsCountMapForCatalogVersion=function(e,i,o){return n.getPagesRestrictionsForCatalogVersion(e,i,o).then(function(e){return t.countBy(e.pageRestrictionList,"pageId")})},this.getPageRestrictionsCountForPageUID=function(e){return n.getPagesRestrictionsForPageId(e).then(function(e){return e.pageRestrictionList.length})},this.isRestrictionTypeSupported=function(e){return this.getSupportedRestrictionTypeCodes().then(function(t){return t.indexOf(e)>=0})},this.getRestrictionsByPageUUID=function(e){return a.getById(e).then(function(e){return a.getByIds(e.restrictions)})}}])},function(e,t){angular.module("pageTypesRestrictionTypesServiceModule",["pageTypesRestrictionTypesRestServiceModule"]).service("pageTypesRestrictionTypesService",["pageTypesRestrictionTypesRestService",function(e){var t=null,n=this;this.getRestrictionTypeCodesForPageType=function(e){return n.getPageTypesRestrictionTypes().then(function(t){return(t=t.filter(function(t){return t.pageType===e})).map(function(e){return e.restrictionType})})},this.getPageTypesRestrictionTypes=function(){return t&&2!==t.$$state.status?t:t=e.getPageTypesRestrictionTypes().then(function(e){return e.pageTypeRestrictionTypeList})}}])},function(e,t){angular.module("restrictionTypesServiceModule",["pageTypesRestrictionTypesServiceModule","restrictionTypesRestServiceModule"]).service("restrictionTypesService",["$q","languageService","pageTypesRestrictionTypesService","restrictionTypesRestService",function(e,t,n,i){var o=null,a=this;this.getRestrictionTypesByPageType=function(e){return a.getRestrictionTypes().then(function(t){return n.getRestrictionTypeCodesForPageType(e).then(function(e){return t.filter(function(t){return e.indexOf(t.code)>=0})})})},this.getRestrictionTypes=function(){return o&&2!==o.$$state.status?o:o=i.getRestrictionTypes().then(function(e){return e.restrictionTypes})},this.getRestrictionTypeForTypeCode=function(e){return a.getRestrictionTypes().then(function(t){return t.find(function(t){return t.code===e})})}}])},function(e,t){angular.module("pageTemplateServiceModule",["smarteditServicesModule","resourceLocationsModule","yLoDashModule"]).constant("NON_SUPPORTED_TEMPLATES",["layout/landingLayout1Page","layout/landingLayout3Page","layout/landingLayout4Page","layout/landingLayout5Page","layout/landingLayout6Page","layout/landingLayoutPage","account/accountRegisterPage","checkout/checkoutRegisterPage"]).factory("pageTemplateService",["restServiceFactory","PAGE_TEMPLATES_URI","NON_SUPPORTED_TEMPLATES","lodash",function(e,t,n,i){var o=e.get(t);return{getPageTemplatesForType:function(e,t){var a=i.assign({pageTypeCode:t,active:!0},e);return o.get(a).then(function(e){return{templates:e.templates.filter(function(e){return-1===n.indexOf(e.frontEndName)})}})}}}])},function(e,t){angular.module("addPageServiceModule",["eventServiceModule","genericEditorModule","wizardServiceModule","functionsModule","catalogServiceModule","pageTypeServiceModule","languageServiceModule","cmsitemsRestServiceModule","pageRestrictionsModule","restrictionsServiceModule","newPageDisplayConditionModule","yLoDashModule","experienceServiceModule","selectPageTypeModule","selectPageTemplateModule","contextAwarePageStructureServiceModule","confirmationModalServiceModule","resourceLocationsModule","restrictionsStepHandlerFactoryModule","pageRestrictionsInfoMessageModule","pageFacadeModule"]).service("addPageWizardService",["modalWizard","catalogService",function(e,t){this.openAddPageWizard=function(){return t.retrieveUriContext().then(function(t){return e.open({controller:"addPageWizardController",controllerAs:"addPageWizardCtl",properties:{uriContext:t}})})}}]).factory("pageBuilderFactory",["contextAwarePageStructureService","catalogService",function(e,t){function n(n,i){function o(){void 0!==r.defaultPage&&(a.pageType?e.getPageStructureForNewPage(a.pageType.code,r.defaultPage).then(function(e){a.pageInfoFields=e}):a.pageInfoFields=[])}var a={},r={};t.getCatalogVersionUUid(i).then(function(e){r.catalogVersion=e}),this.pageTypeSelected=function(e){a.pageType=e,a.pageTemplate=null,o()},this.pageTemplateSelected=function(e){a.pageTemplate=e},this.getPageTypeCode=function(){return a.pageType?a.pageType.code:null},this.getTemplateUuid=function(){return a.pageTemplate?a.pageTemplate.uuid:""},this.getPage=function(){return r.typeCode=a.pageType?a.pageType.code:null,r.itemtype=r.typeCode,r.type=a.pageType?a.pageType.type:null,r.masterTemplate=a.pageTemplate?a.pageTemplate.uuid:null,r.template=a.pageTemplate.uid,r},this.setPageUid=function(e){r.uid=e},this.setRestrictions=function(e,t){r.onlyOneRestrictionMustApply=e,r.restrictions=t},this.getPageInfoStructure=function(){return a.pageInfoFields},this.displayConditionSelected=function(e){var t=e.isPrimary;r.defaultPage=t,t?(r.label=null,n.hideStep()):(r.label=e.primaryPage?e.primaryPage.label:"",n.showStep()),o()}}return{createPageBuilder:function(e,t){return new n(e,t)}}}]).controller("addPageWizardController",["$q","$scope","$timeout","wizardManager","pageTypeService","pageBuilderFactory","languageService","cmsitemsRestService","lodash","restrictionsStepHandlerFactory","experienceService","confirmationModalService","systemEventService","pageRestrictionsFacade","restrictionsService","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","pageFacade",function(e,t,n,i,o,a,r,s,c,l,d,u,p,m,g,h,f){this.uriContext=i.properties.uriContext,this.callbacks={},this.restrictionStepProperties={id:"restrictionsStepId",name:"se.cms.restrictions.editor.tab",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageRestrictionsStepTemplate.html"};var y=this,v={},S=l.createRestrictionsStepHandler(i,v,this.restrictionStepProperties),C={PAGE_TYPE:"pageType",PAGE_TEMPLATE:"pageTemplate",PAGE_DISPLAY_CONDITION:"pageDisplayCondition",PAGE_INFO:"pageInfo",PAGE_RESTRICTIONS:S.getStepId()};this.pageBuilder=a.createPageBuilder(S,this.uriContext),this.restrictionsEditorFunctionBindings=v,this.typeChanged=!0,this.infoChanged=!0,this.model={page:{},sharedPage:{}},this.getWizardConfig=function(){return{isFormValid:this.isFormValid.bind(this),onNext:this.onNext.bind(this),onDone:this.onDone.bind(this),onCancel:this.onCancel,steps:[{id:C.PAGE_TYPE,name:"se.cms.addpagewizard.pagetype.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageTypeStepTemplate.html"},{id:C.PAGE_TEMPLATE,name:"se.cms.addpagewizard.pagetemplate.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageTemplateStepTemplate.html"},{id:C.PAGE_DISPLAY_CONDITION,name:"se.cms.addpagewizard.pageconditions.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageDisplayConditionStepTemplate.html"},{id:C.PAGE_INFO,name:"se.cms.addpagewizard.pageinfo.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageInfoStepTemplate.html"}]}}.bind(this),this.onCancel=function(){return u.confirm({description:"se.editor.cancel.confirm"})},this.isFormValid=function(e){switch(e){case C.PAGE_TYPE:return!!y.pageBuilder.getPageTypeCode();case C.PAGE_TEMPLATE:return!!y.pageBuilder.getTemplateUuid();case C.PAGE_DISPLAY_CONDITION:return!0;case C.PAGE_INFO:return y.callbacks.isDirtyPageInfo&&y.callbacks.isDirtyPageInfo()&&y.callbacks.isValidPageInfo&&y.callbacks.isValidPageInfo();case C.PAGE_RESTRICTIONS:return S.isStepValid()}return!1},this.onNext=function(){return e.when(!0)},this.restrictionsResult=function(e,t){this.pageBuilder.setRestrictions(e,t)}.bind(this),this.onDone=function(){return y.callbacks.savePageInfo().then(function(t){return c.defaultsDeep(t,y.pageBuilder.getPage()),f.createPage(t).then(function(e){return y.pageBuilder.setPageUid(e.uid),d.updateExperiencePageId(y.pageBuilder.getPage().uid)},function(t){return p.sendAsynchEvent(h,{messages:t.data.errors}),i.goToStepWithId(C.PAGE_INFO),e.reject()})})},this.typeSelected=function(e){y.infoChanged=!0,y.typeChanged=!0,y.pageBuilder.pageTypeSelected(e)},this.templateSelected=function(e){y.pageBuilder.pageTemplateSelected(e)},this.getPageTypeCode=function(){return y.pageBuilder.getPageTypeCode()},this.variationResult=function(e){y.infoChanged=!0,y.pageBuilder.displayConditionSelected(e)},this.getPageInfo=function(){var e=y.pageBuilder.getPage();return e.uriContext=y.uriContext,e}.bind(this),this.getPageInfoStructure=function(){return y.pageBuilder.getPageInfoStructure()},this.isRestrictionsActive=function(){return(!y.typeChanged||i.getCurrentStepId()===C.PAGE_RESTRICTIONS)&&(y.typeChanged=!1,!0)},this.isPageInfoActive=function(){return(!y.infoChanged||i.getCurrentStepId()===C.PAGE_INFO)&&(y.infoChanged=!1,!0)},this.resetQueryFilter=function(){this.query.value=""},this.getRestrictionTypes=function(){return m.getRestrictionTypesByPageType(this.getPageTypeCode())}.bind(this),this.getSupportedRestrictionTypes=function(){return g.getSupportedRestrictionTypeCodes()}}])},function(e,t){angular.module("pageListServiceModule",["pagesRestServiceModule"]).service("pageListService",["pagesRestService",function(e){this.getPageListForCatalog=function(t){return e.get(t)},this.getPageById=function(t){return e.getById(t)}}])},function(e,t){angular.module("pageServiceModule",["cmsitemsRestServiceModule","smarteditServicesModule","pagesFallbacksRestServiceModule","pagesRestServiceModule","pagesVariationsRestServiceModule","yLoDashModule"]).service("pageService",["cmsitemsRestService","pageInfoService","pagesFallbacksRestService","pagesRestService","pagesVariationsRestService","lodash","$q",function(e,t,n,i,o,a,r){this.getPrimaryPagesForPageType=function(e,t){var n=a.assign({},t||{},{typeCode:e,defaultPage:!0});return i.get(n)},this.isPagePrimary=function(e){return n.getFallbacksForPageId(e).then(function(e){return 0===e.length})},this.getPrimaryPage=function(e){return n.getFallbacksForPageId(e).then(function(e){return e[0]?i.getById(e[0]):r.when()})},this.getVariationPages=function(e){return o.getVariationsForPrimaryPageId(e).then(function(e){return e.length>0?i.get({uids:e}):r.when([])})},this.updatePageById=function(e,t){return i.getById(e).then(function(n){return delete n.$promise,delete n.$resolved,t=a.assign({},n,t),i.update(e,t)})},this.getPageById=function(e){return i.getById(e)},this.getCurrentPageInfo=function(){return t.getPageUUID().then(function(t){return e.getById(t)})}}])},function(e,t){angular.module("restrictionsStepHandlerFactoryModule",[]).factory("restrictionsStepHandlerFactory",["$q",function(e){function t(t,n,i){var o=i,a=function(){return t.containsStep(this.getStepId())}.bind(this);this.hideStep=function(){a()&&t.removeStepById(this.getStepId())},this.showStep=function(){a()||t.addStep(o,t.getStepsCount())},this.isStepValid=function(){return n.isDirty&&n.isDirty()},this.save=function(){return n.save&&n.save()||e.when()},this.getStepId=function(){return o.id},this.goToStep=function(){t.goToStepWithId(this.getStepId())}}return{createRestrictionsStepHandler:function(e,n,i){return new t(e,n,i)}}}])},function(e,t){angular.module("removeComponentServiceModule",["removeComponentServiceInterfaceModule","gatewayProxyModule"]).factory("removeComponentService",["$q","$log","extend","gatewayProxy","RemoveComponentServiceInterface",function(e,t,n,i,o){var a=function(e){this.gatewayId=e,i.initForService(this,["removeComponent"])};return new(a=n(o,a))("RemoveComponent")}])},function(e,t){angular.module("restrictionsCriteriaServiceModule",[]).service("restrictionsCriteriaService",function(){function e(e,t,n){Object.defineProperty(e,"id",{writable:!1,value:t}),Object.defineProperty(e,"label",{writable:!1,value:"se.cms.restrictions.criteria."+t}),Object.defineProperty(e,"editLabel",{writable:!1,value:"se.cms.restrictions.criteria.select."+t}),Object.defineProperty(e,"value",{writable:!1,value:n})}var t={},n={};e(t,"all",!1),e(n,"any",!0);var i=[t,n];this.getRestrictionCriteriaOptions=function(){return i}})},function(e,t){angular.module("restrictionsServiceModule",["restrictionsRestServiceModule","structuresRestServiceModule","typeStructureRestServiceModule","yLoDashModule"]).service("restrictionsService",["lodash","restrictionsRestService","structureModeManagerFactory","structuresRestService","typeStructureRestService",function(e,t,n,i,o){var a=n.createModeManager(["add","edit","create"]);this.getAllRestrictions=function(){return t.get()},this.getStructureApiUri=function(e,t){return a.validateMode(e),i.getUriForContext(e,t)},this.getContentApiUri=function(e){return t.getContentApiUri(e)},this.getById=function(e){return t.getById(e).then(function(e){return e})},this.getPagedRestrictionsForType=function(e,n,i,o){return t.get({pageSize:i,currentPage:o,mask:n,sort:"name:ASC",params:"typeCode:"+e})},this.getSupportedRestrictionTypeCodes=function(){return o.getStructuresByCategory("RESTRICTION").then(function(t){return e.map(t,function(e){return e.code})})}}])},function(e,t){angular.module("rulesAndPermissionsRegistrationModule",["catalogServiceModule","catalogVersionPermissionModule","catalogVersionRestServiceModule","pageServiceModule","permissionServiceModule","smarteditServicesModule"]).run(["catalogService","catalogVersionPermissionService","catalogVersionRestService","pageService","permissionService","sharedDataService","siteService","$q",function(e,t,n,i,o,a,r,s){o.registerRule({names:["se.write.page","se.write.slot","se.write.component"],verify:function(e){var n=e.map(function(e){return e.context?t.hasWritePermission(e.context.catalogId,e.context.catalogVersion):t.hasWritePermissionOnCurrent()});return s.all(n).then(function(e){return!0===e.reduce(function(e,t){return e&&t},!0)},function(){return!1})}}),o.registerRule({names:["se.read.page","se.read.slot","se.read.component"],verify:function(){return t.hasReadPermissionOnCurrent()}}),o.registerRule({names:["se.page.belongs.to.experience"],verify:function(){return a.get("experience").then(function(e){return e.pageContext&&e.pageContext.catalogVersionUuid===e.catalogDescriptor.catalogVersionUuid})}}),o.registerRule({names:["se.cloneable.page"],verify:function(){return a.get("experience").then(function(e){var t={CURRENT_CONTEXT_SITE_ID:e.pageContext.siteId,CURRENT_CONTEXT_CATALOG:e.pageContext.catalogId,CURRENT_CONTEXT_CATALOG_VERSION:e.pageContext.catalogVersion};return i.getCurrentPageInfo().then(function(i){return n.getCloneableTargets(t).then(function(t){return e.pageContext.active?t.versions.length>0&&i.defaultPage&&!i.copyToCatalogsDisabled:t.versions.length>0})})})}}),o.registerRule({names:["se.content.catalog.non.active"],verify:function(){return e.isContentCatalogVersionNonActive()}}),o.registerPermission({aliases:["se.add.component"],rules:["se.write.slot","se.write.component","se.page.belongs.to.experience","se.content.catalog.non.active"]}),o.registerPermission({aliases:["se.read.restriction","se.read.page"],rules:["se.read.page"]}),o.registerPermission({aliases:["se.edit.page"],rules:["se.write.page"]}),o.registerPermission({aliases:["se.sync.catalog"],rules:["se.write.page","se.write.slot","se.write.component"]}),o.registerPermission({aliases:["se.sync.slot.context.menu","se.sync.page","se.sync.slot.indicator"],rules:["se.write.page","se.write.slot","se.write.component","se.page.belongs.to.experience","se.content.catalog.non.active"]}),o.registerPermission({aliases:["se.edit.navigation"],rules:["se.write.component"]}),o.registerPermission({aliases:["se.context.menu.remove.component"],rules:["se.write.slot","se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.slot.context.menu.shared.icon","se.slot.context.menu.unshared.icon"],rules:["se.read.slot"]}),o.registerPermission({aliases:["se.slot.context.menu.visibility"],rules:["se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.clone.page"],rules:["se.cloneable.page"]}),o.registerPermission({aliases:["se.context.menu.edit.component"],rules:["se.write.component","se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.context.menu.drag.and.drop.component"],rules:["se.write.slot","se.write.component","se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.edit.page.link","se.delete.page.menu","se.shared.slot.override.options","se.revert.to.shared.slot.link"],rules:["se.write.page","se.page.belongs.to.experience","se.content.catalog.non.active"]}),o.registerPermission({aliases:["se.clone.component"],rules:["se.write.component","se.page.belongs.to.experience"]})}])},function(e,t){angular.module("slotRestrictionsServiceModule",["yLoDashModule","gatewayProxyModule"]).service("slotRestrictionsService",["gatewayProxy",function(e){this.getAllComponentTypesSupportedOnPage=function(){},this.getSlotRestrictions=function(){},e.initForService(this,["getAllComponentTypesSupportedOnPage","getSlotRestrictions"],"SLOT_RESTRICTIONS")}])},function(e,t){angular.module("synchronizationPollingServiceModule",["renderServiceInterfaceModule","smarteditServicesModule","eventServiceModule","timerModule","gatewayProxyModule","crossFrameEventServiceModule","resourceModule","synchronizationConstantsModule","catalogServiceModule","yLoDashModule","functionsModule"]).run(["syncPollingService",function(e){e.initSyncPolling()}]).constant("SYNC_POLLING_THROTTLE",500).factory("syncPollingService",["$log","$q","SYNCHRONIZATION_POLLING","EVENTS","OVERLAY_RERENDERED_EVENT","gatewayProxy","pageInfoService","timerService","crossFrameEventService","systemEventService","synchronizationResource","catalogService","lodash","isBlank","SYNC_POLLING_THROTTLE",function(e,t,n,i,o,a,r,s,c,l,d,u,p,m,g){var h=function(e){this.gatewayId=e,a.initForService(this)},f=function(e){return m(e)?r.getPageUUID():t.when(e)};return h.prototype.getSyncStatus=function(n,i){return this.syncStatus[n]&&n===this.syncStatus[n].itemId?t.when(this.syncStatus[n]):f(n).then(function(n){if(n)return this.syncPollingTimer.restart(this.refreshInterval),this._fetchSyncStatus(n,i).then(function(e){return this.syncStatus[e.itemId]=e,e}.bind(this),function(){return e.error("syncPollingService::getSyncStatus - failed call to _fetchSyncStatus"),t.reject()})}.bind(this),function(){return e.error("syncPollingService::getSyncStatus - failed call to getPageUUID"),this.syncPollingTimer.stop(),this._fetchSyncStatus(n,i)}.bind(this))},h.prototype._fetchSyncStatus=function(e,i){return f(e).then(function(e){return e?u.isContentCatalogVersionNonActive().then(function(o){return o?u.getContentCatalogActiveVersion(i).then(function(t){return d.getPageSynchronizationGetRestService(i).get({pageUid:e,target:t}).then(function(e){return JSON.stringify(e)!==JSON.stringify(this.syncStatus[e.itemId])&&c.publish(n.FAST_FETCH,e),this.syncStatus[e.itemId]=e,e}.bind(this))}.bind(this)):t.reject()}.bind(this)):t.when({})}.bind(this),function(){return this.syncPollingTimer.stop(),t.reject()}.bind(this))},h.prototype.changePollingSpeed=function(e,t){e===n.SPEED_UP?(this.syncStatus={},t&&-1===this.triggers.indexOf(t)&&this.triggers.push(t),this.refreshInterval=n.FAST_POLLING_TIME):(t&&this.triggers.splice(this.triggers.indexOf(t),1),0===this.triggers.length&&(this.refreshInterval=n.SLOW_POLLING_TIME)),this.syncPollingTimer.restart(this.refreshInterval)},h.prototype.initSyncPolling=function(){this.refreshInterval=n.SLOW_POLLING_TIME,this.triggers=[],this.syncStatus={};var e=this.changePollingSpeed.bind(this);l.registerEventHandler(n.SPEED_UP,e),l.registerEventHandler(n.SLOW_DOWN,e),c.subscribe(n.FETCH_SYNC_STATUS_ONCE,function(e,t){this._fetchSyncStatus.bind(this)(t)}.bind(this)),c.subscribe(o,p.throttle(function(){this.syncPollingTimer.isActive()&&this._fetchSyncStatus.bind(this)()}.bind(this),g)),c.subscribe(i.PAGE_CHANGE,this.stopSync.bind(this)),this.syncPollingTimer=s.createTimer(this._fetchSyncStatus.bind(this),this.refreshInterval)},h.prototype.performSync=function(e,n){return u.isContentCatalogVersionNonActive(n).then(function(i){return i?u.getContentCatalogActiveVersion(n).then(function(t){return d.getPageSynchronizationPostRestService(n).save({target:t,items:e})}):t.reject()})},h.prototype.stopSync=function(){this.syncPollingTimer.isActive()&&this.syncPollingTimer.stop()},h.prototype.startSync=function(e){this.syncPollingTimer.isActive()||this.changePollingSpeed(e||n.SLOW_POLLING_TIME)},new h("syncPollingService")}])},function(e,t){angular.module("cmssmarteditContainerTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/cmsItemDropdownTemplate.html",'<div class="cms-nested-component-template">\n    <label class="control-label"\n        data-translate="se.cms.nestedcomponenteditor.createorselect"></label>\n    <div data-recompile-dom="cmsItemDropdownCtrl._recompileDom"\n        class="cms-nested-component-select">\n        <se-dropdown data-field="cmsItemDropdownCtrl.field"\n            data-qualifier="cmsItemDropdownCtrl.qualifier"\n            data-model="cmsItemDropdownCtrl.model"\n            data-id="cmsItemDropdownCtrl.id"\n            data-item-template-url="cmsItemDropdownCtrl.itemTemplateUrl"\n            data-get-api="cmsItemDropdownCtrl.configureSeDropdown($api)"></se-dropdown>\n        <sub-type-selector data-ng-if="cmsItemDropdownCtrl.showSubTypesSelector"\n            data-sub-types="cmsItemDropdownCtrl.field.subTypes"\n            data-on-sub-type-selected="cmsItemDropdownCtrl.onSubTypeSelected"></sub-type-selector>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/cmsItemDropdownWrapperTemplate.html",'<cms-item-dropdown data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-editor-stack-id="editorStackId"\n    data-id="id"></cms-item-dropdown>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/components/nestedComponentTemplate.html",'<div class="cms-nested-component"\n    data-component-id=\'{{$ctrl.item.uid}}\'>\n    <span class="y-select-item-printer cms-nested-component__item"\n        data-ng-if="$ctrl.isSelected"\n        data-ng-click="$ctrl.onComponentClick()">\n        <img data-ng-src="{{$ctrl.imageRoot}}/images/component_default.png"\n            class="cms-nested-component__image"\n            alt="{{$ctrl.item.name}}"\n            title="{{$ctrl.item.name}} - {{$ctrl.item.typeCode}}" />\n        <span class="cms-nested-component__data">\n            <p class="cms-nested-component__name">{{$ctrl.item.name}}</p>\n            <p class="cms-nested-component__type">{{$ctrl.item.typeCode}}</p>\n        </span>\n    </span>\n    <div class="y-select-item-printer cms-nested-component__result-item"\n        data-ng-if="!$ctrl.isSelected">\n        <span class="cms-nested-component__result-name">{{$ctrl.item.name}}</span>\n        <span class="cms-nested-component__result-code">{{$ctrl.item.typeCode}}</span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/components/subTypeSelectorTemplate.html",'<div class="cms-sub-type-selector">\n    <h4 data-translate="se.cms.nestedcomponenteditor.create"\n        class="cms-sub-type-selector__heading"></h4>\n    <label class="control-label"\n        data-translate="se.cms.nestedcomponenteditor.select.type"></label>\n    <y-select data-ng-model="$ctrl.subTypeSelected"\n        data-controls="false"\n        data-search-enabled="false"\n        data-on-change="$ctrl.onChange"\n        data-fetch-strategy="$ctrl.fetchStrategy"></y-select>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/templates/cmsItemSearchTemplate.html",'<nested-component data-item="item"\n    data-qualifier="ySelect.id"\n    data-is-selected="selected"></nested-component>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/componentMenuTemplate.html",'<div class="se-component-menu"\n    data-recompile-dom="$ctrl._recompileDom"\n    data-ng-class="{ \'se-component-menu__localized\': $ctrl.hasMultipleContentCatalogs }">\n\n    <y-tabset class="se-component-menu--tabs"\n        data-tabs-list="$ctrl.tabsList"\n        data-model="$ctrl.tabsList"\n        data-num-tabs-displayed="2">\n    </y-tabset>\n\n    <div class="se-component-menu--help-tip"\n        data-translate="se.cms.componentmenu.label.draganddrop"></div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/componentMenuWrapperTemplate.html",'<component-menu action-item="item"></component-menu>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/catalogVersionTemplate.html",'<div class="se-component-menu--select-local">\n    <span class="hyicon hyicon-globe se-component-menu--select-globe"\n        data-ng-if="item.isCurrentCatalog == false"></span>\n    <span class="se-component-menu--select-text">{{item.catalogName | l10n}} - {{item.catalogVersionId}}</span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/componentInfoPopoverTemplate.html",'<div data-translate="se.cms.component.display.off.tooltip"></div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/componentItemTemplate.html",'<div class="se-component-item">\n    <div class="se-component-item--disabled-overlay"\n        data-ng-if="$ctrl.componentDisabled"\n        data-y-popover\n        data-trigger="\'hover\'"\n        data-placement="\'bottom\'"\n        data-template="$ctrl.getTemplateInfoForNonCloneableComponent()"></div>\n    <div class="smartEditComponent se-component-item--image"\n        data-smartedit-component-id="{{$ctrl.componentInfo.uid}}"\n        data-smartedit-component-uuid="{{$ctrl.componentInfo.uuid}}"\n        data-smartedit-component-type="{{$ctrl.componentInfo.typeCode}}">\n        <img data-ng-src="{{$ctrl.imageRoot}}/images/component_default.png"\n            class="se-component-item--image-element"\n            alt="{{$ctrl.componentInfo.name}}"\n            title="{{$ctrl.componentInfo.name}} - {{$ctrl.componentInfo.typeCode}}" />\n    </div>\n    <div class="se-component-item--details-container">\n        <div class="se-component-item--details"\n            title="{{$ctrl.componentInfo.name}} - {{$ctrl.componentInfo.typeCode}}">\n            <div class="se-component-item--details-name">{{$ctrl.componentInfo.name}}</div>\n            <div class="se-component-item--details-type">{{$ctrl.componentInfo.typeCode}}</div>\n        </div>\n        <div data-ng-if="!$ctrl.componentInfo.visible"\n            class="se-component-item--visibility"\n            data-y-popover\n            data-trigger="\'hover\'"\n            data-placement="\'bottom\'"\n            data-template-url="\'componentInfoPopoverTemplate.html\'">\n            <span class="hyicon hyicon-unpowered"></span>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/componentSearchTemplate.html",'<div class="se-input-group se-component-search">\n    <div class="se-input-group--addon se-component-search--addon">\n        <span class="hyicon hyicon-search se-component-search--search-icon"></span>\n    </div>\n    <input type="text"\n        class="se-input-group--input se-component-search--input"\n        name="search-term"\n        data-ng-model="$ctrl.searchTerm"\n        data-ng-model-options="{debounce: 500}"\n        placeholder="{{$ctrl.placeholder | translate}}">\n    <div data-ng-show="$ctrl.showResetButton"\n        class="se-input-group--addon se-component-search--addon"\n        data-ng-click="$ctrl._resetSearchBox()">\n        <span class="glyphicon glyphicon-remove-sign se-component-search--reset-icon"></span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/componentTypeTemplate.html",'<div class="se-component-item">\n\n    <div class="smartEditComponent se-component-item--image"\n        data-smartedit-component-type="{{$ctrl.typeInfo.code}}">\n        <img class="se-component-item--image-element"\n            data-ng-src="{{$ctrl.imageRoot}}/images/component_default.png"\n            alt="{{$ctrl.typeInfo.i18nKey | translate}}"\n            title="{{$ctrl.typeInfo.i18nKey | translate}}" />\n    </div>\n\n    <div class="se-component-item--details-container">\n        <div class="se-component-item--details">\n            <div class="se-component-item--details-type"\n                title="{{$ctrl.typeInfo.i18nKey | translate}}"\n                data-translate="{{$ctrl.typeInfo.i18nKey}}"></div>\n        </div>\n    </div>\n\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/tabs/componentsTabTemplate.html",'<div class="se-component-menu--tabs-header">\n\n    <div class="se-component-menu--clone-on-drop checkbox">\n        <input type="checkbox"\n            id="component-clone-checkbox"\n            class="se-component-item--details"\n            name="clone-on-drop"\n            data-ng-model="$ctrl.cloneOnDrop"\n            data-ng-change="$ctrl.onComponentCloneOnDropChange()">\n        <label class="control-label se-component-menu--clone-on-drop--label"\n            for="component-clone-checkbox"\n            data-translate="se.cms.component.clone.on.drop.label" />\n    </div>\n\n    <div data-ng-if="$ctrl.hasMultipleContentCatalogs == true">\n        <y-select class="se-component-menu--select"\n            data-id="uuid"\n            data-ng-model="$ctrl.selectedCatalogVersionId"\n            data-on-change="$ctrl.onCatalogVersionChange"\n            data-fetch-strategy="$ctrl.catalogVersionsFetchStrategy"\n            data-item-template="::$ctrl.catalogVersionTemplate"\n            data-search-enabled="false" />\n    </div>\n\n</div>\n\n<component-search data-on-change="$ctrl.onSearchTermChanged(searchTerm)"\n    data-placeholder="se.cms.componentmenu.search.placeholder"></component-search>\n\n<div class="se-component-menu--item-container"\n    recompile-dom="$ctrl.resetComponentsList">\n    <y-infinite-scrolling data-ng-if="$ctrl.isActive"\n        class="se-component-menu--infinite-scroll"\n        data-drop-down-class="ySEComponents"\n        data-page-size="10"\n        data-mask="$ctrl.searchTerm"\n        data-fetch-page="$ctrl.loadComponentItems"\n        data-context="$ctrl">\n        <div class="se-component-menu--results se-component-menu--results__custom">\n            <component-item class="se-component-menu--item-wrap"\n                data-component-info="item"\n                data-clone-on-drop="$ctrl.cloneOnDrop"\n                data-ng-repeat="item in $ctrl.items track by item.uid"></component-item>\n\n        </div>\n    </y-infinite-scrolling>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/tabs/componentsTabWrapperTemplate.html",'<div>\n    <components-tab has-multiple-content-catalogs="model.componentsTab.hasMultipleContentCatalogs"\n        is-active="model.componentsTab.active"></components-tab>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/tabs/componentTypesTabTemplate.html",'<component-search data-on-change="$ctrl.onSearchTermChanged(searchTerm)"\n    data-placeholder="se.cms.componentmenu.search.type.placeholder"></component-search>\n<div class="se-component-menu--item-container">\n    <div class="se-component-menu--overflow">\n        <div class="se-component-menu--results se-component-menu--results__types">\n            <div class="se-component-menu--item-wrap"\n                data-ng-repeat="componentType in $ctrl.componentTypes | nameFilter:$ctrl.searchTerm track by $id(componentType)">\n                <component-type data-type-info="componentType"></component-type>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/tabs/componentTypesTabWrapperTemplate.html","<component-types-tab></component-types-tab>"),e.put("web/features/cmssmarteditContainer/components/cmsComponents/editorModal/componentEditor/componentEditorTemplate.html",'<generic-editor data-ng-if="compCtrl.isReady"\n    data-id="compCtrl.tabId"\n    data-smartedit-component-id="compCtrl.componentId"\n    data-smartedit-component-type="compCtrl.componentType"\n    data-structure="compCtrl.tabStructure"\n    data-structure-api="compCtrl.structureApi"\n    data-content="compCtrl.content"\n    data-submit="compCtrl.saveTab"\n    data-reset="compCtrl.resetTab"\n    data-custom-on-submit="compCtrl.onSubmit"\n    data-is-dirty="compCtrl.isDirtyTab"\n    data-get-api="compCtrl.getApi($api);">\n</generic-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/editorModal/componentEditor/componentEditorWrapperTemplate.html",'<y-message data-ng-if="$ctrl.showDisclaimer"\n    data-type="info"\n    data-message-id="VisibilityTab.DisplayComponentOffDisclaimer">\n    <message-description>\n        <translate>se.cms.editortabset.visibilitytab.disclaimer</translate>\n    </message-description>\n</y-message>\n\n<component-editor data-tab-id="$ctrl.tabId"\n    data-component-id="$ctrl.componentId"\n    data-component-type="$ctrl.componentType"\n    data-tab-structure="$ctrl.tabStructure"\n    data-structure-api="$ctrl.structureApi"\n    data-save-tab="$ctrl.saveTab"\n    data-reset-tab="$ctrl.resetTab"\n    data-cancel-tab="$ctrl.cancelTab"\n    data-component-info="$ctrl.componentInfo"\n    data-is-dirty-tab="$ctrl.isDirtyTab"\n    data-content="$ctrl.content">\n</component-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/editorModal/tabs/basicTabTemplate.html",'<basic-tab class=\'sm-tab-content\'\n    save-tab=\'onSave\'\n    reset-tab=\'onReset\'\n    cancel-tab="onCancel"\n    is-dirty-tab="isDirty"\n    data-tab-id="tabId"\n    data-component-info="model"\n    data-content="model.content"\n    component-id="model.componentUuid"\n    component-type="model.componentType">\n</basic-tab>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/restrictionEditor/componentRestrictionsEditorTemplate.html",'<restrictions-editor data-editable="true"\n    data-on-restrictions-changed="componentRestrictionsEditorCtrl.restrictionsResult($onlyOneRestrictionMustApply, $restrictions)"\n    data-get-restriction-types="componentRestrictionsEditorCtrl.getRestrictionTypes()"\n    data-get-supported-restriction-types="componentRestrictionsEditorCtrl.getSupportedRestrictionTypes()"\n    data-item="componentRestrictionsEditorCtrl.model"\n    data-restrictions="componentRestrictionsEditorCtrl.model.restrictions">\n</restrictions-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/restrictionEditor/componentRestrictionsEditorWrapperTemplate.html",'<component-restrictions-editor data-model="model"\n    data-editor="editor"></component-restrictions-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/restrictionEditor/pageRestrictionsEditorTemplate.html",'<y-message data-type="danger"\n    class="se-restrictions-editor--y-message--modal-adjusted"\n    ng-repeat="error in pageRestrictionsEditorCtrl.errors">\n    <message-description>\n        <translate>{{error.message}}</translate>\n    </message-description>\n</y-message>\n<div data-ng-if="pageRestrictionsEditorCtrl.restrictions.length > 1">\n    <page-restrictions-info-message />\n</div>\n\n<restrictions-editor data-editable="true"\n    data-on-restrictions-changed="pageRestrictionsEditorCtrl.restrictionsResult($onlyOneRestrictionMustApply, $restrictions)"\n    data-get-restriction-types="pageRestrictionsEditorCtrl.getRestrictionTypes()"\n    data-get-supported-restriction-types="pageRestrictionsEditorCtrl.getSupportedRestrictionTypes()"\n    data-item="pageRestrictionsEditorCtrl.model"\n    data-restrictions="pageRestrictionsEditorCtrl.model.restrictions">\n</restrictions-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/restrictionEditor/pageRestrictionsEditorWrapperTemplate.html",'<page-restrictions-editor data-page="model"></page-restrictions-editor>'),e.put("web/features/cmssmarteditContainer/components/editorTabset/editorTabsetTemplate.html",'<y-tabset data-model="model"\n    tabs-list="tabsList"\n    data-num-tabs-displayed="{{numTabsDisplayed}}"\n    tab-control="tabControl">\n</y-tabset>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/catalogAwareSelector/catalogAwareSelectorTemplate.html",'<div data-ng-if="ctrl.listIsEmpty()">\n    \x3c!--\n        It\'s important to add the type=button. Otherwise HTML 5 will default it to type=submit, causing the generic\n        editor to submit the form whenever the panel opens.\n    --\x3e\n    <button id="catalog-aware-selector-add-item"\n        type="button"\n        data-ng-if="ctrl.editable"\n        class="y-add-btn"\n        data-ng-click="ctrl.openEditingPanel()">\n        <span class="hyicon hyicon-add"></span>\n        <span translate="se.cms.catalogaware.newbutton.title"\n            translate-values="{catalogItemType: ctrl.catalogItemType}"></span>\n    </button>\n</div>\n\n<div data-ng-if="!ctrl.listIsEmpty()"\n    class="se-catalog-aware-selector__content">\n    <div class="se-catalog-aware-selector__content__btn-wrapper"\n        data-ng-if="ctrl.editable">\n        <button type="button"\n            class="btn btn-link se-catalog-aware-selector__content__btn"\n            data-ng-click="ctrl.openEditingPanel()">\n            {{\'se.cms.catalogaware.list.addmore\' | translate}}\n        </button>\n    </div>\n\n\n    <y-editable-list data-id="{{ctrl.id + \'_list\'}}"\n        data-item-template-url="ctrl.itemTemplate"\n        data-items="ctrl.itemsList"\n        data-on-change="ctrl.onListChange"\n        data-editable="ctrl.editable"\n        data-refresh="ctrl._refreshListWidget"\n        class="se-catalog-aware-selector__list">\n    </y-editable-list>\n</div>\n\n<se-item-selector-panel data-panel-title="ctrl.currentOptions.panelTitle"\n    data-items-selected="ctrl.model"\n    data-get-catalogs="ctrl.getCatalogs"\n    data-items-fetch-strategy="ctrl.itemsFetchStrategy"\n    data-item-template="ctrl.itemTemplate"\n    data-on-change="ctrl.onPanelChange"\n    data-show-panel="ctrl.showPanel"\n    data-hide-panel="ctrl.closePanel"\n    data-catalog-item-type="ctrl.catalogItemType"\n    data-max-num-items="ctrl.maxNumItems">\n</se-item-selector-panel>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/categorySelector/categorySelectorTemplate.html",'<se-catalog-aware-selector data-id="{{ctrl.id}}"\n    data-ng-model="ctrl.model[ctrl.qualifier]"\n    data-item-template="ctrl.categoryTemplate"\n    data-get-catalogs="ctrl.getCatalogs"\n    data-items-fetch-strategy="ctrl.itemsFetchStrategy"\n    data-catalog-item-type-key="se.cms.catalogaware.catalogitemtype.category"\n    data-editable="ctrl.editable"></se-catalog-aware-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/categorySelector/categoryTemplate.html",'<div class="row se-product-row">\n    <div ng-if="item !== undefined">\n        <div class="col-md-6 se-product-row__product se-nowrap-ellipsis"\n            title="{{item.name | l10n}}">{{item.name | l10n}}</div>\n        <div class="col-md-6 se-product-row__catalog se-nowrap-ellipsis"\n            title="{{item.catalogId}} - {{item.catalogVersion}}">{{item.catalogId}} - {{item.catalogVersion}}</div>\n    </div>\n    <div ng-if="node !== undefined">\n        <div class="col-md-6 se-product-row__product se-nowrap-ellipsis"\n            title="{{node.name | l10n}}">{{node.name | l10n}}</div>\n        <div class="col-md-5 se-product-row__catalog se-nowrap-ellipsis"\n            title="{{node.catalogId}} - {{node.catalogVersion}}">{{node.catalogId}} - {{node.catalogVersion}}</div>\n        <div class="col-md-1">\n            <y-drop-down-menu data-ng-if="ctrl.treeOptions.dragEnabled"\n                data-dropdown-items="ctrl.getDropdownItems()"\n                data-selected-item="this"\n                class="y-dropdown pull-right nav-node-editor-entry-item__more-menu" />\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/categorySelector/multiCategorySelectorTemplate.html",'<se-category-selector data-id="{{field.qualifier}}"\n    data-model="model"\n    data-qualifier="qualifier"\n    data-editable="field.editable"></se-category-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/itemSelectorPanel/catalogItemTemplate.html",'<span data-ng-bind-html="item.name | l10n"></span>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/itemSelectorPanel/itemSelectorPanelTemplate.html",'<y-slider-panel data-slider-panel-show="ctrl._internalShowPanel"\n    data-slider-panel-hide="ctrl._internalHidePanel"\n    data-slider-panel-configuration="ctrl.sliderConfiguration"\n    class="se-item-selector-panel">\n    <content recompile-dom="ctrl.resetSelector"\n        class="se-item-selector-panel__content">\n        \x3c!-- Show the dropdown only if there\'s more than one catalogs to choose from --\x3e\n        <div data-ng-if="ctrl.catalogs.length > 1"\n            class="se-item-selector-panel__content__item">\n            <label class="control-label">{{\'se.cms.catalogaware.panel.catalogs.label\' | translate}}</label>\n            <y-select data-id="se-catalog-selector-dropdown"\n                data-ng-model="ctrl.catalogInfo.catalogId"\n                data-fetch-strategy="ctrl.catalogSelectorFetchStrategy"\n                data-item-template="ctrl.catalogItemTemplate"\n                data-on-change="ctrl._onCatalogSelectorChange"\n                data-reset="ctrl.resetCatalogSelector"\n                class="se-item-selector-panel__content__catalogs__yselect">\n            </y-select>\n            <label data-ng-if="ctrl.catalogs.length !== 1">{{ctrl.catalogInfo.name | l10n}}</label>\n        </div>\n\n        <div class="se-item-selector-panel__content__item">\n            <label class="control-label">{{\'se.cms.catalogaware.panel.catalogsversion.label\' | translate}}</label>\n            <y-select data-id="se-catalog-version-selector-dropdown"\n                data-ng-model="ctrl.catalogInfo.catalogVersion"\n                data-fetch-strategy="ctrl.catalogVersionSelectorFetchStrategy"\n                data-on-change="ctrl._onCatalogVersionSelectorChange"\n                data-search-enabled=false\n                data-reset="ctrl.resetCatalogVersionSelector"\n                class="se-item-selector-panel__content__catalog-version__yselect">\n            </y-select>\n        </div>\n\n        \x3c!-- Show the multi-select--\x3e\n        <div class="se-item-selector-panel__content__item"\n            data-ng-show="ctrl.catalogInfo.catalogVersion">\n            <label class="control-label">{{ctrl.catalogItemType}}</label>\n            <y-select id="se-items-selector-dropdown"\n                multi-select="\'true\'"\n                controls="\'true\'"\n                ng-model="ctrl._internalItemsSelected"\n                on-change="ctrl._onItemsSelectorChange"\n                fetch-strategy="ctrl._internalItemsFetchStrategy"\n                reset="ctrl.resetItemsListSelector"\n                item-template="ctrl.itemTemplate"\n                is-read-only="!ctrl._isItemSelectorEnabled()">\n            </y-select>\n        </div>\n\n    </content>\n</y-slider-panel>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/productSelector/multiProductSelectorTemplate.html",'<se-product-selector data-id="{{field.qualifier}}"\n    data-model="model"\n    data-qualifier="qualifier"\n    data-editable="field.editable"></se-product-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/productSelector/productSelectorTemplate.html",'<se-catalog-aware-selector data-id="{{ctrl.id}}"\n    data-ng-model="ctrl.model[ctrl.qualifier]"\n    data-item-template="ctrl.productTemplate"\n    data-get-catalogs="ctrl.getCatalogs"\n    data-items-fetch-strategy="ctrl.itemsFetchStrategy"\n    data-catalog-item-type-key="se.cms.catalogaware.catalogitemtype.product"\n    data-max-num-items="ctrl.maxNumItems"></se-catalog-aware-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/productSelector/productTemplate.html",'<div class="row se-product-row">\n    <div ng-if="item !== undefined">\n        <div class="col-md-1">\n            <div class="se-default-product-img">\n                <div style="background-image: url(\'{{item.thumbnail.url}}\');"></div>\n            </div>\n        </div>\n        <div class="col-md-6 se-product-row__product se-nowrap-ellipsis"\n            title="{{item.name | l10n}}">{{item.name | l10n}}</div>\n        <div class="col-md-5 se-product-row__catalog">\n            <div class="se-nowrap-ellipsis"\n                title="{{item.catalogId}} - {{item.catalogVersion}}">{{item.catalogId}} - {{item.catalogVersion}}</div>\n        </div>\n    </div>\n    <div ng-if="node !== undefined">\n        <div class="col-md-1">\n            <div class="se-default-product-img">\n                <div style="background-image: url(\'{{node.thumbnail.url}}\');"></div>\n            </div>\n        </div>\n        <div class="col-md-5 se-product-row__product se-nowrap-ellipsis"\n            title="{{node.name | l10n}}">{{node.name | l10n}}</div>\n        <div class="col-md-5 se-product-row__catalog se-nowrap-ellipsis"\n            title="{{node.catalogId}} - {{node.catalogVersion}}">{{node.catalogId}} - {{node.catalogVersion}}</div>\n        <div class="col-md-1">\n            <y-drop-down-menu data-ng-if="ctrl.treeOptions.dragEnabled"\n                data-dropdown-items="ctrl.getDropdownItems()"\n                data-selected-item="this"\n                class="y-dropdown pull-right nav-node-editor-entry-item__more-menu" />\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/cmsLinkToSelect/cmsLinkToSelectTemplate.html",'<se-dropdown data-field="ctrl.field"\n    data-qualifier="ctrl.qualifier"\n    data-model="ctrl.model"\n    data-id="ctrl.id"></se-dropdown>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/cmsLinkToSelect/cmsLinkToSelectWrapperTemplate.html",'<cms-link-to-select data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-id="id"></cms-link-to-select>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/displayConditions/pageDisplayConditionWrapperTemplate.html",'<display-conditions-editor data-page="model"></display-conditions-editor>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/linkToggle/linkToggleTemplate.html",'<div class="se-link-toggle">\n\n    <div class="radio se-link-toggle__radio">\n        <input type="radio"\n            name="linktoggle"\n            id="external-link"\n            data-ng-model="$ctrl.model.linkToggle.external"\n            data-ng-value="true"\n            data-ng-change="$ctrl.emptyUrlLink()" />\n        <label class="control-label"\n            for="external-link">{{ \'se.editor.linkto.external.label\' | translate}}</label>\n    </div>\n    <div class="radio se-link-toggle__radio">\n        <input type="radio"\n            name="linktoggle"\n            id="internal-link"\n            data-ng-model="$ctrl.model.linkToggle.external"\n            data-ng-value="false"\n            data-ng-change="$ctrl.emptyUrlLink()" />\n        <label class="control-label"\n            for="internal-link">{{ \'se.editor.linkto.internal.label\' | translate}}</label>\n    </div>\n\n    <input type="text"\n        id="urlLink"\n        name="urlLink"\n        data-ng-model="$ctrl.model.linkToggle.urlLink"\n        data-ng-class="{\'has-error\':$ctrl.field.hasErrors}"\n        class="form-control" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/linkToggle/linkToggleWrapperTemplate.html",'<link-toggle data-field="field"\n    data-model="model"\n    data-editor="editor">\n</link-toggle>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/errorsList/seErrorsListTemplate.html",'<div class="field-errors">\n    <div data-ng-repeat="error in ctrl.getSubjectErrors()">{{ error.message | translate }}</div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/fileSelector/seFileSelectorTemplate.html",'<div class="seFileSelector {{::ctrl.customClass}}">\n    <label class=" btn__fileSelector"\n        data-ng-show="!ctrl.disabled">\n        <img class="img-upload"\n            data-ng-src="{{::ctrl.uploadIcon}}" />\n        <p class="label label__fileUpload label__fileUpload-link">{{::ctrl.labelI18nKey | translate}}</p>\n        <input type="file"\n            class="hide"\n            accept="{{ctrl.buildAcceptedFileTypesList()}}">\n    </label>\n    <label class=" btn__fileSelector"\n        data-ng-show="ctrl.disabled">\n        <img class="img-upload"\n            data-ng-src="{{::ctrl.uploadIcon}}" />\n        <p class="label label__fileUpload">{{::ctrl.labelI18nKey | translate}}</p>\n    </label>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesCondensedTemplate.html",'<a data-uib-popover-template="ctrl.contentUrl"\n    data-ng-click="$event.stopPropagation()"\n    data-popover-append-to-body="true"\n    data-popover-placement="bottom"\n    data-popover-trigger="\'mouseenter\'"\n    tabindex="0"\n    class="media-container-advanced-information">\n    <img class="media-advanced-information--image"\n        data-ng-src="{{ctrl.advInfoIcon}}"\n        alt="{{ctrl.i18nKeys.INFORMATION | translate}}"\n        title="{{ctrl.i18nKeys.INFORMATION | translate}}">\n    <p class="media-advanced-information--p">{{ctrl.i18nKeys.INFORMATION | translate}}</p>\n</a>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesContentTemplate.html",'<div class="se-adv-media-info">\n    <span class="se-adv-media-info--data advanced-information-description"\n        data-ng-if="ctrl.description">\n        {{ctrl.i18nKeys.DESCRIPTION | translate}}: {{ctrl.description}}\n    </span>\n    <span class="se-adv-media-info--data advanced-information-code">\n        {{ctrl.i18nKeys.CODE | translate}}: {{ctrl.code}}\n    </span>\n    <span class="se-adv-media-info--data advanced-information-alt-text"\n        data-ng-if="ctrl.altText">\n        {{ctrl.i18nKeys.ALT_TEXT | translate}}: {{ctrl.altText}}\n    </span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesTemplate.html",'<a data-uib-popover-template="ctrl.contentUrl"\n    data-ng-click="$event.stopPropagation()"\n    popover-append-to-body="true"\n    popover-placement="left"\n    popover-trigger="click"\n    tabindex="0"\n    class="media-advanced-information btn btn-subordinate">\n    {{ctrl.i18nKeys.INFORMATION | translate}}\n    <img class="media-selector--preview--icon" data-ng-src="{{ctrl.advInfoIcon}}">\n</a>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaContainerField/seMediaContainerFieldTemplate.html",'<div class="se-media-container-field">\n    <div class="row">\n        <se-media-format class="col-sm-6 col-md-4 col-lg-3 se-media-container-cell"\n            ng-repeat="option in ctrl.field.options"\n            data-media-uuid="ctrl.model[ctrl.qualifier][option.id]"\n            data-is-under-edit="ctrl.isFormatUnderEdit(option.id)"\n            data-media-format="option.id"\n            data-field="ctrl.field"\n            data-on-file-select="ctrl.fileSelected(files, option.id)"\n            data-on-delete="ctrl.imageDeleted(option.id)">\n        </se-media-format>\n\n    </div>\n    <se-media-upload-form data-ng-if="ctrl.image.file"\n        data-image="ctrl.image"\n        data-field="ctrl.field"\n        data-on-upload-callback="ctrl.imageUploaded(uuid)"\n        data-on-cancel-callback="ctrl.resetImage()"\n        data-on-select-callback="ctrl.fileSelected(files)">\n    </se-media-upload-form>\n    <se-errors-list data-errors="ctrl.fileErrors"></se-errors-list>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaField/seMediaFieldTemplate.html",'<div class="media-field">\n    <se-media-selector ng-if="!ctrl.image.file"\n        data-field="ctrl.field"\n        data-model="ctrl.model"\n        data-editor="ctrl.editor"\n        data-qualifier="ctrl.qualifier">\n    </se-media-selector>\n    <se-file-selector ng-if="ctrl.showFileSelector()"\n        data-label-i18n-key="ctrl.i18nKeys.UPLOAD_IMAGE_TO_LIBRARY"\n        data-accepted-file-types="ctrl.acceptedFileTypes"\n        data-on-file-select="ctrl.fileSelected(files)"\n        data-upload-icon="ctrl.uploadIconUrl"\n        data-image-root="ctrl.imageRoot"></se-file-selector>\n    <se-media-upload-form ng-if="ctrl.image.file"\n        data-image="ctrl.image"\n        data-field="ctrl.field"\n        data-on-upload-callback="ctrl.imageUploaded(uuid)"\n        data-on-cancel-callback="ctrl.resetImage()"\n        data-on-select-callback="ctrl.fileSelected(files)"></se-media-upload-form>\n    <se-errors-list ng-if="ctrl.fileErrors.length > 0"\n        data-errors="ctrl.fileErrors"></se-errors-list>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaFormat/seMediaFormatTemplate.html",'<div class="{{ctrl.mediaFormat}} se-media-format">\n    <div class="se-media-format-screentype">\n        {{ctrl.mediaFormatI18NKey | translate}}\n    </div>\n    \x3c!-- when the image is already uploaded --\x3e\n    <div class="media-present"\n        data-ng-if="ctrl.isMediaPreviewEnabled()">\n        <div class="media-present-preview">\n            <se-media-preview data-image-url="ctrl.media.url"></se-media-preview>\n            <div class="se-media-preview-image-wrapper  se-media-format-image-wrapper">\n                <img class="thumbnail thumbnail--image-preview"\n                    data-ng-src="{{ctrl.media.url}}">\n            </div>\n            <span class="media-preview-code se-media-format--code">{{ctrl.media.code}}</span>\n\n        </div>\n\n        <se-media-advanced-properties-condensed data-adv-info-icon="ctrl.advInfoIconUrl"\n            data-code="ctrl.media.code"\n            data-description="ctrl.media.description"\n            data-alt-text="ctrl.media.altText"></se-media-advanced-properties-condensed>\n\n        <se-file-selector data-custom-class=" \'media-format-present-replace\' "\n            data-label-i18n-key="ctrl.i18nKeys.REPLACE "\n            data-accepted-file-types="ctrl.acceptedFileTypes "\n            data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat}) "\n            data-upload-icon="ctrl.replaceIconUrl "\n            data-image-root="ctrl.imageRoot "></se-file-selector>\n\n        <a class="media-selector--preview__left remove-image btn btn-subordinate "\n            data-ng-click="ctrl.onDelete({format: ctrl.mediaFormat}) ">\n            <img class="media-selector--preview--icon "\n                data-ng-src="{{ctrl.deleteIconUrl}} "\n                alt="{{ctrl.i18nKeys.REMOVE | translate}} " />\n            <p class="media-selector--preview__left--p media-selector--preview__left--p__error ">{{ctrl.i18nKeys.REMOVE | translate}}</p>\n        </a>\n    </div>\n\n    \x3c!-- when the image is not yet uploaded --\x3e\n    <div class="media-absent "\n        data-ng-if="ctrl.isMediaEditEnabled()">\n        <se-file-selector data-label-i18n-key="ctrl.i18nKeys.UPLOAD "\n            data-accepted-file-types="ctrl.acceptedFileTypes "\n            data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat}) "\n            data-upload-icon="ctrl.uploadIconUrl "\n            data-image-root="ctrl.imageRoot "></se-file-selector>\n    </div>\n\n    \x3c!-- when the image is under edit --\x3e\n    <div data-ng-if="ctrl.isUnderEdit "\n        class="media-under-edit-parent">\n        <div class="media-is-under-edit ">\n            <se-file-selector data-label-i18n-key="ctrl.i18nKeys.UPLOAD "\n                data-disabled="true"\n                data-custom-class=" \'file-selector-disabled\' "\n                data-accepted-file-types="ctrl.acceptedFileTypes "\n                data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat}) "\n                data-upload-icon="ctrl.uploadIconDisabledUrl "\n                data-image-root="ctrl.imageRoot "></se-file-selector>\n        </div>\n        <span class="media-preview-under-edit ">{{ctrl.i18nKeys.UNDER_EDIT | translate}}</span>\n    </div>\n\n    <div class="error-input help-block "\n        data-ng-repeat="error in ctrl.getErrors() ">\n        {{error}}\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaPreview/seMediaPreviewContentTemplate.html",'<img class="preview-image"\n    data-ng-src="{{ctrl.imageUrl}}" />'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaPreview/seMediaPreviewTemplate.html",'<a data-uib-popover-template="ctrl.contentUrl"\n    data-ng-click="$event.stopPropagation()"\n    popover-append-to-body="true"\n    popover-placement="right"\n    popover-trigger="\'outsideClick\'"\n    tabindex="1"\n    class="media-preview">\n    <span class="hyicon hyicon-search media-preview-icon"></span>\n</a>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaSelector/seMediaPrinterTemplate.html",'<div class="media-selector--preview"\n    data-ng-if="selected">\n    <div class="row">\n        <span class="col-xs-6">\n            <se-media-preview data-image-url="item.url"></se-media-preview>{{printer.imagePreviewUrl}}\n            <div class="se-media-preview-image-wrapper">\n                <img class="thumbnail thumbnail--image-preview"\n                    data-ng-src="{{item.url}}">\n            </div>\n            <span class="media-preview-code se-media-printer--code">{{item.code}}</span>\n        </span>\n        <span class="col-xs-6 media-selector--preview--2">\n            <se-media-advanced-properties class="media-selector--preview__right"\n                data-code="item.code"\n                data-description="item.description"\n                data-alt-text="item.altText"\n                data-adv-info-icon="printer.advInfoIcon"></se-media-advanced-properties>\n\n            <a class="media-selector--preview__right replace-image btn btn-subordinate"\n                data-ng-click="ySelect.clear($select, $event)">\n                <p class="media-selector--preview__right--p"\n                    data-translate="se.upload.image.replace"></p>\n                <img class="media-selector--preview--icon"\n                    data-ng-src="{{printer.replaceIcon}}" />\n            </a>\n            <a class="media-selector--preview__right remove-image btn btn-subordinate"\n                data-ng-click="ySelect.clear($select, $event)">\n                <p class="media-selector--preview__right--p"\n                    data-translate="se.media.format.remove"></p>\n                <img class="media-selector--preview--icon"\n                    data-ng-src="{{printer.deleteIcon}}" />\n            </a>\n        </span>\n\n    </div>\n</div>\n<div class="ySEMediaSearch"\n    data-ng-if="!selected">\n    <div class="row ySEMediaSearch-row">\n        <div class="ySEMediaSearchName col-xs-8">{{item.code}}</div>\n        <div class="ySEMediaSearchImage col-xs-4">\n            <img data-ng-src="{{item.url}}"\n                class="pull-right">\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaSelector/seMediaPrinterWrapperTemplate.html",'<se-media-printer data-item="item"\n    data-selected="selected">'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaSelector/seMediaSelectorTemplate.html",'<div class="media-selector">\n    <y-select data-ng-disabled="!ctrl.field.editable"\n        data-id="{{ctrl.field.qualifier}}"\n        data-placeholder="ctrl.dropdownProperties.placeHolderI18nKey"\n        data-ng-model="ctrl.model[ctrl.qualifier]"\n        data-fetch-strategy="ctrl.fetchStrategy"\n        data-item-template="ctrl.mediaTemplate" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaUploadForm/seMediaUploadFieldTemplate.html",'<div class="form-control se-mu--fileinfo--wrapper">\n    <div class="row">\n        <div class="se-mu--fileinfo--wrapper-col1 col-xs-10">\n            <input type="text"\n                data-ng-class="{\'se-mu--fileinfo--field--input\': true, \'se-mu--fileinfo--field__error\': ctrl.error}"\n                class="se-mu--fileinfo--field--input"\n                name="{{ctrl.field}}"\n                data-ng-model="ctrl.model[ctrl.field]">\n        </div>\n\n        <div class="se-mu--fileinfo--wrapper-col2 col-xs-2">\n            <img ng-src="{{ctrl.assetsRoot}}/images/edit_icon.png"\n                class="se-mu--fileinfo--field--icon "\n                data-ng-if="ctrl.displayImage && !ctrl.error" />\n            <img ng-src="{{ctrl.assetsRoot}}/images/edit_icon_error.png"\n                class="se-mu--fileinfo--field--icon__error "\n                data-ng-if="ctrl.error" />\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaUploadForm/seMediaUploadFormTemplate.html",'<div class="se-media-upload-form">\n\n    <div class="container-fluid se-media-upload-form--toolbar">\n        <div class="navbar-left se-media-upload-form--toolbar--title">\n            <h4 class="se-media-upload-form--toolbar--title--h4">{{ctrl.i18nKeys.UPLOAD_IMAGE_TO_LIBRARY | translate}}</h4>\n        </div>\n        <div class="navbar-right se-media-upload-form--toolbar--buttons">\n            <div class="y-toolbar">\n                <div class="y-toolbar-cell">\n                    <button class="btn btn-subordinate btn-lg navbar-btn se-media-upload-btn__cancel"\n                        type="button"\n                        data-ng-click="ctrl.onCancel()">{{ctrl.i18nKeys.UPLOAD_IMAGE_CANCEL | translate}}</button>\n                </div>\n                <div class="y-toolbar-cell">\n                    <button class="btn btn-default btn-lg navbar-btn se-media-upload-btn__submit"\n                        type="button"\n                        data-ng-click="ctrl.onMediaUploadSubmit()">{{ctrl.i18nKeys.UPLOAD_IMAGE_SUBMIT | translate}}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="container-fluid se-media-upload--filename">\n        <div class="row">\n            <div class="se-media-upload--filename-col1 col-xs-10">\n                <img ng-src="{{assetsRoot}}/images/image_placeholder.png">\n                <div class="se-media-upload--fn--name">{{ctrl.getTruncatedName()}}</div>\n            </div>\n            <div class="se-media-upload--filename-col2 col-xs-2">\n                <se-file-selector data-label-i18n-key="ctrl.i18nKeys.UPLOAD_IMAGE_REPLACE"\n                    data-accepted-file-types="ctrl.acceptedFileTypes"\n                    data-on-file-select="ctrl.onSelectCallback({files: files})"></se-file-selector>\n\n            </div>\n        </div>\n    </div>\n    <form>\n        <div class="se-media-upload--fileinfo">\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-description"\n                    data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'description\'), \'se-media-upload--fileinfo--label\': true }">{{ctrl.i18nKeys.DESCRIPTION | translate}}</label>\n                <se-media-upload-field data-field="\'description\'"\n                    data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-description"\n                    data-ng-repeat="error in ctrl.getErrorsForField(\'description\')">{{error}}</span>\n            </div>\n\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-code"\n                    data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'code\')}">{{ctrl.i18nKeys.CODE | translate}}*</label>\n                <se-media-upload-field data-error="ctrl.hasError(\'code\')"\n                    data-field="\'code\'"\n                    data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-code"\n                    data-ng-repeat="error in ctrl.getErrorsForField(\'code\')">{{error}}</span>\n            </div>\n\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-alt-text"\n                    data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'altText\') }">{{ctrl.i18nKeys.ALT_TEXT | translate}}</label>\n                <se-media-upload-field data-field="\'altText\'"\n                    data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-alt-text "\n                    data-ng-repeat="error in ctrl.getErrorsForField(\'altText\')">{{error}}</span>\n            </div>\n        </div>\n\n    </form>\n    <span data-ng-if="ctrl.isUploading"\n        class="upload-image-in-progress">\n        \x3c!--<img src="static-resources/images/spinner.png"> {{ctrl.i18nKeys.UPLOADING | translate}}--\x3e\n    </span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/templates/mediaContainerTemplate.html",'<se-media-container-field data-field="field"\n    data-model="model"\n    data-editor="editor"\n    data-qualifier="qualifier"></se-media-container-field>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/templates/mediaTemplate.html",'<se-media-field data-field="field"\n    data-model="model"\n    data-editor="editor"\n    data-qualifier="qualifier"></se-media-field>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/components/breadcrumb/seBreadcrumbTemplate.html",'<div class="ySEBreadcrumb">\n    <div data-ng-repeat="node in bc.breadcrumb"\n        class="ySEBreadcrumbNode">\n        <div class="ySEBreadcrumbInfo"\n            data-ng-class="{\'ySEBreadcrumbInfo__last\':$last}">\n            <span class="yNodeLevel">{{node.formattedLevel | translate:node}}</span>\n            <span class="yNodeName">{{node.name}}</span>\n        </div>\n        <div class="ySEBreadcrumbDivider"\n            data-ng-if="$index < bc.breadcrumb.length - 1">\n            <img data-ng-src="{{bc.arrowIconUrl}}"\n                alt="">\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/components/navigationNodePicker/navigationNodePickerRenderTemplate.html",'<div class="col-sm-6 pull-right tree-node yNavigationPickerRenderer"\n    data-ng-click="ctrl.pick(this)">\n    <a data-translate="se.cms.navigationcomponent.management.node.selection.select.action"\n        class="btn btn-link yNavigationPickerRenderer__btn" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/components/navigationNodePicker/seNavigationNodePickerTemplate.html",'<div class="categoryTable">\n\n    <div class="tablehead clearfix hidden-xs ySENavigationTree-head">\n        <div data-translate="se.ytree.template.header.name"\n            class="col-md-offset-1 col-sm-5"></div>\n    </div>\n\n    <ytree data-node-uri="ctrl.nodeURI"\n        data-root-node-uid="ctrl.rootNodeUid"\n        data-node-template-url="ctrl.nodeTemplateUrl"\n        data-node-actions="ctrl.actions" />\n\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/components/navigationNodeSelector/seNavigationNodeSelectorTemplate.html",'<div data-ng-if="nav.isReady()">\n    <div data-ng-if="nav.model[nav.qualifier]"\n        class="se-navigation-mode">\n\n        <div class="se-navigation--node">\n            <se-breadcrumb class="se-navigation--node-breadcrumb"\n                data-node-uuid="nav.model[nav.qualifier]"\n                data-uri-context="nav.uriContext"></se-breadcrumb>\n            <div class="se-navigation--node-button">\n                <button class="btn btn-link btn-block se-navigation--button"\n                    data-ng-click="nav.remove($event)">\n                    <p data-translate="se.cms.navigationcomponent.management.node.selection.remove.action"></p>\n                </button>\n            </div>\n        </div>\n        <navigation-editor data-uri-context="nav.uriContext"\n            data-read-only="true"\n            data-root-node-uid="nav.nodeUid"></navigation-editor>\n    </div>\n    <div data-ng-if="!nav.model[nav.qualifier]">\n\n        <label data-translate="se.cms.navigationcomponent.management.node.selection.invite.action"></label>\n        <se-navigation-picker data-uri-context="nav.uriContext"\n            data-model="nav.model"\n            data-qualifier="nav.qualifier"></se-navigation-picker>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/templates/navigationNodeSelectorWrapperTemplate.html",'<se-navigation-node-selector data-field="field"\n    data-model="model"\n    data-qualifier="qualifier"></se-navigation-node-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/pageType/pageTypeEditorTemplate.html",'<div class="edit-page-basic-tab--header">\n    <div class="row">\n        <div class="col-md-6 form-group">\n            <label class="control-label"\n                data-translate="se.cms.pageinfo.page.type"></label>\n            <div class="form-readonly-text form-readonly-text__tight">{{model.typeCode}}</div>\n        </div>\n        <div class="col-md-6 form-group">\n            <label class="control-label"\n                data-translate="se.cms.pageinfo.page.template"></label>\n            <div class="form-readonly-text form-readonly-text__tight">{{model.template}}</div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/singleActiveCatalogAwareSelector/singleActiveCatalogAwareItemSelector/singleActiveCatalogAwareItemSelectorTemplate.html",'\x3c!-- Product catalog selector --\x3e\n<div id="product-catalog">\n    <label class="control-label"\n        data-ng-if="ctrl.catalogs.length === 1">{{ctrl.catalogName | l10n}}</label>\n    <se-dropdown data-ng-if="ctrl.catalogs.length > 1"\n        data-field="ctrl.productCatalogField"\n        data-qualifier="\'productCatalog\'"\n        data-model="ctrl.model"\n        data-id="se-catalog-selector-dropdown"></se-dropdown>\n</div>\n\n\x3c!-- Item selector --\x3e\n<div>\n    <label class="control-label">{{ctrl.mainDropDownI18nKey | translate}}</label>\n    <se-dropdown data-field="ctrl.field"\n        data-qualifier="ctrl.qualifier"\n        data-model="ctrl.model"\n        data-id="se-items-selector-dropdown"></se-dropdown>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/singleActiveCatalogAwareSelector/singleActiveCatalogAwareItemSelector/singleActiveCatalogAwareItemSelectorWrapperTemplate.html",'<single-active-catalog-aware-item-selector data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-id="id"\n    data-editor="editor"></single-active-catalog-aware-item-selector>'),e.put("web/features/cmssmarteditContainer/components/itemManagement/itemManagementTemplate.html",'<div>\n    <generic-editor data-id="$ctrl.editorId"\n        data-smartedit-component-id="$ctrl.itemId"\n        data-smartedit-component-type="$ctrl.componentType"\n        data-structure-api="$ctrl.structureApi"\n        data-content="$ctrl.item"\n        data-content-api="$ctrl.contentApi"\n        data-is-dirty="$ctrl.isDirtyInternal"\n        data-submit="$ctrl.submit"\n        data-uri-context="$ctrl.uriContext"\n        data-reset="$ctrl.reset">\n    </generic-editor>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationEditor/navigationEditorLinkTemplate.html",'<div class="nav-management-link-container">\n    <a class="nav-management-link-item__link se-catalog-version__link"\n        data-ng-href="#!/navigations/{{$ctrl.siteId}}/{{$ctrl.catalog.catalogId}}/{{$ctrl.catalogVersion.version}}"\n        data-translate="se.cms.cataloginfo.navigationmanagement"></a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationEditor/navigationEditorTemplate.html",'<div class="ySEAdd-Nav-button"\n    data-ng-if="!nav.readOnly">\n    <button class="y-add-btn"\n        data-ng-click="nav.actions.addTopLevelNode()">\n        <span class="hyicon hyicon-add"></span>\n        <span data-translate="se.cms.navigationmanagement.add.top.level.node"></span>\n    </button>\n</div>\n<div class="ySEAdd-Nav-tree categoryTable">\n\n    <div class="tablehead clearfix hidden-xs ySENavigationTree-head">\n        <div data-translate="se.ytree.template.header.name"\n            class="col-md-offset-1 col-sm-5"></div>\n        <div data-translate="se.ytree.template.header.type"\n            class="col-sm-6"></div>\n    </div>\n\n    <ytree data-node-uri="nav.nodeURI"\n        data-root-node-uid="nav.rootNodeUid"\n        data-node-template-url="nav.nodeTemplateUrl"\n        data-node-actions="nav.actions"\n        data-drag-options="nav.dragOptions"></ytree>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationEditor/navigationNodeRenderTemplate.html",'<div class="col-sm-1 pull-right dropdown tree-node ySENodeTemplate"\n    data-ng-show="!ctrl.isReadOnly()">\n    <y-drop-down-menu dropdown-items="ctrl.getDropdownItems()"\n        selected-item="this"\n        class="y-dropdown pull-right nav-node-editor-entry-item__more-menu" />\n</div>\n<div class="col-sm-5 pull-right tree-node ySENodeTemplateTree"> {{node.itemType || \'se.cms.navigationmanagement.navnode.objecttype.node\' | translate}} </div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationEditor/navigationTemplate.html",'<div class="ySmartEditToolbars"\n    style="position:absolute">\n    <div>\n        <toolbar data-css-class="ySmartEditTitleToolbar"\n            data-image-root="imageRoot"\n            data-toolbar-name="smartEditTitleToolbar"></toolbar>\n    </div>\n</div>\n\n<div class="navigationEditorWrapper"\n    ng-if="nav.readOnly !== undefined">\n    <div class="navEditorHeaderWrapper">\n        <h1 class="se-page-list__title"\n            data-translate=\'se.cms.navigationmanagement.title\'></h1>\n        <h4 class="se-page-list__sub-title">{{nav.catalogName | l10n}} - {{nav.catalogVersion}}</h4>\n    </div>\n    <navigation-editor data-uri-context="nav.uriContext"\n        data-read-only="nav.readOnly"></navigation-editor>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/entrySearchSelector/entrySearchSelectorDropdownTemplate.html",'<y-select data-ng-if="ctrl.initialized"\n    data-id="{{ctrl.field.qualifier}}"\n    data-placeholder="ctrl.dropdownProperties.placeHolderI18nKey"\n    data-controls="\'true\'"\n    data-ng-model="ctrl.model[ctrl.qualifier]"\n    data-fetch-strategy="ctrl.fetchStrategy"\n    data-reset="ctrl.reset"\n    data-item-template="ctrl.dropdownProperties.templateUrl" />'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/entrySearchSelector/entrySearchSelectorTemplate.html",'<entry-search-selector data-model="model"\n    data-id="editor.id"\n    data-qualifier="qualifier"\n    data-field="field"\n    data-editor="editor"></entry-search-selector>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/entrySearchSelector/handlerTemplates/itemSearchHandlerTemplate.html",'<div class="ySENavigationItemUid">{{item.id}}</div>\n<div class="ySENavigationItemTypeCode">{{item.typeCode}}</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/entrySearchSelector/handlerTemplates/mediaSearchHandlerTemplate.html",'<div class="ySENavigationMediaSearch">\n    <div class="row ySENavigationMediaSearch-row">\n        <div class="ySENavigationMediaSearchName"\n            title="{{item.code}}">{{item.code}}</div>\n        <div class="ySENavigationMediaSearchImage">\n            <img data-ng-src="{{item.downloadUrl}}"\n                class="pull-right">\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/navigationNodeEditorComponents/navigationNodeEditorAttributesTemplate.html",'<div class="ySENavigationNodeEditorAttributes">\n    <generic-editor data-ng-if="ctrl.isContentLoaded"\n        data-id="ctrl.tabId"\n        data-smartedit-component-id="ctrl.nodeUid"\n        data-smartedit-component-type="ctrl.typeCode"\n        data-structure="ctrl.tabStructure"\n        data-content-api="ctrl.contentApi"\n        data-content="ctrl.content"\n        data-uri-context="ctrl.uriContext"\n        data-submit="ctrl.submit"\n        data-reset="ctrl.reset"\n        data-is-dirty="ctrl.isDirty"\n        data-update-callback="ctrl.updateCallback"\n        data-get-api="ctrl.getApi($api);">\n    </generic-editor>\n\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/navigationNodeEditorComponents/navigationNodeEditorCreateEntryTemplate.html",'<div class="ySENavigationNodeEditorAddEntry">\n    <div data-ng-if="!ctrl.displayEditor"\n        class="ySEAdd-node-button">\n        <button id="navigation-node-editor-add-entry"\n            class="y-add-btn"\n            data-ng-click="ctrl.addNewEntry()">\n            <span class="hyicon hyicon-add"></span>\n            <span data-translate="se.cms.navigationmanagement.navnode.node.entry.add.new.message"></span>\n        </button>\n    </div>\n    <div data-ng-if="ctrl.displayEditor"\n        class="ySEEntryData">\n        <generic-editor data-id="ctrl.tabId"\n            data-smartedit-component-type="ctrl.entryTypeCode"\n            data-smartedit-component-id="ctrl.entry.id"\n            data-structure="ctrl.tabStructure"\n            data-uri-context="ctrl.uriContext"\n            data-content="ctrl.entry"\n            data-is-dirty="ctrl.isDirty"\n            data-is-valid="ctrl.isValid"\n            data-submit="ctrl.submit"\n            data-reset="ctrl.reset">\n        </generic-editor>\n\n\n        <div class="row">\n            <div class="ySEEntryData--buttons">\n                <button id="navigation-node-editor-save-entry"\n                    class="btn btn-default btn-lg"\n                    data-ng-click="ctrl.saveEntry()"\n                    data-ng-disabled="ctrl.isDisabled()">\n                    <span data-ng-if="ctrl.isNewEntry()"\n                        data-translate="se.cms.navigationmanagement.navnode.node.entry.button.add"></span>\n                    <span data-ng-if="!ctrl.isNewEntry()"\n                        data-translate="se.cms.navigationmanagement.navnode.node.entry.button.update"></span>\n                </button>\n                <button id="navigation-node-editor-cancel"\n                    class="btn btn-subordinate btn-lg"\n                    data-ng-click="ctrl.cancelEntry()"\n                    data-translate="se.cms.navigationmanagement.navnode.node.entry.button.cancel"></button>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/navigationNodeEditorComponents/navigationNodeEditorEntryListTemplate.html",'<div class="ySENavigationNodeEditorEntryList">\n    <div>\n        <label data-translate="se.cms.navigationmanagement.navnode.node.entries"></label>\n    </div>\n\n    <div data-ng-repeat="entry in ctrl.entries track by $index"\n        class="nav-node-editor-entry-item">\n        <div class="row-fluid">\n            <div class="col-xs-10 nav-node-editor-entry-item__text"\n                data-ng-click="ctrl.onSelect(entry)">\n                <div class="nav-node-editor-entry-item__name">\n                    <span class="ng-class:{\'error-input\':ctrl.isInError(entry)}">{{entry.title | l10n }}</span>\n                </div>\n                <div class="nav-node-editor-entry-item__type">\n                    <span class="ng-class:{\'error-input\':ctrl.isInError(entry)}">{{entry.itemType }}</span>\n                </div>\n            </div>\n            <div class="col-xs-2 nav-node-editor-entry-item__menu">\n                <y-drop-down-menu dropdown-items="ctrl.dropdownItems"\n                    selected-item="entry"\n                    class="y-dropdown pull-right nav-node-editor-entry-item__more-menu" />\n            </div>\n        </div>\n    </div>\n    <div data-ng-if="ctrl.entries.length === 0">{{\'se.cms.navigationmanagement.node.noentry.message\'| translate}}</div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/navigationNodeEditorModalTemplate.html",'<navigation-node-editor data-submit="modalController.submit"\n    data-reset="modalController.reset"\n    data-is-dirty="modalController.isDirty"\n    data-uri-context="modalController.uriContext"\n    data-node-uid="modalController.target.nodeUid"\n    data-parent-uid="modalController.target.parentUid"\n    data-entry-index="modalController.target.entryIndex">\n</navigation-node-editor>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationNodeEditor/navigationNodeEditorTemplate.html",'<div class="ySENavigationNodeEditor">\n    <se-breadcrumb data-node-uid="ctrl.nodeUid"\n        data-uri-context="ctrl.uriContext"\n        data-ng-if="ctrl.nodeUid"></se-breadcrumb>\n    <div class="row">\n        <navigation-node-editor-attributes data-submit="ctrl.submit"\n            data-reset="ctrl.reset"\n            data-is-dirty="ctrl.isDirty"\n            data-node-uid="ctrl.nodeUid"\n            data-parent-uid="ctrl.parentUid"\n            data-uri-context="ctrl.uriContext" />\n    </div>\n    <div class="ySENavigationDivider"></div>\n    <div class="row">\n        <div class="col-sm-6 ySENavigationNodeEditor__nodelist">\n            <navigation-node-editor-entry-list data-navigation-node-entry-data="ctrl.navigationNodeEntryData"\n                data-node-uid="ctrl.nodeUid"\n                data-entry-index="ctrl.entryIndex"\n                data-uri-context="ctrl.uriContext" />\n        </div>\n        <div class="col-sm-6 ySENavigationNodeEditor__nodedata">\n            <navigation-node-editor-create-entry data-navigation-node-entry-data="ctrl.navigationNodeEntryData"\n                data-uri-context="ctrl.uriContext" />\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pageRestrictions/pageRestrictionsMenu/pageRestrictionsMenuToolbarItemTemplate.html",'<div class="ySEVisibilityMenu"\n    data-ng-if="$ctrl.pageIsPrimary !== undefined">\n    <div class="ySEVisibilityMenu__header">\n        <restrictions-page-info data-page-id="$ctrl.pageId"\n            data-page-name="$ctrl.pageName"\n            data-page-type="$ctrl.pageType"\n            data-page-is-primary="$ctrl.pageIsPrimary"\n            data-associated-primary-page-name="$ctrl.associatedPrimaryPageName">\n        </restrictions-page-info>\n    </div>\n    <div class="ySEVisibilityMenu__restrictions"\n        data-ng-if="!$ctrl.pageIsPrimary">\n        <restrictions-table data-editable="false"\n            data-restrictions="$ctrl.restrictions"\n            data-restriction-criteria="$ctrl.restrictionCriteria"\n            data-custom-class="\'ySERestrictionMenu\'">\n        </restrictions-table>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pageRestrictions/pageRestrictionsMenu/pageRestrictionsMenuToolbarItemWrapperTemplate.html","<restrictions-menu-toolbar-item></restrictions-menu-toolbar-item>"),e.put("web/features/cmssmarteditContainer/components/pageRestrictions/pageRestrictionsMenu/pageRestrictionsPageInfoTemplate.html",'<div class="ySERestrictionsPageInfoContainer">\n    <div class="row">\n        <div class="col-xs-6">\n            <p class="ySERestrictonMenuLabel">{{ ctrl.pageNameLabelI18nKey | translate }}</p>\n            <h3 class="restrictionsPageName ySERestrictionsPageInfoContainer--page-name"\n                data-ng-bind="ctrl.pageName"></h3>\n        </div>\n        <div class="col-xs-6">\n            <p class="ySERestrictonMenuLabel">{{ ctrl.pageDisplayConditionsLabelI18nKey | translate }}</p>\n            <h3 class="restrictionsPageName ySERestrictionsPageInfoContainer--displayconditions-value">{{ ctrl.displayConditionsI18nKey[ctrl.getDisplayConditionsValue()].value | translate }}</h3>\n        </div>\n    </div>\n    <div ng-if="ctrl.pageIsPrimary">\n        <p class="ySERestrictonMenuLabel ySERestrictionsPageInfoContainer--displayconditions-description">{{ ctrl.displayConditionsI18nKey[ctrl.getDisplayConditionsValue()].description | translate }}</p>\n    </div>\n    <div class="row"\n        ng-if="!ctrl.pageIsPrimary">\n        <div class="col-xs-6">\n            <p class="ySERestrictonMenuLabel">{{ ctrl.associatedPrimaryPageLabelI18nKey | translate }}</p>\n            <h3 class="restrictionsPageName ySERestrictionsPageInfoContainer--associatedprimarypage-name"\n                data-ng-bind="ctrl.associatedPrimaryPageName"></h3>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pageRestrictions/restrictionsPageListIcon/restrictionsPageListIconTemplate.html",'<span>\n    <img class="restrictionPageListIcon"\n        data-ng-src="{{ctrl.getIconUrl()}}"\n        data-uib-tooltip-placement="bottom"\n        data-uib-tooltip="{{ ctrl.tooltipI18nKey | translate: ctrl.getInterpolationParameters() }}" />\n</span>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/components/newPageDisplayCondition/newPageDisplayConditionTemplate.html",'<div data-ng-show="$ctrl.ready === true"\n    class="ySENewPageDisplayCondition">\n\n    <div class="page-condition-selector-wrapper form-group">\n\n        <label for="page-condition-selector-id"\n            class="control-label">{{ \'se.cms.page.condition.selection.label\' | translate }}</label>\n        <ui-select id="page-condition-selector-id"\n            data-ng-model="$ctrl.conditionSelected"\n            class="form-control"\n            search-enabled="false"\n            theme="select2"\n            data-dropdown-auto-width="false"\n            data-ng-change="$ctrl.dataChanged()">\n            <ui-select-match id="select-type"\n                class="ySEPageRestr-picker--select__match">\n                {{ $ctrl.conditionSelected.label | translate }}\n            </ui-select-match>\n            <ui-select-choices repeat="c in $ctrl.conditions">\n                {{ c.label | translate }}\n            </ui-select-choices>\n        </ui-select>\n        <span class="help-inline">\n            <span class="help-block-inline">{{ $ctrl.conditionSelected.description | translate }}</span>\n        </span>\n    </div>\n\n    <div data-ng-if="$ctrl.showPrimarySelector()"\n        class="page-condition-primary-selector-wrapper form-group">\n        <label for="page-condition-primary-selector-id"\n            class="control-label">{{ \'se.cms.page.condition.primary.association.label\' | translate }}</label>\n        <ui-select id="page-condition-primary-selector-id"\n            data-ng-model="$ctrl.primarySelected"\n            class="form-control"\n            search-enabled="true"\n            theme="select2"\n            data-dropdown-auto-width="false"\n            data-ng-change="$ctrl.dataChanged()">\n            <ui-select-match id="select-type"\n                class="ySEPageRestr-picker--select__match">\n                {{ $ctrl.primarySelected.name }}\n            </ui-select-match>\n            <ui-select-choices repeat="page in $ctrl.primaryPageChoices | filter:$select.search">\n                {{ page.name }}\n            </ui-select-choices>\n        </ui-select>\n        <span data-ng-show="$ctrl.primarySelected.label"\n            class="help-inline">\n            <span class="help-block-inline">{{ \'se.cms.page.label.label\' | translate }}: {{ $ctrl.primarySelected.label }}</span>\n        </span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/components/selectPageTemplate/selectPageTemplateTemplate.html",'<div class="page-type-step-template">\n    <div class="se-input-group page-type-step-template-list-search">\n        <span class="se-input-group--addon">\n            <span class="hyicon hyicon-search ySEPage-list-search-icon"></span>\n        </span>\n        <input type="text"\n            class="se-input-group--input ySEPage-list-search-input"\n            placeholder="{{ \'se.cms.pagewizard.templatestep.searchplaceholder\' | translate }}"\n            data-ng-model="$ctrl.searchString"\n            name="query" />\n        <span data-ng-if="$ctrl.searchString"\n            class="se-input-group--addon ySESearchIcon"\n            data-ng-click="$ctrl.clearSearch()">\n            <span class="glyphicon glyphicon-remove-sign"></span>\n        </span>\n    </div>\n    <div class="page-wizard-list">\n        <div data-ng-repeat="template in $ctrl.pageTemplates | templateNameFilter:$ctrl.searchString track by $id(template)"\n            data-ng-class="{ \'page-type-step-template__item__selected\': $ctrl.isSelected(template)}"\n            class="page-type-step-template__item"\n            data-ng-click="$ctrl.templateSelected(template)">\n            <span class="hyicon hyicon-checked page-type-step-template__item__icon"></span>\n            <div class="page-type-step-template__item--info">\n                <div class="page-type-step-template__item--info__title">{{ template.name }}</div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/components/selectPageType/selectPageTypeTemplate.html",'<div class="page-type-step-template">\n    <div class="page-type-step-template__text ySEText">{{ \'se.cms.addpagewizard.pagetype.description\' | translate}}</div>\n    <div data-ng-repeat="pageType in $ctrl.pageTypes"\n        data-ng-class="{ \'page-type-step-template__item__selected\': $ctrl.isSelected(pageType)}"\n        class="page-type-step-template__item"\n        data-ng-click="$ctrl.selectType(pageType)">\n        <span class="hyicon hyicon-checked page-type-step-template__item__icon"></span>\n        <div class="page-type-step-template__item--info">\n            <div class="page-type-step-template__item--info__title">{{ pageType.name | l10n }}</div>\n            <div class="page-type-step-template__item--info__description">{{ pageType.description | l10n }}</div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/components/selectTargetCatalogVersion/selectTargetCatalogVersionTemplate.html",'<div class="target-catalog-version-selector-wrapper form-group">\n    <label for="target-catalog-version-selector-id"\n        class="control-label"\n        data-translate="se.cms.clonepagewizard.options.targetcatalogversion.label"></label>\n\n    <y-select data-ng-if="$ctrl.catalogVersions.length"\n        data-id="se-catalog-version-selector-dropdown"\n        data-ng-model="$ctrl.selectedCatalogVersion"\n        data-fetch-strategy="$ctrl.catalogVersionSelectorFetchStrategy"\n        data-on-change="$ctrl.onSelectionChanged"\n        data-search-enabled="false"\n        data-get-api="$ctrl.setYSelectAPI($api)">\n    </y-select>\n\n    <div data-ng-if="$ctrl.catalogVersionContainsPageWithSameLabel">\n        <span class="warning-input help-block"\n            data-translate="se.cms.clonepagewizard.options.targetcatalogversion.label.exists.message"></span>\n    </div>\n    <div data-ng-if="$ctrl.pageAlreadyExists()">\n        <span class="warning-input help-block"\n            data-translate="se.cms.clonepagewizard.options.targetcatalogversion.pagetype.exists.message"></span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageDisplayConditionStepTemplate.html",'<new-page-display-condition data-page-type-code="addPageWizardCtl.getPageTypeCode()"\n    data-uri-context="addPageWizardCtl.uriContext"\n    data-result-fn="addPageWizardCtl.variationResult">\n</new-page-display-condition>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageInfoStepTemplate.html",'<span data-ng-if="addPageWizardCtl.isPageInfoActive()">\n    <generic-editor data-structure="addPageWizardCtl.getPageInfoStructure()"\n        data-content="addPageWizardCtl.getPageInfo()"\n        data-submit="addPageWizardCtl.callbacks.savePageInfo"\n        data-reset="addPageWizardCtl.callbacks.resetPageInfo"\n        data-is-dirty="addPageWizardCtl.callbacks.isDirtyPageInfo"\n        data-is-valid="addPageWizardCtl.callbacks.isValidPageInfo">\n    </generic-editor>\n</span>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageRestrictionsStepTemplate.html",'<span data-ng-if="addPageWizardCtl.isRestrictionsActive()">\n\n    <div data-ng-if="addPageWizardCtl.getPageInfo().restrictions.length > 1">\n        <page-restrictions-info-message />\n    </div>\n\n    <restrictions-editor data-editable="true"\n        data-save-fn="addPageWizardCtl.restrictionsEditorFunctionBindings.save"\n        data-reset-fn="addPageWizardCtl.restrictionsEditorFunctionBindings.reset"\n        data-cancel-fn="addPageWizardCtl.restrictionsEditorFunctionBindings.cancel"\n        data-is-dirty-fn="addPageWizardCtl.restrictionsEditorFunctionBindings.isDirty"\n        data-on-restrictions-changed="addPageWizardCtl.restrictionsResult($onlyOneRestrictionMustApply, $restrictions)"\n        data-get-restriction-types="addPageWizardCtl.getRestrictionTypes()"\n        data-get-supported-restriction-types="addPageWizardCtl.getSupportedRestrictionTypes()"\n        data-item="addPageWizardCtl.getPageInfo()">\n    </restrictions-editor>\n</span>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageTemplateStepTemplate.html",'<select-page-template data-uri-context="addPageWizardCtl.uriContext"\n    data-page-type-code="addPageWizardCtl.getPageTypeCode()"\n    data-on-template-selected="addPageWizardCtl.templateSelected">\n</select-page-template>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageTypeStepTemplate.html",'<select-page-type data-on-type-selected="addPageWizardCtl.typeSelected">\n</select-page-type>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/components/clonePageInfo/componentCloneInfoTemplate.html",'<y-message data-ng-if="$ctrl.catalogVersionContainsPageWithSameTypeCode"\n    data-type="warning">\n    <message-description translate="se.cms.clonepagewizard.pageinfo.targetcatalogversion.pagetype.exists.message"\n        translate-value-type-code="{{$ctrl.pageTypeCode}}">\n    </message-description>\n</y-message>\n\n<generic-editor data-structure="$ctrl.structure"\n    data-content="$ctrl.content"\n    data-submit="$ctrl.submit"\n    data-reset="$ctrl.reset"\n    data-is-dirty="$ctrl.isDirty"\n    data-is-valid="$ctrl.isValid"\n    data-get-api="$ctrl.setGenericEditorApi($api)">\n</generic-editor>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/components/clonePageOptions/componentCloneOptionTemplate.html",'<label for="components-cloned-selector-id"\n    class="control-label"\n    data-translate="se.cms.clonepagewizard.options.title" />\n<y-help data-title="$ctrl.helpTitle"\n    data-template="$ctrl.helpTemplate"></y-help>\n<div id="components-cloned-selector-id">\n    <div class="radio">\n        <input class="components-cloned-option-id"\n            type="radio"\n            name="componentsclone"\n            id="reference-cloning"\n            ng-model="$ctrl.componentInSlotOption"\n            ng-click="$ctrl.updateComponentInSlotOption($ctrl.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING)"\n            ng-value="$ctrl.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING">\n        <label for="reference-cloning"\n            data-translate="se.cms.clonepagewizard.options.existing" />\n    </div>\n    <div class="radio">\n        <input class="components-cloned-option-id"\n            type="radio"\n            id="deep-cloning"\n            name="componentsclone"\n            ng-model="$ctrl.componentInSlotOption"\n            ng-click="$ctrl.updateComponentInSlotOption($ctrl.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE)"\n            ng-value="$ctrl.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE">\n        <label for="deep-cloning"\n            data-translate="se.cms.clonepagewizard.options.copies" />\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/templates/clonePageInfoStepTemplate.html",'<component-clone-info-form data-ng-if="clonePageWizardCtrl.isPageInfoActive()"\n    data-structure="clonePageWizardCtrl.getPageInfoStructure()"\n    data-content="clonePageWizardCtrl.getPageInfo()"\n    data-submit="clonePageWizardCtrl.callbacks.savePageInfo"\n    data-reset="clonePageWizardCtrl.callbacks.resetPageInfo"\n    data-is-dirty="clonePageWizardCtrl.callbacks.isDirtyPageInfo"\n    data-is-valid="clonePageWizardCtrl.callbacks.isValidPageInfo"\n    data-page-template="clonePageWizardCtrl.getPageTemplate()"\n    data-page-type-code="clonePageWizardCtrl.getPageTypeCode()"\n    data-uri-context="clonePageWizardCtrl.uriContext"\n    data-target-catalog-version="clonePageWizardCtrl.getTargetCatalogVersion()">\n</component-clone-info-form>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/templates/clonePageOptionsStepTemplate.html",'<select-target-catalog-version data-ng-if="clonePageWizardCtrl.isBasePageInfoAvailable()"\n    data-page-type-code="clonePageWizardCtrl.getPageTypeCode()"\n    data-page-label="clonePageWizardCtrl.getPageLabel()"\n    data-uri-context="clonePageWizardCtrl.uriContext"\n    data-base-page-info="clonePageWizardCtrl.getBasePageInfo()"\n    data-on-target-catalog-version-selected="clonePageWizardCtrl.onTargetCatalogVersionSelected($catalogVersion)">\n</select-target-catalog-version>\n\n<new-page-display-condition data-page-type-code="clonePageWizardCtrl.getPageTypeCode()"\n    data-uri-context="clonePageWizardCtrl.uriContext"\n    data-result-fn="clonePageWizardCtrl.variationResult"\n    data-initial-condition-selected="\'page.displaycondition.variation\'"\n    data-initial-primary-page-selected="clonePageWizardCtrl.getPageLabel()"\n    data-target-catalog-version="clonePageWizardCtrl.getTargetCatalogVersion()">\n</new-page-display-condition>\n\n<component-clone-option-form data-on-selection-change="clonePageWizardCtrl.triggerUpdateCloneOptionResult($cloneOptionData)"></component-clone-option-form>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/templates/clonePageRestrictionsStepTemplate.html",'<span data-ng-if="clonePageWizardCtrl.isRestrictionsActive()">\n    <div data-ng-if="clonePageWizardCtrl.getPageRestrictions().length > 1">\n        <page-restrictions-info-message />\n    </div>\n\n    <restrictions-editor data-editable="true"\n        data-save-fn="clonePageWizardCtrl.restrictionsEditorFunctionBindings.save"\n        data-reset-fn="clonePageWizardCtrl.restrictionsEditorFunctionBindings.reset"\n        data-cancel-fn="clonePageWizardCtrl.restrictionsEditorFunctionBindings.cancel"\n        data-is-dirty-fn="clonePageWizardCtrl.restrictionsEditorFunctionBindings.isDirty"\n        data-on-restrictions-changed="clonePageWizardCtrl.restrictionsResult($onlyOneRestrictionMustApply, $restrictions)"\n        data-get-restriction-types="clonePageWizardCtrl.getRestrictionTypes()"\n        data-get-supported-restriction-types="clonePageWizardCtrl.getSupportedRestrictionTypes()"\n        data-item="clonePageWizardCtrl.getBasePageInfo()"\n        data-restrictions="clonePageWizardCtrl.getBasePageInfo().restrictions">\n    </restrictions-editor>\n</span>'),e.put("web/features/cmssmarteditContainer/components/pages/deletePageMenu/deletePageToolbarItemTemplate.html",'<div class="toolbar-action"\n    data-ng-if="$ctrl.ready"\n    data-item-key="{{ $ctrl.toolbarItem.key }}">\n    <button type="button"\n        class="btn btn-default toolbar-action--button"\n        data-ng-disabled="!$ctrl.isDeletePageEnabled"\n        data-ng-class="{\'toolbar-action__disabled\': !$ctrl.isDeletePageEnabled}"\n        data-ng-click="$ctrl.isDeletePageEnabled && $ctrl.onClickOnDeletePage()">\n        <svg class="toolbar-delete-action__icon"\n            xmlns="http://www.w3.org/2000/svg"\n            viewBox="0 0 26 31">\n            <path d="M303.807,1015.01h-4.366v-3.47a0.54,0.54,0,0,0-.559-0.53,0.085,0.085,0,0,0-.06.02,0.076,0.076,0,0,0-.04-0.02h-13.64a0.531,0.531,0,0,0-.549.53v3.47h-4.377a1.171,1.171,0,0,0-1.208,1.16v4.89h2.049v19.79a1.155,1.155,0,0,0,1.2,1.15h19.514a1.163,1.163,0,0,0,1.208-1.15v-19.79h2.038v-4.89A1.171,1.171,0,0,0,303.807,1015.01Zm-17.116-1.95h10.642v1.95H286.691v-1.95Zm14.178,26.79a0.083,0.083,0,0,1-.1.09H283.255a0.083,0.083,0,0,1-.1-0.09v-18.79h17.714v18.79Zm2.038-20.84h-21.79v-1.84a0.093,0.093,0,0,1,.1-0.11h21.591a0.093,0.093,0,0,1,.1.11v1.84h0Zm-6.883,4.29h2.108v14.71h-2.108V1023.3Zm-5.112,0h2.108v14.71h-2.108V1023.3Zm-5,0h2.108v14.71h-2.108V1023.3Z"\n                transform="translate(-279 -1011)" />\n        </svg>\n        <div class="toolbar-action--button--txt"\n            data-translate="se.cms.actionitem.page.trash"></div>\n    </button>\n    <div class="toolbar-delete-action__popover"\n        data-ng-if="!$ctrl.isDeletePageEnabled"\n        data-y-popover\n        data-placement="\'bottom\'"\n        data-template-url="\'deletePageItemTooltipTemplate.html\'"\n        data-trigger="\'hover\'">\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/deletePageMenu/deletePageToolbarItemWrapperTemplate.html",'<delete-page-toolbar-item data-toolbar-item="item"></delete-page-toolbar-item>'),e.put("web/features/cmssmarteditContainer/components/pages/displayConditions/displayConditionsEditor/displayConditionsEditorTemplate.html",'<div>\n    <display-conditions-page-info data-page-name="$ctrl.getPageName()"\n        data-page-type="$ctrl.getPageType()"\n        data-is-primary="$ctrl.isPagePrimary()"></display-conditions-page-info>\n    <div data-ng-if="$ctrl.isPagePrimary()">\n        <display-conditions-page-variations data-variations="$ctrl.getVariations()"></display-conditions-page-variations>\n    </div>\n    <div data-ng-if="!$ctrl.isPagePrimary()">\n        <display-conditions-primary-page data-read-only="$ctrl.getIsAssociatedPrimaryReadOnly()"\n            data-associated-primary-page="$ctrl.getAssociatedPrimaryPage()"\n            data-all-primary-pages="$ctrl.getPrimaryPages()"\n            data-on-primary-page-select="$ctrl.onPrimaryPageSelect(primaryPage)"></display-conditions-primary-page>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/displayConditions/displayConditionsPageInfo/displayConditionsPageInfoTemplate.html",'<div class="ySEDisplayConditionsPageInfo">\n    <div class="row">\n        <div class="col-md-6 form-group">\n            <label class="control-label"\n                data-translate="{{ $ctrl.pageNameI18nKey }}"></label>\n            <div class="form-readonly-text form-readonly-text__tight dc-page-name"\n                data-ng-bind="$ctrl.pageName"></div>\n        </div>\n        <div class="col-md-6 form-group">\n            <label class="control-label"\n                data-translate="{{ $ctrl.pageTypeI18nKey }}"></label>\n            <div class="form-readonly-text form-readonly-text__tight dc-page-type"\n                data-ng-bind="$ctrl.pageType"></div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label class="control-label">\n            <span data-translate="{{ $ctrl.displayConditionLabelI18nKey }}"></span>\n            <y-help data-title="pageSync.helpTitle"\n                data-template="$ctrl.helpTemplate"></y-help>\n        </label>\n        <p class="form-readonly-text form-readonly-text__tight dc-page-display-condition">{{ $ctrl.getPageDisplayConditionI18nKey() | translate }}</p>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/displayConditions/displayConditionsPageVariations/displayConditionsPageVariationsTemplate.html",'<div class="form-group dc-page-variations">\n    <label class="control-label control-label__margin">\n        <span>{{ $ctrl.variationPagesTitleI18nKey | translate }}</span>\n        <y-help data-ng-if="$ctrl.variations.length > 0"\n            data-template="$ctrl.renderers.helpTemplate()">\n        </y-help>\n    </label>\n    <div data-ng-if="$ctrl.variations.length === 0"\n        class="dc-no-variations form-readonly-text form-readonly-text__tight form-readonly-text__inline">{{ $ctrl.noVariationsI18nKey | translate }}</div>\n    <div data-ng-if="$ctrl.variations.length > 0">\n        <client-paged-list data-items="$ctrl.variations"\n            data-keys="$ctrl.keys"\n            data-renderers="$ctrl.renderers"\n            data-items-per-page="$ctrl.itemsPerPage"\n            class="dc-page-variations-list">\n        </client-paged-list>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/displayConditions/displayConditionsPrimaryPage/displayConditionsPrimaryPageTemplate.html",'<div class="form-group form-group__inline">\n    <label class="control-label control-label__margin">{{ $ctrl.associatedPrimaryPageLabelI18nKey | translate }}</label>\n    <div data-ng-if="$ctrl.readOnly"\n        class="dc-associated-primary-page form-readonly-text form-readonly-text__tight">{{ ::$ctrl.associatedPrimaryPage.name }}\n    </div>\n    <div data-ng-if="!$ctrl.readOnly">\n        <ui-select id="display-conditions-primary-association-selector"\n            data-ng-model="$ctrl.associatedPrimaryPage"\n            class="form-control"\n            search-enabled="true"\n            theme="select2"\n            data-dropdown-auto-width="false"\n            data-ng-change="$ctrl.triggerOnPrimaryPageSelect()">\n            <ui-select-match id="select-type"\n                class="ySEPageRestr-picker--select__match">\n                {{ $ctrl.associatedPrimaryPage.name }}\n            </ui-select-match>\n            <ui-select-choices repeat="primaryPage in $ctrl.allPrimaryPages | filter:$select.search">\n                {{ primaryPage.name }}\n            </ui-select-choices>\n        </ui-select>\n        <span data-ng-show="$ctrl.associatedPrimaryPage.name"\n            class="help-inline">\n            <span class="help-block-inline">{{ \'se.cms.page.label.label\' | translate }}: {{ $ctrl.associatedPrimaryPage.label }}</span>\n        </span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageInfoMenu/pageInfo/pageInfoContainerTemplate.html",'<div class="ySEPageInfoMenu__header">\n    <page-info-header data-page-type-code="$ctrl.pageTypeCode"\n        data-page-template="$ctrl.pageTemplate"></page-info-header>\n</div>\n<div class="ySEPageInfoMenu__content">\n    <page-info-details data-on-edit-click="$ctrl.onEditClick()"\n        data-is-edit-page-disabled="$ctrl.isEditPageDisabled"\n        data-page-uid="$ctrl.pageUid"\n        data-page-type-code="$ctrl.pageTypeCode"\n        data-page-structure="$ctrl.pageStructure"\n        data-page-content="$ctrl.pageContent"></page-info-details>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageInfoMenu/pageInfo/pageInfoDetailsTemplate.html",'<div class="ySEPageInfoStaticInfo">\n    <div class="ySEPageInfoStaticInfoContainer">\n        <p class="ySEHeaderText">{{\'se.cms.pageinfo.information.title\' | translate}}</p>\n        <button class="btn btn-link pull-right ySEPageInfo__edit-btn"\n            data-ng-disabled="$ctrl.isEditPageDisabled"\n            has-operation-permission="\'se.edit.page.link\'"\n            data-ng-click="$ctrl.onEditClick()">\n            {{\'se.cms.contextmenu.title.edit\' | translate}}\n        </button>\n    </div>\n    <div data-ng-if="$ctrl.pageStructure"\n        class="ySEPageInfoEditInfoContainer">\n        <generic-editor data-smartedit-component-id="$ctrl.pageUid"\n            data-smartedit-component-type="$ctrl.pageTypeCode"\n            data-structure="$ctrl.pageStructure"\n            data-content="$ctrl.pageContent">\n        </generic-editor>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageInfoMenu/pageInfo/pageInfoHeaderTemplate.html",'<div class="ySEPageInfoHeaderContainer">\n    <div class="row">\n        <div class="col-xs-6">\n            <p>{{"se.cms.pageinfo.page.type" | translate}}</p>\n            <h3 class="page-type-code">{{$ctrl.pageTypeCode}}</h3>\n        </div>\n        <div class="col-xs-6">\n            <p>{{"se.cms.pageinfo.page.template" | translate}}</p>\n            <h3 class="page-template">{{$ctrl.pageTemplate}}</h3>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageInfoMenu/pageInfoMenuToolbarItemTemplate.html",'<div class="ySEPageInfoMenu">\n    <page-info-container></page-info-container>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageInfoMenu/pageInfoMenuToolbarItemWrapperTemplate.html","<page-info-menu-toolbar-item></page-info-menu-toolbar-item>"),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/clonePageItem/clonePageItemTemplate.html",'<a class="se-dropdown-item"\n    data-ng-click="$ctrl.onClickOnClone()">\n    <span class="se-dropdown-item--label"\n        data-translate="se.cms.actionitem.page.clone" />\n</a>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/deletePageItem/deletePageItemTemplate.html",'<a class="se-dropdown-item se-dropdown-item--delete"\n    ng-class="{\'se-dropdown-item__disabled\': !$ctrl.isDeletePageEnabled}"\n    data-ng-click="$ctrl.isDeletePageEnabled && $ctrl.onClickOnDeletePage()">\n    <span class="se-dropdown-item--label"\n        data-translate="se.cms.actionitem.page.trash" />\n\n    <div class="se-dropdown-item--delete-page-popover"\n        data-ng-if="!$ctrl.isDeletePageEnabled"\n        data-y-popover\n        data-placement="\'left\'"\n        data-template-url="\'deletePageItemTooltipTemplate.html\'"\n        data-trigger="\'hover\'">\n    </div>\n</a>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/deletePageItem/deletePageItemTooltipTemplate.html",'<div class="popover-tooltip">\n    <span data-translate="se.cms.tooltip.movetotrash" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/editPageItem/editPageItemTemplate.html",'<a class="se-dropdown-item"\n    data-ng-click="$ctrl.onClickOnEdit()">\n    <span class="se-dropdown-item--label"\n        data-translate="se.cms.actionitem.page.edit" />\n</a>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/syncPageItem/syncPageItemTemplate.html",'<a class="se-dropdown-item"\n    data-ng-click="$ctrl.onClickOnSync()">\n    <span class="se-dropdown-item--label"\n        data-translate="se.cms.actionitem.page.sync" />\n</a>'),e.put("web/features/cmssmarteditContainer/components/pages/pageList/pageListLinkDirectiveTemplate.html",'<div class="page-list-link-container">\n    <a class="page-list-link-item__link se-catalog-version__link"\n        data-ng-href="#!/pages/{{$ctrl.siteId}}/{{$ctrl.catalog.catalogId}}/{{$ctrl.catalogVersion.version}}"\n        data-translate="se.cms.cataloginfo.pagelist"></a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageList/pageListLinkTemplate.html",'<page-list-link data-catalog="$ctrl.catalog"\n    data-catalog-version="$ctrl.catalogVersion"\n    data-site-id="$ctrl.siteId"></page-list-link>'),e.put("web/features/cmssmarteditContainer/components/pages/pageList/pageListTemplate.html",'<div class="ySmartEditToolbars">\n    <toolbar data-css-class="ySmartEditTitleToolbar"\n        data-image-root="imageRoot"\n        data-toolbar-name="smartEditTitleToolbar"></toolbar>\n</div>\n<div data-ng-if="pageListCtl.isReady"\n    class="pageListWrapper">\n    <div class="se-page-list__header">\n        <h1 class="se-page-list__title">\n            <span data-translate="se.cms.pagelist.title"></span>\n        </h1>\n        <h4 class="se-page-list__sub-title">{{pageListCtl.catalogName | l10n}} - {{pageListCtl.catalogVersion}}</h4>\n        <div class="se-page-list__page-link se-page-list__page-link--right"\n            data-ng-if="pageListCtl.isCatalogVersionInactive"\n            data-ng-click="pageListCtl.goToTrash()">\n            <a data-translate="se.cms.pagelist.trashcan.link.text"\n                data-translate-values="{{ pageListCtl.trashedPagesTranslationData }}"></a>\n            <span class="se-page-list__page-link-icon hyicon hyicon-chevron"></span>\n        </div>\n    </div>\n\n    <div class="se-input-group ySEPage-list-search">\n        <div class="se-input-group--addon">\n            <span class="hyicon hyicon-search ySEPage-list-search-icon"></span>\n        </div>\n        <input type="text"\n            class="se-input-group--input ySEPage-list-search-input"\n            placeholder="{{ \'se.cms.pagelist.searchplaceholder\' | translate }}"\n            data-ng-model="pageListCtl.query.value"\n            data-ng-model-options="pageListCtl.searchOptions"\n            name="query">\n        <div class="se-input-group--addon ySESearchIcon"\n            data-ng-show="pageListCtl.query.value"\n            data-ng-click="pageListCtl.reset()">\n            <span class="glyphicon glyphicon-remove-sign"></span>\n        </div>\n    </div>\n\n    <div class="se-page-list__add-btn-wrapper"\n        has-operation-permission="\'se.edit.page\'">\n        <button class="y-add-btn"\n            data-ng-click="pageListCtl.openAddPageWizard()">\n            <span class="hyicon hyicon-add"></span>\n            <span class="">{{\'se.cms.addpagewizard.addpage\' | translate}}</span>\n        </button>\n    </div>\n\n    <dynamic-paged-list data-config="pageListCtl.pageListConfig"\n        data-mask="pageListCtl.query.value"\n        data-get-api="pageListCtl.getApi($api);">\n    </dynamic-paged-list>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageRestrictionsInfoMessage/pageRestrictionsInfoMessageTemplate.html",'<y-message data-message-id="yMsgInfoId"\n    data-type="info"\n    class="se-restrictions-editor--y-message--modal-adjusted">\n    <message-title>{{ \'se.cms.restrictions.editor.ymessage.title\' | translate }}</message-title>\n    <message-description>{{ \'se.cms.restrictions.editor.ymessage.description\' | translate }}</message-description>\n</y-message>'),e.put("web/features/cmssmarteditContainer/components/pages/trashedPageList/trashedpageListTemplate.html",'<div class="ySmartEditToolbars">\n    <toolbar data-css-class="ySmartEditTitleToolbar"\n        data-image-root="imageRoot"\n        data-toolbar-name="smartEditTitleToolbar"></toolbar>\n</div>\n<div class="pageListWrapper">\n    <div class="se-page-list__header">\n        <h1 class="se-page-list__title"\n            data-translate=\'se.cms.trashedpagelist.title\'></h1>\n        <h4 class="se-page-list__sub-title">{{trashedPageListCtl.catalogName | l10n}} - {{trashedPageListCtl.catalogVersion}}</h4>\n        <div class="se-page-list__page-link se-page-list__page-link--left"\n            data-ng-click="trashedPageListCtl.backToPagelist()">\n            <span class="se-page-list__page-link-icon hyicon hyicon-back"></span>\n            <a>{{ \'se.cms.back.to.pagelist\' | translate }}</a>\n        </div>\n    </div>\n\n    <div class="se-input-group ySEPage-list-search">\n        <div class="se-input-group--addon">\n            <span class="hyicon hyicon-search ySEPage-list-search-icon"></span>\n        </div>\n        <input type="text"\n            class="se-input-group--input ySEPage-list-search-input"\n            placeholder="{{ \'se.cms.pagelist.searchplaceholder\' | translate }}"\n            data-ng-model="trashedPageListCtl.mask"\n            data-ng-model-options="{debounce: 500}"\n            name="mask">\n        <div class="se-input-group--addon ySESearchIcon"\n            data-ng-show="trashedPageListCtl.mask"\n            data-ng-click="trashedPageListCtl.reset()">\n            <span class="glyphicon glyphicon-remove-sign"></span>\n        </div>\n    </div>\n\n    <dynamic-paged-list class="se-trashed-pages"\n        data-config="trashedPageListCtl.trashedPageListConfig"\n        data-mask="trashedPageListCtl.mask">\n    </dynamic-paged-list>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionManagement/flavours/restrictionManagementEditTemplate.html",'<div data-ng-if="$ctrl.ready"\n    class="se-restriction-management-edit">\n    <div data-ng-if="$ctrl.isTypeSupported"\n        class="se-restriction-management-supported-edit">\n        <div class="se-restriction-management-edit__header">\n            <div class="se-restriction-management-edit__name">\n                {{ $ctrl.restriction.name }}\n            </div>\n            <div class="se-restriction-management-edit__code">\n                {{ $ctrl.restriction.typeCode }}\n            </div>\n        </div>\n        <div class="se-restriction-management-edit__data">\n            <item-manager data-item="$ctrl.restriction"\n                data-mode="$ctrl.itemManagementMode"\n                data-structure-api="$ctrl.structureApi"\n                data-content-api="$ctrl.contentApi"\n                data-uri-context="$ctrl.uriContext"\n                data-component-type="$ctrl.restriction.itemtype"\n                data-submit-function="$ctrl.submitInternal"\n                data-is-dirty="$ctrl.isDirtyFn" />\n        </div>\n    </div>\n    <div data-ng-if="!$ctrl.isTypeSupported">\n        <div class="se-restrictions-list--content">\n            <div>\n                {{ \'se.cms.restriction.management.select.type.not.supported.warning\' | translate }}\n            </div>\n            <p class="ySERestrictionsNameHeader">{{ $ctrl.restriction.name }}</p>\n            <div class="ySERestrictionsDescription">\n                {{ $ctrl.restriction.description }}\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionManagement/flavours/restrictionManagementItemNameTemplate.html",'<span class="se-restriction-management-item-name"\n    data-ng-bind-html="item.name | l10n">\n</span>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionManagement/flavours/restrictionManagementSelectTemplate.html",'<div class="se-restriction-management-select">\n    <y-message data-ng-show="$ctrl.selectModel.getRestriction() && !$ctrl.selectModel.isTypeSupported()"\n        data-message-id="yMsgWarningId"\n        data-type="warning"\n        class="se-restriction-management-select--y-message--modal-adjusted">\n        <message-title>{{ \'se.cms.restriction.management.select.type.not.supported.warning\' | translate }}</message-title>\n    </y-message>\n\n    <div class="se-restriction-management-select__y-select">\n        <label for=""\n            class="control-label">{{ \'se.cms.restriction.management.select.type.label\' | translate }}</label>\n\n        <y-select data-id="restriction-type"\n            data-fetch-strategy="{ fetchAll: $ctrl.selectModel.getRestrictionTypes }"\n            data-item-template="::$ctrl.itemTemplateUrl"\n            data-placeholder="\'se.cms.restriction.management.select.type.placeholder\'"\n            data-ng-model="$ctrl.selectModel.selectedIds.restrictionType"\n            data-on-change="$ctrl.selectRestrictionType"\n            data-search-enabled="false">\n        </y-select>\n    </div>\n\n    <div data-recompile-dom="$ctrl.resetSelector"\n        class="se-restriction-management-select__restriction">\n        <div data-ng-if="$ctrl.controllerModel.showRestrictionSelector"\n            class="se-restriction-management-select__restriction__info">\n            <label class="control-label se-restriction-management-select__restriction__info__label">\n                {{ \'se.cms.restriction.management.select.restriction.label\' | translate }}\n            </label>\n            <y-select data-id="restriction-name"\n                data-fetch-strategy="$ctrl.fetchOptions"\n                data-ng-model="$ctrl.selectModel.selectedIds.restriction"\n                data-placeholder="\'se.cms.restriction.management.select.restriction.placeholder\'"\n                data-on-change="$ctrl.selectRestriction"\n                data-disable-choice-fn="$ctrl.disableRestrictionChoice"\n                data-item-template="::$ctrl.itemTemplateUrl"\n                data-results-header-template="$ctrl.getResultsHeaderTemplate()"\n                data-results-header-label="::$ctrl.resultsHeaderLabel">\n            </y-select>\n        </div>\n\n        <div data-recompile-dom="$ctrl.resetEditor"\n            class="se-restriction-management-select__restriction__editor"\n            data-ng-if="$ctrl.controllerModel.showRestrictionEditor">\n            <p class="se-restriction-management-select__restriction__editor__instr">\n                {{ $ctrl.editorHeader | translate }}\n            </p>\n            <div data-ng-if="$ctrl.selectModel.isTypeSupported()">\n                <item-manager data-item="$ctrl.selectModel.getRestriction()"\n                    data-mode="$ctrl.controllerModel.mode"\n                    data-structure-api="$ctrl.controllerModel.structureApi"\n                    data-content-api="$ctrl.controllerModel.contentApi"\n                    data-uri-context="$ctrl.uriContext"\n                    data-component-type="$ctrl.selectModel.getRestrictionTypeCode()"\n                    data-submit-function="$ctrl.submitInternal"\n                    data-is-dirty="$ctrl.isDirtyInternal" />\n            </div>\n            <div class="ySERestrictionsList-item"\n                data-ng-if="!$ctrl.selectModel.isTypeSupported()">\n                <p class="ySERestrictionsNameHeader">{{ $ctrl.selectModel.getRestriction().name }}</p>\n                <div class="ySERestrictionsDescription">\n                    {{ $ctrl.selectModel.getRestriction().description }}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionManagement/restrictionManagementTemplate.html",'<div data-ng-if="$ctrl.editMode"\n    class="se-restriction-management se-restriction-management-edit">\n    <restriction-management-edit data-restriction="$ctrl.restriction"\n        data-get-supported-restriction-types-fn="$ctrl.getSupportedRestrictionTypesFn"\n        data-uri-context="$ctrl.uriContext"\n        data-is-dirty-fn="$ctrl.isDirtyFn"\n        data-submit-fn="$ctrl.submitInternal">\n    </restriction-management-edit>\n</div>\n<div data-ng-if="!$ctrl.editMode"\n    class="se-restriction-management se-restriction-management-select">\n    <restriction-management-select data-existing-restrictions="$ctrl.existingRestrictions"\n        data-get-restriction-types-fn="$ctrl.getRestrictionTypesFn()"\n        data-get-supported-restriction-types-fn="$ctrl.getSupportedRestrictionTypesFn"\n        data-uri-context="$ctrl.uriContext"\n        data-is-dirty-fn="$ctrl.isDirtyFn"\n        data-submit-fn="$ctrl.submitInternal">\n    </restriction-management-select>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionsEditor/restrictionsEditorTemplate.html",'<div class="ySEVisbilityModalContainer">\n    <button data-ng-show="!$ctrl.showRestrictionPicker"\n        type="button"\n        class="y-add-btn"\n        data-ng-click="$ctrl.onClickOnAdd()">\n        <span class="hyicon hyicon-add"></span>{{ \'se.cms.restrictions.editor.button.add.new \' | translate }}\n    </button>\n\n    <label data-ng-if="$ctrl.restrictions.length > 0"\n        class="ySEVisbilityModalContainer-leftPane-title">{{ \'se.cms.restrictions.list.title\' | translate }}</label>\n\n    <restrictions-table data-ng-if="$ctrl.isRestrictionsReady"\n        data-editable="true"\n        data-restrictions="$ctrl.restrictions"\n        data-on-click-on-edit=\'$ctrl.onClickOnEdit\'\n        data-on-criteria-selected="$ctrl.matchCriteriaChanged"\n        data-restriction-criteria="$ctrl.criteria"\n        data-errors="$ctrl.errors"\n        data-custom-class="\'ySERestrictionListLink\'">\n    </restrictions-table>\n\n    <span data-ng-show="$ctrl.showRestrictionPicker"\n        class="ySEVisbilityModalContainer-rightPane__restriction">\n        <y-slider-panel data-slider-panel-configuration="$ctrl.sliderPanelConfiguration"\n            data-slider-panel-hide="$ctrl.sliderPanelHide"\n            class="se-add-restriction-panel"\n            data-slider-panel-show="$ctrl.sliderPanelShow">\n            <restriction-management data-config="$ctrl.restrictionManagement.operation"\n                data-uri-context="$ctrl.restrictionManagement.uriContext"\n                class="se-se-add-restriction-panel__restriction-management"\n                data-submit-fn="$ctrl.restrictionManagement.submitFn"\n                data-is-dirty-fn="$ctrl.restrictionManagement.isDirtyFn">\n            </restriction-management>\n        </y-slider-panel>\n    </span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionsTable/restrictionsTableTemplate.html",'<div class="ySERestrictionsContainer ySERestrictionsContainer-left {{$ctrl.customClass}}">\n    <div data-ng-if="$ctrl.restrictions.length > 1">\n        <div data-ng-if="$ctrl.editable">\n            <ui-select on-select="$ctrl.criteriaClicked($item)"\n                data-ng-model="$ctrl.restrictionCriteria"\n                class="form-control ySERestriction-select"\n                search-enabled="false"\n                theme="select2"\n                data-dropdown-auto-width="false">\n                <ui-select-match placeholder="{{ \'se.cms.restrictions.picker.type.placeholder\' | translate }}"\n                    class="ySERestriction-select__placeholder">\n                    {{$select.selected.editLabel | translate}}\n                </ui-select-match>\n                <ui-select-choices repeat="criteriaOption in $ctrl.criteriaOptions"\n                    class="ySERestriction-select__choices"\n                    position="down ">\n                    {{ criteriaOption.editLabel | translate }}\n                </ui-select-choices>\n            </ui-select>\n        </div>\n        <div class="ySERestrictionsCriteria"\n            data-ng-if="!$ctrl.editable">\n            <span class="ySERestrictionsCriteriaLabel">{{ \'se.cms.restrictions.criteria\' | translate }} {{ $ctrl.restrictionCriteria.label | translate }}</span>\n        </div>\n    </div>\n\n    <div data-ng-if="$ctrl.showRemoveAllButton()"\n        class="ySERestrictionsContainer__clear_all">\n        <button class="btn btn-link cms-clean-btn ySERestrictionsContainer__clear_all__btn"\n            data-ng-click="$ctrl.removeAllRestrictions()"\n            data-translate="se.cms.restrictions.list.clear.all">\n        </button>\n    </div>\n\n    <div class="se-restrictions-list"\n        data-ng-if="$ctrl.restrictions.length > 0">\n        <div id="restriction-{{$index+1}}"\n            data-ng-repeat="restriction in $ctrl.restrictions"\n            class="se-restrictions-list--item">\n            <div class="se-restrictions-list--content"\n                data-ng-click="$ctrl.onSelect(restriction)">\n                <p class="ySERestrictionsNameHeader ng-class:{\'error-input\':$ctrl.isInError($index)}">{{ restriction.name }}</p>\n                <div class="ySERestrictionsTypeAndID ng-class:{\'error-input\':$ctrl.isInError($index)}">{{ restriction.typeCode }}</div>\n                <div class="ySERestrictionsDescription ng-class:{\'error-input\':$ctrl.isInError($index)}"\n                    title="{{ restriction.description }}">{{ restriction.description }}</div>\n            </div>\n            <div class="se-restrictions-list--options"\n                data-ng-if="$ctrl.editable">\n                <y-drop-down-menu dropdown-items="$ctrl.actions"\n                    selected-item="restriction"\n                    class="y-dropdown ySERestrictionsList-item-btn__more pull-right" />\n            </div>\n        </div>\n    </div>\n\n</div>'),e.put("web/features/cmssmarteditContainer/components/slots/revertToSharedSlotConfirmationTemplate.html",'<y-message class="revert-confirm--ymessage"\n    data-type="info"\n    data-message-id="\'revertToSharedSlotYMessage\'">\n    <message-description>\n        <translate>se.cms.slot.unshared.revert.to.shared.sync.ymessage</translate>\n    </message-description>\n</y-message>\n<div class="revert-confirm--description"\n    data-translate="se.cms.slot.unshared.revert.to.shared.description"></div>'),e.put("web/features/cmssmarteditContainer/components/synchronize/catalogs/catalogDetailsSyncTemplate.html",'<synchronize-catalog data-catalog="$ctrl.catalog"\n    data-catalog-version="$ctrl.catalogVersion"\n    data-active-catalog-version="$ctrl.activeCatalogVersion">\n</synchronize-catalog>'),e.put("web/features/cmssmarteditContainer/components/synchronize/catalogs/synchronizeCatalogTemplate.html",'<div class="se-synchronize-catalog">\n    \x3c!-- Status --\x3e\n    <div class="se-synchronize-catalog__item se-synchronize-catalog__sync-info">\n        <div data-ng-if="ctrl.isSyncJobFinished()">\n            <label class="se-synchronize-catalog__sync-info__sync-label"\n                data-ng-if="ctrl.catalogVersion.active">\n                {{ \'se.cms.cataloginfo.lastsyncedfrom\' | translate: ctrl.getSyncFromLabels() }}\n            </label>\n            <label class="se-synchronize-catalog__sync-info__sync-label"\n                data-ng-if="!ctrl.catalogVersion.active"\n                data-translate="se.cms.cataloginfo.lastsynced"></label>\n            <span class="catalog-last-synced">{{ctrl.syncJobStatus.syncEndTime| date:\'short\'}}</span>\n        </div>\n        <span data-ng-if="ctrl.isSyncJobInProgress()"\n            class="se-synchronize-catalog__in-progress"\n            data-translate="se.sync.status.synced.inprogress"></span>\n        <span data-ng-if="ctrl.isSyncJobFailed()"\n            class="label-error se-synchronize-catalog__sync-failed"\n            data-translate="se.sync.status.synced.syncfailed"></span>\n    </div>\n\n    <div class="se-synchronize-catalog__item se-synchronize-catalog__sync-btn"\n        data-ng-if="!ctrl.catalogVersion.active"\n        data-has-operation-permission="ctrl.syncCatalogPermission">\n        <button class="btn btn-default"\n            data-ng-disabled="!ctrl.isButtonEnabled()"\n            data-ng-click="ctrl.syncCatalog()">{{ \'se.cms.cataloginfo.btn.sync\' | translate }}</button>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/pageListSyncIcon/pageListSyncIconTemplate.html",'<span class="hyicon se-sync-button__sync "\n    data-ng-class="$ctrl.classes[$ctrl.syncStatus.status]"\n    data-sync-status="{{$ctrl.syncStatus.status}}">\n</span>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/pageSynchronizationHeaderTemplate.html",'<div data-ng-if="pageSync.ready">\n    <span data-ng-if="pageSync.pageHasUnavailableDependencies || !pageSync.pageHasSyncStatus">\n        <div class="se-sync-panel-header__label"\n            data-translate="se.cms.synchronization.page.new.header"></div>\n        <div class="se-sync-panel-header__text">\n            <span data-ng-bind-html="pageSync.headerText"></span>\n        </div>\n    </span>\n    <span data-ng-if="pageSync.pageHasSyncStatus">\n        <span class="se-sync-panel-header__label"\n            data-translate="se.cms.synchronization.panel.lastsync.text"></span>\n        <span class="se-sync-panel-header__timestamp">{{pageSync.syncStatus.lastSyncStatus | date:\'short\'}}</span>\n        <div class="se-sync-panel-header__text">\n            <span data-translate="se.cms.synchronization.page.header"></span>\n            <y-help data-ng-if="pageSync.helpTemplate"\n                data-title="pageSync.helpTitle"\n                data-template="pageSync.helpTemplate"></y-help>\n        </div>\n    </span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/pageSynchronizationHeaderWrapperTemplate.html",'<page-synchronization-header data-sync-status="sync.syncStatus" />'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/pageSynchronizationPanelTemplate.html",'<synchronization-panel data-ng-if="!pageSync.showSyncButton"\n    data-item-id="pageSync.itemId"\n    data-get-sync-status="pageSync.getSyncStatus"\n    data-perform-sync="pageSync.performSync"\n    data-header-template-url="pageSync.headerTemplateUrl"\n    data-sync-items="pageSync.syncItems"\n    data-on-selected-items-update="pageSync.onSelectedItemsUpdate"\n    data-on-sync-status-ready="pageSync.onSyncStatusReady($syncStatus)"\n    data-get-api="pageSync.getApi($api)">\n</synchronization-panel>\n<synchronization-panel data-ng-if="pageSync.showSyncButton"\n    data-item-id="pageSync.itemId"\n    data-get-sync-status="pageSync.getSyncStatus"\n    data-perform-sync="pageSync.performSync"\n    data-header-template-url="pageSync.headerTemplateUrl"\n    data-on-sync-status-ready="pageSync.onSyncStatusReady($syncStatus)"\n    data-get-api="pageSync.getApi($api)">\n</synchronization-panel>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/syncMenu/pageSyncMenuToolbarItemTemplate.html",'<div class="toolbar-action"\n    data-uib-dropdown\n    data-auto-close="outsideClick"\n    data-is-open="$ctrl.toolbarItem.isOpen"\n    data-item-key="{{ $ctrl.toolbarItem.key }}">\n    <button type="button"\n        class="btn btn-default toolbar-action--button"\n        data-uib-dropdown-toggle\n        aria-pressed="false">\n        <span class="hyicon hyicon-sync se-toolbar-menu-ddlb--button__icon"></span>\n        <div class="toolbar-action--button--txt">\n            <span data-ng-class="{\'se-toolbar-menu-ddlb--button__txt\': $ctrl.isNotInSync }">\n                {{ $ctrl.toolbarItem.name | translate }}\n                <span data-ng-if="$ctrl.isNotInSync"\n                    class="hyicon hyicon-caution se-toolbar-menu-ddlb--button__caution"></span>\n            </span>\n        </div>\n    </button>\n    <div data-uib-dropdown-menu\n        class="dropdown-menu-left btn-block toolbar-action--include">\n        <div ng-if="$ctrl.toolbarItem.isOpen">\n            <ul class="se-toolbar-menu-content se-toolbar-menu-content__page-sync"\n                role="menu">\n                <li role="menuitem">\n                    <div class="se-toolbar-menu-content--wrapper">\n                        <div class="se-toolbar-menu-content--header">\n                            <div class="se-toolbar-menu-content--header__title"\n                                data-translate="se.cms.synchronization.page.title">\n                            </div>\n                        </div>\n                        <div class="se-toolbar-menu-content--body">\n                            <page-synchronization-panel></page-synchronization-panel>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/syncMenu/pageSyncMenuToolbarItemWrapperTemplate.html",'<page-sync-menu-toolbar-item data-item="item"></page-sync-menu-toolbar-item>'),e.put("web/features/cmssmarteditContainer/services/genericEditorModalTemplate.html",'<y-message data-ng-if="modalController.showDisclaimer"\n    data-type="info"\n    data-message-id="VisibilityTab.DisplayComponentOffDisclaimer">\n    <message-description>\n        <translate>se.cms.editortabset.visibilitytab.disclaimer</translate>\n    </message-description>\n</y-message>\n\n<generic-editor data-smartedit-component-id="modalController.data.componentUuid"\n    data-smartedit-component-type="modalController.data.componentType"\n    data-structure="modalController.structure"\n    data-structure-api="modalController.structureApi"\n    data-content="modalController.data.content"\n    data-content-api="modalController.contentApi"\n    data-submit="modalController.controls.submit"\n    data-reset="modalController.controls.reset"\n    data-is-dirty="modalController.controls.isDirty"\n    data-editor-stack-id="modalController.editorStackId"\n    data-get-api="modalController.getApi($api);">\n</generic-editor>')}])},function(e,t,n){function i(e){return n(o(e))}function o(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var a={"./components/synchronize/synchronizationConstants.js":164,"./components/synchronize/synchronizationPanel.js":165,"./config.js":166,"./dao/cmswebservices/sites/cmsitemsRestService.js":167,"./dao/resource.js":168,"./dao/resourceLocations.js":169,"./services/componentService.js":170,"./services/componentVisibilityAlertServiceInterface.js":171,"./services/removeComponentServiceInterface.js":172,"./services/synchronizationService.js":173,"./templates.js":174};i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=163},function(e,t){angular.module("synchronizationConstantsModule",[]).constant("SYNCHRONIZATION_STATUSES",{UNAVAILABLE:"UNAVAILABLE",IN_SYNC:"IN_SYNC",NOT_SYNC:"NOT_SYNC",IN_PROGRESS:"IN_PROGRESS",SYNC_FAILED:"SYNC_FAILED"}).constant("SYNCHRONIZATION_POLLING",{SLOW_POLLING_TIME:2e4,FAST_POLLING_TIME:2e3,SPEED_UP:"syncPollingSpeedUp",SLOW_DOWN:"syncPollingSlowDown",FAST_FETCH:"syncFastFetch",FETCH_SYNC_STATUS_ONCE:"fetchSyncStatusOnce"})},function(e,t){angular.module("synchronizationPanelModule",["yHelpModule","translationServiceModule","alertServiceModule","timerModule","alertsBoxModule","eventServiceModule","synchronizationPollingServiceModule","crossFrameEventServiceModule","synchronizationConstantsModule","yMessageModule","smarteditServicesModule","catalogServiceModule","l10nModule"]).controller("SynchronizationPanelController",["$attrs","$translate","isBlank","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","alertService","systemEventService","timerService","crossFrameEventService","catalogService","l10nFilter","sharedDataService","waitDialogService",function(e,t,n,i,o,a,r,s,c,l,d,u,p){this.syncPendingItems=[],this.selectedItems=[],this.showItemList=!0,this.refreshInterval=i.SLOW_POLLING_TIME,this.getRows=function(){return this.syncStatus?[this.syncStatus].concat(this.syncStatus.selectedDependencies):[]},this.api={selectAll:function(){if(!this.syncStatus)throw new Error("Synchronization status is not available. The 'selectAll' function should be used with 'onSyncStatusReady' event.");this.syncStatus.selected=!0,this.selectionChange(0)}.bind(this),displayItemList:function(e){this.showItemList=e}.bind(this)},this.selectionChange=function(e){this.syncStatus.selectedDependencies.forEach(function(t){t.selected=0===e&&t.status!==o.IN_SYNC&&!t.isExternal||t.selected}.bind(this)),this.selectedItems=this.getRows().filter(function(e){return e.selected}),this.onSelectedItemsUpdate&&this.onSelectedItemsUpdate(this.selectedItems)},this.preserveSelection=function(e){var t=(e||[]).map(function(e){return e.itemId},[]);this.getRows().forEach(function(e){e.selected=t.indexOf(e.itemId)>-1&&e.status!==o.IN_SYNC})},this.isDisabled=function(e){return e!==this.syncStatus&&this.syncStatus.selected||e.status===o.IN_SYNC},this.isSyncButtonDisabled=function(){return 0===this.selectedItems.length||0!==this.syncPendingItems.length},this.isInSync=function(e){return e.status===o.IN_SYNC},this.isOutOfSync=function(e){return e.status===o.NOT_IN_SYNC},this.isInProgress=function(e){return e.status===o.IN_PROGRESS},this.isSyncFailed=function(e){return e.status===o.SYNC_FAILED},this.hasHelp=function(e){return e.dependentItemTypesOutOfSync&&e.dependentItemTypesOutOfSync.length>0},this.buildInfoTemplate=function(e){if(e&&e.dependentItemTypesOutOfSync&&!e.isExternal){var n=e.dependentItemTypesOutOfSync.reduce(function(e,n){return e+="<div>"+t.instant(n.i18nKey)+"</div>"},"");return n?"<div>"+n+"</div>":""}if(e.isExternal)return e.catalogVersionNameTemplate},this.fetchSyncStatus=function(e,t){if(!t||t.itemId===this.itemId)return this.getSyncStatus(this.itemId).then(function(e){u.get("experience").then(function(t){var n=e.catalogVersionUuid;this.syncStatus=e,this.preserveSelection(this.selectedItems),this.selectionChange(),this._updateStatus(),this.markExternalComponents(n,this.getRows()),this.setTemplateExternalCatalogVersionName(t,this.getRows()),0===this.syncPendingItems.length&&(this.refreshInterval=i.SLOW_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),r.sendAsynchEvent(i.SLOW_DOWN,this.itemId)),"function"==typeof this.onSyncStatusReady&&this.onSyncStatusReady({$syncStatus:e})}.bind(this))}.bind(this))},this.markExternalComponents=function(e,t){t.forEach(function(t){t.isExternal=t.catalogVersionUuid!==e})},this.getInfoTitle=function(e){if(!e.isExternal)return"se.cms.synchronization.panel.update.title"},this.getTemplateInfoForExternalComponent=function(){return"<div>"+t.instant("se.cms.synchronization.slot.external.component")+"</div>"},this.setTemplateExternalCatalogVersionName=function(e,t){t.forEach(function(t){t.catalogVersionNameTemplate="<span></span>",l.getCatalogVersionByUuid(t.catalogVersionUuid,e.siteDescriptor.uid).then(function(e){t.catalogVersionNameTemplate="<div>"+d(e.catalogName)+"</div>"})})},this._updateStatus=function(){var e=!1,n="",i=this.syncPendingItems.length;this.getRows().forEach(function(t){this.syncPendingItems.indexOf(t.itemId)>-1&&t.status===o.SYNC_FAILED&&(n=" "+n+t.itemId,e=!0),this.syncPendingItems.indexOf(t.itemId)>-1&&t.status!==o.IN_PROGRESS&&this.syncPendingItems.splice(this.syncPendingItems.indexOf(t.itemId),1),(i&&0===this.syncPendingItems.length||0===i)&&(i=0,p.hideWaitModal()),t.status===o.IN_PROGRESS&&-1===this.syncPendingItems.indexOf(t.itemId)&&this.syncPendingItems.push(t.itemId)}.bind(this)),e&&a.showDanger({message:t.instant("se.cms.synchronization.panel.failure.message",{items:n})})},this.$onInit=function(){this.syncItems=function(){var e=this.getRows().filter(function(e){return e.selected}).map(function(e){return{itemId:e.itemId,itemType:e.itemType}});Array.prototype.push.apply(this.syncPendingItems,e.map(function(e){return e.itemId})),this.selectedItems.length>0&&(p.showWaitModal("se.sync.synchronizing"),this.performSync(e).then(function(){this.refreshInterval=i.FAST_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),r.sendAsynchEvent(i.SPEED_UP,this.itemId)}.bind(this)))}.bind(this),"function"==typeof this.getApi&&this.getApi({$api:this.api}),this.unSubscribeFastFetch=c.subscribe(i.FAST_FETCH,this.fetchSyncStatus.bind(this)),this.fetchSyncStatus(),this.resynchTimer=s.createTimer(this.fetchSyncStatus.bind(this),this.refreshInterval),this.resynchTimer.start()},this.$onDestroy=function(){this.resynchTimer.teardown(),this.unSubscribeFastFetch(),r.sendAsynchEvent(i.SLOW_DOWN,this.itemId)},this.$postLink=function(){this.showSyncButton=n(e.syncItems)}}]).component("synchronizationPanel",{templateUrl:"synchronizationPanelTemplate.html",controller:"SynchronizationPanelController",controllerAs:"sync",bindings:{itemId:"<",getSyncStatus:"<",performSync:"<",headerTemplateUrl:"<?",syncItems:"=?",onSelectedItemsUpdate:"<?",onSyncStatusReady:"&?",getApi:"&?"}})},function(e,t){angular.module("configModule",[]).config(["$locationProvider","$qProvider",function(e,t){t.errorOnUnhandledRejections(!1)}])},function(e,t){angular.module("cmsitemsRestServiceModule",["functionsModule","resourceLocationsModule","smarteditServicesModule","catalogServiceModule","yLoDashModule"]).provider("cmsitemsUri",["CONTEXT_SITE_ID",function(e){this.uri="/cmswebservices/v1/sites/"+e+"/cmsitems",this.$get=function(){return this.uri}.bind(this)}]).provider("cmsitemsUuidsUri",["CONTEXT_SITE_ID",function(e){this.uri="/cmswebservices/v1/sites/"+e+"/cmsitems/uuids",this.$get=function(){return this.uri}.bind(this)}]).service("cmsitemsRestService",["lodash","restServiceFactory","cmsitemsUri","cmsitemsUuidsUri","catalogService","operationContextService","OPERATION_CONTEXT",function(e,t,n,i,o,a,r){var s=t.get(n),c=t.get(i);a.register(n.replace(/CONTEXT_SITE_ID/,":CONTEXT_SITE_ID"),r.CMS),this.create=function(e){return o.getCatalogVersionUUid().then(function(t){return e.catalogVersion=e.catalogVersion||t,void 0===e.onlyOneRestrictionMustApply&&(e.onlyOneRestrictionMustApply=!1),s.save(e)})},this.getById=function(e){return s.getById(e)},this.get=function(t){return o.retrieveUriContext().then(function(n){var i={catalogId:t.catalogId||n.CURRENT_CONTEXT_CATALOG,catalogVersion:t.catalogVersion||n.CURRENT_CONTEXT_CATALOG_VERSION};return t=e.merge(i,t),s.get(t)})},this.getByIds=function(e){return o.getCatalogVersionUUid().then(function(t){return c.save({catalogVersion:t,uuids:e})})},this.update=function(e){return s.update(e)},this.delete=function(e){return s.remove({identifier:e})},this._getByUIdAndType=function(e,t){return this.get({pageSize:100,currentPage:0,mask:e,typeCode:t}).then(function(t){return t.response.find(function(t){return t.uid===e})})}}])},function(e,t){angular.module("resourceModule",["smarteditServicesModule","resourceLocationsModule","functionsModule"]).factory("itemsResource",["restServiceFactory","ITEMS_RESOURCE_URI","URIBuilder",function(e,t,n){return{getItemResource:function(){return e.get(t)},getItemResourceByContext:function(i){return e.get(new n(t).replaceParams(i).build())}}}]).factory("navigationNodeEntriesResource",["restServiceFactory","NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI",function(e,t){return e.get(t,"uid")}]).factory("pagesContentSlotsComponentsResource",["restServiceFactory","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("pageInfoRestService",["restServiceFactory","PAGEINFO_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("navigationNodeRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("navigationEntriesRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("navigationEntryTypesRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("synchronizationResource",["restServiceFactory","URIBuilder","GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","POST_PAGE_SYNCHRONIZATION_RESOURCE_URI",function(e,t,n,i){return{getPageSynchronizationGetRestService:function(i){var o=new t(n).replaceParams(i).build();return e.get(o)},getPageSynchronizationPostRestService:function(n){var o=new t(i).replaceParams(n).build();return e.get(o)}}}])},function(e,t){!function(){var e="CURRENT_CONTEXT_CATALOG",t="CURRENT_CONTEXT_CATALOG_VERSION",n="CURRENT_CONTEXT_SITE_ID",i="CURRENT_PAGE_CONTEXT_CATALOG";angular.module("resourceLocationsModule").constant("CONTEXT_SITE_ID",n).constant("CONTEXT_CATALOG",e).constant("CONTEXT_CATALOG_VERSION",t).constant("PAGE_CONTEXT_SITE_ID","CURRENT_PAGE_CONTEXT_SITE_ID").constant("PAGE_CONTEXT_CATALOG",i).constant("PAGE_CONTEXT_CATALOG_VERSION","CURRENT_PAGE_CONTEXT_CATALOG_VERSION").constant("TYPES_RESOURCE_URI","/cmswebservices/v1/types").constant("STRUCTURES_RESOURCE_URI","/cmssmarteditwebservices/v1/structures").constant("ITEMS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/items").constant("PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslotscomponents").constant("CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI","/cmswebservices/v1/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pages/:pageUid/contentslots/:slotUid/typerestrictions").constant("PAGES_LIST_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pages").constant("PAGE_LIST_PATH","/pages/:siteId/:catalogId/:catalogVersion").constant("TRASHED_PAGE_LIST_PATH","/trashedpages/:siteId/:catalogId/:catalogVersion").constant("PAGES_CONTENT_SLOT_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslots").constant("PAGE_TEMPLATES_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/pagetemplates").constant("NAVIGATION_MANAGEMENT_PAGE_PATH","/navigations/:siteId/:catalogId/:catalogVersion").constant("NAVIGATION_MANAGEMENT_RESOURCE_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/navigations").constant("NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/navigations/:navigationUid/entries").constant("NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI","/cmswebservices/v1/navigationentrytypes").constant("CONTEXTUAL_PAGES_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pages").constant("CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagesrestrictions").constant("PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pagesrestrictions").constant("UPDATE_PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pagesrestrictions/pages").constant("RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/restrictions").constant("RESTRICTION_TYPES_URI","/cmswebservices/v1/restrictiontypes").constant("PAGE_TYPES_RESTRICTION_TYPES_URI","/cmswebservices/v1/pagetypesrestrictiontypes").constant("PAGEINFO_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pages/:pageUid").constant("PAGE_TYPES_URI","/cmswebservices/v1/pagetypes").constant("GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/synchronizations/versions/:target/pages/:pageUid").constant("POST_PAGE_SYNCHRONIZATION_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/synchronizations/versions/:target")}()},function(e,t){angular.module("componentServiceModule",["smarteditServicesModule","resourceLocationsModule","cmsitemsRestServiceModule","catalogServiceModule","slotRestrictionsServiceModule"]).service("ComponentService",["restServiceFactory","TYPES_RESOURCE_URI","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","cmsitemsRestService","catalogService","slotRestrictionsService","pageInfoService","pageContentSlotsComponentsRestService",function(e,t,n,i,o,a,r,s,c,l){var d=e.get(t),u=a,p=e.get(n);this.createNewComponent=function(e,t){var n={};if(n.name=e.name,n.slotId=e.targetSlotId,n.pageId=e.pageId,n.position=e.position,n.typeCode=e.componentType,n.itemtype=e.componentType,n.catalogVersion=e.catalogVersionUuid,"object"==typeof t)for(var i in t)n[i]=t[i];else if(t)throw"ComponentService.createNewComponent() - Illegal componentPayload - ["+t+"]";return u.create(n)},this.updateComponent=function(e){return u.update(e)},this.addExistingComponent=function(e,t,n,i){var o={};return o.pageId=e,o.slotId=n,o.componentId=t,o.position=i,p.save(o)},this.loadComponentTypes=function(){return d.get({category:"COMPONENT"})},this.getSupportedComponentTypesForCurrentPage=function(){return this.loadComponentTypes().then(function(e){return s.getAllComponentTypesSupportedOnPage().then(function(t){return e.componentTypes.filter(function(e){return t.indexOf(e.code)>-1})})})}.bind(this),this.loadComponentItem=function(e){return u.getById(e)},this.loadPagedComponentItems=function(e,t,n){return r.retrieveUriContext().then(function(a){var r={pageSize:t,currentPage:n,mask:e,sort:"name",typeCode:"AbstractCMSComponent",catalogId:a[i],catalogVersion:a[o]};return u.get(r)})},this.loadPagedComponentItemsByCatalogVersion=function(e){var t={pageSize:e.pageSize,currentPage:e.page,mask:e.mask,sort:"name",typeCode:"AbstractCMSComponent",catalogId:e.catalogId,catalogVersion:e.catalogVersion};return u.get(t)},this.getSlotsForComponent=function(e){var t=[];return this._getContentSlotsForComponents().then(function(n){return Object.keys(n).forEach(function(i){n[i].find(function(t){return t.uuid===e})&&t.push(i)}),t}.bind(this))},this._getContentSlotsForComponents=function(){return c.getPageUID().then(function(e){return l.getSlotsToComponentsMapForPageUid(e)})}}])},function(e,t){angular.module("componentVisibilityAlertServiceInterfaceModule",[]).factory("ComponentVisibilityAlertServiceInterface",function(){var e=function(){};return e.prototype.checkAndAlertOnComponentVisibility=function(){},e})},function(e,t){angular.module("removeComponentServiceInterfaceModule",[]).factory("RemoveComponentServiceInterface",function(){function e(){}return e.prototype.removeComponent=function(){},e})},function(e,t){angular.module("synchronizationServiceModule",["smarteditServicesModule","resourceLocationsModule","alertServiceModule","authenticationModule","timerModule"]).constant("CATALOG_SYNC_INTERVAL_IN_MILLISECONDS",5e3).service("synchronizationService",["restServiceFactory","timerService","$q","$translate","alertService","authenticationService","operationContextService","OPERATION_CONTEXT","CATALOG_SYNC_INTERVAL_IN_MILLISECONDS",function(e,t,n,i,o,a,r,s,c){var l={},d=e.get("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target"),u=e.get("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target","catalog");r.register("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target",s.CMS),r.register("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target",s.CMS),this.updateCatalogSync=function(e){return u.update({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion}).then(function(e){return e}.bind(this),function(t){var n=i.instant("sync.running.error.msg",{catalogName:e.name});return"Conflict"===t.statusText&&o.showDanger({message:n}),!1}.bind(this))},this.getCatalogSyncStatus=function(e){return e.sourceCatalogVersion?this.getSyncJobInfoBySourceAndTarget(e):this.getLastSyncJobInfoByTarget(e)},this.getSyncJobInfoBySourceAndTarget=function(e){return u.get({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})},this.getLastSyncJobInfoByTarget=function(e){return d.get({catalog:e.catalogId,target:e.targetCatalogVersion})},this.startAutoGetSyncData=function(e,n){var i=e.catalogId,o=e.sourceCatalogVersion,a=e.targetCatalogVersion,r=this._getJobKey(i,o,a),s=t.createTimer(this._autoSyncCallback.bind(this,e,n,r),c);s.start(),l[r]=s},this._autoSyncCallback=function(e,t,n){a.isAuthenticated("/cmswebservices").then(function(i){i||this.stopAutoGetSyncData(e),this.getCatalogSyncStatus(e).then(t).then(function(){l[n]||this.startAutoGetSyncData(e,t)}.bind(this))}.bind(this))},this.stopAutoGetSyncData=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);l[t]&&(l[t].stop(),l[t]=void 0)},this._getJobKey=function(e,t,n){return e+"_"+t+"_"+n}}])},function(e,t){angular.module("cmscommonsTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmscommons/components/synchronize/synchronizationPanelTemplate.html",'<div class="se-sync-panel">\n    <y-message data-ng-if="false"\n        data-message-id="yMsgWarningId"\n        data-type="warning"\n        data-ng-class="!sync.showSyncButton ? \'se-sync-panel--y-message--modal-adjusted\' : \'se-sync-panel--y-message--toolbar-adjusted\'">\n        <message-title>{{ \'se.cms.synchronization.panel.live.recent.notice\' | translate }}</message-title>\n        <message-description>{{ \'se.cms.synchronization.panel.live.override.warning\' | translate }}</message-description>\n    </y-message>\n\n    <div class="se-sync-panel__sync-status"\n        data-ng-if="sync.headerTemplateUrl"\n        data-ng-include="sync.headerTemplateUrl">\n    </div>\n\n    <div class="se-sync-panel__sync-info"\n        data-ng-show="sync.showItemList">\n        <div data-ng-repeat="dependency in sync.getRows()"\n            data-ng-class="{active: $index==0, \'se-sync-panel--item__external\': dependency.isExternal}"\n            class="se-sync-panel__sync-info__row">\n\n            <div class="checkbox se-sync-panel__sync-info__checkbox se-nowrap-ellipsis">\n                <input type="checkbox"\n                    data-ng-if="!dependency.isExternal"\n                    data-ng-model="dependency.selected"\n                    data-ng-disabled="sync.isDisabled(dependency)"\n                    data-ng-change="sync.selectionChange($index)"\n                    id="sync-info__checkbox_{{$index}}">\n                <label data-ng-if="$index===0"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis"\n                    title="{{::dependency.selectAll | translate}}">\n                    {{::dependency.selectAll | translate}}</label>\n\n                <label data-ng-if="$index!==0 && !dependency.isExternal"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis"\n                    title="{{::dependency.name | translate}}">\n                    {{::dependency.name | translate}}</label>\n\n                <span data-ng-if="dependency.isExternal"\n                    data-y-popover\n                    data-trigger="\'hover\'"\n                    data-template="sync.getTemplateInfoForExternalComponent()">\n                    <label data-ng-if="$index!==0"\n                        for="sync-info__checkbox_{{$index}}"\n                        class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis"\n                        title="{{::dependency.name | translate}}">\n                        {{::dependency.name | translate}}</label>\n                </span>\n            </div>\n\n            <span data-ng-if="sync.buildInfoTemplate(dependency)"\n                data-y-popover\n                data-trigger="\'hover\'"\n                data-title="sync.getInfoTitle(dependency)"\n                data-template="sync.buildInfoTemplate(dependency)"\n                data-ng-class="{\'pull-right se-sync-panel__sync-info__right-icon\': true, \'se-sync-panel--icon-globe\': dependency.isExternal} ">\n                <span data-status="{{dependency.status}}"\n                    data-ng-if="!dependency.isExternal"\n                    data-ng-class="{\'hyicon hyicon__se-sync-panel__sync-info\':true, \'hyicon-done hyicon__se-sync-panel__sync-done\':sync.isInSync(dependency), \'hyicon-sync hyicon__se-sync-panel__sync-not\':!sync.isInSync(dependency)}"></span>\n                <span data-ng-if="dependency.isExternal"\n                    class="hyicon hyicon-globe"></span>\n            </span>\n\n            <span data-ng-if="!sync.buildInfoTemplate(dependency)"\n                class="pull-right se-sync-panel__sync-info__right-icon">\n                <span data-status="{{dependency.status}}"\n                    data-ng-class="{\'hyicon hyicon__se-sync-panel__sync-info\':true, \'hyicon-done hyicon__se-sync-panel__sync-done\':sync.isInSync(dependency), \'hyicon-sync hyicon__se-sync-panel__sync-not\':!sync.isInSync(dependency)}"></span>\n            </span>\n        </div>\n    </div>\n\n    <div class="se-sync-panel__footer"\n        data-ng-if="sync.showSyncButton">\n        <button class="btn btn-lg btn-primary se-sync-panel__footer__btn"\n            data-ng-disabled="sync.isSyncButtonDisabled()"\n            data-ng-click="sync.syncItems()"\n            data-translate="se.cms.actionitem.page.sync"></button>\n    </div>\n\n</div>')}])},function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=175},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),o=(n.n(i),function(){function e(e,t,n,i,o,a){this.$routeParams=e,this.$location=t,this.PAGE_LIST_PATH=n,this.urlService=i,this.catalogService=o,this.cmsitemsUri=a,this.initialize()}return e.$inject=["$routeParams","$location","PAGE_LIST_PATH","urlService","catalogService","cmsitemsUri"],e.prototype.reset=function(){this.mask=""},e.prototype.backToPagelist=function(){this.$location.path(this.PAGE_LIST_PATH.replace(":siteId",this.siteUID).replace(":catalogId",this.catalogId).replace(":catalogVersion",this.catalogVersion))},e.prototype.initialize=function(){var e=this;this.siteUID=this.$routeParams.siteId,this.catalogId=this.$routeParams.catalogId,this.catalogVersion=this.$routeParams.catalogVersion,this.uriContext=this.urlService.buildUriContext(this.siteUID,this.catalogId,this.catalogVersion),this.trashedPageListConfig={sortBy:"name",reversed:!1,itemsPerPage:10,displayCount:!0},this.trashedPageListConfig.uri=this.cmsitemsUri,this.trashedPageListConfig.queryParams={catalogId:this.catalogId,catalogVersion:this.catalogVersion,typeCode:"AbstractPage",itemSearchParams:"pageStatus:deleted"},this.trashedPageListConfig.keys=[{property:"name",i18n:"se.cms.pagelist.headerpagename",sortable:!0},{property:"itemtype",i18n:"se.cms.pagelist.headerpagetype",sortable:!0},{property:"numberOfRestrictions",i18n:"se.cms.pagelist.headerrestrictions"},{property:"modifiedtime",i18n:"se.cms.trashedpagelist.trashed.date",sortable:!0},{property:"syncStatus",i18n:"se.cms.actionitem.page.sync"}],this.trashedPageListConfig.injectedContext={uriContext:this.uriContext},this.mask="",this.catalogService.getContentCatalogsForSite(this.siteUID).then(function(t){e.catalogName=t.filter(function(t){return t.catalogId===e.catalogId})[0].name}),this.trashedPageListConfig.renderers={numberOfRestrictions:function(){return'<restrictions-page-list-icon data-number-of-restrictions="item.restrictions.length"/>'},modifiedtime:function(){return'<div>{{item.modifiedtime | date:"short"}}</div>'},syncStatus:function(){return'<div data-recompile-dom="item.reloadSynchIcon"><page-list-sync-icon data-uri-context="injectedContext.uriContext" data-page-id="item.uuid" /></div>'}}},e}()),a=i.module("trashedPageListControllerModule",["smarteditServicesModule","catalogServiceModule","pageListTemplatePrinterModule","resourceLocationsModule"]).controller("trashedPageListController",o)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(0),o=(n.n(i),n(179)),a=n(180),r=n(182),s=i.module("cmsSmarteditServicesModule",["smarteditServicesModule"]).service("assetsService",o.a).service("trashedPageService",r.a).service("pageContentSlotsComponentsRestService",a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.TEST_ASSETS_KEY="testAssets",this.TEST_ASSETS_SRC="/web/webroot",this.PROD_ASSETS_SRC="/cmssmartedit",this.$injector=e}return e.prototype.getAssetsRoot=function(){var e=!1;if(this.getInjector().has(this.TEST_ASSETS_KEY)){var t=this.getInjector().get(this.TEST_ASSETS_KEY);e="boolean"==typeof t&&t}return e?this.TEST_ASSETS_SRC:this.PROD_ASSETS_SRC},e.prototype.getInjector=function(){return this.$injector},e.$inject=["$injector"],e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(181),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=function(e){function t(t){var n=e.call(this)||this;return t.initForService(n,["clearCache","getSlotsToComponentsMapForPageUid"]),n}return o(t,e),t.$inject=["gatewayProxy"],t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return Object.defineProperty(e.prototype,"gatewayId",{get:function(){return"IPageContentSlotsComponentsRestService"},enumerable:!0,configurable:!0}),e.prototype.clearCache=function(){"proxyFunction"},e.prototype.getSlotsToComponentsMapForPageUid=function(e){"proxyFunction";return null},e.prototype.getComponentsForSlot=function(e){"proxyFunction";return null},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(183),o=(n.n(i),this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r}),a=function(){function e(e){this.cmsitemsRestService=e}return e.$inject=["cmsitemsRestService"],e.prototype.getTrashedPagesCount=function(e){var t={pageSize:10,currentPage:0,typeCode:"AbstractPage",itemSearchParams:"pageStatus:deleted",catalogId:e.CONTEXT_CATALOG,catalogVersion:e.CONTEXT_CATALOG_VERSION};return this.cmsitemsRestService.get(t).then(function(e){return e.pagination.totalCount})},o([Object(i.cache)("Frequent",3)],e.prototype,"getTrashedPagesCount",null),e}()},function(e,t){e.exports=smarteditcommons}]);