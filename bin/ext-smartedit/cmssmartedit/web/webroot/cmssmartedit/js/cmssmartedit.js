!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e){t.exports=angular},function(t,e,n){function o(t){t.keys().forEach(function(e){i[e]=t(e)})}var i={};o(n(4)),o(n(34)),o(n(46))},function(t,e){angular.module("AssetsServiceModule",["cmsSmarteditServicesModule"]),angular.module("cms.smartedit.services",["cmsSmarteditServicesModule"])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=(n.n(o),n(1)),s=(n.n(i),n(47)),r=(n.n(s),n(48)),a=n(2);n.n(a);o.module("cmssmartedit",["resourceLocationsModule","decoratorServiceModule","removeComponentServiceModule","experienceInterceptorModule","editorEnablerServiceModule","alertServiceModule","translationServiceModule","slotVisibilityButtonModule","slotVisibilityServiceModule","cmssmarteditTemplates","cmscommonsTemplates","componentHandlerServiceModule","slotSharedButtonModule","cmsDragAndDropServiceModule","syncIndicatorDecoratorModule","slotSyncButtonModule","synchronizationPollingServiceModule","confirmationModalServiceModule","sharedSlotDisabledDecoratorModule","externalSlotDisabledDecoratorModule","slotRestrictionsServiceModule","slotSharedServiceModule","contextualMenuDropdownServiceModule","externalComponentDecoratorModule","externalComponentButtonModule","componentEditingFacadeModule","cmsitemsRestServiceModule","slotUnsharedButtonModule","componentInfoServiceModule",r.a.name]).run(["$rootScope","$q","$translate","alertService","assetsService","cmsDragAndDropService","componentHandlerService","confirmationModalService","contextualMenuService","decoratorService","editorEnablerService","featureService","removeComponentService","slotRestrictionsService","slotSharedService","slotVisibilityService","componentEditingFacade","cmsitemsRestService","componentInfoService",function(t,e,n,o,i,s,r,a,c,l,d,u,p,h,m,g,S,v,y){"ngInject";d.enableForComponents(["^((?!Slot).)*$"]),l.addMappings({"^((?!Slot).)*$":["se.contextualMenu","externalComponentDecorator"],"^.*Slot$":["se.slotContextualMenu","se.basicSlotContextualMenu","syncIndicator","sharedSlotDisabledDecorator","externalSlotDisabledDecorator"]}),u.addContextualMenuButton({key:"externalcomponentbutton",nameI18nKey:"se.cms.contextmenu.title.externalcomponent",i18nKey:"se.cms.contextmenu.title.externalcomponentbutton",regexpKeys:["^((?!Slot).)*$"],condition:function(t){var e=t.componentAttributes&&t.componentAttributes.smarteditCatalogVersionUuid;return e?r.getCatalogVersionUUIDFromPage().then(function(t){return e!==t}):r.isExternalComponent(t.componentId,t.componentType)},action:{template:'<external-component-button data-catalog-version-uuid="ctrl.componentAttributes.smarteditCatalogVersionUuid"></external-component-button>'},displayClass:"externalcomponentbutton",displayIconClass:"hyicon hyicon-globe",displaySmallIconClass:"hyicon hyicon-globe"}),u.addContextualMenuButton({key:"se.cms.dragandropbutton",nameI18nKey:"se.cms.contextmenu.title.dragndrop",i18nKey:"se.cms.contextmenu.title.dragndrop",regexpKeys:["^((?!Slot).)*$"],condition:function(t){var e=r.getParentSlotForComponent(t.element);return h.isSlotEditable(e)},action:{callbacks:{mousedown:function(){s.update()}}},displayClass:"movebutton",displayIconClass:"hyicon hyicon-dragdroplg",displaySmallIconClass:"hyicon hyicon-dragdroplg",permissions:["se.context.menu.drag.and.drop.component"]}),u.register({key:"se.cms.html5DragAndDrop",nameI18nKey:"se.cms.dragAndDrop.name",descriptionI18nKey:"se.cms.dragAndDrop.description",enablingCallback:function(){s.register(),s.apply()},disablingCallback:function(){s.unregister()}}),u.addContextualMenuButton({key:"se.cms.remove",i18nKey:"se.cms.contextmenu.title.remove",nameI18nKey:"se.cms.contextmenu.title.remove",regexpKeys:["^((?!Slot).)*$"],condition:function(t){if(!t.isComponentHidden){var e=r.getParentSlotForComponent(t.element);return h.isSlotEditable(e)}return!0},action:{callback:function(t,e){var i,s;t.element?(i=r.getSlotOperationRelatedId(t.element),s=r.getSlotOperationRelatedType(t.element)):(i=t.containerId?t.containerId:t.componentId,s=t.containerId&&t.containerType?t.containerType:t.componentType);var c={};c.description="se.cms.contextmenu.removecomponent.confirmation.message",c.title="se.cms.contextmenu.removecomponent.confirmation.title",a.confirm(c).then(function(){p.removeComponent({slotId:t.slotId,componentId:t.componentId,componentType:t.componentType,slotOperationRelatedId:i,slotOperationRelatedType:s}).then(function(){g.reloadSlotsInfo(),n("se.cms.alert.component.removed.from.slot",{componentID:i,slotID:t.slotId}).then(function(t){o.showSuccess({message:t}),e.preventDefault(),e.stopPropagation()})})})}},displayClass:"removebutton",displayIconClass:"hyicon hyicon-removelg",displaySmallIconClass:"hyicon hyicon-removelg",permissions:["se.context.menu.remove.component"]}),u.addContextualMenuButton({key:"se.slotContextualMenuVisibility",nameI18nKey:"slotcontextmenu.title.visibility",regexpKeys:["^.*ContentSlot$"],action:{templateUrl:"slotVisibilityWidgetTemplate.html"},permissions:["se.slot.context.menu.visibility"]}),u.addContextualMenuButton({key:"se.slotSharedButton",nameI18nKey:"slotcontextmenu.title.shared.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotSharedTemplate.html"},permissions:["se.slot.context.menu.shared.icon"]}),u.addContextualMenuButton({key:"slotUnsharedButton",nameI18nKey:"slotcontextmenu.title.unshared.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotUnsharedButtonWrapperTemplate.html"},permissions:["se.slot.context.menu.unshared.icon"]}),u.addContextualMenuButton({key:"se.slotSyncButton",nameI18nKey:"slotcontextmenu.title.sync.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotSyncTemplate.html"},permissions:["se.sync.slot.context.menu"]}),u.addDecorator({key:"syncIndicator",nameI18nKey:"syncIndicator",permissions:["se.sync.slot.indicator"]}),u.register({key:"disableSharedSlotEditing",nameI18nKey:"se.cms.disableSharedSlotEditing",descriptionI18nKey:"se.cms.disableSharedSlotEditing.description",enablingCallback:function(){m.setSharedSlotEnablementStatus(!0)},disablingCallback:function(){m.setSharedSlotEnablementStatus(!1)}}),u.addDecorator({key:"sharedSlotDisabledDecorator",nameI18nKey:"se.cms.shared.slot.disabled.decorator",displayCondition:function(t,n){return e.all([h.isSlotEditable(n),r.isExternalComponent(n,t)]).then(function(t){return!t[0]&&!t[1]})}}),u.addDecorator({key:"externalSlotDisabledDecorator",nameI18nKey:"se.cms.external.slot.disabled.decorator",displayCondition:function(t,n){return e.when(r.isExternalComponent(n,t))}}),u.addDecorator({key:"externalComponentDecorator",nameI18nKey:"se.cms.external.component.decorator",displayCondition:function(t,n){return e.when(r.isExternalComponent(n,t))}}),u.addContextualMenuButton({key:"clonecomponentbutton",nameI18nKey:"se.cms.contextmenu.title.clone.component",i18nKey:"se.cms.contextmenu.title.clone.component",regexpKeys:["^((?!Slot).)*$"],condition:function(t){var n=t.componentAttributes.smarteditComponentUuid;if(!t.isComponentHidden){var o=r.getParentSlotForComponent(t.element);return h.isSlotEditable(o).then(function(t){return t?y.getById(n).then(function(t){return t.cloneable}):e.when(!1)})}return v.getById(n).then(function(t){return t.cloneable})},action:{callback:function(t){var e=r.getComponentPositionInSlot(t.slotId,t.componentAttributes.smarteditComponentId);S.cloneExistingComponentToSlot({targetSlotId:t.slotId,dragInfo:{componentId:t.componentAttributes.smarteditComponentId,componentType:t.componentType,componentUuid:t.componentAttributes.smarteditComponentUuid},position:e+1})}},displayClass:"clonebutton",displayIconClass:"hyicon hyicon-clone",displaySmallIconClass:"hyicon hyicon-clone",permissions:["se.clone.component"]})}])},function(t,e,n){function o(t){return n(i(t))}function i(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var s={"./components/externalComponent/externalComponentButton.js":5,"./components/externalComponent/externalComponentDecorator.js":6,"./components/slotShared/slotSharedButton.js":7,"./components/slotSharedDisabled/externalSlotDisabledDecorator.js":8,"./components/slotSharedDisabled/sharedSlotDisabledDecorator.js":9,"./components/slotSharedDisabled/slotDisabledComponent.js":10,"./components/slotUnshared/slotUnsharedButton.js":11,"./components/slotVisibility/hiddenComponentMenu/hiddenComponentMenu.js":12,"./components/slotVisibility/slotVisibilityButton.js":13,"./components/slotVisibility/slotVisibilityComponent.js":14,"./components/synchronize/slots/slotSyncButton.js":15,"./components/synchronize/slots/slotSynchronizationPanel.js":16,"./components/synchronize/slots/syncIndicatorDecorator/syncIndicatorDecorator.js":17,"./requireLegacyJsFiles.js":1,"./services/componentInfoService.js":18,"./services/componentVisibilityAlertService.js":19,"./services/contextualMenuDropdownService.js":20,"./services/deprecatedSince-6.7.js":2,"./services/dragAndDrop/cmsDragAndDropService.js":21,"./services/dragAndDrop/componentEditingFacadeService.js":22,"./services/dragAndDrop/slotRestrictionsService.js":23,"./services/editorEnablerService.js":24,"./services/editorModalService.js":25,"./services/pageContentSlotsService.js":26,"./services/removeComponentService.js":27,"./services/slotSharedService.js":28,"./services/slotSynchronizationService.js":29,"./services/slotUnsharedService.js":30,"./services/slotVisibilityService.js":31,"./services/syncPollingService.js":32,"./templates.js":33};o.keys=function(){return Object.keys(s)},o.resolve=i,t.exports=o,o.id=4},function(t,e){angular.module("externalComponentButtonModule",["l10nModule","catalogServiceModule"]).controller("externalComponentButtonController",["l10nFilter","catalogService",function(t,e){this.$onInit=function(){return this.isReady=!1,e.getCatalogVersionByUuid(this.catalogVersionUuid).then(function(e){this.catalogVersion=t(e.catalogName)+" ("+e.version+")",this.isReady=!0}.bind(this))}}]).component("externalComponentButton",{templateUrl:"externalComponentButtonTemplate.html",controller:"externalComponentButtonController",controllerAs:"ctrl",bindings:{catalogVersionUuid:"<"}})},function(t,e){angular.module("externalComponentDecoratorModule",["componentHandlerServiceModule"]).controller("externalComponentDecoratorController",["$element","CONTENT_SLOT_TYPE","componentHandlerService",function(t,e,n){this.$onInit=function(){var o=n.getParentSlotForComponent(t);this.isExtenalSlot=n.isExternalComponent(o,e)}}]).directive("externalComponentDecorator",function(){return{templateUrl:"externalComponentDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(t,e){angular.module("slotSharedButtonModule",["slotSharedServiceModule","translationServiceModule","crossFrameEventServiceModule","seConstantsModule","hasOperationPermissionModule"]).controller("slotSharedButtonController",["slotSharedService","$window","crossFrameEventService","EVENT_OUTER_FRAME_CLICKED",function(t,e,n,o){this.slotSharedFlag=!1,this.buttonName="slotSharedButton",this.isPopupOpened=!1,this.isPopupOpenedPreviousValue=!1,this.$onInit=function(){this.slotAttributes={smarteditComponentId:this.componentAttributes.smarteditComponentId,contentSlotUuid:this.componentAttributes.smarteditComponentUuid,componentType:this.componentAttributes.smarteditComponentType,catalogVersionUuid:this.componentAttributes.smarteditCatalogVersionUuid},t.isSlotShared(this.slotId).then(function(t){this.slotSharedFlag=t}.bind(this)),this.unregFn=n.subscribe(o,function(){this.isPopupOpened=!1}.bind(this))},this.$doCheck=function(){this.isPopupOpenedPreviousValue!==this.isPopupOpened&&(this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened}),this.isPopupOpenedPreviousValue=this.isPopupOpened)},this.convertToNonSharedSlotAndCloneComponents=function(){t.convertSharedSlotToNonSharedSlot(this.slotAttributes,!0).then(function(){this.isPopupOpened=!1,e.location.reload()}.bind(this))},this.convertToNonSharedSlotAndRemoveComponents=function(){t.convertSharedSlotToNonSharedSlot(this.slotAttributes,!1).then(function(){this.isPopupOpened=!1,e.location.reload()}.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).component("slotSharedButton",{templateUrl:"slotSharedButtonTemplate.html",controller:"slotSharedButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@",componentAttributes:"<"}})},function(t,e){angular.module("externalSlotDisabledDecoratorModule",["slotDisabledDecoratorModule"]).directive("externalSlotDisabledDecorator",function(){return{templateUrl:"externalSlotDisabledDecoratorTemplate.html",transclude:!0,restrict:"C",controllerAs:"ctrl",controller:function(){},scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(t,e){angular.module("sharedSlotDisabledDecoratorModule",["slotDisabledDecoratorModule"]).directive("sharedSlotDisabledDecorator",function(){return{templateUrl:"sharedSlotDisabledDecoratorTemplate.html",transclude:!0,restrict:"C",controllerAs:"ctrl",controller:function(){},scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(t,e){angular.module("slotDisabledDecoratorModule",["componentHandlerServiceModule","catalogServiceModule","yPopoverModule","l10nModule"]).controller("slotDisabledComponentController",["$translate","componentHandlerService","catalogService","l10nFilter",function(t,e,n,o){var i={GLOBE:"hyicon-globe",LOCK:"hyicon-lock",HOVERED:"hyicon-linked"};this.$onInit=function(){this._checkIfSlotIsInherited(),this._getSourceCatalogName()},this._checkIfSlotIsInherited=function(){var t=this.componentAttributes.smarteditCatalogVersionUuid;e.getCatalogVersionUUIDFromPage().then(function(e){this.isExternalSlot=t!==e}.bind(this))},this._getSourceCatalogName=function(){var t=this.componentAttributes.smarteditCatalogVersionUuid;n.getCatalogVersionByUuid(t).then(function(t){this.catalogName=t.catalogName}.bind(this))},this.getPopoverMessage=function(){var e=this.isExternalSlot?"se.cms.externalsharedslot.decorator.label":"se.cms.sharedslot.decorator.label",n={catalogName:o(this.catalogName),slotId:this.componentAttributes.smarteditComponentId};return t.instant(e,n)},this.getSlotIconClass=function(){var t="";return this.active?t=i.HOVERED:void 0!==this.isExternalSlot&&(t=this.isExternalSlot?i.GLOBE:i.LOCK),t},this.getOuterSlotClass=function(){return this.getSlotIconClass()===i.GLOBE?"disabled-shared-slot__icon--outer-globe":""}.bind(this)}]).component("slotDisabledComponent",{templateUrl:"slotDisabledTemplate.html",controller:"slotDisabledComponentController",controllerAs:"ctrl",bindings:{active:"=",componentAttributes:"<"}})},function(t,e){angular.module("slotUnsharedButtonModule",["slotUnsharedServiceModule","translationServiceModule","confirmationModalServiceModule","crossFrameEventServiceModule","seConstantsModule","hasOperationPermissionModule"]).controller("slotUnsharedButtonController",["$scope","$window","EVENT_OUTER_FRAME_CLICKED","slotUnsharedService","confirmationModalService","crossFrameEventService",function(t,e,n,o,i,s){this.revertToSharedSlot=function(){var t={title:"se.cms.slot.unshared.revert.to.shared.title",templateUrl:"revertToSharedSlotConfirmationTemplate.html"};i.confirm(t).then(function(){o.revertToSharedSlot(this.slotUuid).then(function(){this.isPopupOpened=!1,e.location.reload()}.bind(this))}.bind(this))},this.$onInit=function(){this.slotUnsharedFlag=!1,this.buttonName="slotUnsharedButton",this.isPopupOpened=!1,this.isPopupOpenedOldValue=this.isPopupOpened,o.isSlotUnshared(this.slotUid).then(function(t){this.slotUnsharedFlag=t}.bind(this)),this.unregFn=s.subscribe(n,function(){this.isPopupOpened=!1}.bind(this))},this.$doCheck=function(){this.isPopupOpenedOldValue!==this.isPopupOpened&&(this.isPopupOpenedOldValue=this.isPopupOpened,this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened}))},this.$onDestroy=function(){this.unregFn()}}]).component("slotUnsharedButton",{templateUrl:"slotUnsharedButtonTemplate.html",controller:"slotUnsharedButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotUuid:"@",slotUid:"@"}})},function(t,e){angular.module("hiddenComponentMenuModule",["yPopupOverlayModule","eventServiceModule","yLoDashModule","componentHandlerServiceModule"]).constant("HIDDEN_COMPONENT_OPENED_EVENT","HIDDEN_COMPONENT_OPENED_EVENT").controller("hiddenComponentMenuController",["lodash","hiddenComponentMenuService","systemEventService","componentHandlerService","HIDDEN_COMPONENT_OPENED_EVENT","CONTENT_SLOT_TYPE",function(t,e,n,o,i,s){this.$onInit=function(){var r=o.getOriginalComponent(this.slotId,s);this.slotUuid=o.getUuid(r),this.isMenuOpen=!1,e.getItemsForHiddenComponent(this.component,this.slotId).then(function(e){this.configuration=t.cloneDeep(e.configuration),this.configuration.slotUuid=this.slotUuid,this.menuItems=t.cloneDeep(e.buttons)}.bind(this)),this.unRegRemoveComponentOpenedEvent=n.registerEventHandler(i,this.onOtherMenuOpening)},this.$onDestroy=function(){this.unRegRemoveComponentOpenedEvent()},this.popupConfig={templateUrl:"hiddenComponentMenuItemsTemplate.html",halign:"left",valign:"bottom"},this.onButtonClick=function(t){t.stopPropagation(),this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&n.sendAsynchEvent(i,{componentId:this.component.uid,slotId:this.slotId})}.bind(this),this.onMenuHide=function(){this.isMenuOpen=!1}.bind(this),this.onOtherMenuOpening=function(t,e){var n=this.component.uid===e.componentId,o=this.slotId===e.slotId;n&&o||(this.isMenuOpen=!1)}.bind(this),this.executeItemCallback=function(t,e){t.action&&(t.action.callback(this.configuration,e),this.isMenuOpen=!1)}}]).component("hiddenComponentMenu",{templateUrl:"hiddenComponentMenuTemplate.html",transclude:!1,controller:"hiddenComponentMenuController",controllerAs:"ctrl",bindings:{component:"<",slotId:"<"}})},function(t,e){angular.module("slotVisibilityButtonModule",["cmssmarteditTemplates","slotVisibilityServiceModule","slotVisibilityComponentModule","smarteditServicesModule","crossFrameEventServiceModule","seConstantsModule"]).controller("slotVisibilityButtonController",["slotVisibilityService","$scope","sharedDataService","$translate","crossFrameEventService","EVENT_OUTER_FRAME_CLICKED",function(t,e,n,o,i,s){this.buttonName="slotVisibilityButton",this.eyeOnImageUrl="/cmssmartedit/images/visibility_slot_menu_on.png",this.eyeOffImageUrl="/cmssmartedit/images/visibility_slot_menu_off.png",this.eyeImageUrl=this.eyeOffImageUrl,this.closeImageUrl="/cmssmartedit/images/close_button.png",this.buttonVisible=!1,this.hiddenComponents=[],this.isComponentListOpened=!1,e.$watch("ctrl.isComponentListOpened",function(t,e){this.eyeImageUrl=t?this.eyeOnImageUrl:this.eyeOffImageUrl,t!==e&&this.setRemainOpen({button:this.buttonName,remainOpen:this.isComponentListOpened})}.bind(this)),this.markExternalComponents=function(t,e){e.forEach(function(e){e.isExternal=e.catalogVersion!==t.pageContext.catalogVersionUuid})},this.getTemplateInfoForExternalComponent=function(){return"<div>"+o.instant("se.cms.slotvisibility.external.component")+"</div>"},this.onInsideClick=function(t){t.stopPropagation()},this.$onInit=function(){t.getHiddenComponents(this.slotId).then(function(t){n.get("experience").then(function(e){this.hiddenComponents=t,this.markExternalComponents(e,this.hiddenComponents),this.hiddenComponentCount=t.length,this.hiddenComponentCount>0&&(this.buttonVisible=!0)}.bind(this))}.bind(this)),this.unregFn=i.subscribe(s,function(){this.isComponentListOpened=!1}.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).component("slotVisibilityButton",{templateUrl:"slotVisibilityButtonTemplate.html",transclude:!0,controller:"slotVisibilityButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@",initButton:"@"}})},function(t,e){angular.module("slotVisibilityComponentModule",["componentVisibilityAlertServiceModule","editorModalServiceModule","catalogServiceModule","catalogVersionPermissionModule","hiddenComponentMenuModule"]).controller("slotVisibilityComponentController",["componentVisibilityAlertService","editorModalService","catalogService","catalogVersionPermissionService",function(t,e,n,o){this.openEditorModal=function(){e.openAndRerenderSlot(this.component.typeCode,this.component.uuid,"visible").then(function(e){t.checkAndAlertOnComponentVisibility({itemId:e.uuid,itemType:e.itemtype,catalogVersion:e.catalogVersion,restricted:e.restricted,slotId:this.slotId,visible:e.visible})}.bind(this))},this.$onInit=function(){this.isReady=!1,this.imageRoot="/cmssmartedit/images",n.getCatalogVersionByUuid(this.component.catalogVersion).then(function(t){o.hasWritePermission(t.catalogId,t.version).then(function(t){this.readOnly=!t||this.component.isExternal,this.componentVisibilitySwitch=this.component.visible?"se.cms.component.visibility.status.on":"se.cms.component.visibility.status.off",this.componentRestrictionsCount="("+(this.component.restrictions?this.component.restrictions.length:0)+")",this.imageSrc=this.imageRoot+"/"+(this.readOnly?"component_external.png":"component_default.png"),this.isReady=!0}.bind(this))}.bind(this))}}]).component("slotVisibilityComponent",{templateUrl:"slotVisibilityComponentTemplate.html",transclude:!1,controller:"slotVisibilityComponentController",controllerAs:"ctrl",bindings:{component:"=",slotId:"@",componentId:"@"}})},function(t,e){angular.module("slotSyncButtonModule",["catalogServiceModule","slotSynchronizationPanelModule","slotSynchronizationServiceModule","componentHandlerServiceModule","crossFrameEventServiceModule","seConstantsModule"]).controller("slotSyncButtonController",["$scope","$translate","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","EVENT_OUTER_FRAME_CLICKED","catalogService","slotSynchronizationService","componentHandlerService","crossFrameEventService",function(t,e,n,o,i,s,r,a,c){t.$watch("ctrl.isPopupOpened",function(){this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened})}.bind(this)),this.statusIsInSync=function(t){return t.status&&t.status===o.IN_SYNC},this.getSyncStatus=function(){a.getPageUUID().then(function(t){r.getSyncStatus(t,this.slotId).then(function(t){this.isSlotInSync=this.statusIsInSync(t),this.newPageIsNotSynchronized=!t.lastSyncStatus,this.ready=!0}.bind(this))}.bind(this))}.bind(this),this.updateStatus=function(t,e){var n=(e.selectedDependencies||[]).concat(e.sharedDependencies||[]).find(function(t){return t.itemId===this.slotId}.bind(this))||{};this.isSlotInSync=this.statusIsInSync(n)};var l=this.getSyncStatus;this.$onInit=function(){this.buttonName="slotSyncButton",this.isPopupOpened=!1,this.newPageIsNotSynchronized=!1,this.ready=!1,this.isSlotInSync=!0,this.getSyncStatus(),this.unRegisterSyncPolling=c.subscribe(n.FAST_FETCH,l),this.newPageIsNotSynchronizedTemplate="<div class='se-ypopover--inner-content'>"+e.instant("se.cms.slot.sync.from.page.level")+"</div>",this.unregFn=c.subscribe(i,function(){this.isPopupOpened=!1}.bind(this))},this.$onDestroy=function(){this.unRegisterSyncPolling(),this.unregFn()}}]).component("slotSyncButton",{templateUrl:"slotSyncButtonTemplate.html",controller:"slotSyncButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@"}})},function(t,e){angular.module("slotSynchronizationPanelModule",["synchronizationPanelModule","slotSynchronizationServiceModule","componentHandlerServiceModule"]).controller("slotSynchronizationPanelController",["slotSynchronizationService","componentHandlerService",function(t,e){this.getSyncStatus=function(){return e.getPageUID().then(function(e){return t.getSyncStatus(e,this.slotId)}.bind(this))}.bind(this),this.performSync=function(e){return t.performSync(e)}}]).component("slotSynchronizationPanel",{templateUrl:"slotSynchronizationPanelTemplate.html",controller:"slotSynchronizationPanelController",controllerAs:"slotSync",bindings:{slotId:"<"}})},function(t,e){angular.module("syncIndicatorDecoratorModule",["catalogServiceModule","slotSynchronizationServiceModule","componentHandlerServiceModule","synchronizationConstantsModule","crossFrameEventServiceModule"]).controller("syncIndicatorController",["$q","catalogService","slotSynchronizationService","crossFrameEventService","componentHandlerService","SYNCHRONIZATION_STATUSES","SYNCHRONIZATION_POLLING",function(t,e,n,o,i,s,r){this.isVersionNonActive=!1,this.unRegisterSyncPolling=angular.noop,this.$onInit=function(){this.syncStatus={status:s.UNAVAILABLE},i.getPageUUID().then(function(t){this.pageUUID=t,this.unRegisterSyncPolling=o.subscribe(r.FAST_FETCH,this.fetchSyncStatus.bind(this)),e.isContentCatalogVersionNonActive().then(function(t){this.isVersionNonActive=t,this.isVersionNonActive&&this.fetchSyncStatus()}.bind(this))}.bind(this))},this.$onDestroy=function(){this.unRegisterSyncPolling()},this.fetchSyncStatus=function(){return this.isVersionNonActive?n.getSyncStatus(this.pageUUID,this.componentAttributes.smarteditComponentId).then(function(t){this.syncStatus=t}.bind(this),function(){this.syncStatus.status=s.UNAVAILABLE}.bind(this)):t.when()}.bind(this)}]).directive("syncIndicator",[function(){return{templateUrl:"syncIndicatorDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,controller:"syncIndicatorController",controllerAs:"ctrl",bindToController:{active:"=",componentAttributes:"<"}}}])},function(t,e){angular.module("componentInfoServiceModule",["yjqueryModule","yLoDashModule","crossFrameEventServiceModule","eventServiceModule","cmsitemsRestServiceModule","componentHandlerServiceModule","renderServiceInterfaceModule"]).service("componentInfoService",["$log","$document","$q","yjQuery","lodash","crossFrameEventService","cmsitemsRestService","systemEventService","UUID_ATTRIBUTE","EVENTS","OVERLAY_RERENDERED_EVENT",function(t,e,n,o,i,s,r,a,c,l,d){var u={},p={};this.getById=function(t){if(u[t])return n.when(u[t]);var e=p[t]||n.defer();return p[t]||(p[t]=e),e.promise},this._getComponentsDataByUUIDs=function(e){r.getByIds(e).then(function(t){t.response.forEach(function(t){u[t.uuid]=t,p[t.uuid]&&(p[t.uuid].resolve(t),delete p[t.uuid])})},function(n){t.error("componentInfoService::_getComponentsDataByUUIDs error:",n.message),e.forEach(function(t){p[t]&&(p[t].reject(n),delete p[t])})})},this._onComponentsAdded=function(t){var e=i.map(t,function(t){return o(t).attr(c)}).filter(function(t){return!i.includes(Object.keys(u),t)});e.length&&this._getComponentsDataByUUIDs(e)},this._onComponentsRemoved=function(t){t.filter(function(t){return!o.find("["+c+"='"+o(t).attr(c)+"']").length}).filter(function(t){return i.includes(Object.keys(u),o(t).attr(c))}).map(function(t){return o(t).attr(c)}).forEach(function(t){delete u[t]})},this._clearCache=function(){u={},p={}},s.subscribe(d,function(t,e){e&&(e.addedComponents&&e.addedComponents.length&&this._onComponentsAdded(e.addedComponents),e.removedComponents&&e.removedComponents.length&&this._onComponentsRemoved(e.removedComponents))}.bind(this)),s.subscribe(l.PAGE_CHANGE,this._clearCache.bind(this)),a.registerEventHandler(l.AUTHORIZATION_SUCCESS,function(t,e){e.userHasChanged&&this._clearCache()}.bind(this))}])},function(t,e){angular.module("componentVisibilityAlertServiceModule",["componentVisibilityAlertServiceInterfaceModule","gatewayProxyModule"]).factory("componentVisibilityAlertService",["ComponentVisibilityAlertServiceInterface","extend","gatewayProxy",function(t,e,n){var o=function(){this.gatewayId="ComponentVisibilityAlertService",n.initForService(this,["checkAndAlertOnComponentVisibility"])};return new(o=e(t,o))}])},function(t,e){angular.module("contextualMenuDropdownServiceModule",["contextualMenuDecoratorModule","eventServiceModule"]).run(["contextualMenuDropdownService",function(t){t._registerIsOpenEvent()}]).service("contextualMenuDropdownService",["systemEventService","CTX_MENU_DROPDOWN_IS_OPEN","CLOSE_CTX_MENU","DRAG_AND_DROP_EVENTS",function(t,e,n,o){this._registerIsOpenEvent=function(){t.registerEventHandler(e,function(){this._registerDragStarted()}.bind(this))},this._registerDragStarted=function(){t.registerEventHandler(o.DRAG_STARTED,this._triggerCloseOperation)},this._triggerCloseOperation=function(){t.sendAsynchEvent(n),t.unRegisterEventHandler(o.DRAG_STARTED,this._triggerCloseOperation)}.bind(this)}])},function(t,e){angular.module("cmsDragAndDropServiceModule",["yjqueryModule","dragAndDropServiceModule","alertServiceModule","yLoDashModule","componentHandlerServiceModule","eventServiceModule","gatewayFactoryModule","slotRestrictionsServiceModule","componentEditingFacadeModule","translationServiceModule","removeComponentServiceModule","smarteditServicesModule","cmsSmarteditServicesModule","browserServiceModule","seConstantsModule"]).constant("DRAG_AND_DROP_EVENTS",{DRAG_STARTED:"CMS_DRAG_STARTED",DRAG_STOPPED:"CMS_DRAG_STOPPED",DRAG_OVER:"CMS_DRAG_OVER",DRAG_LEAVE:"CMS_DRAG_LEAVE"}).service("cmsDragAndDropService",["$q","$window","$translate","$timeout","yjQuery","lodash","dragAndDropService","componentHandlerService","systemEventService","gatewayFactory","slotRestrictionsService","alertService","assetsService","browserService","componentEditingFacade","waitDialogService","DRAG_AND_DROP_EVENTS","COMPONENT_REMOVED_EVENT","CONTENT_SLOT_TYPE","OVERLAY_RERENDERED_EVENT","CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS","SMARTEDIT_COMPONENT_PROCESS_STATUS","CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS",function(t,e,n,o,i,s,r,a,c,l,d,u,p,h,m,g,S,v,y,_,f,I,C){var E=".smartEditComponentX[data-smartedit-component-type='ContentSlot']",b=".smartEditComponentX[data-smartedit-component-type!='ContentSlot']",T={UI_HELPER_OVERLAY:"overlayDnd",DROPZONE:"overlayDropzone",DROPZONE_FULL:"overlayDropzone--full",DROPZONE_TOP:"overlayDropzone--top",DROPZONE_BOTTOM:"overlayDropzone--bottom",DROPZONE_LEFT:"overlayDropzone--left",DROPZONE_RIGHT:"overlayDropzone--right",DROPZONE_HOVERED:"overlayDropzone--hovered",OVERLAY_IN_DRAG_DROP:"smarteditoverlay_dndRendering",COMPONENT_DRAGGED:"component_dragged",COMPONENT_DRAGGED_HOVERED:"component_dragged_hovered",SLOTS_MARKED:"slot-marked",SLOT_ALLOWED:"over-slot-enabled",SLOT_NOT_ALLOWED:"over-slot-disabled"};this._cachedSlots={},this._highlightedSlot=null,this._highlightedComponent=null,this._highlightedHint=null,this._dragInfo=null,this._gateway=l.createGateway("cmsDragAndDrop"),this.register=function(){r.register({id:"se.cms.dragAndDrop",sourceSelector:["#smarteditoverlay .smartEditComponentX[data-smartedit-component-type!='ContentSlot'] .movebutton",".movebutton"],targetSelector:"#smarteditoverlay .smartEditComponentX[data-smartedit-component-type='ContentSlot']",startCallback:this.onStart,dragEnterCallback:this.onDragEnter,dragOverCallback:this.onDragOver,dropCallback:this.onDrop,outCallback:this.onDragLeave,stopCallback:this.onStop,enableScrolling:!0,helper:this._getDragImageSrc})},this.unregister=function(){r.unregister(["se.cms.dragAndDrop"]),d.emptyCache(),c.unRegisterEventHandler(_,this._onOverlayUpdate),c.unRegisterEventHandler(v,this._onOverlayUpdate)},this.apply=function(){r.apply("se.cms.dragAndDrop"),this._addUIHelpers(),c.registerEventHandler(_,this._onOverlayUpdate),c.registerEventHandler(v,this._onOverlayUpdate),this._gateway.subscribe(S.DRAG_STARTED,function(t,e){r.markDragStarted(),this._initializeDragOperation(e)}.bind(this)),this._gateway.subscribe(S.DRAG_STOPPED,function(){r.markDragStopped(),this._cleanDragOperation()}.bind(this))},this.update=function(){r.update("se.cms.dragAndDrop"),this._addUIHelpers(),this._cacheElements()},this._onOverlayUpdate=function(){return this.update(),t.when()}.bind(this),this.onStart=function(t){var e=this._getSelector(t.target);e.attr("data-component-id")||(e=i(e).closest("[data-component-id]"));var n=e.closest(b),o=n.closest(E),s=n.length>0?a.getId(n):e.attr("data-component-id"),r=n.length>0?a.getSlotOperationRelatedUuid(n):e.attr("data-component-uuid"),c=n.length>0?a.getType(n):e.attr("data-component-type"),l=n.length>0?a.getSlotOperationRelatedId(n):e.attr("data-component-id"),d=n.length>0?a.getSlotOperationRelatedType(n):e.attr("data-component-type"),u=n.length>0?a.getId(o):e.attr("data-slot-id"),p={componentId:s,componentUuid:r,componentType:c,slotUuid:n.length>0?a.getId(o):e.attr("data-slot-uuid"),slotId:u,slotOperationRelatedId:l,slotOperationRelatedType:d};n.addClass(T.COMPONENT_DRAGGED),this._initializeDragOperation(p),this._toggleKeepVisibleComponentAndSlot(!0)}.bind(this),this.onDragEnter=function(t){this._highlightSlot(t)}.bind(this),this.onDragOver=function(t){this._highlightSlot(t).then(function(){if(this._highlightedSlot&&this._highlightedSlot.isAllowed){var e=a.getId(this._highlightedSlot.original);if(!this._highlightedHint||!this._isMouseInRegion(t,this._highlightedHint)){this._highlightedHint&&this._clearHighlightedHint();var n=this._cachedSlots[e];n.components.length>0&&(this._highlightedComponent&&this._isMouseInRegion(t,this._highlightedComponent)||(this._clearHighlightedComponent(),s.forEach(n.components,function(e){if(this._isMouseInRegion(t,e))return this._highlightedComponent=e,!1}.bind(this))),this._highlightedComponent&&s.forEach(this._highlightedComponent.hints,function(e){if(this._isMouseInRegion(t,e))return this._highlightedHint=e,!1}.bind(this))),this._highlightedComponent&&this._highlightedComponent.id===this._dragInfo.slotOperationRelatedId?this._highlightedComponent.original.addClass(T.COMPONENT_DRAGGED_HOVERED):this._highlightedHint&&this._highlightedHint.original.addClass(T.DROPZONE_HOVERED)}}}.bind(this))}.bind(this),this.onDrop=function(t){if(this._highlightedSlot){var e=this._dragInfo.slotId,o=a.getId(this._highlightedSlot.original),i=a.getUuid(this._highlightedSlot.original),s=this._dragInfo.componentId,r=this._dragInfo.slotOperationRelatedId||this._dragInfo.componentId,c=this._dragInfo.slotOperationRelatedType||this._dragInfo.componentType;if(!this._highlightedSlot.isAllowed){var l=n.instant("se.drag.and.drop.not.valid.component.type",{slotUID:o,componentUID:r});return void u.showDanger({message:l})}if(this._highlightedHint||0===this._highlightedSlot.components.length){var d,p=this._highlightedHint?this._highlightedHint.position:0;if(g.showWaitModal(),e)e===o&&a.getComponentPositionInSlot(e,s)<p&&p--,d=m.moveComponent(e,o,r,p);else if(s){var h={componentId:s,componentUuid:this._dragInfo.componentUuid,componentType:c},S={targetSlotId:o,dragInfo:h,position:p};d=this._dragInfo.cloneOnDrop?m.cloneExistingComponentToSlot(S):m.addExistingComponentToSlot(o,h,p)}else{var v={targetSlotId:o,targetSlotUUId:i},y=a.getCatalogVersionUuid(this._highlightedSlot.original);d=m.addNewComponentToSlot(v,y,c,p)}d.then(function(){this._scrollToModifiedSlot(o)}.bind(this),function(){this.onStop(t)}.bind(this)).finally(function(){g.hideWaitModal()})}}}.bind(this),this.onDragLeave=function(t){if(this._highlightedSlot){var e=a.getId(this._highlightedSlot.original),n=this._cachedSlots[e];this._isMouseInRegion(t,n)||this._clearHighlightedSlot()}}.bind(this),this.onStop=function(t){var e=this._getSelector(t.target).closest(b);this._toggleKeepVisibleComponentAndSlot(!1),this._cleanDragOperation(e),c.sendSynchEvent(f.RESTART_PROCESS)}.bind(this),this._getDragImageSrc=function(){var t="";return h.isSafari()&&(t=p.getAssetsRoot()+"/images/contextualmenu_move_on.png"),t},this._initializeDragOperation=function(t){this._dragInfo=t,this._cacheElements(),a.getOverlay().addClass(T.OVERLAY_IN_DRAG_DROP),c.sendAsynchEvent(S.DRAG_STARTED)},this._cleanDragOperation=function(t){this._clearHighlightedSlot(),t&&t.removeClass(T.COMPONENT_DRAGGED),a.getOverlay().removeClass(T.OVERLAY_IN_DRAG_DROP),c.sendAsynchEvent(S.DRAG_STOPPED),this._dragInfo=null,this._cachedSlots={},this._highlightedSlot=null},this._highlightSlot=function(e){var n,o=i(e.target).closest(E),r=a.getId(o);if(this._highlightedSlot&&(n=a.getId(this._highlightedSlot.original))!==r&&this._clearHighlightedSlot(),!this._highlightedSlot||void 0===this._highlightedSlot.isAllowed){this._highlightedSlot=this._cachedSlots[r];var l=s.cloneDeep(this._dragInfo);return l.componentId=this._dragInfo.slotOperationRelatedId||this._dragInfo.componentId,l.componentType=this._dragInfo.slotOperationRelatedType||this._dragInfo.componentType,l.cloneOnDrop&&delete l.componentId,d.isComponentAllowedInSlot(this._highlightedSlot,l).then(function(t){d.isSlotEditable(r).then(function(i){this._highlightedSlot&&this._highlightedSlot.id===r&&(this._highlightedSlot.isAllowed=t&&i||this._dragInfo.slotId===r,this._highlightedSlot.isAllowed?o.addClass(T.SLOT_ALLOWED):o.addClass(T.SLOT_NOT_ALLOWED),"dragenter"!==e.type||n&&n===r||this._highlightedSlot&&this._highlightedSlot.id===r&&(c.sendSynchEvent(r+"_SHOW_SLOT_MENU",r),c.sendSynchEvent(S.DRAG_OVER,r)))}.bind(this))}.bind(this))}return t.when()},this._addUIHelpers=function(){var t=a.getOverlay();t.find("."+T.UI_HELPER_OVERLAY).remove(),t.find(E).each(function(){var t=i(this),e=t[0].offsetHeight,n=t[0].offsetWidth,o=a.getId(t);d.getSlotRestrictions(o);var s=t.find(b);if(0===s.length){var r=i("<div></div>");r.addClass(T.UI_HELPER_OVERLAY);var c=i("<div></div>");c.addClass(T.DROPZONE),c.addClass(T.DROPZONE_FULL),r.height(e),r.width(n),r.append(c),t.append(r)}else s.each(function(){var t=i(this),e=t[0].offsetHeight,o=t[0].offsetWidth,s=i("<div></div>");s.addClass(T.UI_HELPER_OVERLAY),s.height(e),s.width(o);var r=i("<div></div>"),a=i("<div></div>");r.addClass(T.DROPZONE),a.addClass(T.DROPZONE),o===n?(r.addClass(T.DROPZONE_TOP),a.addClass(T.DROPZONE_BOTTOM)):(r.addClass(T.DROPZONE_LEFT),a.addClass(T.DROPZONE_RIGHT)),s.append(r),s.append(a),t.append(s)})})},this._cacheElements=function(){var t=a.getOverlay();if(t){var e=this,n=this._getWindowScrolling();t.find(E).each(function(){var t=i(this),o=a.getId(t),s=a.getUuid(t),r={id:o,uuid:s,original:t,components:[],rect:e._getElementRects(t,n)},c=t.children(b);if(0===c.length){var l=t.find(".overlayDropzone");r.hint=l.length>0?{original:l,rect:e._getElementRects(l,n)}:null}else c.each(function(){var t=i(this),s=a.getId(t),c=a.getComponentPositionInSlot(o,s),l={id:a.getSlotOperationRelatedId(t),type:a.getSlotOperationRelatedType(t),original:t,position:c,hints:[],rect:e._getElementRects(t,n)},d=c++;t.find(".overlayDropzone").each(function(){var t=i(this),o={original:t,position:d++,rect:e._getElementRects(t,n)};l.hints.push(o)}),r.components.push(l)});e._cachedSlots[r.id]=r})}},this._clearHighlightedHint=function(){this._highlightedHint&&(this._highlightedHint.original.removeClass(T.DROPZONE_HOVERED),this._highlightedHint=null)},this._clearHighlightedComponent=function(){this._clearHighlightedHint(),this._highlightedComponent&&(this._highlightedComponent.original.removeClass(T.COMPONENT_DRAGGED_HOVERED),this._highlightedComponent=null)},this._clearHighlightedSlot=function(){this._clearHighlightedComponent(),this._highlightedSlot&&(this._highlightedSlot.original.removeClass(T.SLOT_ALLOWED),this._highlightedSlot.original.removeClass(T.SLOT_NOT_ALLOWED),c.sendSynchEvent("HIDE_SLOT_MENU"),c.sendSynchEvent(S.DRAG_LEAVE)),this._highlightedSlot=null},this._isMouseInRegion=function(t,e){var n=e.rect;return t.pageX>=n.left&&t.pageX<=n.right&&t.pageY>=n.top&&t.pageY<=n.bottom},this._getElementRects=function(t,e){var n=t[0].getBoundingClientRect();return{left:n.left,right:n.right,bottom:n.bottom+e,top:n.top+e}},this._getWindowScrolling=function(){return e.scrollY||e.pageYOffset},this._scrollToModifiedSlot=function(t){var e=a.getComponentInOverlay(t,y);e&&e.length>0&&e[0].scrollIntoView()},this._getSelector=function(t){return i(t)},this._toggleKeepVisibleComponentAndSlot=function(t){var e=t?C.KEEP_VISIBLE:C.PROCESS;i.each(a.getComponentUnderSlot(this._dragInfo.componentId,this._dragInfo.componentType,this._dragInfo.slotId),function(t,n){n.dataset[I]=e}),i.each(a.getComponent(this._dragInfo.slotId,y),function(t,n){n.dataset[I]=e})}}])},function(t,e){angular.module("componentEditingFacadeModule",["alertServiceModule","componentServiceModule","componentVisibilityAlertServiceModule","editorModalServiceModule","renderServiceModule","smarteditServicesModule","slotVisibilityServiceModule","translationServiceModule","smarteditServicesModule","functionsModule"]).service("componentEditingFacade",["$log","$q","$translate","copy","ComponentService","componentHandlerService","restServiceFactory","editorModalService","renderService","alertService","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","componentVisibilityAlertService","slotVisibilityService","sharedDataService",function(t,e,n,o,i,s,r,a,c,l,d,u,p,h){function m(t,e){return{message:"se.cms.draganddrop.success",messagePlaceholders:{sourceComponentId:t,targetSlotId:e}}}function g(t,e,n){return{message:"se.cms.draganddrop.error",messagePlaceholders:{sourceComponentId:t,targetSlotId:e,detailedError:n.data&&n.data.errors&&n.data.errors.length>0?n.data.errors[0].message:""}}}function S(n,o,i,s){return c.renderSlots(n).then(function(){return p.reloadSlotsInfo().then(function(){return s&&l.showSuccess(m(o,i)),e.when()},function(n){return t.error("componentEditingFacadeModule.renderSlots::slotVisibilityService.reloadSlotsInfo"),t.error(n),e.reject(n)})},function(n){return t.error("componentEditingFacadeModule.renderSlots::renderService.renderSlots - targetSlotId:",i),t.error(n),e.reject(n)})}var v;this.addNewComponentToSlot=function(t,n,o,i){var s={smarteditComponentType:o,catalogVersionUuid:n};return a.open(s,t.targetSlotUUId,i).then(function(e){return S([t.targetSlotId],e.uid,t.targetSlotId,!0)}).catch(function(n){return l.showDanger(g(0,t.targetSlotId,n)),e.reject()})},this.addExistingComponentToSlot=function(t,n,o){return s.getPageUID().then(function(s){return i.addExistingComponent(s,n.componentId,t,o).then(function(){return i.loadComponentItem(n.componentUuid).then(function(e){return u.checkAndAlertOnComponentVisibility({itemId:n.componentUuid,itemType:n.componentType,catalogVersion:e.catalogVersion,restricted:e.restricted,slotId:t,visible:e.visible}),S(t,n.componentId,t,!0)},function(o){return l.showDanger(g(n.componentId,t,o)),e.reject()})},function(o){var i=g(n.componentId,t,o);return l.showDanger(i),e.reject()})})},this.cloneExistingComponentToSlot=function(t){return i.loadComponentItem(t.dragInfo.componentUuid).then(function(i){return h.get("experience").then(function(s){var r=o(i);r.componentUuid=r.uuid,r.cloneComponent=!0,r.catalogVersion=s.pageContext.catalogVersionUuid,r.name=n.instant("se.cms.component.name.clone.of.prefix")+" "+r.name,delete r.uuid,delete r.uid,delete r.slots,delete r.restrictions,delete r.creationtime,delete r.modifiedtime;var c={smarteditComponentType:t.dragInfo.componentType,catalogVersionUuid:s.pageContext.catalogVersionUuid,content:o(r),initialDirty:!0};return a.open(c,t.targetSlotId,t.position).then(function(e){return u.checkAndAlertOnComponentVisibility({itemId:e.uuid,itemType:e.itemtype,catalogVersion:e.catalogVersion,restricted:e.restricted,slotId:t.targetSlotId,visible:e.visible}),S(t.targetSlotId,e.uid,t.targetSlotId,!0)}).catch(function(n){return l.showDanger(g(r.uid,t.targetSlotId,n)),e.reject()})})},function(n){return l.showDanger(g(t.dragInfo.componentId,t.targetSlotId,n)),e.reject()})},this.moveComponent=function(t,n,o,i){var a=d+"/pages/:pageId/contentslots/:currentSlotId/components/:componentId";return v=v||r.get(a,"componentId"),s.getPageUID().then(function(s){return v.update({pageId:s,currentSlotId:t,componentId:o,slotId:n,position:i}).then(function(){return S([t,n],o,n)},function(t){var i=void 0===t?{message:"se.cms.draganddrop.move.failed",messagePlaceholders:{slotID:n,componentID:o}}:g(o,n,t);return l.showDanger(i),e.reject()})})}}])},function(t,e){angular.module("slotRestrictionsServiceModule",["yLoDashModule","gatewayProxyModule","crossFrameEventServiceModule","componentHandlerServiceModule","slotSharedServiceModule","smarteditServicesModule","functionsModule","cmsSmarteditServicesModule"]).service("slotRestrictionsService",["$q","$log","lodash","isBlank","gatewayProxy","crossFrameEventService","EVENTS","componentHandlerService","slotSharedService","restServiceFactory","pageContentSlotsComponentsRestService","CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI","CONTENT_SLOT_TYPE",function(t,e,n,o,i,s,r,a,c,l,d,u,p){var h,m={},g=null;this.getAllComponentTypesSupportedOnPage=function(){var o=a.getFromSelector(a.getAllSlotsSelector()),i=Array.prototype.slice.call(o.map(function(){return a.getId(a.getFromSelector(this))}));return t.all(i.map(function(t){return this.getSlotRestrictions(t)}.bind(this))).then(function(t){return n.flatten(t)},function(t){e.info(t)})},this.getSlotRestrictions=function(n){return h=h||l.get(u),this._getPageUID(g).then(function(o){g=o;var i=this._getEntryId(g,n);return m[i]?t.when(m[i]):this._isExternalSlot(n)?(m[i]=[],t.when(m[i])):h.get({pageUid:g,slotUid:n}).then(function(t){return m[i]=t.validComponentTypes,m[i]}.bind(this),function(t){e.info(t)})}.bind(this))},this.isComponentAllowedInSlot=function(t,e){return this.getSlotRestrictions(t.id).then(function(o){return d.getComponentsForSlot(t.id).then(function(i){return(t.id===e.slotId||!i.some(function(t){return t.uid===e.componentId}))&&n.includes(o,e.componentType)})})},this.isSlotEditable=function(t){return c.isSlotShared(t).then(function(e){return!e||!this._isExternalSlot(t)&&!c.areSharedSlotsDisabled()}.bind(this))},this.emptyCache=function(){m={},g=null},this._getEntryId=function(t,e){return t+"_"+e},this._isExternalSlot=function(t){return a.isExternalComponent(t,p)},this._getPageUID=function(e){return o(e)?a.getPageUID():t.when(e)},s.subscribe(r.PAGE_CHANGE,function(){this.emptyCache()}.bind(this)),i.initForService(this,["getAllComponentTypesSupportedOnPage","getSlotRestrictions"],"SLOT_RESTRICTIONS")}])},function(t,e){angular.module("editorEnablerServiceModule",["componentVisibilityAlertServiceModule","componentHandlerServiceModule","editorModalServiceModule","smarteditServicesModule","slotRestrictionsServiceModule"]).factory("editorEnablerService",["componentVisibilityAlertService","componentHandlerService","editorModalService","featureService","slotRestrictionsService",function(t,e,n,o,i){function s(){}return s.prototype._key="se.cms.edit",s.prototype._nameI18nKey="se.cms.contextmenu.nameI18nKey.edit",s.prototype._i18nKey="se.cms.contextmenu.title.edit",s.prototype._descriptionI18nKey="se.cms.contextmenu.descriptionI18n.edit",s.prototype._editDisplayClass="editbutton",s.prototype._editDisplayIconClass="hyicon hyicon-edit",s.prototype._editDisplaySmallIconClass="hyicon hyicon-edit",s.prototype._editButtonCallback=function(e){var o=e.slotUuid;n.open(e.componentAttributes).then(function(e){t.checkAndAlertOnComponentVisibility({itemId:e.uuid,itemType:e.itemtype,catalogVersion:e.catalogVersion,restricted:e.restricted,slotId:o,visible:e.visible})})},s.prototype._condition=function(t){var n=e.getParentSlotForComponent(t.element);return i.isSlotEditable(n).then(function(n){return n&&!e.isExternalComponent(t.componentId,t.componentType)})},s.prototype.enableForComponents=function(t){var e={key:this._key,nameI18nKey:this._nameI18nKey,descriptionI18nKey:this._descriptionI18nKey,regexpKeys:t,displayClass:this._editDisplayClass,displayIconClass:this._editDisplayIconClass,displaySmallIconClass:this._editDisplaySmallIconClass,i18nKey:this._i18nKey,callback:this._editButtonCallback,condition:this._condition,permissions:["se.context.menu.edit.component"]};o.addContextualMenuButton(e)},new s}])},function(t,e){angular.module("editorModalServiceModule",["gatewayProxyModule"]).factory("editorModalService",["gatewayProxy",function(t){function e(){this.gatewayId="EditorModal",t.initForService(this,["open","openAndRerenderSlot"])}return e.prototype.open=function(){},e.prototype.openAndRerenderSlot=function(){},new e}])},function(t,e){angular.module("pageContentSlotsServiceModule",["resourceModule","crossFrameEventServiceModule","componentHandlerServiceModule","resourceLocationsModule","yLoDashModule"]).service("pageContentSlotsService",["$q","lodash","restServiceFactory","crossFrameEventService","EVENTS","componentHandlerService","PAGES_CONTENT_SLOT_RESOURCE_URI",function(t,e,n,o,i,s,r){var a,c=n.get(r);this._reloadPageContentSlots=function(){return s.getPageUID().then(function(n){return a=c.get({pageId:n}).then(function(n){return t.when(e.uniq(n.pageContentSlotList||[]))})})},this.getPageContentSlots=function(){return a?t.when(a):this._reloadPageContentSlots()},this.getSlotStatus=function(n){return(a?t.when(a):this._reloadPageContentSlots()).then(function(t){var o=e.first(t.filter(function(t){return t.slotId===n}));return o?o.slotStatus:void 0})},o.subscribe(i.PAGE_CHANGE,function(){this._reloadPageContentSlots()}.bind(this))}])},function(t,e){angular.module("removeComponentServiceModule",["smarteditServicesModule","renderServiceModule","gatewayProxyModule","removeComponentServiceInterfaceModule","experienceInterceptorModule","functionsModule","resourceLocationsModule","eventServiceModule"]).constant("COMPONENT_REMOVED_EVENT","componentRemovedEvent").factory("removeComponentService",["restServiceFactory","renderService","extend","gatewayProxy","$q","$log","RemoveComponentServiceInterface","experienceInterceptor","systemEventService","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","COMPONENT_REMOVED_EVENT",function(t,e,n,o,i,s,r,a,c,l,d){var u=function(t){this.gatewayId=t,o.initForService(this,["removeComponent"])};u=n(r,u);var p=t.get(l+"/contentslots/:slotId/components/:componentId","componentId");return u.prototype.removeComponent=function(t){return p.remove({slotId:t.slotId,componentId:t.slotOperationRelatedId}).then(function(){e.renderSlots(t.slotId),c.sendAsynchEvent(d)})},new u("RemoveComponent")}])},function(t,e){angular.module("slotSharedServiceModule",["pageContentSlotsServiceModule","yLoDashModule","cmsitemsRestServiceModule","componentHandlerServiceModule","confirmationModalServiceModule"]).service("slotSharedService",["pageContentSlotsService","lodash","cmsitemsRestService","componentHandlerService","$translate","confirmationModalService",function(t,e,n,o,i,s){this.isSlotShared=function(n){return t.getPageContentSlots().then(function(t){var o=e.first(t.filter(function(t){return t.slotId===n}));return o?o.slotShared:void 0})},this.setSharedSlotEnablementStatus=function(t){this.disableShareSlotStatus=t},this.areSharedSlotsDisabled=function(){return this.disableShareSlotStatus},this.convertSharedSlotToNonSharedSlot=function(t,e){return this._validateComponentAttributes(t),this._constructCmsItemParameter(t,e).then(function(t){var o={};return o.title="se.cms.slot.shared.convert.to.unshared.confirmation.title",o.description=e?"se.cms.slot.shared.convert.to.unshared.clone.components.confirmation.message":"se.cms.slot.shared.convert.to.unshared.remove.components.confirmation.message",s.confirm(o).then(function(){return n.create(t)})})},this._constructCmsItemParameter=function(t,e){return i("se.cms.slot.shared.clone").then(function(n){return o.getPageUID().then(function(o){return{name:o+"-"+t.smarteditComponentId+"-"+n,smarteditComponentId:t.smarteditComponentId,contentSlotUuid:t.contentSlotUuid,itemtype:t.componentType,catalogVersion:t.catalogVersionUuid,pageUuid:o,cloneComponents:e}})}.bind(this))},this._validateComponentAttributes=function(t){if(!t)throw new Error("Parameter: componentAttributes needs to be supplied!");for(var e=["smarteditComponentId","contentSlotUuid","componentType","catalogVersionUuid"],n=0;n<e.length;n++){var o=e[n];if(!t[o])throw new Error("Parameter: componentAttributes."+o+" needs to be supplied!")}}}])},function(t,e){angular.module("slotSynchronizationServiceModule",["synchronizationPollingServiceModule"]).constant("SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL","se.cms.synchronization.slots.select.all.components").service("slotSynchronizationService",["SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL","syncPollingService",function(t,e){this.getSyncStatus=function(n,o){return e.getSyncStatus(n).then(function(e){var n=(e.selectedDependencies||[]).concat(e.sharedDependencies||[]).find(function(t){return t.name===o})||{};return n.selectAll=t,n})},this.performSync=function(t,n){return e.performSync(t,n)}}])},function(t,e){angular.module("slotUnsharedServiceModule",["cmsitemsRestServiceModule","pageContentSlotsServiceModule"]).service("slotUnsharedService",["$q","cmsitemsRestService","pageContentSlotsService",function(t,e,n){this.isSlotUnshared=function(t){return n.getSlotStatus(t).then(function(t){return"OVERRIDE"===t})},this.revertToSharedSlot=function(t){return e.delete(t)}}])},function(t,e){angular.module("slotVisibilityServiceModule",["resourceModule","smarteditServicesModule","crossFrameEventServiceModule","cmsSmarteditServicesModule"]).service("slotVisibilityService",["$log","$q","componentHandlerService","pageInfoService","pageContentSlotsComponentsRestService",function(t,e,n,o,i){var s=function(t){return Object.keys(t).forEach(function(e){var o=[];n.getOriginalComponentsWithinSlot(e).get().forEach(function(t){o.push(n.getId(t))});var i=t[e].filter(function(t){return-1===o.indexOf(t.uid)});t[e]=i}),t};this.reloadSlotsInfo=function(){return o.getPageUID().then(function(t){return i.clearCache(),i.getSlotsToComponentsMapForPageUid(t)}.bind(this),function(e){throw t.error("slotVisibilityService::reloadSlotsInfo - failed call to pageInfoService.getPageUID"),e})};var r=function(e){return e?this.reloadSlotsInfo():o.getPageUID().then(function(t){return i.getSlotsToComponentsMapForPageUid(t)}.bind(this),function(e){throw t.error("slotVisibilityService::reloadSlotsInfo - failed call to pageInfoService.getPageUID"),e})};this.getHiddenComponents=function(t){return r(!1).then(s).then(function(e){return e[t]||[]},function(){return[]})}}])},function(t,e){angular.module("synchronizationPollingServiceModule",["gatewayProxyModule","eventServiceModule","synchronizationConstantsModule"]).run(["syncPollingService",function(t){t.registerSyncPollingEvents()}]).factory("syncPollingService",["gatewayProxy","systemEventService","SYNCHRONIZATION_POLLING",function(t,e,n){var o=function(e){this.gatewayId=e,t.initForService(this)};return o.prototype.getSyncStatus=function(){},o.prototype._fetchSyncStatus=function(){},o.prototype.changePollingSpeed=function(){},o.prototype.registerSyncPollingEvents=function(){e.registerEventHandler(n.SPEED_UP,this.changePollingSpeed.bind(this)),e.registerEventHandler(n.SLOW_DOWN,this.changePollingSpeed.bind(this))},o.prototype.performSync=function(){},new o("syncPollingService")}])},function(t,e){angular.module("cmssmarteditTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/cmssmartedit/components/externalComponent/externalComponentButtonTemplate.html",'<div class="cms-external-component-button"\n    data-ng-if="ctrl.isReady">\n    {{ctrl.catalogVersion}}\n</div>'),t.put("web/features/cmssmartedit/components/externalComponent/externalComponentDecoratorTemplate.html",'<div class="cms-external-component-decorator"\n    data-ng-if="!ctrl.isExtenalSlot">\n    <div class="contextualMenuOverlay">\n        <span class="hyicon hyicon-globe hyicon-globe--normal"\n            data-ng-if="!ctrl.active"></span>\n    </div>\n    <div class="yWrapperData"\n        data-ng-transclude>\n    </div>\n</div>'),t.put("web/features/cmssmartedit/components/slotShared/slotSharedButtonTemplate.html",'<div class="shared-slot-button-template"\n    data-ng-if="ctrl.slotSharedFlag">\n    <div class="btn-group se-slot-ctx-menu__btn-group"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened">\n        <button type="button"\n            data-uib-dropdown-toggle\n            class="btn btn-primary shared-slot-button-template__btn se-slot-ctx-menu__divider"\n            data-ng-class="{\'ySESharedSlotOpen\': ctrl.isPopupOpened}"\n            id="sharedSlotButton-{{::ctrl.slotId}}">\n            <span class="hyicon hyicon-linked se-slot-ctx-menu__icon-shared"></span>\n        </button>\n        <div class="dropdown-menu dropdown-menu-right btn-block shared-slot__dropdown"\n            data-uib-dropdown-menu>\n            <div class="shared-slot__header"\n                data-translate="se.sharedslot.decorator.label"></div>\n            <div class="shared-slot__divider"></div>\n            <div class="shared-slot__description"\n                data-translate="se.cms.slot.shared.popover.message"></div>\n            <div class="shared-slot__divider"></div>\n            <div class="shared-slot__body"\n                has-operation-permission="\'se.shared.slot.override.options\'">\n                <div class="shared-slot__sub-header"\n                    data-translate="se.cms.slot.shared.popover.convertoptions.title"></div>\n                <a class="shared-slot__link"\n                    data-ng-click="ctrl.convertToNonSharedSlotAndCloneComponents()"\n                    data-translate="se.cms.slot.shared.popover.button.clonecomponents">\n                </a>\n                <div class="shared-slot__link-description"\n                    data-translate="se.cms.slot.shared.popover.text.clonecomponents"></div>\n                <a class="shared-slot__link"\n                    data-ng-click="ctrl.convertToNonSharedSlotAndRemoveComponents()"\n                    data-translate="se.cms.slot.shared.popover.button.removecomponents">\n                </a>\n                <div class="shared-slot__link-description"\n                    data-translate="se.cms.slot.shared.popover.text.removecomponents"></div>\n            </div>\n        </div>\n    </div>\n</div>'),t.put("web/features/cmssmartedit/components/slotShared/slotSharedTemplate.html",'<slot-shared-button data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-component-attributes="ctrl.componentAttributes"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)">\n</slot-shared-button>'),t.put("web/features/cmssmartedit/components/slotSharedDisabled/externalSlotDisabledDecoratorTemplate.html",'<div class="se-decorator-wrap">\n    <slot-disabled-component data-active="ctrl.active"\n        data-component-attributes="ctrl.componentAttributes" />\n    <div ng-transclude></div>\n</div>'),t.put("web/features/cmssmartedit/components/slotSharedDisabled/sharedSlotDisabledDecoratorTemplate.html",'<div class="se-decorator-wrap">\n    <slot-disabled-component data-active="ctrl.active"\n        data-component-attributes="ctrl.componentAttributes" />\n    <div ng-transclude></div>\n</div>'),t.put("web/features/cmssmartedit/components/slotSharedDisabled/slotDisabledTemplate.html",'<div class="disabled-shared-slot popoveredElement external-shared-slot"\n    data-ng-class="{ \'disabled-shared-slot-hovered\': ctrl.active, \'external-shared-slot\': ctrl.isExternalSlot }"\n    data-popover-content="{{ctrl.getPopoverMessage()}}">\n    <div class="disabled-shared-slot__icon--outer"\n        data-ng-class="[ctrl.getOuterSlotClass(), { \'disabled-shared-slot__icon--outer-hovered\': ctrl.active }]">\n        <span class="hyicon shared_slot_disabled_icon disabled-shared-slot__icon--inner"\n            data-ng-class="ctrl.getSlotIconClass()">\n        </span>\n    </div>\n</div>'),t.put("web/features/cmssmartedit/components/slotUnshared/slotUnsharedButtonTemplate.html",'<div class="slot-unshared-button-template"\n    data-ng-if="ctrl.slotUnsharedFlag">\n    <div class="btn-group se-slot-ctx-menu__btn-group"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened">\n        <button type="button"\n            data-uib-dropdown-toggle\n            class="btn btn-primary shared-slot-button-template__btn se-slot-ctx-menu__divider"\n            data-ng-class="{\'ySESharedSlotOpen\': ctrl.isPopupOpened}"\n            id="slot-unshared-button-{{::ctrl.slotUid}}">\n            <span class="hyicon hyicon-unlinked se-slot-ctx-menu__icon-unshared"></span>\n        </button>\n        <div class="dropdown-menu dropdown-menu-right se-toolbar-menu-content shared-slot__dropdown"\n            data-uib-dropdown-menu>\n            <div class="shared-slot__header"\n                data-translate="se.cms.unshared.slot.header">\n            </div>\n            <div class="shared-slot__divider"></div>\n            <div class="shared-slot__body">\n                <div class="shared-slot__link-description shared-slot__link-description__unshared"\n                    data-translate="se.cms.slot.unshared.popover.message"></div>\n                <a class="shared-slot__link"\n                    data-ng-click="ctrl.revertToSharedSlot()"\n                    has-operation-permission="\'se.revert.to.shared.slot.link\'">\n                    {{\'se.cms.slot.unshared.revert.to.shared.title\' | translate}}\n                </a>\n            </div>\n        </div>\n    </div>\n</div>'),t.put("web/features/cmssmartedit/components/slotUnshared/slotUnsharedButtonWrapperTemplate.html",'<slot-unshared-button data-slot-uuid="{{::ctrl.componentAttributes.smarteditComponentUuid}}"\n    data-slot-uid="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"></slot-unshared-button>'),t.put("web/features/cmssmartedit/components/slotVisibility/hiddenComponentMenu/hiddenComponentMenuItemsTemplate.html",'<div class="se-hidden-component-menu">\n    <div class="se-hidden-component-menu__item"\n        data-ng-repeat="dropdownItem in ctrl.menuItems"\n        data-ng-click="ctrl.executeItemCallback(dropdownItem, $event)">\n        <span class="se-hidden-component-menu__item-icon"\n            data-ng-class="[dropdownItem.displayIconClass]"></span>\n        <span class="se-hidden-component-menu__item-link">\n            {{ dropdownItem.i18nKey | translate }}\n        </span>\n    </div>\n</div>'),t.put("web/features/cmssmartedit/components/slotVisibility/hiddenComponentMenu/hiddenComponentMenuTemplate.html",'<div class="se-hidden-component-menu__popup-anchor"\n    data-ng-click="ctrl.onButtonClick($event)"\n    y-popup-overlay="ctrl.popupConfig"\n    y-popup-overlay-trigger="{{ctrl.isMenuOpen}}"\n    y-popup-overlay-on-hide="ctrl.onMenuHide()">\n    <span data-ng-if="ctrl.menuItems.length > 0"\n        class="hyicon hyicon-more se-hidden-component-menu__icon"></span>\n</div>'),t.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityButtonTemplate.html",'<div class="slot-visibility-button-template">\n    <div class="btn-group slot-visibility-button-template__btn-group"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-is-open="ctrl.isComponentListOpened">\n        <button type="button"\n            data-uib-dropdown-toggle\n            class="btn btn-primary slot-visibility-button-template__btn se-slot-ctx-menu__divider"\n            data-ng-if="ctrl.buttonVisible"\n            data-ng-class="{\'ySEVisibilityOpen\': ctrl.isComponentListOpened}"\n            id="slot-visibility-button-{{::ctrl.slotId}}">\n            <img class="slot-visibility-button-template__btn__img "\n                data-ng-src="{{ ctrl.eyeImageUrl }}" />{{ ::ctrl.hiddenComponentCount }}\n        </button>\n        <ul class="dropdown-menu dropdown-menu-right slot-visibility-button-template__menu"\n            data-uib-dropdown-menu\n            data-ng-click="ctrl.onInsideClick($event)"\n            role="menu"\n            id="slot-visibility-list-{{::ctrl.slotId}}">\n            <li class="slot-visibility-button-template__menu__title"\n                data-translate="se.cms.slotvisibility.list.title"></li>\n            <li class="slot-visibility-component slot-visibility-button-template__menu__component"\n                data-ng-repeat="component in ctrl.hiddenComponents track by $index">\n\n                <span data-y-popover\n                    data-ng-if="component.isExternal"\n                    data-trigger="\'hover\'"\n                    data-template="ctrl.getTemplateInfoForExternalComponent()">\n                    <slot-visibility-component data-component="component"\n                        data-component-id="{{::component.uid}}"\n                        data-slot-id="{{::ctrl.slotId}}"></slot-visibility-component>\n                </span>\n\n                <slot-visibility-component data-component="component"\n                    data-ng-if="!component.isExternal"\n                    data-component-id="{{::component.uid}}"\n                    data-slot-id="{{::ctrl.slotId}}"></slot-visibility-component>\n            </li>\n        </ul>\n    </div>\n</div>'),t.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityComponentTemplate.html",'<div class="slot-visibility-component--wrapper"\n    data-ng-class="{\'slot-visibility-component--wrapper__external\': ctrl.readOnly}">\n    <div class="slot-visiblity-component-template"\n        data-ng-if="ctrl.isReady">\n        <div class="slot-visiblity-component-template__icon">\n            <img data-ng-src="{{ctrl.imageSrc}}"\n                class="slot-visiblity-component-template__icon__image"\n                alt="{{::ctrl.component.typeCode}}" />\n        </div>\n        <div class="slot-visiblity-component-template__text-wrapper">\n            <a href="#"\n                data-ng-if="!ctrl.readOnly"\n                class="slot-visiblity-component-template__text slot-visiblity-component-template__text__name"\n                data-ng-click="ctrl.openEditorModal()">{{ ::ctrl.component.name }}</a>\n            <a data-ng-if="ctrl.readOnly"\n                class="slot-visiblity-component-template__text slot-visiblity-component-template__text__name">{{ ::ctrl.component.name }}</a>\n            <p class="slot-visiblity-component-template__text slot-visiblity-component-template__text__type">{{ ::ctrl.component.typeCode }}</p>\n            <p class="slot-visiblity-component-template__text slot-visiblity-component-template__text__visibility">{{\'se.genericeditor.tab.visibility.title\' | translate}} {{ctrl.componentVisibilitySwitch | translate}} / {{ctrl.componentRestrictionsCount}} {{\'se.cms.restrictions.editor.tab\' | translate}}</p>\n        </div>\n        <span data-ng-if="ctrl.component.isExternal === true"\n            class="hyicon hyicon-globe slot-visiblity-component--globe-icon"></span>\n    </div>\n    <hidden-component-menu class="slot-visiblity-component--hidden-menu"\n        data-slot-id="ctrl.slotId"\n        data-component="ctrl.component"></hidden-component-menu>\n</div>'),t.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityWidgetTemplate.html",'<slot-visibility-button data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)" />'),t.put("web/features/cmssmartedit/components/synchronize/slots/slotSyncButtonTemplate.html",'<div class="slot-sync-button-template"\n    data-ng-if="ctrl.ready">\n    <div class="btn-group se-slot-ctx-menu__btn-group"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened">\n\n        <span data-y-popover\n            class="se-slot-ctx-menu__popover"\n            data-trigger="\'hover\'"\n            data-template="ctrl.newPageIsNotSynchronizedTemplate"\n            data-ng-if="ctrl.newPageIsNotSynchronized"\n            data-placement="\'bottom\'">\n        </span>\n\n        <button type="button"\n            data-uib-dropdown-toggle\n            class="btn btn-primary se-slot-ctx-menu__btn se-slot-ctx-menu__divider"\n            data-ng-class="{\'ySESyncOpen\': ctrl.isPopupOpened, \'se-slot-ctx-menu__btn--disabled\': ctrl.newPageIsNotSynchronized }"\n            id="slot-sync-button-{{::ctrl.slotId}}">\n            <span class="hyicon hyicon-sync se-slot-ctx-menu__btn__sync"></span>\n            <span data-ng-if="!ctrl.isSlotInSync"\n                class="hyicon hyicon-caution se-slot-ctx-menu__btn__caution"></span>\n        </button>\n        <ul class="dropdown-menu dropdown-menu-right btn-block se-toolbar-menu-content se-toolbar-menu-content__page-sync slot-sync-button-template__menu"\n            data-uib-dropdown-menu\n            role="menu">\n            <li role="menuitem">\n                <div class="se-toolbar-menu-content--wrapper">\n                    <div class="slot-sync__header"\n                        data-translate="se.cms.synchronization.slot.header">\n                    </div>\n                    <div class="se-toolbar-menu-content--body">\n                        <slot-synchronization-panel data-ng-if="ctrl.isPopupOpened"\n                            data-slot-id="ctrl.slotId"></slot-synchronization-panel>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>'),t.put("web/features/cmssmartedit/components/synchronize/slots/slotSynchronizationPanelTemplate.html",'<div data-page-sensitive>\n    <synchronization-panel data-item-id="slotSync.slotId"\n        data-get-sync-status="slotSync.getSyncStatus"\n        data-perform-sync="slotSync.performSync">\n    </synchronization-panel>\n</div>'),t.put("web/features/cmssmartedit/components/synchronize/slots/slotSyncTemplate.html",'<slot-sync-button data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"></slot-sync-button>'),t.put("web/features/cmssmartedit/components/synchronize/slots/syncIndicatorDecorator/syncIndicatorDecoratorTemplate.html",'<div class="sync-indicator-decorator"\n    data-ng-class="ctrl.syncStatus.status"\n    data-sync-status="{{ctrl.syncStatus.status}}">\n    <div class="yWrapperData"\n        data-ng-transclude></div>\n</div>')}])},function(t,e,n){function o(t){return n(i(t))}function i(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var s={"./components/synchronize/synchronizationConstants.js":35,"./components/synchronize/synchronizationPanel.js":36,"./config.js":37,"./dao/cmswebservices/sites/cmsitemsRestService.js":38,"./dao/resource.js":39,"./dao/resourceLocations.js":40,"./services/componentService.js":41,"./services/componentVisibilityAlertServiceInterface.js":42,"./services/removeComponentServiceInterface.js":43,"./services/synchronizationService.js":44,"./templates.js":45};o.keys=function(){return Object.keys(s)},o.resolve=i,t.exports=o,o.id=34},function(t,e){angular.module("synchronizationConstantsModule",[]).constant("SYNCHRONIZATION_STATUSES",{UNAVAILABLE:"UNAVAILABLE",IN_SYNC:"IN_SYNC",NOT_SYNC:"NOT_SYNC",IN_PROGRESS:"IN_PROGRESS",SYNC_FAILED:"SYNC_FAILED"}).constant("SYNCHRONIZATION_POLLING",{SLOW_POLLING_TIME:2e4,FAST_POLLING_TIME:2e3,SPEED_UP:"syncPollingSpeedUp",SLOW_DOWN:"syncPollingSlowDown",FAST_FETCH:"syncFastFetch",FETCH_SYNC_STATUS_ONCE:"fetchSyncStatusOnce"})},function(t,e){angular.module("synchronizationPanelModule",["yHelpModule","translationServiceModule","alertServiceModule","timerModule","alertsBoxModule","eventServiceModule","synchronizationPollingServiceModule","crossFrameEventServiceModule","synchronizationConstantsModule","yMessageModule","smarteditServicesModule","catalogServiceModule","l10nModule"]).controller("SynchronizationPanelController",["$attrs","$translate","isBlank","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","alertService","systemEventService","timerService","crossFrameEventService","catalogService","l10nFilter","sharedDataService","waitDialogService",function(t,e,n,o,i,s,r,a,c,l,d,u,p){this.syncPendingItems=[],this.selectedItems=[],this.showItemList=!0,this.refreshInterval=o.SLOW_POLLING_TIME,this.getRows=function(){return this.syncStatus?[this.syncStatus].concat(this.syncStatus.selectedDependencies):[]},this.api={selectAll:function(){if(!this.syncStatus)throw new Error("Synchronization status is not available. The 'selectAll' function should be used with 'onSyncStatusReady' event.");this.syncStatus.selected=!0,this.selectionChange(0)}.bind(this),displayItemList:function(t){this.showItemList=t}.bind(this)},this.selectionChange=function(t){this.syncStatus.selectedDependencies.forEach(function(e){e.selected=0===t&&e.status!==i.IN_SYNC&&!e.isExternal||e.selected}.bind(this)),this.selectedItems=this.getRows().filter(function(t){return t.selected}),this.onSelectedItemsUpdate&&this.onSelectedItemsUpdate(this.selectedItems)},this.preserveSelection=function(t){var e=(t||[]).map(function(t){return t.itemId},[]);this.getRows().forEach(function(t){t.selected=e.indexOf(t.itemId)>-1&&t.status!==i.IN_SYNC})},this.isDisabled=function(t){return t!==this.syncStatus&&this.syncStatus.selected||t.status===i.IN_SYNC},this.isSyncButtonDisabled=function(){return 0===this.selectedItems.length||0!==this.syncPendingItems.length},this.isInSync=function(t){return t.status===i.IN_SYNC},this.isOutOfSync=function(t){return t.status===i.NOT_IN_SYNC},this.isInProgress=function(t){return t.status===i.IN_PROGRESS},this.isSyncFailed=function(t){return t.status===i.SYNC_FAILED},this.hasHelp=function(t){return t.dependentItemTypesOutOfSync&&t.dependentItemTypesOutOfSync.length>0},this.buildInfoTemplate=function(t){if(t&&t.dependentItemTypesOutOfSync&&!t.isExternal){var n=t.dependentItemTypesOutOfSync.reduce(function(t,n){return t+="<div>"+e.instant(n.i18nKey)+"</div>"},"");return n?"<div>"+n+"</div>":""}if(t.isExternal)return t.catalogVersionNameTemplate},this.fetchSyncStatus=function(t,e){if(!e||e.itemId===this.itemId)return this.getSyncStatus(this.itemId).then(function(t){u.get("experience").then(function(e){var n=t.catalogVersionUuid;this.syncStatus=t,this.preserveSelection(this.selectedItems),this.selectionChange(),this._updateStatus(),this.markExternalComponents(n,this.getRows()),this.setTemplateExternalCatalogVersionName(e,this.getRows()),0===this.syncPendingItems.length&&(this.refreshInterval=o.SLOW_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),r.sendAsynchEvent(o.SLOW_DOWN,this.itemId)),"function"==typeof this.onSyncStatusReady&&this.onSyncStatusReady({$syncStatus:t})}.bind(this))}.bind(this))},this.markExternalComponents=function(t,e){e.forEach(function(e){e.isExternal=e.catalogVersionUuid!==t})},this.getInfoTitle=function(t){if(!t.isExternal)return"se.cms.synchronization.panel.update.title"},this.getTemplateInfoForExternalComponent=function(){return"<div>"+e.instant("se.cms.synchronization.slot.external.component")+"</div>"},this.setTemplateExternalCatalogVersionName=function(t,e){e.forEach(function(e){e.catalogVersionNameTemplate="<span></span>",l.getCatalogVersionByUuid(e.catalogVersionUuid,t.siteDescriptor.uid).then(function(t){e.catalogVersionNameTemplate="<div>"+d(t.catalogName)+"</div>"})})},this._updateStatus=function(){var t=!1,n="",o=this.syncPendingItems.length;this.getRows().forEach(function(e){this.syncPendingItems.indexOf(e.itemId)>-1&&e.status===i.SYNC_FAILED&&(n=" "+n+e.itemId,t=!0),this.syncPendingItems.indexOf(e.itemId)>-1&&e.status!==i.IN_PROGRESS&&this.syncPendingItems.splice(this.syncPendingItems.indexOf(e.itemId),1),(o&&0===this.syncPendingItems.length||0===o)&&(o=0,p.hideWaitModal()),e.status===i.IN_PROGRESS&&-1===this.syncPendingItems.indexOf(e.itemId)&&this.syncPendingItems.push(e.itemId)}.bind(this)),t&&s.showDanger({message:e.instant("se.cms.synchronization.panel.failure.message",{items:n})})},this.$onInit=function(){this.syncItems=function(){var t=this.getRows().filter(function(t){return t.selected}).map(function(t){return{itemId:t.itemId,itemType:t.itemType}});Array.prototype.push.apply(this.syncPendingItems,t.map(function(t){return t.itemId})),this.selectedItems.length>0&&(p.showWaitModal("se.sync.synchronizing"),this.performSync(t).then(function(){this.refreshInterval=o.FAST_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),r.sendAsynchEvent(o.SPEED_UP,this.itemId)}.bind(this)))}.bind(this),"function"==typeof this.getApi&&this.getApi({$api:this.api}),this.unSubscribeFastFetch=c.subscribe(o.FAST_FETCH,this.fetchSyncStatus.bind(this)),this.fetchSyncStatus(),this.resynchTimer=a.createTimer(this.fetchSyncStatus.bind(this),this.refreshInterval),this.resynchTimer.start()},this.$onDestroy=function(){this.resynchTimer.teardown(),this.unSubscribeFastFetch(),r.sendAsynchEvent(o.SLOW_DOWN,this.itemId)},this.$postLink=function(){this.showSyncButton=n(t.syncItems)}}]).component("synchronizationPanel",{templateUrl:"synchronizationPanelTemplate.html",controller:"SynchronizationPanelController",controllerAs:"sync",bindings:{itemId:"<",getSyncStatus:"<",performSync:"<",headerTemplateUrl:"<?",syncItems:"=?",onSelectedItemsUpdate:"<?",onSyncStatusReady:"&?",getApi:"&?"}})},function(t,e){angular.module("configModule",[]).config(["$locationProvider","$qProvider",function(t,e){e.errorOnUnhandledRejections(!1)}])},function(t,e){angular.module("cmsitemsRestServiceModule",["functionsModule","resourceLocationsModule","smarteditServicesModule","catalogServiceModule","yLoDashModule"]).provider("cmsitemsUri",["CONTEXT_SITE_ID",function(t){this.uri="/cmswebservices/v1/sites/"+t+"/cmsitems",this.$get=function(){return this.uri}.bind(this)}]).provider("cmsitemsUuidsUri",["CONTEXT_SITE_ID",function(t){this.uri="/cmswebservices/v1/sites/"+t+"/cmsitems/uuids",this.$get=function(){return this.uri}.bind(this)}]).service("cmsitemsRestService",["lodash","restServiceFactory","cmsitemsUri","cmsitemsUuidsUri","catalogService","operationContextService","OPERATION_CONTEXT",function(t,e,n,o,i,s,r){var a=e.get(n),c=e.get(o);s.register(n.replace(/CONTEXT_SITE_ID/,":CONTEXT_SITE_ID"),r.CMS),this.create=function(t){return i.getCatalogVersionUUid().then(function(e){return t.catalogVersion=t.catalogVersion||e,void 0===t.onlyOneRestrictionMustApply&&(t.onlyOneRestrictionMustApply=!1),a.save(t)})},this.getById=function(t){return a.getById(t)},this.get=function(e){return i.retrieveUriContext().then(function(n){var o={catalogId:e.catalogId||n.CURRENT_CONTEXT_CATALOG,catalogVersion:e.catalogVersion||n.CURRENT_CONTEXT_CATALOG_VERSION};return e=t.merge(o,e),a.get(e)})},this.getByIds=function(t){return i.getCatalogVersionUUid().then(function(e){return c.save({catalogVersion:e,uuids:t})})},this.update=function(t){return a.update(t)},this.delete=function(t){return a.remove({identifier:t})},this._getByUIdAndType=function(t,e){return this.get({pageSize:100,currentPage:0,mask:t,typeCode:e}).then(function(e){return e.response.find(function(e){return e.uid===t})})}}])},function(t,e){angular.module("resourceModule",["smarteditServicesModule","resourceLocationsModule","functionsModule"]).factory("itemsResource",["restServiceFactory","ITEMS_RESOURCE_URI","URIBuilder",function(t,e,n){return{getItemResource:function(){return t.get(e)},getItemResourceByContext:function(o){return t.get(new n(e).replaceParams(o).build())}}}]).factory("navigationNodeEntriesResource",["restServiceFactory","NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI",function(t,e){return t.get(e,"uid")}]).factory("pagesContentSlotsComponentsResource",["restServiceFactory","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(t,e){return t.get(e)}]).factory("pageInfoRestService",["restServiceFactory","PAGEINFO_RESOURCE_URI",function(t,e){return t.get(e)}]).factory("navigationNodeRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_RESOURCE_URI",function(t,e){return t.get(e)}]).factory("navigationEntriesRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI",function(t,e){return t.get(e)}]).factory("navigationEntryTypesRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI",function(t,e){return t.get(e)}]).factory("synchronizationResource",["restServiceFactory","URIBuilder","GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","POST_PAGE_SYNCHRONIZATION_RESOURCE_URI",function(t,e,n,o){return{getPageSynchronizationGetRestService:function(o){var i=new e(n).replaceParams(o).build();return t.get(i)},getPageSynchronizationPostRestService:function(n){var i=new e(o).replaceParams(n).build();return t.get(i)}}}])},function(t,e){!function(){var t="CURRENT_CONTEXT_CATALOG",e="CURRENT_CONTEXT_CATALOG_VERSION",n="CURRENT_CONTEXT_SITE_ID",o="CURRENT_PAGE_CONTEXT_CATALOG";angular.module("resourceLocationsModule").constant("CONTEXT_SITE_ID",n).constant("CONTEXT_CATALOG",t).constant("CONTEXT_CATALOG_VERSION",e).constant("PAGE_CONTEXT_SITE_ID","CURRENT_PAGE_CONTEXT_SITE_ID").constant("PAGE_CONTEXT_CATALOG",o).constant("PAGE_CONTEXT_CATALOG_VERSION","CURRENT_PAGE_CONTEXT_CATALOG_VERSION").constant("TYPES_RESOURCE_URI","/cmswebservices/v1/types").constant("STRUCTURES_RESOURCE_URI","/cmssmarteditwebservices/v1/structures").constant("ITEMS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+t+"/versions/"+e+"/items").constant("PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslotscomponents").constant("CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI","/cmswebservices/v1/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pages/:pageUid/contentslots/:slotUid/typerestrictions").constant("PAGES_LIST_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+t+"/versions/"+e+"/pages").constant("PAGE_LIST_PATH","/pages/:siteId/:catalogId/:catalogVersion").constant("TRASHED_PAGE_LIST_PATH","/trashedpages/:siteId/:catalogId/:catalogVersion").constant("PAGES_CONTENT_SLOT_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslots").constant("PAGE_TEMPLATES_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+t+"/versions/:"+e+"/pagetemplates").constant("NAVIGATION_MANAGEMENT_PAGE_PATH","/navigations/:siteId/:catalogId/:catalogVersion").constant("NAVIGATION_MANAGEMENT_RESOURCE_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+t+"/versions/:"+e+"/navigations").constant("NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+t+"/versions/:"+e+"/navigations/:navigationUid/entries").constant("NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI","/cmswebservices/v1/navigationentrytypes").constant("CONTEXTUAL_PAGES_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+t+"/versions/"+e+"/pages").constant("CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagesrestrictions").constant("PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pagesrestrictions").constant("UPDATE_PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+t+"/versions/"+e+"/pagesrestrictions/pages").constant("RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+t+"/versions/"+e+"/restrictions").constant("RESTRICTION_TYPES_URI","/cmswebservices/v1/restrictiontypes").constant("PAGE_TYPES_RESTRICTION_TYPES_URI","/cmswebservices/v1/pagetypesrestrictiontypes").constant("PAGEINFO_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+t+"/versions/"+e+"/pages/:pageUid").constant("PAGE_TYPES_URI","/cmswebservices/v1/pagetypes").constant("GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/synchronizations/versions/:target/pages/:pageUid").constant("POST_PAGE_SYNCHRONIZATION_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/"+n+"/catalogs/"+t+"/versions/"+e+"/synchronizations/versions/:target")}()},function(t,e){angular.module("componentServiceModule",["smarteditServicesModule","resourceLocationsModule","cmsitemsRestServiceModule","catalogServiceModule","slotRestrictionsServiceModule"]).service("ComponentService",["restServiceFactory","TYPES_RESOURCE_URI","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","cmsitemsRestService","catalogService","slotRestrictionsService","pageInfoService","pageContentSlotsComponentsRestService",function(t,e,n,o,i,s,r,a,c,l){var d=t.get(e),u=s,p=t.get(n);this.createNewComponent=function(t,e){var n={};if(n.name=t.name,n.slotId=t.targetSlotId,n.pageId=t.pageId,n.position=t.position,n.typeCode=t.componentType,n.itemtype=t.componentType,n.catalogVersion=t.catalogVersionUuid,"object"==typeof e)for(var o in e)n[o]=e[o];else if(e)throw"ComponentService.createNewComponent() - Illegal componentPayload - ["+e+"]";return u.create(n)},this.updateComponent=function(t){return u.update(t)},this.addExistingComponent=function(t,e,n,o){var i={};return i.pageId=t,i.slotId=n,i.componentId=e,i.position=o,p.save(i)},this.loadComponentTypes=function(){return d.get({category:"COMPONENT"})},this.getSupportedComponentTypesForCurrentPage=function(){return this.loadComponentTypes().then(function(t){return a.getAllComponentTypesSupportedOnPage().then(function(e){return t.componentTypes.filter(function(t){return e.indexOf(t.code)>-1})})})}.bind(this),this.loadComponentItem=function(t){return u.getById(t)},this.loadPagedComponentItems=function(t,e,n){return r.retrieveUriContext().then(function(s){var r={pageSize:e,currentPage:n,mask:t,sort:"name",typeCode:"AbstractCMSComponent",catalogId:s[o],catalogVersion:s[i]};return u.get(r)})},this.loadPagedComponentItemsByCatalogVersion=function(t){var e={pageSize:t.pageSize,currentPage:t.page,mask:t.mask,sort:"name",typeCode:"AbstractCMSComponent",catalogId:t.catalogId,catalogVersion:t.catalogVersion};return u.get(e)},this.getSlotsForComponent=function(t){var e=[];return this._getContentSlotsForComponents().then(function(n){return Object.keys(n).forEach(function(o){n[o].find(function(e){return e.uuid===t})&&e.push(o)}),e}.bind(this))},this._getContentSlotsForComponents=function(){return c.getPageUID().then(function(t){return l.getSlotsToComponentsMapForPageUid(t)})}}])},function(t,e){angular.module("componentVisibilityAlertServiceInterfaceModule",[]).factory("ComponentVisibilityAlertServiceInterface",function(){var t=function(){};return t.prototype.checkAndAlertOnComponentVisibility=function(){},t})},function(t,e){angular.module("removeComponentServiceInterfaceModule",[]).factory("RemoveComponentServiceInterface",function(){function t(){}return t.prototype.removeComponent=function(){},t})},function(t,e){angular.module("synchronizationServiceModule",["smarteditServicesModule","resourceLocationsModule","alertServiceModule","authenticationModule","timerModule"]).constant("CATALOG_SYNC_INTERVAL_IN_MILLISECONDS",5e3).service("synchronizationService",["restServiceFactory","timerService","$q","$translate","alertService","authenticationService","operationContextService","OPERATION_CONTEXT","CATALOG_SYNC_INTERVAL_IN_MILLISECONDS",function(t,e,n,o,i,s,r,a,c){var l={},d=t.get("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target"),u=t.get("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target","catalog");r.register("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target",a.CMS),r.register("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target",a.CMS),this.updateCatalogSync=function(t){return u.update({catalog:t.catalogId,source:t.sourceCatalogVersion,target:t.targetCatalogVersion}).then(function(t){return t}.bind(this),function(e){var n=o.instant("sync.running.error.msg",{catalogName:t.name});return"Conflict"===e.statusText&&i.showDanger({message:n}),!1}.bind(this))},this.getCatalogSyncStatus=function(t){return t.sourceCatalogVersion?this.getSyncJobInfoBySourceAndTarget(t):this.getLastSyncJobInfoByTarget(t)},this.getSyncJobInfoBySourceAndTarget=function(t){return u.get({catalog:t.catalogId,source:t.sourceCatalogVersion,target:t.targetCatalogVersion})},this.getLastSyncJobInfoByTarget=function(t){return d.get({catalog:t.catalogId,target:t.targetCatalogVersion})},this.startAutoGetSyncData=function(t,n){var o=t.catalogId,i=t.sourceCatalogVersion,s=t.targetCatalogVersion,r=this._getJobKey(o,i,s),a=e.createTimer(this._autoSyncCallback.bind(this,t,n,r),c);a.start(),l[r]=a},this._autoSyncCallback=function(t,e,n){s.isAuthenticated("/cmswebservices").then(function(o){o||this.stopAutoGetSyncData(t),this.getCatalogSyncStatus(t).then(e).then(function(){l[n]||this.startAutoGetSyncData(t,e)}.bind(this))}.bind(this))},this.stopAutoGetSyncData=function(t){var e=this._getJobKey(t.catalogId,t.sourceCatalogVersion,t.targetCatalogVersion);l[e]&&(l[e].stop(),l[e]=void 0)},this._getJobKey=function(t,e,n){return t+"_"+e+"_"+n}}])},function(t,e){angular.module("cmscommonsTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/cmscommons/components/synchronize/synchronizationPanelTemplate.html",'<div class="se-sync-panel">\n    <y-message data-ng-if="false"\n        data-message-id="yMsgWarningId"\n        data-type="warning"\n        data-ng-class="!sync.showSyncButton ? \'se-sync-panel--y-message--modal-adjusted\' : \'se-sync-panel--y-message--toolbar-adjusted\'">\n        <message-title>{{ \'se.cms.synchronization.panel.live.recent.notice\' | translate }}</message-title>\n        <message-description>{{ \'se.cms.synchronization.panel.live.override.warning\' | translate }}</message-description>\n    </y-message>\n\n    <div class="se-sync-panel__sync-status"\n        data-ng-if="sync.headerTemplateUrl"\n        data-ng-include="sync.headerTemplateUrl">\n    </div>\n\n    <div class="se-sync-panel__sync-info"\n        data-ng-show="sync.showItemList">\n        <div data-ng-repeat="dependency in sync.getRows()"\n            data-ng-class="{active: $index==0, \'se-sync-panel--item__external\': dependency.isExternal}"\n            class="se-sync-panel__sync-info__row">\n\n            <div class="checkbox se-sync-panel__sync-info__checkbox se-nowrap-ellipsis">\n                <input type="checkbox"\n                    data-ng-if="!dependency.isExternal"\n                    data-ng-model="dependency.selected"\n                    data-ng-disabled="sync.isDisabled(dependency)"\n                    data-ng-change="sync.selectionChange($index)"\n                    id="sync-info__checkbox_{{$index}}">\n                <label data-ng-if="$index===0"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis"\n                    title="{{::dependency.selectAll | translate}}">\n                    {{::dependency.selectAll | translate}}</label>\n\n                <label data-ng-if="$index!==0 && !dependency.isExternal"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis"\n                    title="{{::dependency.name | translate}}">\n                    {{::dependency.name | translate}}</label>\n\n                <span data-ng-if="dependency.isExternal"\n                    data-y-popover\n                    data-trigger="\'hover\'"\n                    data-template="sync.getTemplateInfoForExternalComponent()">\n                    <label data-ng-if="$index!==0"\n                        for="sync-info__checkbox_{{$index}}"\n                        class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis"\n                        title="{{::dependency.name | translate}}">\n                        {{::dependency.name | translate}}</label>\n                </span>\n            </div>\n\n            <span data-ng-if="sync.buildInfoTemplate(dependency)"\n                data-y-popover\n                data-trigger="\'hover\'"\n                data-title="sync.getInfoTitle(dependency)"\n                data-template="sync.buildInfoTemplate(dependency)"\n                data-ng-class="{\'pull-right se-sync-panel__sync-info__right-icon\': true, \'se-sync-panel--icon-globe\': dependency.isExternal} ">\n                <span data-status="{{dependency.status}}"\n                    data-ng-if="!dependency.isExternal"\n                    data-ng-class="{\'hyicon hyicon__se-sync-panel__sync-info\':true, \'hyicon-done hyicon__se-sync-panel__sync-done\':sync.isInSync(dependency), \'hyicon-sync hyicon__se-sync-panel__sync-not\':!sync.isInSync(dependency)}"></span>\n                <span data-ng-if="dependency.isExternal"\n                    class="hyicon hyicon-globe"></span>\n            </span>\n\n            <span data-ng-if="!sync.buildInfoTemplate(dependency)"\n                class="pull-right se-sync-panel__sync-info__right-icon">\n                <span data-status="{{dependency.status}}"\n                    data-ng-class="{\'hyicon hyicon__se-sync-panel__sync-info\':true, \'hyicon-done hyicon__se-sync-panel__sync-done\':sync.isInSync(dependency), \'hyicon-sync hyicon__se-sync-panel__sync-not\':!sync.isInSync(dependency)}"></span>\n            </span>\n        </div>\n    </div>\n\n    <div class="se-sync-panel__footer"\n        data-ng-if="sync.showSyncButton">\n        <button class="btn btn-lg btn-primary se-sync-panel__footer__btn"\n            data-ng-disabled="sync.isSyncButtonDisabled()"\n            data-ng-click="sync.syncItems()"\n            data-translate="se.cms.actionitem.page.sync"></button>\n    </div>\n\n</div>')}])},function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=46},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n(0),i=(n.n(o),n(49)),s=n(50),r=n(51),a=n(52),c=o.module("cmsSmarteditServicesModule",["yLoDashModule","smarteditServicesModule"]).service("slotContainerService",s.a).service("hiddenComponentMenuService",i.a).service("assetsService",r.a).service("pageContentSlotsComponentsRestService",a.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=n(0),i=(n.n(o),function(){function t(t,e,n){this.$q=t,this.contextualMenuService=e,this.slotContainerService=n,this.MENU_ITEM_EXTERNAL="externalcomponentbutton",this.MENU_ITEM_CLONE="clonecomponentbutton",this.MENU_ITEM_REMOVE="se.cms.remove",this.allowedItems={},this._setDefaultItemsAllowed()}return t.$inject=["$q","contextualMenuService","slotContainerService"],t.prototype.allowItemsInHiddenComponentMenu=function(t){var e=this;t.forEach(function(t){e.allowedItems[t]=!0})},t.prototype.removeAllowedItemsInHiddenComponentMenu=function(t){var e=this;t.forEach(function(t){delete e.allowedItems[t]})},t.prototype.getAllowedItemsInHiddenComponentMenu=function(){return Object.keys(this.allowedItems)},t.prototype.getItemsForHiddenComponent=function(t,e){var n=this;return this._validateComponent(t),this._buildComponentInfo(e,t).then(function(e){return n._getAllowedItemsForComponent(t,e)})},t.prototype._validateComponent=function(t){if(!t)throw new Error("HiddenComponentMenuService - Component cannot be null.");if(!t.uid)throw new Error("HiddenComponentMenuService - Component needs a uid.");if(!t.typeCode)throw new Error("HiddenComponentMenuService - Component needs a type code.");if(!t.uuid)throw new Error("HiddenComponentMenuService - Component needs a uuid.")},t.prototype._setDefaultItemsAllowed=function(){this.allowItemsInHiddenComponentMenu([this.MENU_ITEM_EXTERNAL,this.MENU_ITEM_CLONE,this.MENU_ITEM_REMOVE])},t.prototype._buildComponentInfo=function(t,e){return this.slotContainerService.getComponentContainer(t,e.uuid).then(function(n){return{componentType:e.typeCode,componentId:e.uid,componentAttributes:{smarteditCatalogVersionUuid:e.catalogVersion,smarteditComponentId:e.uid,smarteditComponentType:e.componentType,smarteditComponentUuid:e.uuid,smarteditElementUuid:null},containerType:n?n.containerType:null,containerId:n?n.containerId:null,element:null,isComponentHidden:!0,slotId:t,iLeftBtns:0}})},t.prototype._getAllowedItemsForComponent=function(t,e){var n=this,i=[],s=[],r=this.contextualMenuService.getContextualMenuByType(t.typeCode);return(r=o.copy(r)).filter(function(t){return n.allowedItems[t.key]}).forEach(function(t){var o=n.$q.defer();s.push(o.promise),n.$q.when(!t.condition||t.condition(e)).then(function(e){e&&i.push(t),o.resolve()})}),this.$q.all(s).then(function(){return{buttons:i,configuration:e}})},t}())},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e,n,o,i,s,r){this.$q=t,this.lodash=e,this.experienceService=o;var a="/cmswebservices/v1/sites/"+i+"/catalogs/"+s+"/versions/"+r+"/pagescontentslotscontainers?pageId=:pageId";this.containersRestService=n.get(a)}return t.$inject=["$q","lodash","restServiceFactory","experienceService","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION"],t.prototype.getComponentContainer=function(t,e){var n=this;return this.loadContainersInPageInfo().then(function(o){var i=o.filter(function(o){return o.slotId===t&&n.lodash.includes(o.components,e)});return i.length>0?i[0]:null})},t.prototype.loadContainersInPageInfo=function(){var t=this;return this.containersInPage?this.$q.when(this.containersInPage):this.experienceService.getCurrentExperience().then(function(e){return t.containersRestService.get({pageId:e.pageId})}).then(function(e){return t.containersInPage=e.pageContentSlotContainerList,t.containersInPage})},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t){this.TEST_ASSETS_KEY="testAssets",this.TEST_ASSETS_SRC="/web/webroot",this.PROD_ASSETS_SRC="/cmssmartedit",this.$injector=t}return t.prototype.getAssetsRoot=function(){var t=!1;if(this.getInjector().has(this.TEST_ASSETS_KEY)){var e=this.getInjector().get(this.TEST_ASSETS_KEY);t="boolean"==typeof e&&e}return t?this.TEST_ASSETS_SRC:this.PROD_ASSETS_SRC},t.prototype.getInjector=function(){return this.$injector},t.$inject=["$injector"],t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(53),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n,o,i,s,r,a,c,l,d,u){var p=t.call(this)||this;p.$q=e,p.pageInfoService=i,p.cmsitemsRestService=r,p.lodash=a,p.cache={},n.initForService(p,["clearCache","getSlotsToComponentsMapForPageUid"]);var h="/cmswebservices/v1/sites/"+c+"/catalogs/"+l+"/versions/"+d+"/pagescontentslotscomponents?pageId=:pageId";return p.pagesContentSlotsComponentsRestService=o.get(h),s.subscribe(u.PAGE_CHANGE,p.clearCache.bind(p)),p}return i(e,t),e.$inject=["$q","gatewayProxy","restServiceFactory","pageInfoService","crossFrameEventService","cmsitemsRestService","lodash","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","EVENTS"],e.prototype.clearCache=function(){this.cache={}},e.prototype.getComponentsForSlot=function(t){var e=this;return this.pageInfoService.getPageUID().then(function(n){return e.getSlotsToComponentsMapForPageUid(n).then(function(e){return e[t]||[]})})},e.prototype.getSlotsToComponentsMapForPageUid=function(t){var e=this;return this.cache[t]?this.$q.when(this.lodash.cloneDeep(this.cache[t])):this.pagesContentSlotsComponentsRestService.get({pageId:t}).then(function(n){return e._getSlotsToComponentsMap(n.pageContentSlotComponentList,t)})},e.prototype._getSlotsToComponentsMap=function(t,e){var n=this,o=t.map(function(t){return t.componentUuid});return this.cmsitemsRestService.getByIds(o).then(function(o){var i=(o.response||[]).reduce(function(t,e){return t[e.uuid]=e,t},{}),s=t.reduce(function(t,e){return t[e.slotId]=t[e.slotId]||[],i[e.componentUuid]&&t[e.slotId].push(i[e.componentUuid]),t},{});return n.cache[e]=n.lodash.cloneDeep(s),s})},e}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return Object.defineProperty(t.prototype,"gatewayId",{get:function(){return"IPageContentSlotsComponentsRestService"},enumerable:!0,configurable:!0}),t.prototype.clearCache=function(){"proxyFunction"},t.prototype.getSlotsToComponentsMapForPageUid=function(t){"proxyFunction";return null},t.prototype.getComponentsForSlot=function(t){"proxyFunction";return null},t}()}]);